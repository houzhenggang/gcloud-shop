!function(e){e.isScrollToFixed=function(t){return!!e(t).data("ScrollToFixed")},e.ScrollToFixed=function(t,i){function a(){w.trigger("preUnfixed.ScrollToFixed"),p(),w.trigger("unfixed.ScrollToFixed"),C=-1,k=w.offset().top,T=w.offset().left,f.options.offsets&&(T+=w.offset().left-w.position().left),-1==S&&(S=T),v=w.css("position"),x=!0,-1!=f.options.bottom&&(w.trigger("preFixed.ScrollToFixed"),o(),w.trigger("fixed.ScrollToFixed"))}function s(){var e=f.options.limit;return e?"function"==typeof e?e.apply(w):e:0}function n(){return"fixed"===v}function l(){return"absolute"===v}function d(){return!(n()||l())}function o(){n()||(I.css({display:w.css("display"),width:w.outerWidth(!0),height:w.outerHeight(!0),"float":w.css("float")}),cssOptions={"z-index":f.options.zIndex,position:"fixed",top:-1==f.options.bottom?_():"",bottom:-1==f.options.bottom?"":f.options.bottom,"margin-left":"0px"},f.options.dontSetWidth||(cssOptions.width=w.css("width")),w.css(cssOptions),w.addClass(f.options.baseClassName),f.options.className&&w.addClass(f.options.className),v="fixed")}function r(){var e=s(),t=T;f.options.removeOffsets&&(t="",e-=k),cssOptions={position:"absolute",top:e,left:t,"margin-left":"0px",bottom:""},f.options.dontSetWidth||(cssOptions.width=w.css("width")),w.css(cssOptions),v="absolute"}function p(){d()||(C=-1,I.css("display","none"),w.css({"z-index":y,width:"",position:g,left:"",top:b,"margin-left":""}),w.removeClass("scroll-to-fixed-fixed"),f.options.className&&w.removeClass(f.options.className),v=null)}function c(e){e!=C&&(w.css("left",T-e),C=e)}function _(){var e=f.options.marginTop;return e?"function"==typeof e?e.apply(w):e:0}function m(){if(e.isScrollToFixed(w)){var t=x;x?d()&&(k=w.offset().top,T=w.offset().left):a();var i=e(window).scrollLeft(),m=e(window).scrollTop(),v=s();f.options.minWidth&&e(window).width()<f.options.minWidth?d()&&t||(h(),w.trigger("preUnfixed.ScrollToFixed"),p(),w.trigger("unfixed.ScrollToFixed")):f.options.maxWidth&&e(window).width()>f.options.maxWidth?d()&&t||(h(),w.trigger("preUnfixed.ScrollToFixed"),p(),w.trigger("unfixed.ScrollToFixed")):-1==f.options.bottom?v>0&&m>=v-_()?l()&&t||(h(),w.trigger("preAbsolute.ScrollToFixed"),r(),w.trigger("unfixed.ScrollToFixed")):m>=k-_()?(n()&&t||(h(),w.trigger("preFixed.ScrollToFixed"),o(),C=-1,w.trigger("fixed.ScrollToFixed")),c(i)):d()&&t||(h(),w.trigger("preUnfixed.ScrollToFixed"),p(),w.trigger("unfixed.ScrollToFixed")):v>0?m+e(window).height()-w.outerHeight(!0)>=v-(_()||-u())?n()&&(h(),w.trigger("preUnfixed.ScrollToFixed"),"absolute"===g?r():p(),w.trigger("unfixed.ScrollToFixed")):(n()||(h(),w.trigger("preFixed.ScrollToFixed"),o()),c(i),w.trigger("fixed.ScrollToFixed")):c(i)}}function u(){return f.options.bottom?f.options.bottom:0}function h(){var e=w.css("position");w.trigger("absolute"==e?"postAbsolute.ScrollToFixed":"fixed"==e?"postFixed.ScrollToFixed":"postUnfixed.ScrollToFixed")}var f=this;f.$el=e(t),f.el=t,f.$el.data("ScrollToFixed",f);var v,g,b,y,x=!1,w=f.$el,k=0,T=0,S=-1,C=-1,I=null,E=function(){w.is(":visible")&&(x=!1,m())},P=function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1};f.init=function(){f.options=e.extend({},e.ScrollToFixed.defaultOptions,i),y=w.css("z-index"),f.$el.css("z-index",f.options.zIndex),I=e("<div />"),v=w.css("position"),g=w.css("position"),b=w.css("top"),d()&&f.$el.after(I);for(var t,a,s=["ms","moz","webkit","o"],n=0,l=s.length;l>n&&!t;++n)t=window[s[n]+"RequestAnimationFrame"],a=window[s[n]+"CancelAnimationFrame"]||window[s[n]+"CancelRequestAnimationFrame"];t||(t=function(e){return window.setTimeout(e,1)}),a||(a=function(e){clearTimeout(e)});var o=null,r=function(){o&&a(o),o=t(E)},c=null,_=function(){c&&a(c),c=t(m)};e(window).bind("resize.ScrollToFixed",r),e(window).bind("scroll.ScrollToFixed",_),"ontouchmove"in window&&e(window).bind("touchmove.ScrollToFixed",m),f.options.preFixed&&w.bind("preFixed.ScrollToFixed",f.options.preFixed),f.options.postFixed&&w.bind("postFixed.ScrollToFixed",f.options.postFixed),f.options.preUnfixed&&w.bind("preUnfixed.ScrollToFixed",f.options.preUnfixed),f.options.postUnfixed&&w.bind("postUnfixed.ScrollToFixed",f.options.postUnfixed),f.options.preAbsolute&&w.bind("preAbsolute.ScrollToFixed",f.options.preAbsolute),f.options.postAbsolute&&w.bind("postAbsolute.ScrollToFixed",f.options.postAbsolute),f.options.fixed&&w.bind("fixed.ScrollToFixed",f.options.fixed),f.options.unfixed&&w.bind("unfixed.ScrollToFixed",f.options.unfixed),f.options.spacerClass&&I.addClass(f.options.spacerClass),w.bind("resize.ScrollToFixed",function(){I.height(w.height())}),w.bind("scroll.ScrollToFixed",function(){w.trigger("preUnfixed.ScrollToFixed"),p(),w.trigger("unfixed.ScrollToFixed"),m()}),w.bind("detach.ScrollToFixed",function(t){P(t),w.trigger("preUnfixed.ScrollToFixed"),p(),w.trigger("unfixed.ScrollToFixed"),e(window).unbind("resize.ScrollToFixed",r),e(window).unbind("scroll.ScrollToFixed",_),w.unbind(".ScrollToFixed"),I.remove(),f.$el.removeData("ScrollToFixed"),o&&(a(o),o=null),c&&(a(c),c=null)}),E()},f.init()},e.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},e.fn.scrollToFixed=function(t){return this.each(function(){new e.ScrollToFixed(this,t)})}}(jQuery),function(e){e.fn.zclip=function(t){if("object"==typeof t&&!t.length){var i=e.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},t);return this.each(function(){var t=e(this);if("string"==typeof i.copy||e.isFunction(i.copy)){ZeroClipboard.setMoviePath(i.path);var a=new ZeroClipboard.Client;e.isFunction(i.copy)&&t.bind("zClip_copy",i.copy),e.isFunction(i.beforeCopy)&&t.bind("zClip_beforeCopy",i.beforeCopy),e.isFunction(i.afterCopy)&&t.bind("zClip_afterCopy",i.afterCopy),a.setHandCursor(i.setHandCursor),a.setCSSEffects(i.setCSSEffects),a.addEventListener("mouseOver",function(){t.trigger("mouseenter")}),a.addEventListener("mouseOut",function(){t.trigger("mouseleave")}),a.addEventListener("mouseDown",function(){t.trigger("mousedown"),a.setText(e.isFunction(i.copy)?t.triggerHandler("zClip_copy"):i.copy),e.isFunction(i.beforeCopy)&&t.trigger("zClip_beforeCopy")}),a.addEventListener("complete",function(a,s){e.isFunction(i.afterCopy)?t.trigger("zClip_afterCopy"):(s.length>500&&(s=s.substr(0,500)+"...\n\n("+(s.length-500)+" characters not shown)"),t.removeClass("hover"),alert("Copied text to clipboard:\n\n "+s)),i.clickAfter&&t.trigger("click")}),a.glue(t[0],t.parent()[0]),e(window).bind("load resize",function(){a.reposition()})}})}return"string"==typeof t?this.each(function(){var i=e(this);t=t.toLowerCase();var a=i.data("zclipId"),s=e("#"+a+".zclip");"remove"==t?(s.remove(),i.removeClass("active hover")):"hide"==t?(s.hide(),i.removeClass("active hover")):"show"==t&&s.show()}):void 0}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(e){this.removeClass(e),this.className+=" "+e},e.removeClass=function(e){for(var t=this.className.split(/\s+/),i=-1,a=0;a<t.length;a++)t[a]==e&&(i=a,a=t.length);return i>-1&&(t.splice(i,1),this.className=t.join(" ")),this},e.hasClass=function(e){return!!this.className.match(new RegExp("\\s*"+e+"\\s*"))}),e},setMoviePath:function(e){this.moviePath=e},dispatch:function(e,t,i){var a=this.clients[e];a&&a.receiveEvent(t,i)},register:function(e,t){this.clients[e]=t},getDOMObjectPosition:function(e,t){var i={left:0,top:0,width:e.width?e.width:e.offsetWidth,height:e.height?e.height:e.offsetHeight};return e&&e!=t&&(i.left+=e.offsetLeft,i.top+=e.offsetTop),i},Client:function(e){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),e&&this.glue(e)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(e,t,i){this.domElement=ZeroClipboard.$(e);var a=99;this.domElement.style.zIndex&&(a=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof t?t=ZeroClipboard.$(t):"undefined"==typeof t&&(t=document.getElementsByTagName("body")[0]);var s=ZeroClipboard.getDOMObjectPosition(this.domElement,t);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var n=this.div.style;if(n.position="absolute",n.left=""+s.left+"px",n.top=""+s.top+"px",n.width=""+s.width+"px",n.height=""+s.height+"px",n.zIndex=a,"object"==typeof i)for(addedStyle in i)n[addedStyle]=i[addedStyle];t.appendChild(this.div),this.div.innerHTML=this.getHTML(s.width,s.height)},getHTML:function(e,t){var i="",a="id="+this.id+"&width="+e+"&height="+t;if(navigator.userAgent.match(/MSIE/)){var s=location.href.match(/^https/i)?"https://":"http://";i+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+s+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+e+'" height="'+t+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+a+'"/><param name="wmode" value="transparent"/></object>'}else i+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+e+'" height="'+t+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+a+'" wmode="transparent" />';return i},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var e=document.getElementsByTagName("body")[0];try{e.removeChild(this.div)}catch(t){}this.domElement=null,this.div=null}},reposition:function(e){if(e&&(this.domElement=ZeroClipboard.$(e),this.domElement||this.hide()),this.domElement&&this.div){var t=ZeroClipboard.getDOMObjectPosition(this.domElement),i=this.div.style;i.left=""+t.left+"px",i.top=""+t.top+"px"}},setText:function(e){this.clipText=e,this.ready&&this.movie.setText(e)},addEventListener:function(e,t){e=e.toString().toLowerCase().replace(/^on/,""),this.handlers[e]||(this.handlers[e]=[]),this.handlers[e].push(t)},setHandCursor:function(e){this.handCursorEnabled=e,this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(e,t){switch(e=e.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var i=this;return void setTimeout(function(){i.receiveEvent("load",null)},1)}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){var i=this;return setTimeout(function(){i.receiveEvent("load",null)},100),void(this.ready=!0)}this.ready=!0;try{this.movie.setText(this.clipText)}catch(a){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(a){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[e])for(var s=0,n=this.handlers[e].length;n>s;s++){var l=this.handlers[e][s];"function"==typeof l?l(this,t):"object"==typeof l&&2==l.length?l[0][l[1]](this,t):"string"==typeof l&&window[l](this,t)}}},function(){var e=new Date("2011-06-02T09:34:29+02:00");Date.fromISO=e&&1307000069e3===+e?function(e){return new Date(e)}:function(e){var t,i,a=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,s=a.exec(e)||[];if(s[1]){t=s[1].split(/\D/);for(var n=0,l=t.length;l>n;n++)t[n]=parseInt(t[n],10)||0;return t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(s[5]&&(i=60*parseInt(s[5],10),s[6]&&(i+=parseInt(s[6],10)),"+"==s[4]&&(i*=-1),i&&t.setUTCMinutes(t.getUTCMinutes()+i)),t):0/0}return 0/0}}(jQuery);var lastVal="";$(document.body).delegate(".j-input-num","keyup",function(){var e=$(this),t=e.val(),i=e.data("default-value");/^\+?[0-9][0-9]*$/.test(t)?lastVal=t:""==e.val()?(e.val(i),lastVal=i):e.val(lastVal)}).delegate(".j-input-num","blur",function(){}).delegate(".j-input-num","focus",function(){var e=$(this);lastVal=e.val(),setTimeout(function(){e.select()},10)}),!function(){window.RayCloud||(window.RayCloud={});var e=window.RayCloud;e.routeConf=null,e.init=function(e){this.route_conf=e.route_conf,this.user.init(e.user_data),this.modules.init(),this.pages.init(e.$root),this.events.init(),this.localcache.init(),this.serverCall_init(e.user_data)}}(jQuery),function(e){e||(window.RayCloud=e={}),e.events||(e.events={}),e.events={_status_canClick:!0,_data_handler_window_resize:null,setClickStatus:function(e){return this._status_canClick=e},getClickStatus:function(){return this._status_canClick},_list:{},sub:function(e,t,i){var a=this,s=a._list,n=s[e];return n||(n=a._list[e]=[]),n.push(i?function(){t.apply(i,arguments)}:t),this},pub:function(e){var t,i,a,s,n=this,l=n._list,d=Array.prototype.slice.call(arguments,1);for(t in l)if(e===t)for(s=l[t],i=0,a=s.length;a>i;i++)s[i]&&s[i].apply(null,d);return this},removeSub:function(e,t){var i,a,s,n,l=this,d=l._list;for(i in d)if(e===i){if(n=d[i],!t)return d[i]=[],this;for(a=0,s=n.length;s>a;a++)if(n[a]===t)return n.splice(a,1),this}return this},clickable:function(e,t){var i=this;return function(){if(!i.getClickStatus())return!1;var a=arguments;return void 0!==t&&(a=Array.prototype.slice.call(arguments),a=[t].concat(a)),e?e.apply(this,a):!1}},_fn_dom_act_window_resize:function(){var t=e.events;clearTimeout(t._data_handler_window_resize),t._data_handler_window_resize=setTimeout(function(){e.sub("raycloud.events.window.resize",!0)},1)},_fn_dom_act_document_click:function(t){var i=t.target,a=$(i);e.sub("raycloud.events.document.click",{e:t,$target:a})},init:function(){$(window).bind("resize",this._fn_dom_act_window_resize),$(document.body).bind("click",this._fn_dom_act_document_click)}},e.sub=function(e,t,i){return this.events.sub(e,t,i)},e.pub=function(){return this.events.pub.apply(this.events,arguments)},e.removeSub=function(e,t){return this.events.removeSub(e,t)}}(window.RayCloud),function(e){e||(window.RayCloud=e={}),e.localcache||(e.localcache={}),e.localcache={_sessionstorage:window.sessionStorage,_localstorage:window.localStorage,init:function(){$(window).bind("session",this._onSession),$(window).bind("storage",this._onStorage)},_onSession:function(e){e=e||window.event},_onStorage:function(e){e=e||window.event},_getstorage:function(e){return e&&"session"===e?this._sessionstorage:this._localstorage},getAll:function(e){var t,i=this._getstorage(e),a={};for(t in i)a[t]=this.get(t,e);return a},get:function(e,t){var i=this._getstorage(t);if(!e||!i.getItem(e))return!1;try{return JSON.parse(i.getItem(e))}catch(a){return i.getItem(e)}},set:function(t,i,a){if(!t||void 0===i)return!1;var s=this._getstorage(a);i.last_modified=e.util.date.getdate();try{val=JSON.stringify(i)}catch(n){val=i}s.setItem(t,val)},remove:function(e,t){if(!e)return!1;var i=this._getstorage(t);return i.getItem(e)?(i.removeItem(e),!0):!1},removeAll:function(e,t){return t?(this._sessionstorage.clear(),this._localstorage.clear(),!0):this._getstorage(e).clear()}}}(window.RayCloud),function(e){e||(window.RayCloud=e={}),e.pages||(e.pages={}),e.pages={_elm_$co_root_document_element:null,_data_abs_root:"",_data_abs_url:"",_data_history_list:[],_data_route:null,_data_route_list:{},_data_cur_page_id:"",_status_loading:!1,_fn_act_get_hash:function(){return this._fn_act_get_url_string_by_symbol("#")},_fn_act_get_search:function(){return this._fn_act_get_url_string_by_symbol("?")},_fn_act_get_url_string_by_symbol:function(e){var t=location.href,i=t.indexOf(e||"#");return-1===i?"":t.slice(i,t.length)},_fn_act_get_url:function(){return location.protocol+"//"+location.hostname+(80===location.port||""===location.port?"":":"+location.port)+location.pathname},_fn_act_get_hashs:function(){return this._fn_act_act_split_params(this._fn_act_get_hash())},_fn_act_get_searchs:function(){var e=this._fn_act_get_search();e=e.slice(1,-1!==e.indexOf("#")?e.indexOf("#"):e.length);for(var t,i,a,s={},n=0,l=e.split("&"),d=l.length;d>n;n++)t=l[n].split("="),0!==t.length&&(i=t[0],a=t[1],s[i]?s[i]+=","+a:s[i]=a);return s},_fn_act_get_abs_root:function(){return this._data_abs_root},_fn_act_set_abs_root:function(e){return this._data_abs_root=e},_fn_act_get_abs_url:function(){return this._data_abs_url},_fn_act_set_abs_url:function(e){return this._data_abs_url=e},_fn_act_get_default_hashs:function(){return this._fn_act_calc_mdul_name(this._fn_act_act_split_params(this._fn_act_get_abs_url()),!0)},_fn_act_init_route_list:function(e){var t={},i=function(e){return e.list||e.cp_list||e.app_list||e.classification_list},a=function(e,s){var n=i(s);if(n){for(var l in n)a(e+"."+l,n[l]);if(s.default_index)t[e]=t[e+"."+s.default_index];else{var d={};for(l in s)s[l]!==n&&(d[l]=s[l]);t[e]={name:e,value:d}}}else t[e]={name:e,value:s}},s=i(e);for(var n in s)a(n,s[n]);return t._default=t[e.default_index],t},_fn_act_get_mdul_name:function(e){return this._data_route_list[e||"_default"]},_fn_act_calc_mdul_name:function(e,t){for(var i,a=["root","app","classification"],s=0,n=a.length,l=[];n>s;s++)i=a[s],e[i]&&l.push(e[i]);l=l.join(".");var d=this._fn_act_get_mdul_name(l);if(!t)return d?d.name:l;var o=(d.name||l).split("."),r=[];for(s=0,n=o.length;n>s;s++)r.push(o[s]);return"/"+r.join("/")+"/"},_fn_act_dom_page_act:function(t,i){var a=this._fn_act_act_split_params(this._fn_act_get_abs_url()),s=this._fn_act_calc_mdul_name(a),n=this._fn_act_calc_mdul_name(t),l=this;if(!e.modules.get(n)||!e.modules.get(s))return void(e.route_conf.page_error_404?this.goPage(e.route_conf.page_error_404):$.dialog&&$.dialog.alert("该类目不存在, 页面将跳转至上一目录",function(){history.back()}));var d=this._fn_act_get_mdul_name(n);if(d&&d.value&&d.value.title&&this._fn_act_set_page_document_title(d.value.title),s===n){var o=e.modules.get(n),l=this,r=function(){l._data_mark_cur_loading_mdul=null,l._fn_act_dom_page_show(o.getContainer())};return i&&i(),void(o.func_update&&o.func_update(t,r))}if(null!==this._data_mark_cur_loading_mdul&&this._data_mark_cur_loading_mdul){var p=this._data_mark_cur_loading_mdul,c=p.mdul;this._fn_act_dom_page_hide(c.getContainer()),c.func_disabled&&c.func_disabled(),p.callback=null,this._data_mark_cur_loading_mdul=null}var _=e.modules.get(s),m=e.modules.get(n);this._data_mark_cur_loading_mdul=this._fn_act_mark_cur_loading_mdul(t,_,m,i)},_fn_act_mark_cur_loading_mdul:function(e,t,i,a){var s=this,n={mdul:i,callback:function(){t.func_disabled&&t.func_disabled(),s._data_mark_cur_loading_mdul=null,s._fn_act_dom_page_hide(t.getContainer()),s._fn_act_dom_page_show(i.getContainer()),s._status_reflash&&(s._status_reflash=!1,s._status_is_need_ani=s._data_mark_is_need_ani),n=null}};return a&&a(),i.func_update&&i.func_update(e,n.callback),n},_fn_act_dom_page_show:function(e){return e[0]&&e.show()},_fn_act_dom_page_hide:function(e){return e[0]&&e.hide()},_fn_act_set_page_document_title:function(e){return e&&""!==e?document.title=decodeURI(e):document.title},_fn_act_act_hash_change:function(){this._fn_act_get_abs_url()!==this._fn_act_get_hash()&&this._fn_act_act_load_page(this._fn_act_get_hash())},_fn_act_act_split_params:function(e){var t=e.replace(/^#/,""),i={};if(/^\/(\w+)(\/(\w+)){0,2}(\/\?(\w+=[^&]*|\w+)|\/$)/.test(t)){for(var a,s,n=t.slice(1,t.indexOf("?")),l=/\?/.test(t)?t.slice(t.indexOf("?")+1,t.length):"",d=n.split("/"),o=l.split("&"),r=0,p=d.length,c=["root","app","classification"];p>r;r++)d[r]&&""!==d[r]&&(a=c[r],i[a]=d[r]);for(r=0,p=o.length;p>r;r++)o[r]&&""!==o[r]&&(s=o[r].split("="),i[s[0]]=s[1])}else i.root="";return i},_fn_act_act_load_page:function(t,i){var a=this._fn_act_act_split_params(t),s=a.root,n=this,l=function(){n._fn_act_set_abs_root(s),n._fn_act_set_abs_url(t)};if(i&&this._fn_act_get_abs_url()===e.route_conf.default_index)return a=this._fn_act_get_default_hashs(),void this.replacePage(a);var d=e.route_conf,o=d.cp_list,r=this._fn_act_get_abs_root();""===s&&i&&(s=d.default_index),o[s]?(e.pub("raycloud.pages.hashchange",a),s!==r?(e.modules.destroy(r),e.modules.load(s,a,l),this._fn_act_dom_page_act(a,l)):(i&&(e.modules.load(s,a),e.pub("raycloud.pages.hashchange",a)),this._fn_act_dom_page_act(a,l))):d.page_error_404?this.goPage(d.page_error_404):$.dialog&&$.dialog.alert("该类目不存在, 页面将跳转至上一目录",function(){history.back()})},getUrl:function(){return this._fn_act_get_url()},getSearchs:function(){return this._fn_act_get_searchs()},modifyCurHash:function(e,t,i){if(e&&"object"==typeof e){var a,s,n=this._fn_act_get_hashs(),l=[],d=i?function(e){return encodeURIComponent(e)}:function(e){return e},o=[],r={};for(a in n)/^(root|app|classification)$/.test(a)&&(r[a]=n[a]);for(a in e)s=e[a],/^(root|app|classification)$/.test(a)?void 0===s||""===s?delete r[a]:r[a]=s:""!==s&&l.push(a+"="+d(s));if(!t)for(a in n)void 0!==e[a]||/^(root|app|classification)$/.test(a)||l.push(a+"="+d(n[a]));l=0===l.length?"":"?"+l.join("&");for(a in r)o.push(r[a]);return o.push(""),o=[""].concat(o),o=o.join("/"),this.goPage("#"+o+l)}},getCurHash:function(){return this._fn_act_get_default_hashs()},setCurHash:function(e,t){if(!e){var i=this._fn_act_get_hash();return t?this.goPage(i+(/\?|&/.test(i)?"&":"?")+"is_flash=true"):!1}var a;if("object"==typeof e){a=[];var s;for(s in e)a.push(s+"="+e[s]);a=0!==a.length?"?"+a.join("&"):""}else"string"==typeof e&&(a=""!==e.length?"?"+e:"");return t||this._fn_act_get_hash()!=="#"+this.getCurHash()+a?(t&&(a=(/\?|&/.test(a)?"&":"?")+"is_flash=true"),this.goPage("#"+this.getCurHash()+a)):!1},getHashKey:function(e){var t=this._fn_act_get_hashs();return t[e]},getLoadingStatus:function(){return this._status_loading},setLoadingStatus:function(e){return this._status_loading=e},goPage:function(e){return e&&void 0!==e&&""!==e?location.href=e:void 0},replacePage:function(e){if(e){var t=this._fn_act_get_url();location.replace(t+"#"+e)}},init:function(t){this._data_route_list=this._fn_act_init_route_list(e.route_conf);var i=this;$(window).on("hashchange",function(){i._fn_act_act_hash_change()}),this._elm_$co_root_document_element=t||$("#J_app-pages"),this._fn_act_set_abs_url(""===this._fn_act_get_hash()?e.route_conf.default_index:this._fn_act_get_hash()),this._fn_act_set_abs_root(this._fn_act_act_split_params(this._fn_act_get_abs_url()).root),this._fn_act_act_load_page(this._fn_act_get_abs_url(),!0)}}}(window.RayCloud),function(e){function t(e,t){this._interval=t||50,this._timer=null,this._fn=e}var i={};i.substitute=function(e,t,i){return e.replace(i||/\\?\{([^{}]+)\}/g,function(e,i){return"\\"===e.charAt(0)?e.slice(1):void 0===t[i]?"":t[i]})},i.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var a={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},s={escape:new RegExp("["+i.keys(a.escape).join("")+"]","g")};i.escape=function(e){return null===e?"":(""+e).replace(s.escape,function(e){return a.escape[e]})},t.prototype={start:function(){if(!this._timer){var e=this,t=this._interval,i=this._fn,a=function(){i(),e._timer=setTimeout(a,t)};this._timer=setTimeout(a,t)}},cancel:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)}};var n,l={get:function(){var e=location.href;return"#"+e.replace(/^[^#]*#?(.*)$/,"$1")},set:function(e){location.hash=e}},d={_iframe:null,getIFrame:function(){return this._iframe},create:function(){if(!this._frame){var t,i=this._genEmptyIframeSrc();t=e("<iframe "+(i?'src="'+i+'"':"")+' style="display: none" height="0" width="0" tabindex="-1" title="empty"/>'),e(document.documentElement).prepend(t);var a=this;document.onpropertychange=function(){try{"title"===event.propertyName&&(a.getIFrameDoc().title=document.title+" - "+l.get())}catch(e){}},this._iframe=t}},_isCustomDomain:function(e){e=e||window;var t=e.document.domain,i=e.location.hostname;return t!=i&&t!="["+i+"]"},_genEmptyIframeSrc:function(e){return e=e||window,this._isCustomDomain(e)?"javascript:void(function(){"+encodeURIComponent("document.open();document.domain='"+e.document.domain+"';document.close();")+"}())":void 0},writeHash:function(e){var t=i.substitute("<html><head><title>"+(document.title||"")+" - {hash}</title>{head}</head><body>{hash}</body></html>",{hash:i.escape(e),head:this._isCustomDomain()?"<script>document.domain = '"+document.domain+"';</script>":""}),a=this.getIFrameDoc();try{a.open(),a.write(t),a.close()}catch(s){}},getIFrameDoc:function(){return this._iframe[0].contentWindow.document},getIFrameHash:function(){return this._iframe[0].contentWindow.document.body.innerText.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},remove:function(){e(this._iframe).remove(),e(this._iframe).off(),this._iframe=null}},o=document,r=o.documentMode,p=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))},c=r||((n=navigator.userAgent.match(/MSIE\s([^;]*)/))&&n[1]?p(n[1]):null);if(!("onhashchange"in window)||c&&8>c){var _,m=c&&8>c?function(e){d.writeHash(e)}:function(){u()},u=function(){e(window).trigger("hashchange")},h=new t(function(){var e=l.get();e!==_&&(_=e,m(e))}),f=function(){h.start()},v=function(){h.cancel()},g=function(){var e=d.getIFrameHash(),t=l.get();e!=t&&(l.set(e),_=e),u()};8>c&&(f=function(){if(!d.getIFrame()){d.create();var t=d.getIFrame(),i=l.get();e(t).on("load",function(){e(this).off("load"),d.writeHash(i),e(t).on("load",g),h.start()})}},v=function(){h.cancel(),d.remove()}),e.event.special.hashchange={setup:function(){this===window&&(_=l.get(),f())},tearDown:function(){this===window&&v()}}}}(jQuery),function(RC){RC||(window.RayCloud=RC={}),RC.user||(RC.user={}),RC.user={_data:{},_callback:[],_data_update_session_timer_handler:null,_data_update_session_time:12e4,update_session:function(opt){var that=this,timeout=2e4;this._data_update_session_timer_handler=setTimeout(function(){$(opt.session_update_urls).each(function(idx,val){val&&""!==val&&$.ajax({url:val,type:"GET",dataType:"json",timeout:timeout,data:{api_name:"check_session"},success:function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){try{data=eval("("+data+")")}catch(e){data=null}}return data&&"object"==typeof data&&/^7\d*/.test(data.result)?void(RC.showWarn&&RC.showWarn("提醒: 目前登录失效，麻烦关闭该应用，重新打开！",that._data_update_session_time)):void 0}})}),that.update_session(opt)},this._data_update_session_time)},_fn_act_api_load_error_no_session:function(e){$.dialog&&$.dialog({title:"哦，出错啦！",content:['<div class=" ft_18 pd_30">',"<div>",'<img src="http://static.superboss.cc/fronttest/w-error-qn_20141106.png" />',"</div>",'<div class="ft_14 pt_20">','<span class="fc-red">错误原因：</span><br /> &nbsp; &nbsp; &nbsp; <span class="ft_18">'+(e||"登录时校验失败或者授权失败")+"</span>","</div>",'<div class="pt_30 ft_14">',"友情提示：<br />"," &nbsp; &nbsp; &nbsp; 1. 出现当前页面请稍后重试<br />"," &nbsp; &nbsp; &nbsp; 2. 重试之后仍然失败，请联系旺旺客服：",'<a href="http://www.taobao.com/webww/ww.php?ver=3&amp;touid=%E5%85%89%E4%BA%91%E8%AE%BE%E8%AE%A1&amp;siteid=cntaobao&amp;status=2&amp;charset=utf-8" target="_blank"><img src="http://amos.alicdn.com/realonline.aw?v=2&amp;uid=%E5%85%89%E4%BA%91%E8%AE%BE%E8%AE%A1&amp;site=cntaobao&amp;s=2&amp;charset=utf-8" alt="">光云设计</a>'," 或 电话咨询：400-6042-789","</div>","</div>"].join(""),fixed:!0,resize:!1,lock:!1})},user_session_check:function(e){e&&e.is_qn_app?this.update_session(e):RC.sub("api.load.error.no_session",this._fn_act_api_load_error_no_session,this)},_data_user_nick:null,_data_user_id:null,init:function(e){var t=this;this.set(e||{}),this._bindUpdateEvent=function(e){t.set(e)},this.user_session_check(e),RC.sub("raycloud.user.update",t._bindUpdateEvent)},_check:function(){return!0},set:function(e){if(this._check(e)!==!0)return!1;"id"in e&&null===e.id&&(this._data={_login_status:!1});var t,i=[],a=this._data;for(t in e)a[t]!==e[t]&&(this._data[t]=e[t],i.push(t));for(var s={},n=0,l=i.length;l>n;n++)s[i[n]]=this._data[i[n]],RC.pub("raycloud.user.update."+i[n],this._data[i[n]]);i.length&&RC.pub("raycloud.user.update.*",s);var d=this._data;return this._callback.length&&!$.isEmptyObject(d)&&($.each(this._callback,function(e,t){t(d)}),this._callback=[]),!0},_copy:function(e){return $.isPlainObject(e)?$.extend({},e):e},get:function(e,t){if(!arguments.length)return this._data;var i=e in this._data?this._copy(this._data[e]):null;return"function"==typeof t&&($.isEmptyObject(this._data)?this._callback.push(t):t(i)),i},destory:function(){RC.removeSub("raycloud.user.update",this._bindUpdateEvent),this._data={}}}}(window.RayCloud),function(e){e||(window.RayCloud=e={}),e.util||(e.util={});var t={noti:{_elm_$co:null,_elm_$co_bd:null,_data_handler_timeout_show:null,show:function(t,i,a){var s=(this._elm_$co||(this._elm_$co=$("#J_ajax-tips")),this._elm_$co_bd||(this._elm_$co_bd=$("#J_ajax-tips .bd")),this);switch(clearTimeout(this._data_handler_timeout_show),e.events.setClickStatus(!1),i){case"loading":e.util.dialog.tips({type:"loading",content:t||"正在请求中...",duration:1e5}),a=a||21e3;break;case"success":e.util.dialog.tips({type:"success",content:t||"请求成功!",duration:1e5}),a=a||1e3;break;case"fail":e.util.dialog.alert({content:t||"请求失败, 请稍候重试!"}),a=null,e.events.setClickStatus(!0);break;case"warn":e.util.dialog.tips({type:"warn",content:t||"请求失败, 请稍候重试!",duration:1e5}),a=a||1e3}a&&(this._data_handler_timeout_show=setTimeout(function(){s.hide()},a))},hide:function(){e.pages.getLoadingStatus()||e.events.setClickStatus(!0),e.util.dialog.hide(),clearTimeout(this._data_handler_timeout_show),this._data_handler_timeout_show=null}}};$.extend(e.util,t),e.util.date={_date_cur_date:new Date,_date_reg_all:/^[12][0-9]{3}(-|\/)(0?[0-9]|1[0-2])(-|\/)(0?[1-9]|[1-2][0-9]|3[0-1]).(0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[1-5][0-9]):(0?[0-9]|[1-5][0-9])$/,_date_reg_year_month:/^[12][0-9]{3}(-|\/)(0?[0-9]|1[0-2])$/,_date_reg_year_month_date:/^[12][0-9]{3}(-|\/)(0?[0-9]|1[0-2])(-|\/)(0?[1-9]|[1-2][0-9]|3[0-1])$/,_date_reg_year_month_date_hour:/^[12][0-9]{3}(-|\/)(0?[0-9]|1[0-2])(-|\/)(0?[1-9]|[1-2][0-9]|3[0-1]).(0?[0-9]|1[0-9]|2[0-3])$/,_date_reg_year_month_date_hour_minute:/^[12][0-9]{3}(-|\/)(0?[0-9]|1[0-2])(-|\/)(0?[1-9]|[1-2][0-9]|3[0-1]).(0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[1-5][0-9])$/,_date_reg_time:/^(0?[0-9]|1[0-9]|2[0-3]):(0?[0-9]|[1-5][0-9]):(0?[0-9]|[1-5][0-9])$/,getdate:function(e,t){var i,a=this.tojsdate(e),s=a.getFullYear(),n=a.getMonth()+1,l=a.getDate(),d=a.getHours(),o=a.getMinutes(),r=a.getSeconds(),p=function(e){return(10>e?"0":"")+e};switch(n=p(n),l=p(l),d=p(d),o=p(o),r=p(r),t){case"YY-MM":i=s+"-"+n;break;case"MM-DD":i=n+"-"+l;break;case"YY-MM-DD":i=s+"-"+n+"-"+l;break;case"YY-MM-DD HH:MM:SS":i=s+"-"+n+"-"+l+" "+d+":"+o+":"+r;break;case"YY-MM-DD HH:MM":i=s+"-"+n+"-"+l+" "+d+":"+o;break;case"YY/MM/DD HH:MM":i=s+"/"+n+"/"+l+" "+d+":"+o;break;case"HH:MM":i=d+":"+o;break;case"HH:MM:SS":i=d+":"+o+":"+r;break;default:i=s+"/"+n+"/"+l+" "+d+":"+o+":"+r}return i},setcurdate:function(e){this._date_cur_date=new Date(this.format_date(e))},getcurdate:function(){return new Date(this._date_cur_date)},tojsdate:function(e){return this.is_date(e)?("string"==typeof e&&(e=e.replace(/-/g,"/"),this._date_reg_year_month.test(e)&&(e+="/01")),new Date(e)):this.getcurdate()},getdiffdate:function(e,t,i){var a=this.tojsdate(e);
if(/^(-?\d+)y$/.test(t))a.setYear(a.getYear()+ +RegExp.$1);else if(/^(-?\d+)mo$/.test(t)&&0!=RegExp.$1){var s=a.getDate();a.setDate(1),a.setMonth(a.getMonth()+ +RegExp.$1),a.setDate(s),a.getDate()!=s&&a.setDate(0)}else/^(-?\d+)d$/.test(t)?a.setDate(a.getDate()+ +RegExp.$1):/^(-?\d+)h$/.test(t)?a.setHours(a.getHours()+ +RegExp.$1):/^(-?\d+)m$/.test(t)?a.setMinutes(a.getMinutes()+ +RegExp.$1):/^(-?\d+)s$/.test(t)&&a.setSeconds(a.getSeconds()+ +RegExp.$1);return this.getdate(a,i)},format_date:function(e){if(!e||!this.is_date(e))return!1;var t=this._date_reg_time;return t.test(e)?e.replace(/-/g,"/"):this.getdate(e)},is_date:function(e){if(!e||null===e)return!1;if("string"==typeof e)return this._date_reg_all.test(e)||this._date_reg_year_month.test(e)||this._date_reg_year_month_date.test(e)||this._date_reg_year_month_date_hour.test(e)||this._date_reg_year_month_date_hour_minute.test(e);var t=new Date(e);return"Invalid Date"!=t}}}(window.RayCloud),function(e){if(e||(window.RayCloud=e={}),e.util||(e.util={}),$.dialog&&$.dialog.tips&&!e.showLoading){var t;e.showLoading=function(i,a,s){i=i||"请稍等, 正在加载中...",a=a||1e3,s=s||function(){},e.clearShow(),t=$.dialog.tips('<div class="ft_20 fm-yahei loading-tips">'+i+"</div>",a,"loading.gif",s,!0)},e.showSuccess=function(i,a,s){i=i||"恭喜您, 操作成功!",a=a||2,s=s||function(){},e.clearShow(),t=$.dialog.tips('<div class="ft_20 fm-yahei fc-ok success-tips">'+i+"</div>",a,"ok.png",s,!0)},e.clearShow=function(){t&&!t.closed&&t.close(),t=null},e.showFail=function(i,a){i=i||"操作失败, 请重新尝试!",a=a||function(){},e.clearShow(),t=$.dialog({title:"操作失败",content:'<div class="ft_20 fm-yahei fc-error fail-tips">'+i+"</div>",id:"fail",icon:"error.png",fixed:!0,lock:!0,resize:!1,close:a,buttonsAlign:"center"})},e.showWarn=function(i,a,s){i=i||"操作失败, 请重新尝试!",a=a||2,s=s||function(){},e.clearShow(),t=$.dialog.tips('<div class="ft_20 fm-yahei fc-orange warn-tips">'+i+"</div>",a,"warn.png",s,!0)},e.dialog=function(i){e.clearShow();var a={};return a.fixed=void 0!==i.fixed?i.fixed:!1,a.lock=void 0!==i.lock?i.lock:!1,a.resize=void 0!==i.resize?i.resize:!1,a.title=i.title||" ",a.content=i.content||" ",t=$.dialog(a)}}}(window.RayCloud),function(e){e||(window.RayCloud=e={});var t={1:"success",2:"参数异常",3:"服务端运行异常",4:"服务端内部错误",5:"服务端内部调用失败",6:"淘宝服务调用失败",7:"调用内部程序失败",8:"用户没有权限"};e.__func_serverCall_upload_error=function(e,t){var a=this.util.date,s={sendMsg:JSON.stringify(e),errType:e.server||"rc",errMsg:JSON.stringify(t),taobaoId:i.user_id,taobaoNick:i.buyer_nick,apptype:i.app_type,time:a.getdate(new Date,"YY-MM-DD HH:MM:SS")};$(i.error_update_urls).each(function(e,t){t&&""!==t&&$.post(t,s,function(e){console.info("1"==e?"upload error log success!":"upload error log failed!")})})};var i={};e.serverCall_init=function(e){i.app_type=e.app_type,i.is_qn_app=e.is_qn_app,i.buyer_nick=e.buyer_nick,i.user_id=e.user_id,i.error_update_urls=e.error_update_urls},e.serverCall=function(a,s,n,l,d,o){var r={},p=2e4,c=this;if(l=!(l===!1),d=d===!0,o=!(o===!1),l&&e.showLoading(),"rc"===a.server){var _=a.url,m={dataType:a.dataType||"json",timeout:p,beforeSend:function(e){e.setRequestHeader("Module-Path",a.modulePath||"")},success:function(i){if(m.jsonp&&m.jsonpCallBack)return l&&e.clearShow(),d&&e.showSuccess(),void(s&&s(i));try{i=JSON.parse(i)}catch(a){}if(/^1/.test(i.result))l&&e.clearShow(),d&&e.showSuccess(),s&&s(i);else{if(l&&e.clearShow(),"901"==i.result)e.pub&&e.pub("api.load.error.need.relogin",i.message||"请重新登录");else{if("902"==i.result||"903"==i.result)return void(e.pub&&e.pub("api.load.error.need.reoauth","访问淘宝系统出错，请重新授权或联系客服！",i.result));o&&e.showFail(i.message||t[(i.result+"").slice(0,1)])}n&&n(i)}},complete:function(t){var s;try{s=JSON.parse(t.responseText)}catch(n){}s&&s.result&&!/^1\d*$/.test(s.result)&&(c.__func_serverCall_upload_error(a,s),i.is_qn_app||("701"==s.result?window.location.href="http://f.superboss.cc/noSession.jsp":/^6\d*$/.test(s.result)&&e.pub&&e.pub("api.load.error.no_session",s.message||"您没有权限，请重新登录")))},error:function(t){0!==t.readyState&&(l&&e.clearShow(),o&&e.showFail(),c.__func_serverCall_upload_error(a,t),n&&n())},async:a.async===!1?!1:!0};if(a.contentType&&(m.contentType=a.contentType),a.params)if(a.type&&"get"!==a.type)m.type="post",m.data=a.params;else{var u,h=[],r=a.params,f=encodeURIComponent,v=function(e){if("object"!=typeof e)return e;var t,i=[];for(t in e)i.push(t+"="+f(e[t]));return i.join("&")};for(u in r)h.push(u+"="+f(v(r[u])));_+=(/\?|\#/.test(_)?"&":"?")+h.join("&"),m.type="get"}else m.type="get";return m.url=_,a.jsonp&&a.jsonpCallBack&&(m.jsonp=a.jsonp,m.jsonpCallBack=a.jsonpCallBack),$.ajax(m)}var g=a.params.method;return delete a.params.method,QN.top.invoke({cmd:g,param:a.params,method:"post",success:function(t){l&&e.clearShow(),void 0===d||d===!0?e.showSuccess():e.clearShow(),s&&s(t)},error:function(t){console.log(arguments),c.__func_serverCall_upload_error(a,t),t&&(void 0===o||o===!0)&&e.showFail(t.msg+(t.sub_msg?"<br >"+t.sub_msg:"")),n&&n(t,"error")}})}}(window.RayCloud),function(e){e||(window.RayCloud=e={}),e.modules||(e.modules={}),e.modules={_data_mdul_list:{},_data_mdul_order_list:[],load:function(e,t,i){var a,s=0,n=this._data_mdul_order_list,l=n.length;if(""===e||!e)return void(i&&i());for(;l>s;s++)a=n[s],RegExp("^"+e).test(a.name)&&a.init&&a.init(t);i&&i()},get:function(e){return this._data_mdul_list[e]||!1},_delete:function(e){return this._data_mdul_list[e]?(delete this._data_mdul_list[e],!0):!1},_fn_act_clear_dom_bind:function(e){if(e&&e[0]){var t;e.find("select").each(function(e,i){t=$(i),t.data&&t.data("iSelect")&&t.data("iSelect").destroy&&t.data("iSelect").destroy()}),e.find(".date-picker").each(function(e,i){t=$(i),t.data&&t.data("datepicker")&&t.data("datepicker").destroy&&t.data("datepicker").destroy()})}},_fn_act_func_bind:function(e){return e.__status_is_mdul_active=!1,"function"==typeof e.disabled&&(e.func_disabled=function(){this.__status_is_mdul_active=!1,this.disabled.apply(this,arguments)}),"function"==typeof e.update&&(e.func_update=function(){this.__status_is_mdul_active=!0,this.update.apply(this,arguments)}),e.init||(e.init=function(){}),void 0===e.depend&&(e.depend=""),e.is_mdul_active=function(){return!!this.__status_is_mdul_active},e},define:function(e,t){var i=this._data_mdul_list;e&&!i[e]&&(i[e]=this._fn_act_func_bind(t),this._data_mdul_order_list.push(i[e]))},init:function(){for(var t=this._data_mdul_order_list,i=0,a=t.length,s=e.route_conf.cp_list;a>i;i++)t[i].type&&"basic"===t[i].type&&t[i].init&&t[i].init(s[t[i].name]||{})},clear:function(e){if(e){e.__status_is_mdul_active=!1;var t;for(t in e)RegExp("^_status_").test(t)&&(e[t]=!1),RegExp("^_elm_").test(t)}},destroy:function(e){if(e){var t,i,a=this._data_mdul_list;for(t in a)i=a[t],i.depend===e&&i.destroy&&(i.getContainer()&&this._fn_act_clear_dom_bind(i.getContainer()),i.destroy&&i.destroy(),this.clear(i));a[e]&&a[e].destroy()}}}}(window.RayCloud),function(e){e||(window.RayCloud=e={}),e.template||(e.template={});var t={_temp_list:{},_data_reg_chk_have_any_expression:/(<\w+[^>]*(act-if|act-loop|act-if-loop)="([^"]*)"|\{\{[^}]*\}\}|(<\!--include temp=("[^"]+")-->))/,_data_reg_chk_expression_is_act_if:/<(\w+)[^>]*act-if="([^"]*)"/,_data_reg_chk_expression_is_act_loop:/<(\w+)[^>]*act-loop="([^"]*)"/,_data_reg_chk_expression_is_act_if_loop:/<(\w+)[^>]*act-if-loop="([^"]*)"/,_data_reg_chk_expression_is_include_temp:/<\!--include temp="([^"]*)"-->/,_data_reg_chk_expression_is_brace:/\{\{([^\}]*)\}\}/g,_data_reg_chk_expression_is_brace_3_expressions:/(.*)\s\?\s(.*)\s\:\s([^\}]*)/,_data_reg_chk_expression_is_brace_act_then:/(.*)\bact-then\b(.*)/,_data_reg_chk_unclosed_tag_list:/^(img|br|hr|meta|input|base|map|link)$/i,_data_reg_remove_block_begin_end:/^\s|\s$/g,_data_reg_remove_filter_flag:/\:(encodeURI|decodeURI|escape|unescape|htmlFilter)/,_fn_act_get_index_params_of_expression:function(e,t){var i={name:e};if(!/^(act-if|act-loop|act-if-loop|include-temp)$/.test(e))return i.left_length=-1,i;var a=this["_data_reg_chk_expression_is_"+e.replace(/-/g,"_")];return a.test(t)?(i.left_length=RegExp.leftContext.length,"include-temp"!==e?(i.tag_name=RegExp.$1,i.expression=RegExp.$2):i.include_temp=RegExp.$1,i):(i.left_length=-1,i)},_fn_act_find_first_expression:function(e){for(var t,i,a,s=0,n=["act-if","act-loop","act-if-loop","include-temp"],l=n.length,d=e;l>s;s++)i=n[s],this["_data_reg_chk_expression_is_"+i.replace(/-/g,"_")].test(d)&&(d=RegExp.leftContext,a=d.length,t="include-temp"===i?{include_temp:RegExp.$1}:{tag_name:RegExp.$1,expression:RegExp.$2},t.name=i,t.left_length=a);return t},_fn_act_replace_brace_value:function(e,t){var i,a=this,s=this._data_reg_chk_expression_is_brace_3_expressions,n=this._data_reg_chk_expression_is_brace_act_then;return e.replace(this._data_reg_chk_expression_is_brace,function(e,l){if(i=l,s.test(i)){var d=RegExp.$1,o=a._fn_act_get_string_replace_begin_end_block(RegExp.$2),r=a._fn_act_get_string_replace_begin_end_block(RegExp.$3),p=a._fn_act_get_result_of_calc_formula(d,t),c=a._fn_act_get_string_by_replace_requirement(o,t,!0),_=a._fn_act_get_string_by_replace_requirement(r,t,!0);return p?c:_}if(n.test(i)){var d=RegExp.$1,m=a._fn_act_get_string_replace_begin_end_block(RegExp.$2),p=a._fn_act_get_result_of_calc_formula(d,t),u=a._fn_act_get_string_by_replace_requirement(m,t,!0);return p?u:""}return a._fn_act_get_string_by_replace_requirement(i,t)})},_fn_act_get_data_mapping:function(e,t){if(void 0===e)return!1;var i,a,s,n,l,t=t||"",d=e instanceof Array,o={};for(i in e)if(e.hasOwnProperty(i))if(a=e[i],s=""===t?i:t+(d?"["+i+"]":"."+i),o[s]=a,"object"!=typeof a);else{a instanceof Array&&(o[s+".length"]=a.length),l=this._fn_act_get_data_mapping(a,s);for(n in l)l.hasOwnProperty(n)&&(o[n]=l[n])}return o},_fn_act_get_string_replace_words_before_exp:function(e){return e?e.replace(/([?\[\]|$^.+{}*#!()\\"'])/g,"\\$1"):""},_fn_act_get_string_replace_begin_end_block:function(e){return e.replace(this._data_reg_remove_block_begin_end,"")},_fn_act_get_string_by_replace_requirement:function(e,t,i){var a=/\:escape$/,s=/\:unescape$/,n=/\:encodeURI$/,l=/\:decodeURI$/,d=/\:htmlFilter$/,o=/\:htmlFilter2$/;return a.test(e)?this._fn_act_get_string_by_replace_keyword(e,a,t,escape):s.test(e)?this._fn_act_get_string_by_replace_keyword(e,s,t,unescape):n.test(e)?this._fn_act_get_string_by_replace_keyword(e,n,t,encodeURIComponent):l.test(e)?this._fn_act_get_string_by_replace_keyword(e,l,t,decodeURIComponent):d.test(e)?this._fn_act_get_string_by_replace_keyword(e,d,t,function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}):o.test(e)?this._fn_act_get_string_by_replace_keyword(e,o,t,function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,'\\"')}):i?void 0!==t&&void 0!==t[e]&&"object"!=typeof t[e]?t[e]:e:void 0!==t?void 0!==t[e]&&"object"!=typeof t[e]?t[e]:"":e},_fn_act_get_string_by_replace_keyword:function(e,t,i,a){if(void 0===i)return a(e.replace(t,""));var s=e.replace(t,""),n=i[s];return a(void 0===n||"object"==typeof n?s:n)},_fn_act_get_html_clip_by_o_exp:function(e,t){var i,a=e.name,s=e.tag_name,n=void 0===e.i_filter||e.i_filter===!0?this._fn_act_get_string_replace_words_before_exp(e.expression):e.expression;if(this._data_reg_chk_unclosed_tag_list.test(s))return i=RegExp("<"+s+"[^>]*"+a+'=\\"'+n+'\\".*?/?>'),i.test(t)?t.match(i)[0]:!1;if(i=RegExp("<"+s+"[^>]*"+a+'=\\"'+n+'\\"[^>]*>(.*)</'+s+">"),!i.test(t))return!1;var l=t.match(i)[0],d="",o=l.length,r=1,p=0,c=0,_="<"+s,m="</"+s+">",u="</"+s+"[^>]*>",h=m.length,f="";try{for(;r!==p;)c+=l.slice(c,o).indexOf(m)+h,d=l.slice(0,c),r=d.match(RegExp(_,"ig")).length,p=d.match(RegExp(u,"ig")).length,r===p&&(f=d)}catch(v){return!1}return f},_fn_act_get_temp_by_loop_to:function(e,t,i,a,s){for(var n,l=t,d=a,o=s,r=[];d>=l;l++)n=o+"",n=n.replace(RegExp("\\{\\{"+e+"\\}\\}","g"),l),n=n.replace(RegExp("\\{\\{"+i+"\\}\\}","g"),d),n=n.replace(/act-(if|loop|if-loop)="([^"]*)"/g,function(t,a,s){return t.replace(s,function(t){return t.replace(RegExp("\\b("+e+"|"+i+")\\b","g"),function(t,i){return t.replace(RegExp(i,"g"),i==e?l:d)})})}),r.push(n);return r.join("")},_fn_act_get_temp_by_loop_in:function(e,t,i,a){var s,n,l,d,o,r,p=i,c=[],_=a[t],m=_.length,u=this;for(n in _)_.hasOwnProperty(n)&&(l=_[n],s=p+"",s=s.replace(RegExp("\\{\\{(("+e+")\\.([^\\}]*))\\}\\}","g"),function(i,s,l,d){return r=t+"["+n+"]."+d,r in a?u._fn_act_get_string_by_replace_requirement(r,a):i.replace(RegExp(e+"(\\.[^\\s,;\\}]*)?","g"),function(e,i){return i?t+"["+n+"]"+(i||""):e})}),s=s.replace(/\{\{([^\}]*)\}\}/g,function(t,i){return RegExp("^"+e+"\\:(index|length)$").test(i)?"index"===RegExp.$1?n:m:RegExp("\\b"+e+"\\:(index|length)\\b").test(i)?t.replace(RegExp("\\b"+e+"\\:(index|length)\\b","g"),function(e,t){return"index"===t?n:m}):t}),"object"!=typeof l&&(s=s.replace(RegExp("\\{\\{("+e+")(\\:(encodeURI|decodeURI|escape|unescape|htmlFilter))?\\}\\}","g"),function(e,t,i){return u._fn_act_get_string_by_replace_requirement(l+(i||""))})),s=s.replace(/act-(if|loop|if-loop)="([^"]*)"/g,function(i,s,l){return i.replace(l,function(i){return i.replace(RegExp("\\b"+e+"([\\.\\:][^;\\s]*)?\\b","g"),function(e,i){return/\:(index|length)$/.test(e)?"index"===RegExp.$1?n:m:(d=t+"["+n+"]"+(void 0!==i?i:""),o=a[d],d in a?"object"==typeof o?d:o+":replaced":e)})})}),s=s.replace(/\{\{([^\}]*)\}\}/g,function(i,s){return i.replace(RegExp(u._fn_act_get_string_replace_words_before_exp(s)),function(i){return i.replace(RegExp("\\b"+e+"([^;\\s]*)?\\b","g"),function(e,i){return/\:(index|length)$/.test(e)?"index"===RegExp.$1?n:m:(d=t+"["+n+"]"+(void 0!==i?i:""),o=a[d],d in a?"object"==typeof o?d:o+":replaced":e)})})}),c.push(s));return c.join("")},_fn_act_replace_with_include_temp:function(e,t){var i=this._temp_list[t.include_temp];return e.replace(this._data_reg_chk_expression_is_include_temp,i||"")},_fn_act_replace_with_act_if:function(e,t,i){var a=this._fn_act_get_result_of_calc_formula(t.expression,i),s=this._fn_act_get_html_clip_by_o_exp(t,e);return a?e.replace(RegExp("\\s?\\b"+t.name+'="'+this._fn_act_get_string_replace_words_before_exp(t.expression)+'"'),""):e.replace(RegExp(this._fn_act_get_string_replace_words_before_exp(s)),"")},_fn_act_replace_with_act_loop:function(e,t,i){var a=/(\w+) = (.*), (\w+) = (.*); (\w+) to (\w+)/,s=/(\w+) in (.*)/,n=t.expression,l=this._fn_act_get_html_clip_by_o_exp(t,e),d=function(e){return/^\s?\d+\s?$/.test(e)},o=this._fn_act_get_string_replace_words_before_exp(l);if(a.test(n)){var r=RegExp.$1,p=RegExp.$2,c=RegExp.$3,_=RegExp.$4,m=RegExp.$5,u=RegExp.$6;if(r!=m||c!=u)return e.replace(RegExp(o),"");if(p=this._fn_act_get_value_after_formula(p,i),_=this._fn_act_get_value_after_formula(_,i),(d(p)||d(i[p]))&&(d(_)||d(i[_]))){var h=d(p)?+p:i[p],f=d(_)?+_:i[_],v=this._fn_act_get_temp_by_loop_to(r,h,c,f,l.replace(/\s?\bact-(if-)?loop="([^"]*)"/,""),i);return e.replace(RegExp(o),v.replace(/(\$)/g,"&#36;_rp"))}return e.replace(RegExp(o),"")}if(s.test(n)){var r=RegExp.$1,p=RegExp.$2,g=i[p];if(void 0===g||!(g instanceof Array||g instanceof Object))return e.replace(RegExp(o),"");var v=this._fn_act_get_temp_by_loop_in(r,p,l.replace(/\s?\bact-(if-)?loop="([^"]*)"/,""),i);return e.replace(RegExp(o),v.replace(/(\$)/g,"&#36;_rp"))}return e.replace(RegExp(o),"")},_fn_act_replace_with_act_if_loop:function(e,t,i){var a=t.expression,s=/(.*)\bact-then\b(.*)/,n=this._fn_act_get_html_clip_by_o_exp(t,e),l=this._fn_act_get_string_replace_words_before_exp(n);if(s.test(a)){var d=RegExp.$1,o=RegExp.$2,r=this._fn_act_get_result_of_calc_formula(d,i);return r?(o=this._fn_act_get_string_replace_begin_end_block(o),e.replace(RegExp(l),n.replace(/\b(act-if-loop)="([^"]*)"/,'act-loop="'+o+'"'))):e.replace(RegExp(l),"")}return e.replace(RegExp(l),"")},_fn_act_get_replaced_html:function(e,t){var i,a=this._data_reg_chk_have_any_expression,s=this._fn_act_get_data_mapping(t);try{for(;a.test(e);)if(i=this._fn_act_find_first_expression(e))switch(i.name){case"act-if":e=this._fn_act_replace_with_act_if(e,i,s);break;case"act-loop":e=this._fn_act_replace_with_act_loop(e,i,s);break;case"act-if-loop":e=this._fn_act_replace_with_act_if_loop(e,i,s);break;case"include-temp":e=this._fn_act_replace_with_include_temp(e,i)}else e=this._fn_act_replace_brace_value(e,s)}catch(n){console.log("error:001")}return e.replace(/&#36;_rp/g,"$")},_fn_act_get_result_of_calc_formula:function(e,t){if(/\|\|/.test(e)&&/\&\&/.test(e))return!1;if(/(\|\||\&\&)/.test(e)){for(var i,a=RegExp.$1,s=e.split(a),n=0,l=s.length,d="||"===a;l>n;n++){if(i=this._fn_act_get_result_of_formula(s[n],t),d&&i)return!0;if(!i&&!d)return!1}return!d}return this._fn_act_get_result_of_formula(e,t)},_fn_act_get_value_after_formula:function(e,t,i){var a=/\s?([^\s]*)\s([\*\/\%])\s([^\s]*)/,s=/\s?([^\s]*)\s([\+\-])\s([^\s]*)/;return e=this._fn_act_get_formula_of_arithmetic_operator_replace(e,a,t,i),e=this._fn_act_get_formula_of_arithmetic_operator_replace(e,s,t,i)},_fn_act_get_result_of_formula:function(e,t){var i=/(==|===|>=|<=|\!=|\!==|>|<)/;if(!i.test(e))return!1;var a=RegExp.$1,s=e.split(a),n=this._fn_act_get_string_replace_begin_end_block(s[0]),l=this._fn_act_get_string_replace_begin_end_block(s[1]),d=!1,o=!1,r=function(e,t){void 0!==t&&(e in t||/\:replaced$/.test(e))&&(d=!0)},p=function(e,t){void 0!==t&&(e in t||/\:replaced$/.test(e))&&(o=!0)};return n=this._fn_act_get_value_after_formula(n,t,r),l=this._fn_act_get_value_after_formula(l,t,p),n=this._fn_act_get_string_replace_begin_end_block(n),l=this._fn_act_get_string_replace_begin_end_block(l),n=this._fn_act_get_result_of_checking_value(n,t,r),l=this._fn_act_get_result_of_checking_value(l,t,p),/^undefined$/.test(n)||/^undefined$/.test(l)?/^undefined$/.test(n)&&/^undefined$/.test(l)?this._fn_act_get_result_of_calc(void 0,void 0,a):/^undefined$/.test(n)&&!/^undefined$/.test(l)?o?this._fn_act_get_result_of_calc(n,l,a):this._fn_act_get_result_of_calc(n,void 0,a):d?this._fn_act_get_result_of_calc(n,l,a):this._fn_act_get_result_of_calc(void 0,l,a):this._fn_act_get_result_of_calc(n,l,a)},_fn_act_get_formula_of_arithmetic_operator_replace:function(e,t,i,a){for(var s,n,l;t.test(e);)s=RegExp.$1,n=RegExp.$3,l=RegExp.$2,s=this._fn_act_get_result_of_checking_value(s,i,a),n=this._fn_act_get_result_of_checking_value(n,i,a),e=e.replace(t," "+this._fn_act_get_result_of_calc(s,n,l));return e},_fn_act_get_result_of_calc:function(e,t,i,a){var s=0;switch(a||(e=this._fn_act_get_result_of_covert_value(e),t=this._fn_act_get_result_of_covert_value(t)),i){case"+":s=e+t;break;case"-":s=e-t;break;case"*":s=e*t;break;case"/":s=e/t;break;case"%":s=e%t;break;case"==":s=e==t;break;case"===":s=e===t;break;case"!=":s=e!=t;break;case"!==":s=e!==t;break;case">":s=e>t;break;case">=":s=e>=t;break;case"<":s=t>e;break;case"<=":s=t>=e}return s},_fn_act_get_result_of_covert_value:function(e){return"object"==typeof e?e:/^true|false$/.test(e)?/true/.test(e):/^null$/.test(e)?null:/^undefined$/.test(e)?void 0:/^(\s?(\d+\.\d+)|(\d+)\s?)$/.test(e)?+e:e},_fn_act_get_result_of_checking_value:function(e,t,i){return/^(\s?(\d+\.\d+)|(\d+)\s?)$/.test(e)?+e:(i&&i(e,t),t?/\:replaced$/.test(e)&&(e=e.replace(/\:replaced$/,""),""===e)?"undefined":e in t?t[e]:e:e)},_fn_act_get_nodes_by_tp_key_from_html:function(e,t,i){if(!e||!t||!i)return!1;var a="<(\\w+)[^>]*"+e+'=\\"('+t+')\\"[^>]*>',s=new RegExp(a);if(!s.test(i))return!1;for(var n,l,d,o,r=[],p=RegExp(a,"g"),c=i.match(p),_=c.length,m=0,u=0,h=i.slice(i.indexOf(c[0]),i.length),f=h.length;c[m];)m>=1&&c[m-1]===c[m]&&(u+=1),n=u,m+1!==_?u+=h.slice(n+(c[m+1]===c[m]?1:0),f).indexOf(c[m+1]):u=f,o=h.slice(n,u+(c[m+1]===c[m]?1:0)),RegExp("^"+a).test(o),l=RegExp.$1,d=RegExp.$2,m++,r.push({expression:d,outerHTML:this._fn_act_get_html_clip_by_o_exp({expression:t,tag_name:l,name:e,i_filter:!1},o)});return r},_fn_act_get_object_item_length:function(e){if(!e)return 0;var t=e instanceof Array;if(t)return e.length;var i,a=0;for(i in e)e.hasOwnProperty(i)&&a++;return a},get:function(e,t,i){var a=this._temp_list[e];return a?(a instanceof Array&&(a=a.join("")),void 0!==t&&t instanceof Object||i?this._fn_act_get_replaced_html(a,t):a):""},get_calc_formula:function(e,t){return this._fn_act_get_result_of_calc_formula(e,void 0!==t?this._fn_act_get_data_mapping(t):null)},get_clip:function(e,t,i,a,s){var n=this.get(e);if(!n)return"";i=this._fn_act_get_string_replace_words_before_exp(i);for(var l,d=this._fn_act_get_nodes_by_tp_key_from_html(t,i,n),o=0,r=d.length,p=[],c=void 0!==a?this._fn_act_get_data_mapping(a):null;r>o;o++)l=d[o],"act-if"===t?this._fn_act_get_result_of_calc_formula(l.expression,c)&&p.push(l.outerHTML):p.push(l.outerHTML);return void 0===s&&(s=0),0!==p.length&&p[s]?this._fn_act_get_replaced_html(p[s],a):""},get_node:function(e,t,i,a,s,n){if(!(e&&t&&i&&a))return"";var l="if"===e,d=this._fn_act_get_nodes_by_tp_key_from_html("act-"+e,l?t+' (==|===|!=|!==|>|<|>=|<=) ([^"]*)':"([^\\s]*) (in|to) "+t,a);if(!d)return"";var o=i[t];if(!l&&void 0===o)return"";var r;if(l){for(var p,c=[],_=0,m=d.length,u=this._fn_act_get_data_mapping(i);m>_;_++)p=d[_],p&&this._fn_act_get_result_of_calc_formula(p.expression,u)&&c.push(p.outerHTML);if(0===c.length||s&&!c[s])return"";r=s?c[s]:c[0]}else r=d[d[s]?s:0].outerHTML;return void 0!==i&&i instanceof Object||n?this._fn_act_get_replaced_html(r,i):r},addTemp:function(e,t){this._temp_list[e]||(this._temp_list[e]=t)},deleteTemp:function(e){this._temp_list[e]&&delete this._temp_list[e]},deleteQueueTemp:function(e){for(var t=0,i=e.length;i>t;t++)this.deleteTemp(e[t])}};e.template=t}(window.RayCloud),function(e){function t(e){var t,i=function(e){return this.init?this.init(e):this};for(t in e)i.prototype[t]=e[t];return i}e||(window.RayCloud=e={}),e.controls||(e.controls={}),e.controls={_data_controls_list:{},define:function(e,i){var a=this._data_controls_list;e&&!a[e]&&(a[e]=t(i))},get:function(e,t){return this._data_controls_list[e]?new this._data_controls_list[e](t):!1}}}(window.RayCloud),function(e,t){t.buildConf="jxc",t.jxcDomain=function(){return"http://"+t.buildConf+".superboss.cc"}()}(jQuery,RayCloud),function(){var e={default_index:"index",cp_list:{index:{title:"超级掌柜--首页"},lantern:{title:"超级掌柜--元宵节活动"},guide:{title:"超级掌柜--引导"},trade:{default_index:"list",app_list:{list:{title:"超级掌柜--订单处理"}}},pt:{default_index:"list",app_list:{list:{title:"超级掌柜--快递单列表"},pick_list:{title:"超级掌柜--拣货单列表"},fetch_list:{title:"超级掌柜--拿货单列表"},pick:{title:"超级掌柜--拣货单设计"},fetch:{title:"超级掌柜--拿货单设计"},deliver_list:{title:"超级掌柜--发货单列表"},common:{default_index:"detail",classification_list:{detail:{title:"超级掌柜--普通快递单设计"}}},deliver:{default_index:"detail",classification_list:{detail:{title:"超级掌柜--发货单设计"}}},assembly:{title:"超级掌柜--拿货单打印"},product_short:{title:"超级掌柜--商品管理"},custom:{title:"超级掌柜--自定义打印"},wlb:{title:"超级掌柜--电子面单设计"},print_log:{title:"超级掌柜--打单发货日志"},smart_match:{title:"超级掌柜--快递智能匹配"}}},account:{default_index:"electron_surface",app_list:{electron_surface:{title:"超级掌柜--菜鸟电子面单"}}},setting:{default_index:"shop_info",app_list:{shop_info:{title:"超级掌柜--店铺信息设置"},sync_option:{title:"超级掌柜--同步设置"}}},sms:{default_index:"settings",app_list:{settings:{title:"超级掌柜--短信服务设置"},sent_log:{title:"超级掌柜--短信发送记录"},txn_log:{title:"超级掌柜--短信充值记录"}}},prod:{default_index:"prod_info",app_list:{prod_info:{title:"超级掌柜--商品管理"},cata_management:{title:"超级掌柜--分类管理"},prod_statistic:{title:"超级掌柜--商品销量统计"}}},stock:{default_index:"list",app_list:{list:{title:"超级掌柜--库存管理"},stock_log_add:{title:"超级掌柜--入库统计"},stock_log_reduce:{title:"超级掌柜--出库统计"}}}}};window.route_conf=e}(jQuery),function(){var e={user_info:"/user/info",activity_prize:"/activity/prize",user_sync_query:"/user/sync/query",user_switch_shop:"/user/switch/shop",user_refresh:"/user/refresh",user_sync_save:"/user/sync/save",user_logout:"/user/logout",user_switch_mode:"/user/switch/mode",index_notice:"/index/notice",index_prodprogressinfo:"/index/prodprogressinfo",user_trade:"/user/trade",user_function_list:"/user/function/list",user_closeguide:"/user/closeguide",index_function_list:"/index/function/list",index_function_update:"index/function/update",util_getServerTime:"/datetime",trade_sync:"/trade/sync",trade_sync_count:"/trade/sync/count",user_trade_tabs_list:"/user/trade/tabs/list",trade_search:"/trade/search",trade_detail:"/trade/detail",trade_search_custom_list:"/trade/search/custom/list",trade_sku_search:"/trade/sku/search",trade_merge_list:"/trade/merge/list",trade_merge_nick:"/trade/merge/nick",trade_logistics_trace_search:"/trade/logistics/trace/search",trade_print_express_data:"/trade/print/express/data",trade_print_wlb_data:"/trade/print/wlb/data",trade_search_tids:"/trade/search/tids",trade_close:"/trade/close",trade_sync_single:"/trade/sync/single",receivetime_delay:"/trade/receivetime/delay",trade_search_custom_save:"/trade/search/custom/save",trade_search_custom_delete:"/trade/search/custom/delete",trade_postage_update:"/trade/postage/update",trade_shippingaddress_update:"/trade/shippingaddress/update",trade_sku_update:"/trade/sku/update",trade_sellermemoflag_update:"/trade/sellermemoflag/update",trade_sellermemoflag_merge_update:"/trade/sellermemoflag/merge/update",trade_logistics_online_send:"/trade/logistics/online/send",trade_logistics_online_confirm:"/trade/logistics/online/confirm",trade_logistics_online_cancel:"/trade/logistics/online/cancel",trade_logistics_offline_send:"/trade/logistics/offline/send",trade_logistics_dummy_send:"/trade/logistics/dummy/send",trade_logistics_resend:"/trade/logistics/resend",trade_split:"/trade/split",trade_splitTradeByNum:"/trade/splitTradeByNum",trade_merge:"/trade/merge",trade_undo:"/trade/undo",trade_excep_add:"/trade/excep/add",trade_excep_cancel:"/trade/excep/cancel",trade_receivetime_delay:"/trade/receivetime/delay",trade_logistics_express_save:"/trade/logistics/express/save",trade_logistics_wlb_save:"/trade/logistics/wlb/save",trade_create_wlb_no:"/trade/logistics/wlb/waybill/get",trade_print_wlb_confirm:"/trade/logistics/wlb/waybill/print",trade_express_wlb_info:"/pt/wlb/user/branch/get",trade_logistics_wlb_branch_select:"/trade/logistics/wlb/branch/select",trade_print_deliver_data:"/trade/print/deliver/data",trade_print_express_end:"/trade/print/express/end",trade_print_wlb_end:"/trade/print/wlb/end",trade_print_express_undo:"/trade/print/express/undo",trade_print_deliver_end:"/trade/print/deliver/end",trade_print_deliver_undo:"/trade/print/deliver/undo",trade_halt:"/trade/halt",trade_halt_cancel:"/trade/halt/cancel",trade_verify:"/trade/verify",trade_verify_cancel:"/trade/verify/cancel",trade_printlog_time:"/trade/printlog/time",trade_address_reachable_batch:"/trade/address/reachable/batch",trade_address_reachable:"/trade/address/reachable",trade_item_info:"/trade/item/info",trade_downExcel:"/trade/downExcel",pt_common_user_all:"/pt/common/user/all",pt_common_user_all1:"/pt/common/user/all",pt_common_tag_batch:"/pt/common/tag/batch",pt_common_user_list:"/pt/common/user/list",pt_common_tag:"/pt/common/tag",pt_common_tag_cancel:"/pt/common/tag/cancel",pt_common_list:"/pt/common/list",pt_common_user_add:"/pt/common/user/add",pt_common_user_query:"/pt/common/user/query",pt_common_user_update:"/pt/common/user/update",pt_common_fields_sample:"/pt/common/fields/sample",pt_common_user_default:"/pt/common/user/default",pt_common_user_delete:"/pt/common/user/delete",pt_common_user_top:"/pt/common/user/top",pt_common_user_top_cancel:"/pt/common/user/top/cancel",pt_common_user_lockprinter:"/pt/common/user/lockprinter",pt_common_user_name_edit:"/pt/common/user/name/edit",pt_common_list_groupId:"/pt/common/list/groupId",pt_common_user_add:"/pt/common/user/add",pt_common_user_switch:"/pt/common/user/switch",pt_common_status:"/pt/common/status",pt_common_user_sort_top:"/pt/common/user/sort/top",pt_common_user_sort:"/pt/common/user/sort",pt_mix_user_expressId:"/pt/mix/user/expressId",pt_mix_user_id:"/pt/mix/user/id",pt_wlb_user_sync:"/pt/wlb/user/sync",pt_wlb_user_list:"/pt/wlb/user/list",pt_wlb_user_query:"/pt/wlb/user/query",pt_wlb_user_branchaccount_default:"/pt/wlb/user/branchaccount/default",pt_wlb_user_common_add:"/pt/wlb/user/common/add",pt_wlb_user_common_cancel:"/pt/wlb/user/common/cancel",pt_wlb_update:"/pt/wlb/update",pt_wlb_default:"/pt/wlb/default",pt_wlb_user_top:"/pt/wlb/user/top",pt_wlb_user_name_edit:"/pt/wlb/user/name/edit",pt_wlb_user_common_add:"/pt/wlb/user/common/add",pt_wlb_user_common_cancel:"/pt/wlb/user/common/cancel",pt_wlb_user_branchaccount_default:"/pt/wlb/user/branchaccount/default",pt_wlb_user_lockprinter:"/pt/wlb/user/lockprinter",pt_wlb_fields_sample:"/pt/wlb/fields/sample",wlb_company_user_list:"/wlb/company/user/list",wlb_company_wlbexpress_list:"/wlb/company/wlbexpress/list",wlb_company_user_add:"/wlb/company/user/add",wlb_company_user_top:"/wlb/company/user/top",wlb_company_user_common_add:"/wlb/company/user/common/add",wlb_company_user_common_cancel:"/wlb/company/user/common/cancel",wlb_company_user_name_edit:"/wlb/company/user/name/edit",wlb_company_user_query:"/wlb/company/user/query",wlb_company_user_delete:"/wlb/company/user/delete",wlb_company_user_branch_add:"/wlb/company/user/branch/add",wlb_company_user_branch_update:"/wlb/company/user/branch/update",wlb_company_user_branchaddress_default:"/wlb/company/user/branchaddress/default",wlb_company_user_branchaddress_add:"/wlb/company/user/branchaddress/add",wlb_company_user_branchaddress_update:"/wlb/company/user/branchaddress/update",wlb_company_user_branchaddress_delete:"/wlb/company/user/branchaddress/delete",item_list:"/item/list",item_list_all:"/item/list/all",item_delete:"/item/delete",item_edit:"/item/edit",item_batchEdit:"/item/batchEdit",item_cat_list:"/item/cat/list",item_cat_shop:"/item/cat/shop",item_cat_listAll:"/item/cat/listAll",item_cat_sync:"/item/cat/sync",item_cat_update:"/item/cat/update",item_sales_list:"/item/sales/list",item_edit_detail:"/item/edit/detail",item_detail:"/item/detail",item_sync_single:"/item/sync/single",item_tb_detail:"/item/tb/detail",sku_edit:"/sku/edit",item_edit_detail:"/item/edit/detail",item_tb_update:"/item/tb/update",item_tb_sku_update:"/item/tb/sku/update",item_tb_price_update:"/item/tb/price/update",pt_deliver_user_list:"/pt/deliver/user/list",pt_deliver_user_default_get:"/pt/deliver/user/default/get",pt_deliver_tag:"/pt/deliver/tag",pt_deliver_tag_cancel:"/pt/deliver/tag/cancel",pt_deliver_list:"/pt/deliver/list",pt_deliver_user_add:"/pt/deliver/user/add",pt_deliver_user_query:"/pt/deliver/user/query",pt_deliver_user_update:"/pt/deliver/user/update",pt_deliver_user_default:"/pt/deliver/user/default",pt_deliver_user_name_edit:"/pt/deliver/user/name/edit",pt_deliver_user_lockprinter:"/pt/deliver/user/lockprinter",pt_deliver_user_top:"/pt/deliver/user/top",settings_template_match_list:"/settings/template/match/list",settings_template_match_open_status:"/settings/template/match/open/status",settings_template_match_save:"/settings/template/match/save",pt_simple_list:"/pt/simple/list",pt_simple_list_filter:"/pt/simple/list/filter",pt_custom_user_simple_list:"/pt/custom/user/simple/list",pt_mix_list:"/pt/mix/list",package_weight_query:"/package/weight/query",package_weight_save:"/package/weight/save",print_log_list:"/print/log/list",expresscompany_list:"/expresscompany/list",expresscost_query:"/expresscost/query",expresscost_save:"/expresscost/save",expresscost_area_save:"/expresscost/area/save",expresscost_area_delete:"/expresscost/area/delete",modify_shop_info:"/shop/info/edit",shop_info:"/shop/info",shop_unbind:"/shop/unbind",user_suggestion:"/user/suggestion",item_sync:"/item/sync",item_sync_count:"/item/sync/count",user_sms_index:"/user/sms/index",user_sms_info:"/user/sms/info",sms_log_group:"/sms/log/group",sms_config_onall:"/sms/config/onall",sms_config_onoff:"/sms/config/onoff",sms_active_list:"/sms/active/list",sms_tx_list:"/sms/tx/list",sms_log_list:"/sms/log/list",sms_config_info:"/sms/config/info",sms_config_update:"/sms/config/update",sms_config_signature_update:"/sms/config/signature/update",sms_config_custpl_list:"/sms/config/custpl/list",sms_config_custpl_add:"/sms/config/custpl/add",sms_config_custpl_update:"/sms/config/custpl/update",sms_config_custpl_delete:"/sms/config/custpl/delete",sms_config_systpl_list:"/sms/config/systpl/list",sms_config_blacklist_add:"/sms/config/blacklist/add",sms_config_blacklist_delete:"/sms/config/blacklist/delete",sms_config_gblacklist_add:"/sms/config/gblacklist/add",sms_config_gblacklist_delete:"/sms/config/gblacklist/delete",sms_test_info:"/sms/test/info",sms_config_shorturl:"/sms/config/shorturl",pt_wlb_user_tplnames:"/pt/wlb/user/templateName",stock_list:"/stock/list",stock_update:"/stock/update",stock_stock_log_add:"/stock/stock_log_add",stock_stock_log_reduce:"/stock/stock_log_reduce",upd_shop_quantity:"/stock/upd_shop_quantity",get_item_exit_shop:"/stock/get_item_exit_shop",batch_update:"/stock/batch_update",supplier_bind:"/supplier/bind",supplier_unbind:"/supplier/unbind",supplier_bind_edit:"/supplier/bind/edit",allocation_edit:"/allocation/edit",trade_logistics_wlb_waybill_cancel:"/trade/logistics/wlb/waybill/cancel",pt_custom_user_getDefaultExpressTemplate:"/pt/custom/user/getDefaultExpressTemplate",pt_custom_user_getShopDetail:"/pt/custom/user/getShopDetail",pt_custom_user_itemCatList:"/pt/custom/user/itemCatList",pt_custom_user_query:"/pt/custom/user/query",pt_custom_user_list:"/pt/custom/user/list",pt_custom_user_add:"/pt/custom/user/add",pt_custom_user_allItem:"/pt/custom/user/allItem",pt_custom_user_edit:"/pt/custom/user/edit",pt_custom_user_express_fill_logistics:"/pt/custom/user/express/fill/logistics",pt_custom_user_printdata:"/pt/custom/user/printdata",pt_custom_user_sendGoods:"/pt/custom/user/sendGoods",pt_custom_user_update_memo:"/pt/custom/user/update/memo",pt_custom_user_update_printStatus:"/pt/custom/user/update/printStatus",pt_custom_user_batchDelete:"/pt/custom/user/batchDelete",pt_custom_user_upload:"/pt/custom/user/upload",pt_custom_user_detail:"/pt/custom/user/detail",pt_custom_user_delete:"/pt/custom/user/delete",pt_custom_user_importFile:"/pt/custom/user/importFile",pt_custom_user_wlb_waybill_get:"/pt/custom/user/wlb/waybill/get",pt_custom_user_wlb_waybill_cancel:"/pt/custom/user/wlb/waybill/cancel",pt_custom_user_express_all:"/pt/custom/user/express/all",pt_wlb_user_branch_get_custom:"/pt/wlb/user/branch/get/custom",trade_logistics_wlb_branch_select_custom:"/trade/logistics/wlb/branch/select/custom",trade_syncTradesByTid:"/trade/syncTradesByTid",pt_picker_user_default_update:"/pt/picker/user/default/update",pt_picker_user_update:"/pt/picker/user/update",pt_picker_user_list:"/pt/picker/user/list",pt_picker_user_name_edit:"/pt/picker/user/name/edit",pt_picker_user_lock:"/pt/picker/user/lock",pt_picker_user_default_get:"/pt/picker/user/default/get",pt_picker_user_default_set:"/pt/picker/user/default/set",pt_picker_user_query:"/pt/picker/user/query",trade_print_picker_data:"/trade/print/picker/data",pt_getter_user_default_update:"/pt/getter/user/default/update",pt_getter_user_update:"/pt/getter/user/update",pt_getter_user_list:"/pt/getter/user/list",pt_getter_user_name_edit:"/pt/getter/user/name/edit",pt_getter_user_lock:"/pt/getter/user/lock",pt_getter_user_default_get:"/pt/getter/user/default/get",pt_getter_user_default_set:"/pt/getter/user/default/set",pt_getter_user_query:"/pt/getter/user/query",trade_print_getter_data:"/trade/print/getter/data",print_log_detail:"/print/log/detail",trade_outsid_list:"/trade/outsid/list",trade_outsid_recycle:"/trade/outsid/recycle",trade_outsid_branch_all:"/trade/outsid/branch/all",print_log_allExpress:"/print/log/allExpress",activity_advice_add:"/activity/advice/add",activity_riddle_answer:"/activity/riddle/answer"};
window.SERVER_Path=e}(),function(e,t){var i={user_info:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_info,type:"get",params:{api_name:"user_info"}};return e.extend(n.params,i),t.serverCall(n,a,s)},activity_prize:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.activity_prize,type:"get",params:{api_name:"activity_prize"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},user_sync_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_sync_query,type:"get",params:{api_name:"user_sync_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_switch_shop:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_switch_shop,type:"post",params:{api_name:"user_switch_shop"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_refresh:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_refresh,type:"get",params:{api_name:"user_refresh"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_sync_save:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_sync_save,type:"post",params:{api_name:"user_sync_save"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_logout:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_logout,type:"post",params:{api_name:"user_logout"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_switch_mode:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_switch_mode,type:"post",params:{api_name:"user_switch_mode"}};return e.extend(n.params,i),t.serverCall(n,a,s)},util_getServerTime:function(i,a,s){var n={server:"rc",url:SERVER_Path.util_getServerTime,type:"get",params:{api_name:"util_getServerTime"}};return e.extend(n.params,i),t.serverCall(n,a,s)},index_notice:function(i,a,s){var n={server:"rc",url:SERVER_Path.index_notice,type:"get",params:{api_name:"index_notice"}};return e.extend(n.params,i),t.serverCall(n,a,s)},index_prodprogressinfo:function(i,a,s){var n={server:"rc",url:SERVER_Path.index_prodprogressinfo,type:"get",params:{api_name:"index_prodprogressinfo"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_trade:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_trade,type:"get",params:{api_name:"user_trade"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_function_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_function_list,type:"get",params:{api_name:"user_function_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},index_function_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.index_function_list,type:"get",params:{api_name:"index_function_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},index_function_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.index_function_update,type:"post",params:{api_name:"index_function_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_downExcel:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_downExcel,type:"get",params:{api_name:"trade_downExcel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_sync:function(){var i={server:"rc",url:SERVER_Path.trade_sync,type:"post",params:{api_name:"trade_sync"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},trade_sync_count:function(){var i={server:"rc",url:SERVER_Path.trade_sync_count,type:"get",params:{api_name:"trade_sync_count"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},user_trade_tabs_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_trade_tabs_list,type:"get",params:{api_name:"user_trade_tabs_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_search:function(i,a,s,n){var l={server:"rc",url:SERVER_Path.trade_search,type:"get",params:{api_name:"trade_search"}};return e.extend(l.params,i),t.serverCall(l,a,s,n)},trade_detail:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_detail,type:"get",params:{api_name:"trade_detail"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_search_custom_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_search_custom_list,type:"get",params:{api_name:"trade_search_custom_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_sku_search:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_sku_search,type:"get",params:{api_name:"trade_sku_search"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_merge_list:function(i,a,s,n){var l={server:"rc",url:SERVER_Path.trade_merge_list,type:"get",params:{api_name:"trade_merge_list"}};return e.extend(l.params,i),t.serverCall(l,a,s,n)},trade_merge_nick:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_merge_nick,type:"get",params:{api_name:"trade_merge_nick"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_trace_search:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_trace_search,type:"get",params:{api_name:"trade_logistics_trace_search"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_express_data:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_express_data,type:"post",params:{api_name:"trade_print_express_data"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_wlb_data:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_wlb_data,type:"post",params:{api_name:"trade_print_wlb_data"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_deliver_data:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_deliver_data,type:"post",params:{api_name:"trade_print_deliver_data"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_express_end:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_express_end,type:"post",params:{api_name:"trade_print_express_end"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_wlb_end:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_wlb_end,type:"post",params:{api_name:"trade_print_wlb_end"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_express_undo:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_express_undo,type:"post",params:{api_name:"trade_print_express_undo"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_deliver_end:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_deliver_end,type:"post",params:{api_name:"trade_print_deliver_end"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_deliver_undo:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_deliver_undo,type:"post",params:{api_name:"trade_print_deliver_undo"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_search_tids:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_search_tids,type:"get",params:{api_name:"trade_search_tids"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_close:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_close,type:"post",params:{api_name:"trade_close"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_sync_single:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_sync_single,type:"post",params:{api_name:"trade_sync_single"}};return e.extend(n.params,i),t.serverCall(n,a,s)},receivetime_delay:function(i,a,s){var n={server:"rc",url:SERVER_Path.receivetime_delay,type:"post",params:{api_name:"receivetime_delay"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_printlog_time:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_printlog_time,type:"get",params:{api_name:"trade_printlog_time"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_search_custom_save:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_search_custom_save,type:"post",params:{api_name:"trade_search_custom_save"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_search_custom_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_search_custom_delete,type:"post",params:{api_name:"trade_search_custom_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_postage_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_postage_update,type:"post",params:{api_name:"trade_postage_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_shippingaddress_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_shippingaddress_update,type:"post",params:{api_name:"trade_shippingaddress_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_sku_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_sku_update,type:"post",params:{api_name:"trade_sku_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_sellermemoflag_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_sellermemoflag_update,type:"post",params:{api_name:"trade_sellermemoflag_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_sellermemoflag_merge_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_sellermemoflag_merge_update,type:"post",params:{api_name:"trade_sellermemoflag_merge_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_logistics_online_send:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_online_send,type:"post",params:{api_name:"trade_logistics_online_send"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_online_confirm:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_online_confirm,type:"post",params:{api_name:"trade_logistics_online_confirm"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_online_cancel:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_online_cancel,type:"post",params:{api_name:"trade_logistics_online_cancel"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_offline_send:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_offline_send,type:"post",params:{api_name:"trade_logistics_offline_send"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_dummy_send:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_dummy_send,type:"post",params:{api_name:"trade_logistics_dummy_send"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_split:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_split,type:"post",params:{api_name:"trade_split"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_splitTradeByNum:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_splitTradeByNum,type:"post",params:{api_name:"trade_splitTradeByNum"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_merge:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_merge,type:"post",params:{api_name:"trade_merge"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_undo:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_undo,type:"post",params:{api_name:"trade_undo"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_excep_add:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_excep_add,type:"post",params:{api_name:"trade_excep_add"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_excep_cancel:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_excep_cancel,type:"post",params:{api_name:"trade_excep_cancel"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_receivetime_delay:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_receivetime_delay,type:"post",params:{api_name:"trade_receivetime_delay"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_logistics_express_save:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_express_save,type:"post",params:{api_name:"trade_logistics_express_save"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_wlb_save:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_wlb_save,type:"post",params:{api_name:"trade_logistics_wlb_save"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_create_wlb_no:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_create_wlb_no,type:"post",async:!1,params:{api_name:"trade_create_wlb_no"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_express_wlb_info:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_express_wlb_info,type:"get",params:{api_name:"trade_express_wlb_info"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_express_wlb_select_n_save:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_wlb_branch_select,type:"post",params:{api_name:"trade_logistics_wlb_branch_select"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_print_wlb_confirm:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_print_wlb_confirm,type:"post",params:{api_name:"trade_print_wlb_confirm"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_halt:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_halt,type:"post",params:{api_name:"trade_halt"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_halt_cancel:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_halt_cancel,type:"post",params:{api_name:"trade_halt_cancel"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_verify:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_verify,type:"post",params:{api_name:"trade_verify"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_verify_cancel:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_verify_cancel,type:"post",params:{api_name:"trade_verify_cancel"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_resend_products:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_logistics_resend,type:"post",params:{api_name:"trade_logistics_resend"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_address_reachable_batch:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.trade_address_reachable_batch,type:"get",params:{api_name:"trade_address_reachable_batch"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_address_reachable:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_address_reachable,type:"get",params:{api_name:"trade_address_reachable"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_item_info:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_item_info,type:"get",params:{api_name:"trade_item_info"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_all:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_all,type:"get",params:{api_name:"pt_common_user_all"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_all1:function(e,i,a){var s={server:"rc",url:SERVER_Path.pt_common_user_all,type:"get",contentType:"application/json;charset=utf-8",params:e};return t.serverCall(s,i,a)},pt_common_tag_batch:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_tag_batch,type:"post",params:{api_name:"pt_common_tag_batch"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_list,type:"get",params:{api_name:"pt_common_user_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_tag:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_tag,type:"post",params:{api_name:"pt_common_tag"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_tag_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_tag_cancel,type:"post",params:{api_name:"pt_common_tag_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_common_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_common_add,type:"post",params:{api_name:"pt_wlb_user_common_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_common_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_common_cancel,type:"post",params:{api_name:"pt_wlb_user_common_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_list,type:"get",params:{api_name:"pt_common_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_add,type:"post",params:{api_name:"pt_common_user_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_query,type:"get",params:{api_name:"pt_common_user_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_fields_sample:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_fields_sample,type:"get",params:{api_name:"pt_common_fields_sample"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_update,type:"post",params:{api_name:"pt_common_user_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_default:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_default,type:"post",params:{api_name:"pt_common_user_default"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_delete,type:"post",params:{api_name:"pt_common_user_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_top:function(){var i={server:"rc",url:SERVER_Path.pt_common_user_top,type:"post",params:{api_name:"pt_common_user_top"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},pt_common_user_top_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_top_cancel,type:"post",params:{api_name:"pt_common_user_top_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_name_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_name_edit,type:"post",params:{api_name:"pt_common_user_name_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_list_groupId:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_list_groupId,type:"get",params:{api_name:"pt_common_list_groupId"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_switch:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_switch,type:"post",params:{api_name:"pt_common_user_switch"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_status:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_status,type:"get",params:{api_name:"pt_common_status"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_sort_top:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_sort_top,type:"post",params:{api_name:"pt_common_user_sort_top"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_sort:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_sort,type:"post",params:{api_name:"pt_common_user_sort"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_mix_user_expressId:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_mix_user_expressId,type:"get",params:{api_name:"pt_mix_user_expressId"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_mix_user_id:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_mix_user_id,type:"get",params:{api_name:"pt_mix_user_id"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_sync:function(){var i={server:"rc",url:SERVER_Path.pt_wlb_user_sync,type:"post",params:{api_name:"pt_wlb_user_sync"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},pt_wlb_user_top:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_top,type:"post",params:{api_name:"pt_wlb_user_top"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_name_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_name_edit,type:"post",params:{api_name:"pt_wlb_user_name_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_branchaccount_default:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_branchaccount_default,type:"post",params:{api_name:"pt_wlb_user_branchaccount_default"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_list,type:"get",params:{api_name:"pt_wlb_user_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_query,type:"get",params:{api_name:"pt_wlb_user_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_fields_sample:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_fields_sample,type:"get",params:{api_name:"pt_wlb_fields_sample"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_branchaccount_default:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_branchaccount_default,type:"post",params:{api_name:"pt_wlb_user_branchaccount_default"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_common_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_common_add,type:"post",params:{api_name:"pt_wlb_user_common_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_common_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_common_cancel,type:"post",params:{api_name:"pt_wlb_user_common_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_update,type:"post",params:{api_name:"pt_wlb_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_default:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_default,type:"post",params:{api_name:"pt_wlb_default"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_list,type:"get",params:{api_name:"pt_deliver_user_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_default_get:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_default_get,type:"get",params:{api_name:"pt_deliver_user_default_get"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_tag:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_tag,type:"post",params:{api_name:"pt_deliver_tag"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_tag_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_tag_cancel,type:"post",params:{api_name:"pt_deliver_tag_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_list,type:"get",params:{api_name:"pt_deliver_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_add,type:"post",params:{api_name:"pt_deliver_user_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_query,type:"get",params:{api_name:"pt_deliver_user_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_update,type:"post",params:{api_name:"pt_deliver_user_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_name_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_name_edit,type:"post",params:{api_name:"pt_deliver_user_name_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_default:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_default,type:"post",params:{api_name:"pt_deliver_user_default"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.item_list,type:"get",params:{api_name:"item_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_batchEdit:function(e,i,a){var s={server:"rc",url:SERVER_Path.item_batchEdit,type:"post",params:{context:e}};return t.serverCall(s,i,a)},item_detail:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_detail,type:"get",params:{api_name:"item_detail"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_sync_single:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_sync_single,type:"post",params:{api_name:"item_sync_single"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_edit_detail:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_edit_detail,type:"post",params:{api_name:"item_edit_detail"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_tb_detail:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_tb_detail,type:"get",params:{api_name:"item_tb_detail"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_tb_update:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_tb_update,type:"post",params:{api_name:"item_tb_update"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_tb_price_update:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_tb_price_update,type:"post",params:{api_name:"item_tb_price_update"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_list_all:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_list_all,type:"get",params:{api_name:"item_list_all"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_edit_detail:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_edit_detail,type:"post",params:{api_name:"item_edit_detail"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},sku_edit:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.sku_edit,type:"post",params:{api_name:"sku_edit"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_tb_sku_update:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_tb_sku_update,type:"post",params:{api_name:"item_tb_sku_update"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_cat_list:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_cat_list,type:"get",params:{api_name:"item_cat_list"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_cat_shop:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_cat_shop,type:"post",params:{api_name:"item_cat_shop"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_cat_listAll:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_cat_listAll,type:"get",params:{api_name:"item_cat_listAll"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_cat_sync:function(i,a,s){var n={server:"rc",url:SERVER_Path.item_cat_sync,type:"post",params:{api_name:"item_cat_sync"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_cat_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.item_cat_update,type:"post",params:{api_name:"item_cat_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_sales_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.item_sales_list,type:"get",params:{api_name:"item_sales_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.item_delete,type:"post",params:{api_name:"item_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.item_edit,type:"post",params:{api_name:"item_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},settings_template_match_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.settings_template_match_list,type:"get",params:{api_name:"settings_template_match_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},settings_template_match_open_status:function(i,a,s){var n={server:"rc",url:SERVER_Path.settings_template_match_open_status,type:"post",params:{api_name:"settings_template_match_open_status"}};return e.extend(n.params,i),t.serverCall(n,a,s)},settings_template_match_save:function(i,a,s){var n={server:"rc",url:SERVER_Path.settings_template_match_save,type:"post",params:{api_name:"settings_template_match_save"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_simple_list:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.pt_simple_list,type:"get",params:{api_name:"pt_simple_list"}};return e.extend(o.params,arguments[0]),arguments[0]=o,t.serverCall.apply(t,arguments,n,l,d)},pt_simple_list_filter:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.pt_simple_list_filter,type:"get",params:{api_name:"pt_simple_list_filter"}};return e.extend(o.params,arguments[0]),arguments[0]=o,t.serverCall.apply(t,arguments,n,l,d)},pt_custom_user_simple_list:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.pt_custom_user_simple_list,type:"get",params:{api_name:"pt_custom_user_simple_list"}};return e.extend(o.params,arguments[0]),arguments[0]=o,t.serverCall.apply(t,arguments,n,l,d)},pt_mix_list:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.pt_mix_list,type:"get",params:{api_name:"pt_mix_list"}};return e.extend(o.params,arguments[0]),arguments[0]=o,t.serverCall.apply(t,arguments,n,l,d)},package_weight_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.package_weight_query,type:"get",params:{api_name:"package_weight_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},package_weight_save:function(i,a,s){var n={server:"rc",url:SERVER_Path.package_weight_save,type:"post",params:{api_name:"package_weight_save"}};return e.extend(n.params,i),t.serverCall(n,a,s)},print_log_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.print_log_list,type:"get",params:{api_name:"print_log_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},expresscompany_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.expresscompany_list,type:"get",params:{api_name:"expresscompany_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},expresscost_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.expresscost_query,type:"get",params:{api_name:"expresscost_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},expresscost_save:function(i,a,s){var n={server:"rc",url:SERVER_Path.expresscost_save,type:"post",params:{api_name:"expresscost_save"}};return e.extend(n.params,i),t.serverCall(n,a,s)},expresscost_area_save:function(i,a,s){var n={server:"rc",url:SERVER_Path.expresscost_area_save,type:"post",params:{api_name:"expresscost_area_save"}};return e.extend(n.params,i),t.serverCall(n,a,s)},expresscost_area_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.expresscost_area_delete,type:"post",params:{api_name:"expresscost_area_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},item_sync:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_sync,type:"post",params:{api_name:"item_sync"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},item_sync_count:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.item_sync_count,type:"get",params:{api_name:"item_sync_count"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},modify_shop_info:function(){var i={server:"rc",url:SERVER_Path.modify_shop_info,type:"post",params:{api_name:"modify_shop_info"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},shop_info:function(){var i={server:"rc",url:SERVER_Path.shop_info,type:"get",params:{api_name:"shop_info"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},shop_unbind:function(i,a,s){var n={server:"rc",url:SERVER_Path.shop_unbind,type:"post",params:{api_name:"shop_unbind"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_closeguide:function(){var i={server:"rc",url:SERVER_Path.user_closeguide,type:"post",params:{api_name:"user_closeguide"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},user_suggestion:function(){var i={server:"rc",url:SERVER_Path.user_suggestion,type:"post",params:{api_name:"user_suggestion"}};return e.extend(i.params,arguments[0]),arguments[0]=i,t.serverCall.apply(t,arguments)},pt_custom_user_itemCatList:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.pt_custom_user_itemCatList,type:"get",params:{api_name:"pt_custom_user_itemCatList"}};
return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},pt_custom_user_getShopDetail:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_getShopDetail,type:"get",params:{api_name:"pt_custom_user_getShopDetail"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_upload:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_upload,type:"post",params:{api_name:"pt_custom_user_upload"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_detail:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_detail,type:"get",params:{api_name:"pt_custom_user_detail"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_batchDelete:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_batchDelete,type:"get",params:{api_name:"pt_custom_user_batchDelete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_importFile:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_importFile,type:"post",params:{api_name:"pt_custom_user_importFile"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_sendGoods:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_sendGoods,type:"get",params:{api_name:"pt_custom_user_sendGoods"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_allItem:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_allItem,type:"get",params:{api_name:"pt_custom_user_allItem"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_add:function(e,i,a){var s={server:"rc",url:SERVER_Path.pt_custom_user_add,type:"post",contentType:"application/json;charset=utf-8",params:e};return t.serverCall(s,i,a)},pt_custom_user_edit:function(e,i,a){var s={server:"rc",url:SERVER_Path.pt_custom_user_edit,type:"post",contentType:"application/json;charset=utf-8",params:e};return t.serverCall(s,i,a)},pt_custom_user_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_delete,type:"post",params:{api_name:"pt_custom_user_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_query,type:"post",params:{api_name:"pt_custom_user_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_getDefaultExpressTemplate:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_getDefaultExpressTemplate,type:"get",params:{api_name:"pt_custom_user_getDefaultExpressTemplate"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_list:function(e,i,a){var s={server:"rc",url:SERVER_Path.pt_custom_user_list,type:"get",contentType:"application/json;charset=utf-8",params:e};return t.serverCall(s,i,a)},pt_custom_user_update_printStatus:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_update_printStatus,type:"post",params:{api_name:"pt_custom_user_update_printStatus"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_update_memo:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_update_memo,type:"post",params:{api_name:"pt_custom_user_update_memo"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_express_fill_logistics:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_express_fill_logistics,type:"post",params:{api_name:"pt_custom_user_express_fill_logistics"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_printdata:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_printdata,type:"post",params:{api_name:"pt_custom_user_printdata"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_wlb_waybill_get:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_wlb_waybill_get,type:"post",params:{api_name:"pt_custom_user_wlb_waybill_get"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_branch_get_custom:function(i,a,s,n,l,d){var o={server:"rc",url:SERVER_Path.pt_wlb_user_branch_get_custom,type:"get",params:{api_name:"pt_wlb_user_branch_get_custom"}};return e.extend(o.params,i),t.serverCall(o,a,s,n,l,d)},trade_logistics_wlb_branch_select_custom:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_logistics_wlb_branch_select_custom,type:"post",params:{api_name:"trade_logistics_wlb_branch_select_custom"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_wlb_waybill_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_wlb_waybill_cancel,type:"post",params:{api_name:"pt_custom_user_wlb_waybill_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_custom_user_express_all:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_custom_user_express_all,type:"get",params:{api_name:"pt_custom_user_express_all"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_common_user_lockprinter:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_common_user_lockprinter,type:"post",params:{api_name:"pt_common_user_lockprinter"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_lockprinter:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_lockprinter,type:"post",params:{api_name:"pt_deliver_user_lockprinter"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_lockprinter:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_lockprinter,type:"post",params:{api_name:"pt_wlb_user_lockprinter"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_deliver_user_top:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_deliver_user_top,type:"post",params:{api_name:"pt_deliver_user_top"}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_sms_index:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_sms_index,type:"get",params:{api_name:"user_sms_index",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},user_sms_info:function(i,a,s){var n={server:"rc",url:SERVER_Path.user_sms_info,type:"get",params:{api_name:"user_sms_info",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_log_group:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_log_group,type:"get",params:{api_name:"sms_log_group",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_onall:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_onall,type:"post",params:{api_name:"sms_config_onall"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_onoff:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_onoff,type:"post",params:{api_name:"sms_config_onoff"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_active_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_active_list,type:"get",params:{api_name:"sms_active_list",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_tx_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_tx_list,type:"get",params:{api_name:"sms_tx_list",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_log_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_log_list,type:"get",params:{api_name:"sms_log_list",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_info:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_info,type:"get",params:{api_name:"sms_config_info",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_update,type:"post",params:{api_name:"sms_config_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_signature_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_signature_update,type:"post",params:{api_name:"sms_config_signature_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_custpl_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_custpl_list,type:"get",params:{api_name:"sms_config_custpl_list",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_custpl_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_custpl_add,type:"post",params:{api_name:"sms_config_custpl_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_custpl_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_custpl_update,type:"post",params:{api_name:"sms_config_custpl_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_custpl_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_custpl_delete,type:"post",params:{api_name:"sms_config_custpl_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_systpl_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_systpl_list,type:"get",params:{api_name:"sms_config_systpl_list",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_blacklist_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_blacklist_add,type:"post",params:{api_name:"sms_config_blacklist_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_blacklist_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_blacklist_delete,type:"post",params:{api_name:"sms_config_blacklist_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_gblacklist_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_gblacklist_add,type:"post",params:{api_name:"sms_config_gblacklist_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_gblacklist_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_gblacklist_delete,type:"post",params:{api_name:"sms_config_gblacklist_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_test_info:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_test_info,type:"post",params:{api_name:"sms_test_info"}};return e.extend(n.params,i),t.serverCall(n,a,s)},sms_config_shorturl:function(i,a,s){var n={server:"rc",url:SERVER_Path.sms_config_shorturl,type:"post",params:{api_name:"sms_config_shorturl"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_wlb_user_tplnames:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_wlb_user_tplnames,type:"get",params:{api_name:"pt_wlb_user_tplnames",_t:(new Date).getTime()}};return e.extend(n.params,i),t.serverCall(n,a,s)},stock_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.stock_list,type:"get",params:{api_name:"stock_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},stock_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.stock_update,type:"post",params:{api_name:"stock_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},stock_stock_log_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.stock_stock_log_add,type:"get",params:{api_name:"stock_stock_log_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},stock_stock_log_reduce:function(i,a,s){var n={server:"rc",url:SERVER_Path.stock_stock_log_reduce,type:"get",params:{api_name:"stock_stock_log_reduce"}};return e.extend(n.params,i),t.serverCall(n,a,s)},upd_shop_quantity:function(i,a,s){var n={server:"rc",url:SERVER_Path.upd_shop_quantity,type:"get",params:{api_name:"upd_shop_quantity"}};return e.extend(n.params,i),t.serverCall(n,a,s)},get_item_exit_shop:function(i,a,s){var n={server:"rc",url:SERVER_Path.get_item_exit_shop,type:"get",params:{api_name:"get_item_exit_shop"}};return e.extend(n.params,i),t.serverCall(n,a,s)},batch_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.batch_update,type:"post",params:{api_name:"batch_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},supplier_bind:function(i,a,s){var n={server:"rc",url:SERVER_Path.supplier_bind,type:"post",params:{api_name:"supplier_bind"}};return e.extend(n.params,i),t.serverCall(n,a,s)},supplier_unbind:function(i,a,s){var n={server:"rc",url:SERVER_Path.supplier_unbind,type:"post",params:{api_name:"supplier_unbind"}};return e.extend(n.params,i),t.serverCall(n,a,s)},supplier_bind_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.supplier_bind_edit,type:"post",params:{api_name:"supplier_bind_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},allocation_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.allocation_edit,type:"post",params:{api_name:"allocation_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_logistics_wlb_waybill_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_logistics_wlb_waybill_cancel,type:"post",params:{api_name:"trade_logistics_wlb_waybill_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_list,type:"get",params:{api_name:"wlb_company_user_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_wlbexpress_list:function(i,a,s){var n={server:"rc",async:!1,url:SERVER_Path.wlb_company_wlbexpress_list,type:"get",params:{api_name:"wlb_company_wlbexpress_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_add,type:"post",async:!1,params:{api_name:"wlb_company_user_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_top:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_top,type:"post",params:{api_name:"wlb_company_user_top"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_common_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_common_add,type:"post",params:{api_name:"wlb_company_user_common_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_common_cancel:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_common_cancel,type:"post",params:{api_name:"wlb_company_user_common_cancel"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_name_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_name_edit,type:"post",params:{api_name:"wlb_company_user_name_edit"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_query,type:"get",params:{api_name:"wlb_company_user_query"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_delete,type:"post",params:{api_name:"wlb_company_user_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_branch_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_branch_add,type:"post",async:!1,params:{api_name:"wlb_company_user_branch_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_branch_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_branch_update,type:"post",async:!1,params:{api_name:"wlb_company_user_branch_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_branchaddress_default:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_branchaddress_default,type:"post",params:{api_name:"wlb_company_user_branchaddress_default"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_branchaddress_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_branchaddress_add,type:"post",params:{api_name:"wlb_company_user_branchaddress_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_branchaddress_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_branchaddress_update,type:"post",params:{api_name:"wlb_company_user_branchaddress_update"}};return e.extend(n.params,i),t.serverCall(n,a,s)},wlb_company_user_branchaddress_delete:function(i,a,s){var n={server:"rc",url:SERVER_Path.wlb_company_user_branchaddress_delete,type:"post",params:{api_name:"wlb_company_user_branchaddress_delete"}};return e.extend(n.params,i),t.serverCall(n,a,s)},pt_picker_user_default_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_default_update,type:"post",async:!1,params:{api_name:"pt_picker_user_default_update"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_update,type:"post",async:!1,params:{api_name:"pt_picker_user_update"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_list,type:"get",async:!1,params:{api_name:"pt_picker_user_list"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_name_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_name_edit,type:"post",async:!1,params:{api_name:"pt_picker_user_name_edit"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_lock:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_lock,type:"post",async:!1,params:{api_name:"pt_picker_user_lock"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_default_get:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_default_get,type:"get",async:!1,params:{api_name:"pt_picker_user_default_get"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_default_set:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_default_set,type:"post",async:!1,params:{api_name:"pt_picker_user_default_set"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_picker_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_picker_user_query,type:"get",async:!1,params:{api_name:"pt_picker_user_query"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_default_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_default_update,type:"post",async:!1,params:{api_name:"pt_getter_user_default_update"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_update:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_update,type:"post",async:!1,params:{api_name:"pt_getter_user_update"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_list,type:"get",async:!1,params:{api_name:"pt_getter_user_list"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_name_edit:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_name_edit,type:"post",async:!1,params:{api_name:"pt_getter_user_name_edit"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_lock:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_lock,type:"post",async:!1,params:{api_name:"pt_getter_user_lock"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_default_get:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_default_get,type:"get",async:!1,params:{api_name:"pt_getter_user_default_get"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_default_set:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_default_set,type:"post",async:!1,params:{api_name:"pt_getter_user_default_set"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},pt_getter_user_query:function(i,a,s){var n={server:"rc",url:SERVER_Path.pt_getter_user_query,type:"get",async:!1,params:{api_name:"pt_getter_user_query"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},trade_print_picker_data:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_print_picker_data,type:"post",async:!1,params:{api_name:"trade_print_picker_data"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},trade_print_getter_data:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_print_getter_data,type:"post",async:!1,params:{api_name:"trade_print_getter_data"}};return e.extend(n.params,i),n.modulePath=(t.pages._fn_act_get_hash()||"").split("?")[0].replace("#",""),t.serverCall(n,a,s)},trade_syncTradesByTid:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_syncTradesByTid,type:"post",async:!1,params:{api_name:"trade_syncTradesByTid"}};return e.extend(n.params,i),t.serverCall(n,a,s)},print_log_detail:function(i,a,s){var n={server:"rc",url:SERVER_Path.print_log_detail,type:"get",async:!1,params:{api_name:"print_log_detail"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_outsid_branch_all:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_outsid_branch_all,type:"get",async:!1,params:{api_name:"trade_outsid_branch_all"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_outsid_list:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_outsid_list,type:"get",async:!1,params:{api_name:"trade_outsid_list"}};return e.extend(n.params,i),t.serverCall(n,a,s)},trade_outsid_recycle:function(i,a,s){var n={server:"rc",url:SERVER_Path.trade_outsid_recycle,type:"post",async:!1,params:{api_name:"trade_outsid_recycle"}};return e.extend(n.params,i),t.serverCall(n,a,s)},print_log_allExpress:function(i,a,s){var n={server:"rc",url:SERVER_Path.print_log_allExpress,type:"get",async:!1,params:{api_name:"print_log_allExpress"}};return e.extend(n.params,i),t.serverCall(n,a,s)},activity_advice_add:function(i,a,s){var n={server:"rc",url:SERVER_Path.activity_advice_add,type:"post",async:!1,params:{api_name:"activity_advice_add"}};return e.extend(n.params,i),t.serverCall(n,a,s)},activity_riddle_answer:function(i,a,s){var n={server:"rc",url:SERVER_Path.activity_riddle_answer,type:"post",async:!1,params:{api_name:"activity_riddle_answer"}};return e.extend(n.params,i),t.serverCall(n,a,s)}};window.API=i}(jQuery,RayCloud),function(e,t){function i(e,t,i,a,s){this._queue=e.slice(0),this._callback=t,this._distance=i,this._interval=a||1,this._timer=null,this._stop=s}i.prototype={start:function(){time=new Date,this._timer=setInterval(e.proxy(function(){if(!this._queue||!this._queue.length)return void this.stop();for(var e=0;e<this._distance;e++){if(!this._queue.length){this.stop();break}this._callback(this._queue.shift())}},this),this._interval)},pause:function(){},stop:function(){this._timer&&(clearInterval(this._timer),this._stop&&this._stop(),this._timer=null,this._queue=null,this._callback=null,this._distance=null,this._interval=null,this._timer=null,this._stop=null)}},t.controls.define("control.sleep_queue",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={name:"control.widget.page",get_html:function(e,t,i,a){var s=!t||""===t||/^javascript/.test(t)?"javascript:void(0);":/\?|\&/.test(t)?t+"&":t+"?",n=!t||""===t||/^javascript/.test(t)?function(){return s}:"function"==typeof t?function(e){return t(e)}:function(e){return s+"page_num="+e};return e||(e=""),this._get_pages(e,n,this._calc_array(i,a),i,a)},_get_pages:function(e,t,i,a,s){var n=['<span class="page-prev">'];a=~~a||1,s=~~s||1,n.push(1==s?'<a class="disable" >上一页<b></b></a>':'<a href="'+t(s-1)+'" data-act="page_jump" data-tp="'+e+'" data-key="'+(s-1)+'">上一页<b></b></a></span>'),n.push("</span>");for(var l=0,d=i.length;d>l;l++)if("..."!=i[l]){var o=i[l]==s?"page-no page-cur":"page-no";n.push('<a class="'+o+'" href="'+t(i[l])+'" data-tp="'+e+'" data-act="page_jump" data-key="'+i[l]+'">'+i[l]+"</a>")}else n.push('<span class="page-split">...</span>');return n.push('<span class="page-next">'),n.push(s==a?'<a class="disable" >下一页<b></b></a>':'<a href="'+t(s+1)+'" data-act="page_jump" data-tp="'+e+'" data-key="'+(s+1)+'">下一页<b></b></a>'),n.push("</span>"),n.join("")},_calc_array:function(e,t){var i=[],a=0;if(e=+e,t=+t,5>=e){for(var s=1;e>=s;s++)i[a++]=s;return i}if(3>=t){for(var s=1;t+1>=s;s++)i[a++]=s;i[a++]="..."}else if(t>3&&e-2>t)i[a++]=1,i[a++]="...",i[a++]=t-1,i[a++]=t,i[a++]=t+1,i[a++]="...";else if(i[a++]=1,i[a++]="...",t==e-2)for(var s=t-1;e-1>=s;s++)i[a++]=s;else if(t==e-1)for(var s=e-2;e-1>=s;s++)i[a++]=s;else i[a++]=e-1;return i[a++]=e,i}};t.controls.define(i.name,i)}(jQuery,RayCloud),function(e,t){function i(e){this.form=e}i.getData=function(e,t){function i(e,t){var i=_[e];i?(i.push||(_[e]=[i]),_[e].push(t)):_[e]=t}for(var a,s,n,l,d,o,r,p,c=e.elements,t=t||function(e){return e},_={},m=0,u=c.length;u>m;m++)if(a=c[m],n=a.name,!a.disabled&&n)switch(s=a.type,l=a.value,s){case"radio":case"checkbox":if(!a.checked)break;case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":i(n,t(l,n));break;case"select-multiple":for(d=a.options,r=d.length,o=0;r>o;o++)p=d[o],p.selected&&i(n,t(p.value,n))}return _},i.prototype={getData:function(){return i.getData(this.form)},setData:function(){},setDefaultValue:function(){},destroy:function(){}},t.controls.define("control.form_util",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={_list:[],_list_all:[],get:function(i){var a=t.pages._fn_act_get_hashs(),s="pt_simple_list";"pt"===a.root&&"custom"===a.app&&(s="pt_custom_user_simple_list"),API[s]({isMix:1,isCommonUse:1},e.proxy(function(t){this._list=t.data,i(e.extend(!0,[],this._list))},this),null,!1,!1,!0)},getUnCommonUse:function(i){var a=t.pages._fn_act_get_hashs(),s="pt_simple_list_filter",n={isMix:1,isCommonUse:1,isShow:1};"pt"===a.root&&"custom"===a.app&&(s="pt_custom_user_express_all",n={isMix:0}),API[s](n,e.proxy(function(t){this._unCommonlist=t.data,i(e.extend(!0,[],this._unCommonlist))},this),null,!1,!1,!0)},get_detail:function(e,t){this.get(function(i){for(var a=null,s=0,n=i.length;n>s;s++)if(e==i[s].templateId){a=i[s];break}if(null===a)throw new Error("[control.common_express:get_detail] "+e+" 参数异常.");t(a)})},get_all_details:function(t,i,a){API.pt_mix_user_id({id:t,taobaoId:i},e.proxy(function(e){var i=e.data;if(null===i)throw new Error("[control.common_express:get_detail] "+t+" 参数异常.");a(i)},this))},get_all:function(t){API.pt_simple_list({isMix:1},e.proxy(function(i){this._list_all=i.data,t(e.extend(!0,[],this._list_all))},this),null,!1,!1,!0)},update_name:function(e,i){var a,s=0,n=this._list,l=n.length;for(s=0;l>s;s++)if(a=n[s],a.templateId==e)return a.templateName=i,found=!0,void t.pub("control.default_express.update_name",{templateId:e,templateName:i})},add:function(i,a){if(this._list.length){e.each(["templateId","templateName","isWlb"],function(e,t){if(!i.hasOwnProperty(t))throw new Error("[control.common_express:add] 参数非法.")});var s=0,n=this._list,l=n.length;for(s=0;l>s;s++)if(n[s].templateId==i.templateId)throw new Error("[control.common_express:add] "+templateId+" 参数异常.")}API.pt_common_tag({templateId:i.templateId},e.proxy(function(){this._list.length&&this._list.push(i),a&&a(),t.pub("control.common_express.add",e.extend({},i))},this))},remove:function(i,a){if(this._list.length){var s=0,n=this._list,l=n.length,d=-1;for(s=0;l>s;s++)n[s].templateId==i&&(d=s);if(-1===d)throw new Error("[control.common_express:remove] "+i+" 参数异常.")}API.pt_common_tag_cancel({templateId:i},e.proxy(function(){this._list.length&&this._list.splice(d,1),a&&a(),t.pub("control.common_express.remove",i)},this))},preview:function(t){e.when(API.pt_common_user_query({id:t}),API.pt_common_fields_sample()).done(function(e,t){var i=e[0].data,a=t[0].data,s=getLodop();if(null!=s&&"undefined"!=typeof s.VERSION){s.PRINT_INIT("普通快递单设计"),s.ADD_PRINT_SETUP_BKIMG("<img border='0' src='"+i.bgPath+"' />"),s.SET_SHOW_MODE("BKIMG_WIDTH",i.width+"mm"),s.SET_SHOW_MODE("BKIMG_IN_PREVIEW",1),s.SET_PRINT_MODE("POS_BASEON_PAPER",!0),s.SET_PRINT_STYLE("FontSize",3*i.fontSize/4),s.SET_PRINT_STYLE("FontName",i.font),s.SET_PRINT_STYLE("Bold",i.bold);for(var n=i.fieldSettings,l=0,d=n.length;d>l;l++)s.ADD_PRINT_TEXT(n[l].y,n[l].x,n[l].width,n[l].height,a[n[l].field]),s.SET_PRINT_STYLEA(l+1,"FontName",n[l].font),s.SET_PRINT_STYLEA(l+1,"FontSize",3*n[l].fontSize/4),s.SET_PRINT_STYLEA(l+1,"Bold",n[l].bold?1:0);s.SET_PRINTER_INDEXA(s.GET_PRINTER_NAME(-1)),s.SET_PRINT_PAGESIZE(1,10*i.width,10*i.height,""),s.PREVIEW()}})},clear:function(){this._list=[]},add_wlb:function(t,i,a){API.pt_wlb_user_common_add({id:t,taobaoId:a},e.proxy(function(){i&&i()},this))},remove_wlb:function(t,i,a){API.pt_wlb_user_common_cancel({id:t,taobaoId:a},e.proxy(function(){i&&i()},this))}};t.controls.define("control.common_express",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={pagesUI:function(t,i,a,s){if(!t instanceof e)throw new Error("请传入jQuery对象");if(!i||!i.page||!i.total)throw new Error("缺少数据");var n=this._pages_data(i),l="",d="",o="";d=1==n.pageNo?'<span class="module-trade-pages-pageNo">&lt;</span>':'<a class="module-trade-pages-pageNo" data-page="'+n.prevPage+'"  title="前一页">&lt;</a>',o=1==n.isLastPage?'<span class="module-trade-pages-pageNo">&gt;</span>':'<a class="module-trade-pages-pageNo" data-page="'+n.nextPage+'"  title="后一页">&gt;</a>',l=['<div class="pagination-pages clearfix" style="margin:1px 0;overflow:hidden;">','<span class="f-lt fc-999">共'+n.total+"条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>",'<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option value="10">10</option>','<option value="20">20</option>','<option value="50">50</option>','<option value="100">100</option>','<option value="200">200</option>',"</select>","</span>",d,'<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">'+n.pageNo+"</a></span>",o,'<span class="f-lt fc-999">共'+n.pageTotal+"页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>",'<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="'+n.pageNo+'" data-max="'+n.pageTotal+'" style="height:20px;line-height:20px;width:24px;margin-right:0;vertical-align:top;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"].join(""),t.html(l).find("select").iSelect("select",n.pageSize+""),a&&this._pages_bind(t,s)},_pages_bind:function(i,a){var s=this,n=t.pages._fn_act_get_hashs();s._pages_unbind(i),i.find("a.module-trade-pages-pageNo").on("click",function(){var t=e(this),i={pageNo:t.data("page")};a?a(i):s._fn_ctrl_setCurHash(i)}),i.find("select").on("change",function(){var t={pageSize:e(this).val(),pageNo:1};a?a(t):(s._fn_ctrl_setCurHash(t),localStorage[n.root]=e(this).val())}),i.find(".input-small").on("focusin.page_form",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),i.find(".J_Submit_Container").stop().animate({width:44})},this)),i.find(".input-small").on("focusout.page_form",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(e.proxy(function(){i.find(".J_Submit_Container").stop().animate({width:0})},this),200)},this)),i.find(".J_Submit").on("click.submit",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),i.find(".J_Submit_Container").stop()
},this)),i.find("form").on("submit.page_form",e.proxy(function(t){t.preventDefault();var i=e(t.target).find("input"),s=e.trim(i.val()),n=i.attr("data-max")-0;if(""===s)return!1;if(!s.match(/^\d+$/))return!1;if(s-0>n)return e.dialog.alert("超出最大页数！"),!1;var l={pageNo:s-0};return a?a(l):this._fn_ctrl_setCurHash(l),!1},this))},_pages_unbind:function(e){e.find("a.module-trade-pages-pageNo").off("click"),e.find("select").off("change"),e.find(".input-small").off("focusin.page_form"),e.find(".input-small").off("focusout.page_form"),e.find(".J_Submit").off("click.submit"),e.find("form").off("submit.page_form")},_pages_data:function(e){var t=Math.ceil(e.total/e.page.pageSize),i={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:1*e.page.pageNo+1,pageTotal:t,isLastPage:e.page.pageNo==t};return i},_fn_ctrl_setCurHash:function(i,a){if(a===!0)return void t.pages.setCurHash(i);var s=t.pages._fn_act_get_hashs();i.pageSize=i.pageSize||s.pageSize||localStorage[s.root]||20,delete s.root,delete s.app,t.pages.setCurHash(e.extend(s,i))}};t.controls.define("control.common_pages",{init:function(){return i}})}(jQuery,RayCloud),function($,RC){var _=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),serviceObj={ali_waybill_serv_insure_amount:"保价金额",ali_waybill_serv_insure_fee:"保价费用",ali_waybill_serv_cod_amount:"代收金额",ali_waybill_serv_dest_amount:"到付金额",ali_waybill_serv_cod_arrival_days:"返款周期",ali_waybill_serv_receipt_return_type:"签单返回",ali_waybill_serv_door_delivery:"送货进仓",ali_waybill_serv_night_delivery:"夜间服务",ali_waybill_serv_delivery_time_limit:"限时达",ali_waybill_serv_delivery_enc:"配送环境",ali_waybill_ext_weight:"计费重量",ali_waybill_ext_delivery_fee:"投递费用",ali_waybill_ext_sf_biz_type:"业务类型",ali_waybill_ext_sf_third_area:"第三方地区",ali_waybill_ext_send_date:"发件日期",ali_waybill_ext_payment_type:"付款方式",ali_waybill_ext_custom_code:"月结账号"},pirntPtObj={LODOP:null,getPtCommonHtml:function(e,t){for(var i="",a=this._expressDataFormat($.extend(!0,{},e),t),s=0,n=a.length;n>s;s++)i+=RC.template.get("template.pt.common.field",a[s]);return i},getPtCommonPreview:function(e,t){var i=['<object id="LODOP_X" classid="clsid:2105C259-1E0C-4534-8141-A753534CB4CA" width="100%" height="500">','<param name="Color" value="#ADD8E6">','<embed id="LODOP_EM" TYPE="application/x-print-lodop" width="100%" height="500" color="#ADD8E6" PLUGINSPAGE="install_lodop32.exe"></embed>',"</object>"].join("");e.empty().append(i);var a=RC.template.get("template.pt.common.field",t[0]);this.LODOP=getLodop(document.getElementById("LODOP_X"),document.getElementById("LODOP_EM")),this.LODOP.PRINT_INIT("打印控件Lodop功能演示_自己设计预览界面"),this.LODOP.ADD_PRINT_HTM(t[0].verticalOffset,t[0].horizontalOffset,t[0].width+"mm",t[0].height+"mm",a),this.LODOP.SET_PRINT_MODE("PRINT_PAGE_PERCENT","Full-Page"),this.LODOP.SET_SHOW_MODE("HIDE_PAPER_BOARD",!0),this.LODOP.SET_PREVIEW_WINDOW(0,3,0,0,0,""),this.LODOP.SET_SHOW_MODE("PREVIEW_IN_BROWSE",!0),this.LODOP.PREVIEW()},getPtCommonExpressData:function(e,t,i){var a=RC.pages._fn_act_get_hashs(),s="trade_print_express_data",n=e;return"pt"===a.root&&"custom"===a.app&&(s="pt_custom_user_printdata",n={ids:e.tids,mandatory:e.mandatory,templateId:e.templateId,templateType:0},a.queryId||1!=a.queryId||(n.sendGoods=0)),API[s](n,$.proxy(function(e){this.sourcesPrintExpress=$.extend(!0,{},e),t&&t(this.sourcesPrintExpress)},this),$.proxy(function(){i&&i()},this),!1)},_expressDataFormat:function(e,t){for(var i=e.template,a=e.fieldValues,s=[],n=0,l=a.length;l>n;n++){var d={};d.width=i.width,d.height=i.height,d.bgPath=i.bgPath,d.font=i.font,d.fontSize=i.fontSize,d.bold=i.bold?1:0,d.horizontalOffset=i.horizontalOffset,d.verticalOffset=i.verticalOffset;for(var o=d.fieldSettings=i.fieldSettings,r=0,p=o.length;p>r;r++){if("trade_create_time"==o[r].field||"trade_pay_time"==o[r].field||"trade_print_time"==o[r].field||"trade_deliver_time"==o[r].field){"trade_print_time"==o[r].field&&(a[n][o[r].field]=(new Date).getTime());var c="day"==o[r].content?"YY-MM-DD":"YY-MM-DD HH:MM:SS";o[r].content="946656000000"==a[n][o[r].field]||"undefined"==typeof a[n][o[r].field]?"":RC.util.date.getdate(a[n][o[r].field],c)}else o[r].content=_.escape(a[n][o[r].field]||""),o[r].content=o[r].content.replace(/,/g,"<br />");"trade_print_num"==o[r].field&&(o[r].content=t?t:1),o[r].boldString=o[r].bold?"bold":"normal",o[r].width_x=o[r].x+parseInt(d.horizontalOffset,10),o[r].height_y=o[r].y+parseInt(d.verticalOffset,10)}s.push(d)}return s},printPtCommon:function(e,t,i){this.common_width=e[0].width,this.common_height=e[0].height,this.common_x=e[0].horizontalOffset,this.common_y=e[0].verticalOffset;try{if(this.LODOP=getLodop(),null!=this.LODOP&&"undefined"!=typeof this.LODOP.VERSION){this.LODOP.PRINT_INIT("普通快递批量打印"),this.LODOP.SET_PRINT_PAGESIZE(1,10*this.common_width,10*this.common_height,""),this.createAllPages(e,t,i);var a=this.LODOP.PRINTA();a?t&&t():i&&i()}else alert("Error:本机未安装或需要升级!")}catch(s){}},printPtCommonText:function(e,t,i){var a=e.template;try{var s=getLodop(),n=0;if(null!=s&&"undefined"!=typeof s.VERSION){for(var l,d=0;d<e.fieldValues.length;){var o=e.fieldValues.slice(d,d+16);d+=16,s.PRINT_INIT("普通快递批量打印"),s.SET_PRINT_MODE("POS_BASEON_PAPER",!0),s.SET_PRINT_STYLE("FontSize",3*a.fontSize/4),s.SET_PRINT_STYLE("FontName",a.font),s.SET_PRINT_STYLE("Bold",a.bold?1:0);var r=a.fieldSettings,p=a.offsetNum,c=a.offsetUp,_=1===c?-a.offsetValue:a.offsetValue;16!=d&&1==c?n+=-(16%p)*(a.offsetValue/p).toFixed(3):16!=d&&0==c&&(n+=16%p*(a.offsetValue/p).toFixed(3));for(var m=0,u=o.length;u>m;m++){m%p==0&&0!==m&&(n+=_);for(var h=0,f=r.length;f>h;h++){if("trade_create_time"==r[h].field||"trade_pay_time"==r[h].field||"trade_print_time"==r[h].field||"trade_deliver_time"==r[h].field){"trade_print_time"==r[h].field&&(o[m][r[h].field]=(new Date).getTime());var v="day"==r[h].content?"YY-MM-DD":"YY-MM-DD HH:MM:SS",g="946656000000"==o[m][r[h].field]||"undefined"==typeof o[m][r[h].field]?"":RC.util.date.getdate(o[m][r[h].field],v);s.ADD_PRINT_TEXT(r[h].y-3.78*a.verticalOffset-3.78*a.verticalOffsetDefault+3.78*n,r[h].x+3.78*a.horizontalOffset,r[h].width,r[h].height,g)}else{var g="undefined"!=typeof o[m][r[h].field]?o[m][r[h].field].toString().replace(/,/g,"\n"):"";_width=r[h].width,_height=r[h].height,g=g.replace(/&#44;/g,","),"trade_print_num"==r[h].field&&(g=d-16+m+1),s.ADD_PRINT_TEXT(r[h].y-3.78*a.verticalOffset-3.78*a.verticalOffsetDefault+3.78*n,r[h].x+3.78*a.horizontalOffset,_width,_height,g)}s.SET_PRINT_STYLEA(m*f+h+1,"FontName",r[h].font),s.SET_PRINT_STYLEA(m*f+h+1,"FontSize",3*r[h].fontSize/4),s.SET_PRINT_STYLEA(m*f+h+1,"Bold",r[h].bold?1:0)}s.NEWPAGE()}s.SET_PRINT_PAGESIZE(1,10*a.width,10*a.height,""),s.SET_PRINTER_INDEXA(t||-1),l=s.PRINT()}l&&i&&i(l)}}catch(b){console.log(b)}},createAllPages:function(e,t,i){for(var a=0,s=e.length;s>a;a++){this.LODOP.NewPage();var n=RC.template.get("template.pt.common.print",e[a]);this.LODOP.ADD_PRINT_HTM(this.common_y,this.common_x,this.common_width+"mm",this.common_height+"mm",n);var l=this.LODOP.PRINTA();l?t&&t():i&&i()}},_ajaxLockprinter:function(e,t,i,a,s){"common"==i&&API.pt_common_user_lockprinter({templateId:e,printerName:t},$.proxy(function(e){a&&a(e)},this)),"deliver"==i&&API.pt_deliver_user_lockprinter({templateId:e,printerName:t},$.proxy(function(e){a&&a(e)},this)),"wlb"==i&&API.pt_wlb_user_lockprinter({templateId:e,printerName:t,taobaoId:s},$.proxy(function(e){a&&a(e)},this)),"pick"==i&&API.pt_picker_user_lock({id:e,printerName:t,taobaoId:s},$.proxy(function(e){a&&a(e)},this)),"fetch"==i&&API.pt_getter_user_lock({id:e,printerName:t,taobaoId:s},$.proxy(function(e){a&&a(e)},this))},lockPrinter:function(e,t,i,a){var s=$(i.currentTarget);if(1==s.data("status")){{s.data("print")}return void this._ajaxLockprinter(e,"",t,function(){s.closest("em.fc_999").replaceWith('<a class="J_Click" data-name="lock_print" data-id="'+e+'" data-status="0">锁定打印机</a>')},a)}this.LODOP=getLodop();for(var n=this.LODOP.GET_PRINTER_COUNT(),l=[],d=0;n>d;d++){var o={};o.name=this.LODOP.GET_PRINTER_NAME(d),o.value=d,l.push(o)}var r={printArr:l},p=RC.template.get("template.lock.printer.list",r),c=$.dialog({title:"锁定打印机",content:p,zIndex:999}),_=$("#printer-list"),m=_.find("select");m.iSelect(),_.on("click",".J_printer",$.proxy(function(){var i=m.find("option:selected").text();this._ajaxLockprinter(e,i,t,function(){s.replaceWith('<em class="fc_999">'+i+'<a class="J_Click ml_5" data-name="lock_print" data-id="'+e+'" data-status="1" data-print="'+i+'">[取消锁定]</a></em>'),c.close()},a)},this))},findPrinter:function(e){var t="undefined"==typeof $.cookie("_printrArr")?{}:$.parseJSON($.cookie("_printrArr")),i="";return i="undefined"==typeof t[e]?'<a class="J_Click" data-name="lock_print" data-id="'+e+'" data-status="0">锁定打印机</a>':'<em class="fc_999">'+t[e]+'<a class="J_Click ml_5" data-name="lock_print" data-id="'+e+'" data-status="1" data-print="'+t[e]+'">[取消锁定]</a></em>'},selectPrinter:function(e){this.LODOP=getLodop();for(var t=this.LODOP.GET_PRINTER_COUNT(),i='<span class="ft_14">切换打印机：</span><select data-zIndex="11000" data-position="top">',a=0;t>a;a++)i+=e==this.LODOP.GET_PRINTER_NAME(a)?'<option value="'+a+'" selected>'+this.LODOP.GET_PRINTER_NAME(a)+"</option>":'<option value="'+a+'">'+this.LODOP.GET_PRINTER_NAME(a)+"</option>";return i+="</select>"},setPrinter:function(e){this.LODOP=getLodop();for(var t=this.LODOP.GET_PRINTER_COUNT(),i=0;t>i;i++)if(e==this.LODOP.GET_PRINTER_NAME(i))return i},findLocalPrinter:function(){this.LODOP=getLodop();for(var e=this.LODOP.GET_PRINTER_COUNT(),t=[],i=0;e>i;i++)t.push(this.LODOP.GET_PRINTER_NAME(i));return t},getPtDeliverExpressData:function(e,t,i){var a=RC.pages._fn_act_get_hashs(),s="trade_print_deliver_data",n=e;"pt"===a.root&&"custom"===a.app&&(s="pt_custom_user_printdata",n={ids:e.tids,templateId:e.templateId,printType:1,mandatory:e.mandatory}),API[s](n,$.proxy(function(e){this.sourcesDeliverData=$.extend(!0,{},e),t&&t(this.sourcesDeliverData)},this),$.proxy(function(){i&&i()},this),!1)},_deliverDataFormat:function(e,t){for(var i=["table_item_storehouse","title","buyer_nick","receiver_name","receiver_mobile","receiver_phone","receiver_zip","receiver_address","seller_nick","send_name","send_mobile","send_phone","shop_title","send_zip","send_address","table_item_id","table_item_pic","table_item_title","table_item_short_title","table_item_properties","table_item_outer_id","table_item_num","table_item_price","table_item_payment","table_item_discount","item_num_total","item_payment_total","item_discount_total","post_fee","package_weight","trade_id","trade_create_time","trade_pay_time","trade_print_time","trade_deliver_time","trade_shop_promotion","trade_buyer_message","trade_seller_memo","trade_express_info","trade_invoice_title","custom_content","qrcode"],a={},s=t.fieldValues||[],n={},l=0,d=s.length;d>l;l++)n[s[l].name]=s[l].value;var o=[];if(t.fields)o=t.fields.split(",");else for(var r=0;r<t.fieldSettings.length;r++)o.push(t.fieldSettings[r].field);for(var r=0,p=i.length;p>r;r++)if("undefined"==typeof e[i[r]]||-1==$.inArray(i[r],o))a["_"+i[r]]=0;else if(a["_"+i[r]]=1,"trade_create_time"==i[r]||"trade_pay_time"==i[r]||"trade_print_time"==i[r]||"trade_deliver_time"==i[r]){"trade_print_time"==i[r]&&(e[i[r]]=(new Date).getTime());var c="day"==n[i[r]]?"YY-MM-DD":"YY-MM-DD HH:MM";a[i[r]]="946656000000"==e[i[r]]?"":RC.util.date.getdate(parseInt(e[i[r]]),c)}else a[i[r]]=_.escape(e[i[r]]);return a},_getDeliveKMTableHtml:function(e){var t="undefined"!=typeof e.table_item_title?e.table_item_title.split(","):"",i="undefined"!=typeof e.table_item_pic?e.table_item_pic.split(","):"",a="undefined"!=typeof e.table_item_short_title?e.table_item_short_title.split(","):"",s="undefined"!=typeof e.table_item_properties?e.table_item_properties.split(","):"",n="undefined"!=typeof e.table_item_outer_id?e.table_item_outer_id.split(","):"",l="undefined"!=typeof e.table_item_num?e.table_item_num.split(","):"",d="undefined"!=typeof e.table_item_price?e.table_item_price.split(","):"",o="undefined"!=typeof e.table_item_payment?e.table_item_payment.split(","):"",r="undefined"!=typeof e.table_item_discount?e.table_item_discount.split(","):"",p="undefined"!=typeof e.table_item_storehouse?e.table_item_storehouse.split(","):"",c="",_="",m=0;""!==i&&(c+='<td class="ft-left" width="65" style="border:1px solid #000;">宝贝图片</td>',m++),""!==t&&(c+='<td width="170" style="border:1px solid #000;">商品名称</td>',m++),""!==a&&(c+='<td width="54" style="border:1px solid #000;">宝贝简称</td>',m++),""!==s&&(c+='<td width="56" style="border:1px solid #000;">规格</td>',m++),""!==p&&(c+='<td width="55" style="border:1px solid #000;">货位</td>',m++),""!==n&&(c+='<td width="55" style="border:1px solid #000;">商家编码</td>',m++),""!==l&&(c+='<td width="26" style="border:1px solid #000;">数量</td>',m++),""!==d&&(c+='<td width="55" style="border:1px solid #000;">宝贝单价</td>',m++),""!==o&&(c+='<td width="55" style="border:1px solid #000;">实付金额</td>',m++),""!==r&&(c+='<td width="55" style="border:1px solid #000;">优惠金额</td>',m++);for(var u=Math.max(t.length,i.length,a.length,s.length,n.length,l.length,d.length,o.length,r.length,p.length),h=0,f=u;f>h;h++){var v='<tr style="border:1px solid #000;">';if(""!==i){var g=i[h]?i[h]+"_50x50.jpg":"/resources/css/build/images/no_pic_80x80.png";v+='<td  style="border:1px solid #000;"><img src="'+g+'" alt="" style="width: 50px; height: 50px" /></td>'}if(""!==t&&(v+="<td class='ft-left' style=\"border:1px solid #000;\">"+t[h]+"</td>"),""!==a){var b="undefined"==typeof a[h]?"&nbsp;":a[h];v+='<td style="border:1px solid #000;">'+b+"</td>"}""!==s&&(v+='<td style="border:1px solid #000;">'+s[h]+"</td>"),""!==p&&(v+='<td style="border:1px solid #000;">'+p[h]+"</td>"),""!==n&&(v+="<td style='word-wrap: break-word; word-break: normal;border:1px solid #000;'>"+n[h]+"</td>"),""!==l&&(v+='<td style="border:1px solid #000;">'+l[h]+"</td>"),""!==d&&(v+='<td style="border:1px solid #000;">'+d[h]+"</td>"),""!==o&&(v+='<td style="border:1px solid #000;">'+o[h]+"</td>"),""!==r&&(v+='<td style="border:1px solid #000;">'+r[h]+"</td>"),v+="</tr>",_+=v}{var y=e.item_num_total,x=e.item_payment_total,w=e.item_discount_total,k=e.package_weight;e.post_fee}_+='<td style="border:1px solid #000;text-align: right;" colspan="'+m+'">',"undefined"!=typeof y&&(_+='<span style="padding: 0 10px">宝贝总数：'+y+"</span>"),"undefined"!=typeof x&&(_+='<span style="padding: 0 10px">实付总额：'+x+"</span>"),"undefined"!=typeof w&&(_+='<span style="padding: 0 10px">优惠总额：'+w+"</span>"),"undefined"!=typeof k&&(_+='<span style="padding: 0 10px">宝贝重量：'+k+"</span>"),_+="</td>";var T=['<table border="1"  style="border:1px solid #000;margin-left:15px;width:98%;">',"<thead>",'<tr style="border:1px solid #000;">',c,"</tr>","</thead>","<tbody>",_,"</tbody>","</table>"];return T.join("")},_getDeliveTableHtml:function(e){var t=e.table_item_id.split(","),i="undefined"!=typeof e.table_item_title?e.table_item_title.split(","):"",a="undefined"!=typeof e.table_item_pic?e.table_item_pic.split(","):"",s="undefined"!=typeof e.table_item_short_title?e.table_item_short_title.split(","):"",n="undefined"!=typeof e.table_item_properties?e.table_item_properties.split(","):"",l="undefined"!=typeof e.table_item_outer_id?e.table_item_outer_id.split(","):"",d="undefined"!=typeof e.table_item_num?e.table_item_num.split(","):"",o="undefined"!=typeof e.table_item_price?e.table_item_price.split(","):"",r="undefined"!=typeof e.table_item_payment?e.table_item_payment.split(","):"",p="undefined"!=typeof e.table_item_discount?e.table_item_discount.split(","):"",c='<td width="26" style="border:1px solid #000;">序号</td>',_="",m=1;""!==a&&(c+='<td class="ft-left" width="65" style="border:1px solid #000;">宝贝图片</td>',m++),""!==i&&(c+='<td class="ft-left" width="160" style="border:1px solid #000;">宝贝名称</td>',m++),""!==s&&(c+='<td width="54" style="border:1px solid #000;">宝贝简称</td>',m++),""!==n&&(c+='<td width="86" style="border:1px solid #000;">宝贝属性</td>',m++),""!==l&&(c+='<td width="55" style="border:1px solid #000;">商家编码</td>',m++),""!==d&&(c+='<td width="26" style="border:1px solid #000;">数量</td>',m++),""!==o&&(c+='<td width="55" style="border:1px solid #000;">宝贝单价</td>',m++),""!==r&&(c+='<td width="55" style="border:1px solid #000;">实付金额</td>',m++),""!==p&&(c+='<td width="55" style="border:1px solid #000;">优惠金额</td>',m++);for(var u=0,h=t.length||i.length;h>u;u++){var f='<tr style="border:1px solid #000;">';if(""!==t&&(f+='<td style="border:1px solid #000;">'+(u+1)+"</td>"),""!==a&&(f+='<td style="border:1px solid #000;"><img src="'+a[u]+'_50x50.jpg" alt="" style="width: 50px; height: 50px" /></td>'),""!==i&&(f+="<td class='ft-left' style=\"border:1px solid #000;\">"+i[u]+"</td>"),""!==s){var v="undefined"==typeof s[u]?"&nbsp;":s[u];f+='<td style="border:1px solid #000;">'+v+"</td>"}""!==n&&(f+='<td style="border:1px solid #000;">'+n[u]+"</td>"),""!==l&&(f+="<td style='word-wrap: break-word; text-align: left; word-break: normal;border:1px solid #000;'>"+l[u]+"</td>"),""!==d&&(f+='<td style="border:1px solid #000;">'+d[u]+"</td>"),""!==o&&(f+='<td style="border:1px solid #000;">'+o[u]+"</td>"),""!==r&&(f+='<td style="border:1px solid #000;">'+r[u]+"</td>"),""!==p&&(f+='<td style="border:1px solid #000;">'+p[u]+"</td>"),f+="</tr>",_+=f}{var g=e.item_num_total,b=e.item_payment_total,y=e.item_discount_total,x=e.package_weight;e.post_fee}_+='<td style="border:1px solid #000;" colspan="'+m+'">',"undefined"!=typeof g&&(_+='<span style="padding: 0 10px">宝贝总数：'+g+"</span>"),"undefined"!=typeof b&&(_+='<span style="padding: 0 10px">实付总额：'+b+"</span>"),"undefined"!=typeof y&&(_+='<span style="padding: 0 10px">优惠总额：'+y+"</span>"),"undefined"!=typeof x&&(_+='<span style="padding: 0 10px">宝贝重量：'+x+"</span>"),_+="</td>";var w=['<table width="100%" style="border:1px solid #000;">',"<thead>",'<tr style="border:1px solid #000;">',c,"</tr>","</thead>","<tbody>",_,"</tbody>","</table>"];return w.join("")},getPtDeliverHtm:function(e,t,i){for(var a="",s=t.templateType,n=0,l=e.length;l>n;n++){var d=this._deliverDataFormat(e[n],t);switch(t.fields&&-1!=t.fields.indexOf("trade_print_num")&&(d.currPageNo=i),s){case 2:var o=RC.template.get("template.pt.deliver.header_4km",d),r=RC.template.get("template.pt.deliver.footer_4km",d);break;case 1:var o=RC.template.get("template.pt.deliver.header_4wlb",d),r=RC.template.get("template.pt.deliver.footer_4wlb",d);break;case 0:var o=RC.template.get("template.pt.deliver.header",d),r=RC.template.get("template.pt.deliver.footer",d);break;default:var o=RC.template.get("template.pt.deliver.header",d),r=RC.template.get("template.pt.deliver.footer",d)}if(d.custom_content=d.custom_content?d.custom_content.replace(/\n/g,"<br/>"):"",2==s)var p=this._getDeliveKMTableHtml(d);else var p=this._getDeliveTableHtml(d);a+=o+'<div class="order-pro-list">'+p+"</div>"+r}return'<div class="pt_public ft-left" style="width: 210mm; font-size:'+t.fontSize+"px; font-family:"+t.font+'"><div class="shop-order-templ">'+a+"</div></div>"},printPtDeliverHtm:function(e,t,i){var a=e.template,s=(a.paperSize,a.width),n=a.height,l=-a.verticalOffset,d=a.horizontalOffset,o=a.fontSize,r=a.font,p=a.bold?"bold":"normal",c=a.offsetNum,_=a.offsetUp,m=1===_?-a.offsetValue:a.offsetValue,u=0,h="<style> * {font-size: "+o+"; font-family: "+r+"; font-weight: "+p+"} html,body, h2, p, dl, dt, dd, ul, ol, li, pre, strong, fieldset, button, input, textarea {margin: 0;padding: 0}body, button, input, select, textarea {font: normal 12px/1.5 '宋体', microsoft yahei, 'lucida grande', tahoma, verdana, arial, STHeiTi, simsun, sans-serif;}ul, ol {list-style: none} table {width: 100%;table-layout: fixed;text-align: center;border-collapse: collapse;border-spacing: 0;}  td, th {border-width: 1px;border-style: solid;border-color: gray;border-collapse: collapse} td, th {margin: 0;padding: 5px 0;}.ft-left {text-align: left;}.mr_40 {margin-right: 40px;}.shop-order-header {margin: 0 auto;padding: 10px 0;text-align: center;}.shop-order-header span { width: 300px; height: 30px;text-align: center;font-size: 18px;font-family: '微软雅黑';overflow: hidden;color: #000;display: inline-block;} .info-list {padding: 5px 10px} .info-list ul {zoom: 1;overflow: hidden; margin: 0; padding: 0} .info-list li {float: left;list-style:none;display: inline;width: 33%;padding: 0; text-align: left}.ft-left {text-align: left;}.pd_10{padding:10px}</style>",f=a.templateType;try{var v=getLodop();if(null!=v&&"undefined"!=typeof v.VERSION){for(var g,b=0,y=0;y<e.fieldValues.length;){var x=e.fieldValues.slice(y,y+11),y=y+11;v.PRINT_INIT("发货单批量打印"+y),11!=y&&1==_?u+=-(11%c)*(a.offsetValue/c).toFixed(3):11!=y&&0==_&&(u+=11%c*(a.offsetValue/c).toFixed(3));for(var w=0,k=x.length;k>w;w++){var T=this._deliverDataFormat(x[w],a);switch(e.template.fields&&-1!=e.template.fields.indexOf("trade_print_num")&&(T.currPageNo=11*b+w+1),f){case 2:var S=RC.template.get("template.pt.deliver.header_4km",T),C=RC.template.get("template.pt.deliver.footer_4km",T);break;case 1:var S=RC.template.get("template.pt.deliver.header_4wlb",T),C=RC.template.get("template.pt.deliver.footer_4wlb",T);break;case 0:var S=RC.template.get("template.pt.deliver.header",T),C=RC.template.get("template.pt.deliver.footer",T);break;default:var S=RC.template.get("template.pt.deliver.header",T),C=RC.template.get("template.pt.deliver.footer",T)}if(2==f)var I=this._getDeliveKMTableHtml(T);else var I=this._getDeliveTableHtml(T);w%c==0&&0!==w&&(u+=m);var E="undefined"==typeof x[w].qrcode?1:2;E="undefined"==typeof x[w].trade_barcode?E:E+1;var P=0==f?"96%":.96*s+"mm";if(v.ADD_PRINT_HTM(l+u+2+"mm",d+"mm",P,n+"mm",h+S+I+C),v.SET_PRINT_STYLEA(0,"Offset2Top",14),v.SET_PRINT_STYLEA(0,"TableRowThickNess",59),"undefined"!=typeof x[w].trade_barcode){var $=0==f?306:206,J=10,N=0;0==f?N=20:1==f?N=120:2==f&&(J=62,N=180),v.ADD_PRINT_BARCODE(J,N,$,55,"128B",x[w].trade_barcode)}if("undefined"!=typeof x[w].qrcode){var D=""==x[w].qrcode?"http://www.taobao.com":x[w].qrcode;v.ADD_PRINT_BARCODE(40,0==f?700:270,"20mm","20mm","QRCode",D)}v.NEWPAGEA()}v.SET_PRINTER_INDEXA(t||-1),v.SET_PRINT_PAGESIZE(1,10*s,10*n,""),g=v.PRINT(),b+=1}i&&i(g)}}catch(R){console.log(R)}},printCN:function(data,printerId,callBack){var CNPrint=getCaiNiaoPrint();if(null!=CNPrint&&"undefined"!=typeof CNPrint.VERSION){var _status;CNPrint.PRINT_INITA(0,0,"100mm","180mm","菜鸟电子面单打印任务");for(var m=0;m<data.fieldValues.length;m++){data.fieldValues[m].trade_print_num=m,CNPrint.SET_PRINT_IDENTITY("AppKey=12001121&Seller_ID="+(data.fieldValues[m].seller_id?data.fieldValues[m].seller_id:data.template.taobaoId)),CNPrint.SET_PRINT_MODE("CAINIAOPRINT_MODE","CP_CODE="+data.template.cpCode+"&CONFIG="+(data.fieldValues[m].print_config?data.fieldValues[m].print_config:"")),CNPrint.SET_PRINT_PAGESIZE(1,"100mm","180mm",""),CNPrint.ADD_PRINT_DATA("ProgramData",data.template.cainiaoEncryptedFields);for(var prop in data.fieldValues[m])data.fieldValues[m][prop]?CNPrint.SET_PRINT_CONTENT(prop,data.fieldValues[m][prop]):void 0;var fieldSettingsStandard=data.template.fieldSettingsStandard;if(fieldSettingsStandard)for(var i=0;i<fieldSettingsStandard.length;i++){var field=fieldSettingsStandard[i].field,x=fieldSettingsStandard[i].x?fieldSettingsStandard[i].x:0,y=fieldSettingsStandard[i].y?fieldSettingsStandard[i].y:0;switch(width=fieldSettingsStandard[i].width?fieldSettingsStandard[i].width:150,height=fieldSettingsStandard[i].height?fieldSettingsStandard[i].height:20,field){case"custom_qrcode":CNPrint.SET_PRINT_CONTENT("custom_qrcode",""),CNPrint.ADD_PRINT_BARCODE(y,x,"20mm","20mm","QRCode",fieldSettingsStandard[i].description);break;case"trade_barcode":CNPrint.SET_PRINT_CONTENT("trade_barcode",""),CNPrint.ADD_PRINT_BARCODE(y,x,width,height,"128B",data.fieldValues[m][field]);break;case"trade_print_num":CNPrint.SET_PRINT_CONTENT("trade_print_num",m+1+"");break;default:var value=data.fieldValues[m][field];"string"==typeof value&&(value=value.replace(/,/g,"\n").replace(/&#44/g,",").replace(/<br\/>/g,"\n")),-1!=field.indexOf("_time")&&(value=RC.util.date.getdate(value,"YY-MM-DD HH:MM:SS")),fieldSettingsStandard[i].edit?value?CNPrint.SET_PRINT_CONTENT(field,value):void 0:CNPrint.SET_PRINT_CONTENT(field,value?value:"")}}var fieldValuesStandard=data.template.fieldValuesStandard;if(fieldValuesStandard)for(var i=0;i<fieldValuesStandard.length;i++)with(fieldValuesStandard[i])switch(name){case"ali_waybill_cp_logo_up":CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_up","PreviewOnly",0),CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_down","PreviewOnly",0);break;case"ali_waybill_service":var _vs=value.split(";");for(var v in _vs){var _service=_vs[v].split("=");data.fieldValues[m][_service[0]]&&(_service[1]=data.fieldValues[m][_service[0]],"ali_waybill_ext_send_date"==_service[0]&&(_service[1]=RC.util.date.getdate(_service[1],"YY-MM-DD"))),_vs[v]=_service.join("=")}CNPrint.SET_PRINT_CONTENT(name,_vs.join(";"));break;case"ali_waybill_product_type":var types=value.split(" ");for(var t in types)-1!=types[t].indexOf("(")&&(types[t]=types[t].substring(types[t].indexOf("(")+1,types[t].indexOf(")")));CNPrint.SET_PRINT_CONTENT(name,types.join(" "));break;default:CNPrint.SET_PRINT_CONTENT(name,value)}CNPrint.NewPageA()}CNPrint.SET_PRINTER_INDEXA(printerId||-1),_status=CNPrint.PRINT(),callBack&&callBack(_status)}},getPtWlbExpressData:function(e,t,i){var a=RC.pages._fn_act_get_hashs(),s="trade_print_wlb_data",n=e;"pt"===a.root&&"custom"===a.app&&(s="pt_custom_user_printdata",n={ids:e.tids,mandatory:e.mandatory,templateId:e.templateId,templateType:1,templateTaobaoId:e.templateTaobaoId},a.queryId||1!=a.queryId||(n.sendGoods=0)),API[s](n,$.proxy(function(e){this.sourcesWlbData=$.extend(!0,{},e),t&&t(this.sourcesWlbData)},this),$.proxy(function(){i&&i()},this),!1)},getPtWlbHtml:function(e,t){var i=e.fieldValues,a=e.template;if(0==a.templateType){for(var s="",n=a.cpCode||"",l=0,d=i.length;d>l;l++){i[l].previewCpCode=n.toLowerCase(),i[l].cpCode=n.toUpperCase();var o=new Date;i[l].currentDate=[o.getFullYear(),o.getMonth()+1,o.getDate()].join("-")+" "+[o.getHours(),o.getMinutes(),o.getSeconds()].join(":");var r=a.fieldValuesStandard;if(r)for(var p=0;p<r.length;p++)switch(r[p].name){case"ali_waybill_service":for(var c=r[p].value.split(";"),_=0;_<c.length;_++){var m=c.pop().split("=");("ali_waybill_serv_cod_amount"==m[0]||"ali_waybill_serv_dest_amount"==m[0])&&(m[1]=i[l][m[0]]?i[l][m[0]]:""),"ali_waybill_ext_send_date"==m[0]&&(m[1]=i[l][m[0]]?RC.util.date.getdate(i[l][m[0]],"YY-MM-DD"):""),m[0]=serviceObj[m[0]],c.unshift(m.join("："))}var u=['<div style="padding:5px">',c.slice(0,5).join("<br>"),"</div>"];i[l][r[p].name]=u.join("");break;case"ali_waybill_product_type":var h=r[p].value.split(" ");for(var f in h)-1!=h[f].indexOf("(")&&(h[f]=h[f].substring(h[f].indexOf("(")+1,h[f].indexOf(")")));i[l][r[p].name]=h.join(" ");break;default:i[l][r[p].name]=r[p].value}var v=a.fieldSettingsStandard;if(v){for(var g=[],p=0;p<v.length;p++){var b=v[p].field;if(v[p].edit)var y=v[p].description,x=20==v[p].height?"40px":v[p].height+"px";else var y=e.fieldValues[l][b]?e.fieldValues[l][b]:"",x=2*v[p].height+"px";-1!=b.indexOf("_time")&&(y=RC.util.date.getdate(y,"YY-MM-DD HH:MM:SS"));var w="";switch(b){case"custom_qrcode":w="ali_waybill_standard_mdul_QR_code",y="";break;case"trade_barcode":y='<img src="resources/css/build/images/logo/bar_code_1.png" width="'+v[p].width+'" height="'+v[p].height+'">';break;case"trade_print_num":y=t?t+"":"1"}"string"==typeof y&&(y=y.replace(/\\n/g,"<br/>").replace(/&#44;/g,",")),g.push('<div class="'+w+'" style="position:absolute;width:'+(v[p].width?v[p].width:150)),g.push("px;height:"+(v[p].height?v[p].height:23)+"px;"),g.push("max-height:"+x+";font-size:"+(v[p].fontSize?v[p].fontSize+4:12)),g.push("px;font-weight:"+(v[p].bold?700:400)),g.push(";left:"+(v[p].x?v[p].x:0)),g.push("px;top:"+(v[p].y?v[p].y-555:0)),g.push('px;text-align:left;overflow:hidden;word-wrap:break-word;word-break:normal;">'+(y?y:"")),g.push("</div>")}i[l].ali_waybill_define=g.join("")}s+=RC.template.get("template.pt.wlb.all.standard",i[l])}return s}if(1==a.templateType){for(var k="",T=0,S=i.length;S>T;T++)i[T].trade_print_num=t?t:1,k+=this._getWlbCustomHtml(a,i[T]);return k}},_getWlbCustomHtml:function(e,t,i){for(var a=this,s="",n=e.fieldSettings,l="",d=["waybill_num_barcode_up","waybill_num_barcode_down","custom_qrcode","qrcode","trade_barcode_up","trade_barcode_down","package_center_code"],o=["trade_create_time_up","trade_pay_time_up","trade_create_time_down","trade_pay_time_down","trade_print_time","trade_deliver_time"],r=[],p=["item_title_up","item_title_down","item_short_title_up","item_short_title_down","item_specification_up","item_specification_down","item_outer_id_up","item_outer_id_down","item_price_up","item_price_down","item_short_title-item_num_up","item_short_title-item_num_down","item_outer_id-item_num_up","item_outer_id-item_num_down","item_short_title-item_specification-item_num_up","item_short_title-item_specification-item_num_down","item_outer_id-item_specification-item_num_up","item_outer_id-item_specification-item_num_down","item_short_title-item_outer_id-item_num_up","item_short_title-item_outer_id-item_num_down","item_short_title-item_outer_id-item_specification-item_num_up","item_short_title-item_outer_id-item_specification-item_num_down","item_num-item_short_title_up","item_num-item_short_title_down","item_num-item_outer_id_up","item_num-item_outer_id_down","item_num-item_short_title-item_specification_up","item_num-item_short_title-item_specification_down","item_num-item_outer_id-item_specification_up","item_num-item_outer_id-item_specification_down","item_num-item_short_title-item_outer_id_up","item_num-item_short_title-item_outer_id_down","item_num-item_short_title-item_outer_id-item_specification_up","item_num-item_short_title-item_outer_id-item_specification_down"],c=0,_=n.length;_>c;c++)if(n[c].show)if(-1!==$.inArray(n[c].field,d)){var m="128B",u="";("custom_qrcode"==n[c].field||"qrcode"==n[c].field)&&(m="QRCode",u=a._getOfficialQrCodeVal(e.cpCode),u&&(n[c].height=u.defHeight,n[c].width=u.defWidth,n[c].defVal=u.defVal||t.waybill_num_barcode_up)),"custom_qrcode"==n[c].field&&u&&(n[c].defVal=t.custom_qrcode),r.push({y:n[c].y,x:n[c].x,width:n[c].width,height:n[c].height,codeType:m,field:n[c].field,defVal:n[c].defVal||""})}else{var h=t[n[c].field],f="";-1!=$.inArray(n[c].field,o)?(("trade_print_time"==n[c].field||"trade_print_time_up"==n[c].field||"trade_print_time_down"==n[c].field)&&(t[n[c].field]=(new Date).getTime()),f="946656000000"==t[n[c].field]||"undefined"==typeof t[n[c].field]?"":RC.util.date.getdate(t[n[c].field],"YY-MM-DD HH:MM:SS")):f="undefined"==typeof h?n[c].description:h,f&&"string"==typeof f&&(f=f.replace(/,/g,"<br/>"));var v=n[c].bold?"bold":"normal",g="";-1!=$.inArray(n[c].field,p)&&(g="overflow:hidden;"),l+=['<div style="position: absolute; z-index: 10;'+g+" left: "+n[c].x+"px; top: "+n[c].y+"px; width: "+n[c].width+"px; height: "+n[c].height+'px;" >','<span style="font-weight: '+v+"; font-size: "+n[c].fontSize+"px; font-family: "+n[c].font+'; ">'+f+"</span>","</div>"].join("")}var b=e.heightCustom-4,y=e.cpCode,x=RC.template.get("template.pt.wlb."+y+".custom",{previewCpCode:y.toLowerCase()});return s='<div style="position:relative;text-align:left; width:'+e.widthCustom+"mm; height:"+b+'mm;">'+x+l+"</div>",i?{_wlbCustomHtml:s,_barcodeField:r}:s},_getOfficialQrCodeVal:function(e){e=e.toUpperCase();var t={STO:{defVal:"http://www.sto.cn/",defWidth:"30mm",defHeight:"30mm"},YTO:{defVal:"http://www.yto.net.cn/downloadApp.html",defWidth:"24mm",defHeight:"24mm"},ZTO:{defVal:"http://www.zto.cn",defWidth:"25mm",defHeight:"25mm"},HTKY:{defVal:"",defWidth:"22mm",defHeight:"22mm"},EMS:{defVal:"http://www.ems.com.cn",defWidth:"26mm",defHeight:"26mm"},EYB:{defVal:"http://www.ems.com.cn",defWidth:"26mm",defHeight:"26mm"},YUNDA:{defVal:"http://www.yundaex.com",defWidth:"22mm",defHeight:"22mm"},TTKDEX:{defVal:"http://www.ttkdex.com/",defWidth:"30mm",defHeight:"30mm"},UC:{defVal:"http://www.uc56.com",defWidth:"25mm",defHeight:"25mm"},POSTB:{defVal:"http://www.11185.cn",defWidth:"30mm",defHeight:"30mm"},ZJS:{defVal:"",defWidth:"30mm",defHeight:"30mm"},GTO:{defVal:"http://www.gto365.com/",defWidth:"30mm",defHeight:"30mm"},QFKD:{defVal:"http://www.qfkd.com.cn/",defWidth:"30mm",defHeight:"30mm"},FAST:{defVal:"http://www.fastexpress.com.cn/",defWidth:"30mm",defHeight:"30mm"},DBL:{defVal:"http://www.deppon.com/",defWidth:"20mm",defHeight:"20mm"}};
return t[e]},printPtWlb:function(e,t,i){var a=(e.fieldValues,e.template);if(0==a.templateType&&PrintPt.printCN(e,_pinterId,function(){}),1==a.templateType)try{var s=getLodop();if(null!=s&&"undefined"!=typeof s.VERSION){for(var n,l=a.verticalOffsetDefaultCustom,d=a.horizontalOffsetCustom,o=a.widthCustom,r=a.heightCustom,p=0;p<e.fieldValues.length;){var c=e.fieldValues.slice(p,p+15);p+=15,s.PRINT_INITA(-l+"mm",d+"mm",o+"mm",r+"mm","自定义电子面单批量打印"+p);for(var _=0,m=c.length;m>_;_++){c[_].trade_print_num=p-15+_+1;var u=this._getWlbCustomHtml(a,c[_],!0);s.ADD_PRINT_HTM(0,0,o+"mm",r+"mm",u._wlbCustomHtml);for(var h=u._barcodeField,f=0,v=h.length;v>f;f++)"QRCode"==h[f].codeType?s.ADD_PRINT_BARCODE(h[f].y,h[f].x,h[f].width,h[f].height,h[f].codeType,h[f].defVal):c[_][h[f].field]&&s.ADD_PRINT_BARCODE(h[f].y,h[f].x,h[f].width,h[f].height,h[f].codeType,c[_][h[f].field]);s.NewPageA()}s.SET_PRINTER_INDEXA(t||-1),s.SET_PRINT_PAGESIZE(1,10*o,10*r,""),n=s.PRINT()}i&&i(n)}}catch(g){console.log(g)}},_getSFType:function(e){var t={"0false":0,"0true":1,"1false":2,"1true":3},i=e.fieldValuesStandard,a=0;if(i&&i.length){for(var s=[],n=0;n<i.length;n++)"sf_wlb_type"==i[n].name&&(s[0]=""+i[n].value),"sf_wlb_subtype"==i[n].name&&(s[1]=""+i[n].value);a=t[s.join("")]}return a},getPtFetchHtm:function(e,t){for(var i={trade_item_type:"商品种类",trade_item_num:"商品数量",trade_price_num:"商品金额",trade_print_time:"打印时间",trade_custom_content:"自定义内容"},a={table_item_id:"序号",table_item_pic:"宝贝图片",table_item_title:"宝贝名称",table_item_short_title:"宝贝简称",table_item_properties:"宝贝属性",table_item_outer_id:"商家编码",table_getter_num:"拿货数量",table_price:"单价",table_supper:"供应商"},s={table_item_id:"id",table_item_outer_id:"outerSkuId",table_item_pic:"picPath",table_item_short_title:"shortTitle",table_item_properties:"skuPropertiesName",table_item_title:"title",table_price:"price",table_getter_num:"deliverNum"},n={header:"",dataList:[],footer:"",template:""},l='<div class="fetch_wrap mt_10 mb_10 ft-center" style="max-height:500px;overflow-y:auto; *position: relative; *z-index: 999">',d=['<div class="J_Preview" style="display:inline-block">','<div class="pt_public ft-left" style="width: 210mm; font-size:12px; font-family:新宋体; font-weight:'+(t.bold?"bold":"normal")+'">'],o=e[0],r=0;r<o.orders.length;r++)o.orders[r].shortTitle=o.orders[r].shortTitle?o.orders[r].shortTitle:o.orders[r].title;t.title&&d.push(['<div class="shop-order-templ">','<h2 class="shop-order-header" style="position: relative; height: 42px;">','<span data-field-name="title">'+t.title+"</span>","</h2>"].join("")),d.push(['<div class="info-list" style="margin-top: 8px;">',"<ul>"].join(""));var p=t.fields.split(",");for(var c in p)-1!=p[c].indexOf("trade_")&&"trade_custom_content"!=p[c]&&d.push('<li data-field-name="'+p[c]+'">'+i[p[c]]+"："+o[p[c]]+"</li>");if(t.customContent){var _='<li style="width:95%;">'+t.customContent+"</li>";d.push(_)}d.push(["</ul>","</div>"].join(""));var m=["table_item_id"];for(var c in p)-1!=p[c].indexOf("table_")&&m.push(p[c]);d.push(['<table width="100%" style="border:1px solid #000;">',"<tr>"].join(""));for(var u={},r=0;r<m.length;r++){d.push('<td style="border:1px solid #000;" class="'+m[r]+'" width="'+("table_item_id"==m[r]?"30":"table_item_title"==m[r]?"200":"60")+'">'+a[m[r]]+"</td>");for(var h=[],f=0;f<o.orders.length;f++){var v=o.orders[f][s[m[r]]];h.push(v?v:"")}u[m[r]]=h}d.push("</tr>"),n.header=d.join("");for(var g=[],f=0,b=o.orders.length;b>f;f++){for(var y=["<tr>"],r=0;r<m.length;r++)y.push("table_item_pic"==m[r]?'<td style="border:1px solid #000;" class="'+m[r]+'" width="60"><img style="width: 50px; height: 50px" src="'+u[m[r]][f]+'"/></td>':'<td style="border:1px solid #000;" class="'+m[r]+'" width="'+("table_item_id"==m[r]?"30":"table_item_title"==m[r]?"200":"60")+'">'+u[m[r]][f]+"</td>");y.push("</tr>");var x=y.join("");g.push(x),d.push(x)}for(var w=0;w<g.length;w+=60)n.dataList.push(g.slice(w,w+60).join(""));d.push("</table>"),d.push("</div></div></div>");var k=['<div class="fetch-preview-footer" style="text-align:center;">','<span class="ft_14">',"订单数：",o.trade_num,"</span>",'<span class="ft_14 ml_40">拿货单打印：</span>','<select class="fetch-printer" data-zIndex="11000" data-position="top">'];this.LODOP=getLodop();for(var T=this.LODOP.GET_PRINTER_COUNT(),r=0;T>r;r++)k.push('<option value="'+r+'">'+this.LODOP.GET_PRINTER_NAME(r)+"</option>");return k.push('</select><a class="btn btn-primary ml_10 J_Click" data-name="fetch_print">打印</a></div>'),n.template=[l,d.join(""),"</div>",k.join("")].join(""),n},getPtPickerExpressData:function(e,t){API.trade_print_picker_data(e,function(e){this.sourcesPickerData=$.extend(!0,{},e),t&&t(this.sourcesPickerData)})},getPtPickerHtm:function(e,t){for(var i=this,a={header:"",dataList:[],footer:"",template:""},s={table_item_id:"id",table_item_pic:"picPath",table_trade_details:"detail",table_item_title:"title",table_item_short_title:"shortTitle",table_item_properties:"skuPropertiesName",table_item_outer_id:"outerSkuId",table_deliver_num:"deliverNum"},n=[],l=[],d=0;d<e[0].orders.length;d++)e[0].orders[d].shortTitle=e[0].orders[d].shortTitle?e[0].orders[d].shortTitle:e[0].orders[d].title;$.ajax({url:t.templateContent,type:"get",async:!1,success:function(a){var d=t.fontSize+"px",o=t.font,r=t.bold?"bold":"normal",p=t.title,c=t.customContent;i.$el=$('<div class="pt_public ft-left" style="font-size:'+d+";font-family:"+o+"; font-weight:"+r+';width:210mm;">'+a+"</div>");var _=t.fields.split(","),m={table_item_id:[]};for(var u in s){for(var h=!1,f=0;f<_.length;f++)u==_[f]&&(h=!0);h||"table_item_id"!=u&&i.$el.find("td."+u).remove()}for(var f=0;f<e[0].orders.length;f++)m.table_item_id.push(e[0].orders[f].id);for(var f=0,v=_.length;v>f;f++)if("custom_content"==_[f]&&(i.$el.find("[data-field-name=custom_content]").attr("disabled","disabled").attr("placeholder","").css("background","#fff"),i.$el.find("[data-field-name=custom_content]").text(c)),"title"==_[f]&&(i.$el.find("[data-field-name=title]").attr("disabled","disabled").css("background","#fff"),i.$el.find("[data-field-name=title]")[0].defaultValue=p),i.$el.find("[data-field-name="+_[f]+"]").show(),-1!=_[f].indexOf("table_")){for(var g=[],b=0;b<e[0].orders.length;b++){var y=e[0].orders[b][s[_[f]]];g.push(y?y:"")}m[_[f]]=g}if((t.customContent||-1!=t.fields.indexOf("trade_custom_content"))&&(i.$el.find("ul").append('<li style="width:100%;">'+t.customContent+"</li>"),i.$el.find("textarea").remove()),t)for(var x=t.fields.split(","),f=0;f<x.length;f++)-1==x[f].indexOf("table_")&&i.$el.find('li[data-field-name="'+x[f]+'"],input[data-field-name="'+x[f]+'"]').show();var w=e[0];for(var u in w){var k=i.$el.find("[data-field-name="+u+"]");k.length>0&&(k.show(),k.html(k.html().split("：")[0]+"："+w[u]))}n=i.$el[0].outerHTML.split("</table>");for(var T=[],f=0;f<e[0].orders.length;f++){var S=["<tr>"],v=0;for(var C in m)"table_item_pic"==C?S.push('<td class="table_item_pic" '+(-1!=t.fields.indexOf("table_trade_details")?'rowspan="2"':"")+'><img style="width: 50px; height: 50px; margin:5px;" src="'+m[C][f]+'"></td>'):"table_trade_details"!=C&&S.push(['<td class="'+C+'" '+(-1!=t.fields.indexOf("table_trade_details")&&"table_item_id"==C?'rowspan="2"':"")+">"+m[C][f]+"</td>"].join("")),"table_item_pic"!=C&&"table_item_id"!=C&&"table_trade_details"!=C&&(v+=1);S.push("</tr>"),T.push(S.join("")),-1!=t.fields.indexOf("table_trade_details")?T.push('<tr><td class="table_trade_details" colspan="'+v+'" style="text-align:left;padding:0px 10px;">'+m.table_trade_details[f]+"</td></tr>"):""}if(i.$el.find(".pick-table > table").append(T.join("")),t)for(var x=t.fields.split(","),f=0;f<x.length;f++)-1!=x[f].indexOf("table_")&&i.$el.find("td."+x[f]).show();for(var f=0;f<T.length;f+=120)l.push(T.slice(f,f+120).join(""))}});var a={header:n[0],dataList:l,footer:n[1],template:i.$el[0].outerHTML};return a},printPtPickerHtm:function(e,t){var i=getLodop(),a=e.data.template,s=a.width,n=a.height,l=-a.verticalOffset,d=a.horizontalOffset,o=a.fontSize,r=a.font,p=a.bold?"bold":"normal",c=(a.offsetNum,a.offsetUp),_=(1===c?-a.offsetValue:a.offsetValue,0),m="<style> * {font-size: "+o+"; font-family: "+r+"; font-weight: "+p+"} html,body, h2, p, dl, dt, dd, ul, ol, li, pre, strong, fieldset, button, input, textarea {margin: 0;padding: 0}body, button, input, select, textarea {font: normal 12px/1.5 '宋体', microsoft yahei, 'lucida grande', tahoma, verdana, arial, STHeiTi, simsun, sans-serif;}ul, ol {list-style: none} table {width: 95%;table-layout: fixed;text-align: center;border-collapse: collapse;border-spacing: 0;}  td, th {border-width: 1px;border-style: solid;border-color: black;border-collapse: collapse} td, th {margin: 0;padding: 5px 0;}.ft-left {text-align: left;}.mr_40 {margin-right: 40px;}.shop-order-header {margin: 0 auto;padding: 10px 0;text-align: center;}.shop-order-header input { width: 300px; height: 30px; border:none; text-align: center;font-size: 18px !important;font-family: '微软雅黑';overflow: hidden;color: #000;display: inline-block;}.shop-order-header span { width: 300px; height: 30px;text-align: center;font-size: 18px !important;font-family: '微软雅黑';overflow: hidden;color: #000;display: inline-block;} .info-list {padding: 5px 10px} .info-list ul {zoom: 1;overflow: hidden; margin: 0; padding: 0; max-width:95%;} .info-list li {float: left;list-style:none;display: inline;width: 33%;padding: 0; text-align: left; word-wrap: break-word; break-word: break-all;}.ft-left {text-align: left;}.pd_10{padding:10px}</style>",u=e.data.fieldValues?this.getPtPickerHtm(e.data.fieldValues,e.data.template):e.tmpl;if(null!=i&&"undefined"!=typeof i.VERSION)if(i.PRINT_INIT("拣货单批量打印"),i.SET_PRINTER_INDEXA(t||-1),i.SET_PRINT_PAGESIZE(1,10*s,10*n,""),i.SET_PRINT_STYLE("Bold",a.bold?1:0),e.data.fieldValues){i.ADD_PRINT_HTM(l+_+2+"mm",d+"mm",.96*s+"mm",n+"mm",m+u.header+u.dataList[0]+"</table>"),i.SET_PRINT_STYLEA(0,"Offset2Top",14),i.SET_PRINT_STYLEA(0,"TableRowThickNess",59),i.PRINT();for(var h=1;h<u.dataList.length;h++){i.PRINT_INIT("拣货单批量打印"+h),i.SET_PRINTER_INDEXA(t||-1),i.SET_PRINT_PAGESIZE(1,10*s,10*n,"");var f=["<table>",u.dataList[h],"</table>"].join("");h==u.dataList.length-1&&(f+=u.footer),i.ADD_PRINT_HTM(l+_+2+"mm",d+"mm",.96*s+"mm",n+"mm",m+f),i.SET_PRINT_STYLEA(0,"Offset2Top",14),i.SET_PRINT_STYLEA(0,"TableRowThickNess",59),i.PRINT()}}else i.ADD_PRINT_HTM(l+_+2+"mm",d+"mm",.96*s+"mm",n+"mm",m+u),i.SET_PRINT_STYLEA(0,"Offset2Top",14),i.SET_PRINT_STYLEA(0,"TableRowThickNess",59),i.PREVIEW()},printPtFetchHtm:function(e,t){var i=getLodop(),a=e.data.template,s=a.width,n=a.height,l=-a.verticalOffset,d=a.horizontalOffset,o=a.fontSize,r=a.font,p=a.bold?"bold":"normal",c=(a.offsetNum,a.offsetUp),_=(1===c?-a.offsetValue:a.offsetValue,0),m="<style> * {font-size: "+o+"px; font-family: "+r+"; font-weight: "+p+" !important} html,body, h2, p, dl, dt, dd, ul, ol, li, pre, strong, fieldset, button, input, textarea {margin: 0;padding: 0}body, button, input, select, textarea {font: normal 12px/1.5 '宋体', microsoft yahei, 'lucida grande', tahoma, verdana, arial, STHeiTi, simsun, sans-serif;}ul, ol {list-style: none} table {width: 95%;table-layout: fixed;text-align: center;border-collapse: collapse;border-spacing: 0;}  td, th {border-width: 1px;border-style: solid;border-color: gray;border-collapse: collapse; font-weight: "+p+" } td, th {margin: 0;padding: 5px 0;}.ft-left {text-align: left;}.mr_40 {margin-right: 40px;}.shop-order-header {margin: 0 auto;padding: 10px 0;text-align: center;}.shop-order-header input { width: 300px; height: 30px; border:none; text-align: center;font-size: 18px !important;font-family: '微软雅黑';overflow: hidden;color: #000;display: inline-block;}.shop-order-header span { width: 300px; height: 30px; text-align: center;font-size: 18px !important;font-family: '微软雅黑';overflow: hidden;color: #000;display: inline-block;} .info-list {padding: 5px 10px} .info-list ul {zoom: 1;overflow: hidden; margin: 0; padding: 0; max-width:95%;} .info-list li {float: left;list-style:none;display: inline;width: 33%;padding: 0; text-align: left; word-wrap:break-word; break-word:break-all;}.ft-left {text-align: left;}.pd_10{padding:10px}</style>",u=e.data.fieldValues?this.getPtFetchHtm(e.data.fieldValues,e.data.template):e.tmpl;if(null!=i&&"undefined"!=typeof i.VERSION)if(i.PRINT_INIT("拿货单打印"),i.SET_PRINTER_INDEXA(t||-1),i.SET_PRINT_PAGESIZE(1,10*s,10*n,""),i.SET_PRINT_STYLE("Bold",a.bold?1:0),e.data.fieldValues){i.ADD_PRINT_HTM(l+_+2+"mm",d+"mm",.96*s+"mm",n+"mm",[m,u.header,u.dataList[0],"</table>"].join("")),i.SET_PRINT_STYLEA(0,"Offset2Top",14),i.SET_PRINT_STYLEA(0,"TableRowThickNess",59),i.PRINT();for(var h=1;h<u.dataList.length;h++){i.PRINT_INIT("拿货单批量打印"+h),i.SET_PRINTER_INDEXA(t||-1),i.SET_PRINT_PAGESIZE(1,10*s,10*n,"");var f=["<table>",u.dataList[h],"</table>"].join("");h==u.dataList.length-1&&(f=[f,u.footer].join("")),i.ADD_PRINT_HTM(l+_+2+"mm",d+"mm",.96*s+"mm",n+"mm",[m,f].join("")),i.SET_PRINT_STYLEA(0,"TableRowThickNess",59),i.PRINT()}}else i.ADD_PRINT_HTM(l+_+2+"mm",d+"mm",.96*s+"mm",n+"mm",[m,u].join("")),i.SET_PRINT_STYLEA(0,"Offset2Top",14),i.SET_PRINT_STYLEA(0,"TableRowThickNess",59),i.PREVIEW()}};RC.controls.define("control.print_pt",{init:function(){return pirntPtObj}})}(jQuery,RayCloud),function(e,t){var i={name:"control.modify_shop_info",init:function(){var e=this;e.errTips={require:{},illegal:{}}},save:function(i){var a=this,s={},n=i.data||{};return e.each(a.errTips.require,function(t,i){e.trim(n[t])||(s[t]=i)}),e.each(n,function(e){var t;t===!1&&(s[e]=a.errTips.illegal[e])}),e.isEmptyObject(s)?(t.showLoading("正在保存店铺信息, 请稍等..."),void API.modify_shop_info({taobaoId:n.taobaoId,remark:n.remark},function(){t.clearShow(),i.success&&i.success()},function(e){t.clearShow(),i.fail&&i.fail(e)},!1,!1,!1)):void(i.fail&&i.fail(s))}};t.controls.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.common_express"),{name:"control.first_use_config_guide",init:function(t){var i=this;t=t||{},i.nick=t.nick||"",i.shopId=t.shopId||"",i.shopName=t.shopName||"— —",i.taobaoId=t.taobaoId||"",i.curStep=0,i.$pop=e(s.join("")),i.$navs=i.$pop.find(".ui-step-nav"),i.$panels=i.$pop.find(".ui-step-panel"),i.$stepBtn=i.$pop.find(".J_step-btn"),i.$pop.find(".J_nick").html(i.nick),i.$pop.find(".J_shopName").html(i.shopName),i.$pop.css({position:"fixed",left:0,top:0,zIndex:99,display:"none",visibility:"hidden"}),i.$mask=e("<div>"),i.$mask.css({display:"none",position:"fixed",left:0,top:0,zIndex:9,width:"100%",height:"100%",background:"#000",opacity:.2}),e("body").append(i.$pop).append(i.$mask),i.bind()},show:function(){var e=this;e.$pop.css({visibility:"visible"}).fadeIn(900),e.$mask.show(),e.place()},hide:function(){var e=this;e.$pop.css({display:"none",visibility:"hidden"}),e.$mask.hide()},bind:function(){var t=this;t.bindStatus||(t.bindStatus=!0,t.$pop.on("click",function(i){var a=e(i.target);if(a.hasClass("J_step-btn")&&!a.hasClass("disabled"))switch(t.curStep){case 0:t.saveShopInfo();break;case 1:t.saveExpressInfo();break;case 2:t.saveOrderInfo();break;case 3:t.guideComplete()}else a.hasClass("J_update-express-btn")&&t.syncExpress()}),t.$pop.find("input").on("keypress",function(){var i=e(this),a=i.attr("maxlength");a&&i.val().length>a&&i.val(t.val().substring(0,a))}),e(window).on("resize.first_use_config_guide",function(){t.place()}))},unbind:function(){var t=this;t.$pop.off("click"),t.$pop.find("input").off("keypress"),e(window).off("resize.first_use_config_guide")},destroy:function(){var e=this;e.hide(),e.unbind(),e.$pop.find("select").iSelect("destroy"),e.$pop.remove()},place:function(){var t=this,i=e(window).width(),a=e(window).height(),s=t.$pop.outerWidth(),n=t.$pop.outerHeight(),l=e(window).scrollTop(),d=(e(window).scrollLeft(),.5*(a-n)),o=.5*(i-s),r="fixed";0>d&&(d=l,r="absolute"),t.$pop.css({position:r,top:d,left:o})},next:function(){var e=this;e.curStep++,e.showPanel()},prev:function(){var e=this;e.curStep--,e.showPanel()},showPanel:function(){var e=this;e.$navs.removeClass("todo done current").eq(e.curStep).addClass("current").prevAll().addClass("done"),e.$navs.eq(e.curStep).nextAll().addClass("todo"),e.$panels.hide().eq(e.curStep).show(),e.$stepBtn.html(e.curStep==e.$panels.length-1?"进入系统":"下一步")},saveShopInfo:function(){var i=this,a={remark:i.$pop.find('[name="remark"]')},s={taobaoId:this.taobaoId};i.$pop.find(".J_modify-shop-info-tips").hide(),e.each(a,function(e,t){t.removeClass("ipt-error"),s[e]=t.val()}),i.ctrlModifyShopInfo||(i.ctrlModifyShopInfo=t.controls.get("control.modify_shop_info")),i.ctrlModifyShopInfo.save({data:s,success:function(){t.clearShow(),i.renderExpressInfo(),i.next()},fail:function(t){i.$pop.find(".J_modify-shop-info-tips").show(),e.each(t,function(e){a[e]&&a[e].addClass("ipt-error")})}})},renderExpressInfo:function(){var e=this;e.updateExpress()},saveExpressInfo:function(){var i=this,a=i.$pop.find(".J_express-slt");t.showLoading("正在保存快递单模板信息, 请稍等...");var s=a.data("value")+"";return""==s?(e.dialog({title:"提示",icon:"error.png",content:"请先选择默认的快递模版！",ok:!0}),void t.clearShow()):void(s.indexOf("w")>-1?API.pt_wlb_user_top({id:s.replace(/w/,"")},function(){t.clearShow(),i.next(),i.renderOrderInfo()},function(i){t.clearShow(),e.dialog.alert(i.message)},!1,!1,!1):API.pt_common_user_top({id:s},function(){t.clearShow(),i.next(),i.renderOrderInfo()},function(i){t.clearShow(),e.dialog.alert(i.message)},!1,!1,!1))},renderOrderInfo:function(){var i=this;i.$pop.find(".J_step-btn-disable-tip").html("正在同步订单.."),i.$stepBtn.addClass("disabled");var a,s;t.sub("global.trade_sync.progress",function(e){if(i.$pop){{e.currentCount,e.currentCount}a=e.complete;var n=e.result||{insertedTrades:{}};if(i.$pop.find(".J_trade-num-dfk").html(n.insertedTrades.waitPay||0),i.$pop.find(".J_trade-num").html(n.insertedTrades.waitSend||0),i.$pop.find(".J_trade-num-2").html(n.insertedTrades.waitConfirm||0),i.$pop.find(".J_trade-num-tf").html(n.insertedTrades.finished||0),i.$pop.find(".J_trade-num-tc").html(n.insertedTrades.closed||0),"fail"==e.status)return void t.showFail("同步失败！");if(e.error===!0)return i.$pop.find(".J_download-tips-2").show(),console.log(i.$pop,i.$pop.find(".J_Download_Warn")),i.$pop.find(".J_Download_Warn").show(),void(a=!0);a&&i.$pop.find(".J_download-tips").show(),a&&s&&(i.$pop.find(".J_step-btn-disable-tip").html(""),i.$stepBtn.removeClass("disabled"))}}),t.pub("global.trade_sync");var n=null,l=function(e){i.$pop.find(".J_trade-num-3").html(e.addItemOnSale+e.addItemInventory),e.error===!0?(s=!0,i.$pop.find(".J_download-tips-4").show(),i.$pop.find(".J_Download_Warn").show(),i.$stepBtn.removeClass("disabled")):e.complete===!0&&(s=!0,i.$pop.find(".J_download-tips-3").show()),a&&s&&(i.$pop.find(".J_step-btn-disable-tip").html(""),i.$stepBtn.removeClass("disabled"))},d=function(){API.item_sync_count({},e.proxy(function(e){var t=e.data;t.complete===!0||t.error===!0?l(t):(l(t),n=setTimeout(d,1e3))},this),function(){t.showFail("系统错误，请重试!")},!1,!1,!0)};API.item_sync({},function(){d()})},saveOrderInfo:function(){var e=this;e.next(),e.guideComplete()},guideComplete:function(){var e=this;return e.guide_complete?void API.user_closeguide({},function(){t.showSuccess("配置保存成功!"),e.destroy(),t.pub("control.first_user_config_guide.guide_success")},function(){t.showFail("配置保存失败, 请重试!")},!1,!1,!1):void(e.guide_complete=!0)},updateExpress:function(){var e=this,t=e.$pop.find(".J_express-slt");e.$pop.find(".J_step-btn-disable-tip").html("正在更新快递模板.."),e.$stepBtn.addClass("disabled"),API.pt_common_user_all({},function(i){var s=i.data;e.$pop.find(".J_express-clk").on("click",function(e){e.preventDefault(),a.show(s,t)}),e.$pop.find(".J_step-btn-disable-tip").html(""),e.$stepBtn.removeClass("disabled")})},syncExpress:function(){var e=this;t.showLoading("正在同步电子快递单, 请稍等..."),API.pt_wlb_user_sync({},function(){t.showSuccess("同步电子快递单成功！"),e.updateExpress()},function(){t.showWarn("同步失败，请重试！")},!1,!1,!1)}}),a={show:function(t,i){this._render(t),this.$elem=i,this.$dialog=e.dialog({title:"选择快递单模板",width:800,clear:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(t){if(!this.$el){for(var i=['<div class="clearfix" style="padding-left: 20px;">'],a=0,s=t.length;s>a;a++)i.push('<label class="f-lt" style="width:170px; height:22px;margin:5px 0;"><input type="radio" style="border: 2px solid transparent; margin: 0; box-shadow:none" name="id" data-text="'+t[a].templateName+'" value="'+t[a].templateId+'"> '+t[a].templateName+"</label>");i.push("</div>"),this.$el=e(i.join("")).appendTo("body"),this._event_bind()}},_event_bind:function(){this.$el.on("click","input[name=id]",e.proxy(this._fn_event_handler_express,this))},_event_unbind:function(){this.$el.off("click","input[name=id]")},_fn_event_handler_express:function(t){var i=e(t.currentTarget);this.$elem.val(i.data("text")),this.$elem.data("value",i.val()),this.hide()},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}},s=['<div class="user-config-guide-pop">',"<h2>超级掌柜<span> -- 首次使用引导</span></h2>",'<div class="guide-help">','<p>亲爱的[ <strong class="J_nick nick fc-orange"></strong> ]，欢迎您使用超级掌柜，您是第一次使用系统，请按照提示进行设置！</p>','<p>可以先了解下 <a href="http://bangpai.taobao.com/group/thread/548716-291599890.htm" target="_blank">超级掌柜使用帮助</a>，或者咨询我们的客服<a style="margin-left:5px;" target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid=guanghua2cc&siteid=cntaobao&status=2&charset=utf-8"><img border="0" src="http://amos.alicdn.com/online.aw?v=2&uid=guanghua2cc&site=cntaobao&s=2&charset=utf-8" /></a></p>',"</div>",'<div class="ui-step pd_15">','<div class="ui-step-hd mb_20">','<ul class="ui-step-navs ui-step-navs-4">','<li class="ui-step-nav first current">','<div class="ui-step-nav-cnt">','<div class="step-num">1</div>','<div class="step-name">店铺信息</div>','<div class="line"></div>',"</div>","</li>",'<li class="ui-step-nav todo">','<div class="ui-step-nav-cnt">','<div class="step-num">2</div>','<div class="step-name">快递模板</div>','<div class="line"></div>',"</div>","</li>",'<li class="ui-step-nav todo">','<div class="ui-step-nav-cnt">','<div class="step-num">3</div>','<div class="step-name">订单/商品下载</div>','<div class="line"></div>',"</div>","</li>",'<li class="ui-step-nav last todo">','<div class="ui-step-nav-cnt">','<div class="step-num">4</div>','<div class="step-name">设置完成</div>','<div class="line"></div>',"</div>","</li>","</ul>","</div>",'<div class="ui-step-bd">','<div class="ui-step-panels">','<div class="ui-step-panel step-shop-info" style="display: block;">','<div class="mb_10">','<label class="f-lt mt_3" style=" width: 225px;">店铺账号：<span class="fc-red J_nick">— —</span></label>','<label class="ml_50">',"店铺名称：",'<span class="J_shopName">— —</span>',"</label>","</div>","<div>","<label>","备&emsp;&emsp;注：",'<textarea name="remark" style=" width: 500px; height: 40px; vertical-align: top;"></textarea>',"</label>","</div>",'<div class="J_modify-shop-info-tips mt_10 fc-red" style="display: none;">注意：红色输入框输入非法，请修改！</div>',"</div>",'<div class="ui-step-panel step-express-tpl ft_14">','<div class="mb_10">',"选择默认的快递模板：",'<span class="J_express-clk">','<input type="text" style="color: #000" class="J_express-slt mr_5" data-value="" value="请选择" disabled />','<a href="javascript:void(0)" class="btn btn-primary ">请选择</a>',"</span>","</div>",'<div class="ft_12">','<span class="fc-red">温馨小贴士：</span>如果需要更改快递模板，登录系统后可在 <strong>交易管理</strong> > <strong>快递单模板</strong> 中进行设置',"</div>","</div>",'<div class="ui-step-panel step-load-item ft_14">','<div class="J_product-progress-bar mb_10 fn-none">',"商品：",'<div class="progress progress-success loading-progress">','<div style="width: 0%;" class="bar"></div>',"</div>",'<span class="progress-num">0%</span>',"</div>",'<div class="J_trade-progress-wrap mb_10">',"订单\\商品：",'<div class="progress">','<div  class="bar"></div>',"</div>",'<span class="progress-num"></span>',"</div>",'<div class="mb_10">',"共下载：",'<span class="fn-none">商品<strong class="ft-normal fc-red">0</strong>个</span>','<span class="fn-none">规格<strong class="ft-normal fc-red">0</strong>款</span>','<span>待付款<strong class="J_trade-num-dfk ft-normal fc-red">0</strong>笔</span>','<span class="ml_30">待发货<strong class="J_trade-num ft-normal fc-red">0</strong>笔</span>','<span class="ml_30">已发货<strong class="J_trade-num-2 ft-normal fc-red">0</strong>笔</span>','<span class="J_download-tips ml_10 ft_12 fc-ok" style="display:none;"><i class="icon icon-sign-ok"></i> 下载完成</span>','<span class="J_download-tips-2 ml_10 ft_12 fc-error" style="display:none;"><i class="icon icon-sign-error"></i> 下载失败</span>',"<br>",'<span class="ml_50 mr_50"> &nbsp;商品<strong class="ft-normal fc-red J_trade-num-3">0</strong>款</span>','<span class="J_download-tips-3 ml_10 ft_12 fc-ok" style="display:none;"><i class="icon icon-sign-ok"></i> 下载完成</span>','<span class="J_download-tips-4 ml_10 ft_12 fc-error" style="display:none;"><i class="icon icon-sign-error"></i> 下载失败</span>',"</div>",'<div class="ft_12">','<span class="fc-red">温馨小贴士：</span>如果您的订单较多，可能会耽误您几分钟，请耐心等待下......',"</div>",'<div class="J_Download_Warn fc-orange mt_10  ft-bold" style="display:none;">','<i class="icon icon-sign-error"></i>下载失败请不用担心，系统将在1小时内为您自动下载历史订单或商品，不影响系统操作！',"</div>","</div>",'<div class="ui-step-panel step-complete ft_14">','<div class="mb_10" style="height:65px;line-height:65px;">恭喜您，亲爱的<strong class="J_nick"></strong>，初始化设置完成。</div>','<div class="ft_12" style="display:none;line-height: 1.8;">','<span class="f-lt fc-red">温馨小贴士：</span>','<div style=" margin-left: 75px;">',"多店铺管理时，若A店要关联B店，那么需要将B店的店铺序列号输入到A账号登录的系统里，如果要更多设置，<br />登录系统后可在 <strong>系统设置</strong> > <strong>店铺信息设置</strong> 中进行设置，点击查看操作方法","</div>","</div>","</div>","</div>","</div>","</div>",'<div class="btn-wrap">','<span class="J_step-btn-disable-tip mr_10 fc-orange"></span>','<span class="J_step-btn btn btn-primary">下一步</span>',"</div>","</div>"];t.controls.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i={name:"control.trade_sync_pop",init:function(){var t=this;t.$box=e(a.join(""))},sync:function(e){var i=this;i.$box||i.init(),i.sync_complete=e||function(){},i.show(),i.bind(),t.pub("global.trade_sync",i)},show:function(){var t=this;t.dialog=e.dialog({title:"正在同步订单",content:t.$box,drag:!1,cancel:!1})},hide:function(){var e=this;e.dialog&&(!e.dialog.closed&&e.dialog.close(),e.dialog=null)},bind:function(){var e=this;e.bind_status||(t.sub("global.trade_sync.progress",e._sync_progress=function(t){e.sync_progress(t)}),e.bind_status=!0)},destroy:function(){var e=this;e.hide(),t.removeSub("global.trade_sync.progress",e._sync_progress),e.bind_status=null,e.$box=null},_render_trade_num:function(e,t){e.find(".J_trade-num-dfk").html(t.insertedTrades.waitPay||0),e.find(".J_trade-num").html(t.insertedTrades.waitSend||0),e.find(".J_trade-num-2").html(t.insertedTrades.waitConfirm||0),e.find(".J_trade-num-tf").html(t.insertedTrades.finished||0),e.find(".J_trade-num-tc").html(t.insertedTrades.closed||0)},sync_progress:function(i){var a,s=this;if(s.$box){{i.currentCount,i.currentCount}if(a=i.complete,"fail"==i.status)return t.showWarn("订单同步出错, 请重试！"),void s.hide();var n=i.result||{insertedTrades:{}};this._render_trade_num(s.$box,n),a&&(s.$box.find(".J_trade-progress-wrap .bar").css({width:0}),this._render_trade_num(s.$box,n),t.showSuccess("订单同步成功！",.8),setTimeout(e.proxy(function(){s.hide(),s.sync_complete(i)},this),800))}}},a=['<div class="J_sync-progress ft_14" style="width: 600px;">',"<style>.J_sync-progress .progress{width: 80%; height: 8px; margin: 0 10px 0 0; *display: inline; display: inline-block;vertical-align: middle;}</style>",'<div class="J_product-progress-bar mb_10 fn-none">',"商品：",'<div class="progress progress-success loading-progress">','<div style="width: 0%;" class="bar"></div>',"</div>",'<span class="progress-num">0%</span>',"</div>",'<div class="J_trade-progress-wrap mb_10">',"订单：",'<div class="progress progress-success loading-progress">','<div style="width: 0%;" class="bar"></div>',"</div>",'<span class="progress-num"></span>',"</div>",'<div class="mb_10">',"共下载：",'<span class="fn-none">商品<strong class="ft-normal fc-red">0</strong>个</span>','<span class="fn-none">规格<strong class="ft-normal fc-red">0</strong>款</span>','<span>待付款<strong class="J_trade-num-dfk ft-normal fc-red">0</strong>笔</span>','<span class="ml_20">待发货<strong class="J_trade-num ft-normal fc-red">0</strong>笔</span>','<span class="ml_20">已发货<strong class="J_trade-num-2 ft-normal fc-red">0</strong>笔</span>','<span class="ml_20">交易成功<strong class="J_trade-num-tf ft-normal fc-red">0</strong>笔</span>','<span class="ml_20">交易关闭<strong class="J_trade-num-tc ft-normal fc-red">0</strong>笔</span>',"</div>",'<div class="ft_12 fc-orange">',"<span>温馨小贴士：</span>如果您的商品或者订单较多，可能会耽误您几分钟，请耐心等待下......","</div>","</div>"];t.controls.define(i.name,i)}(jQuery,RayCloud),function(e){}(jQuery,RayCloud),function(e,t){var i={name:"control.DynamicList",DynamicList:function(e,t){this.init(e,t)}};i.DynamicList.prototype={isLoadingData:!1,defaultOption:{target:"",scrollContainer:"",tempEngine:t.template,templateName:"",itemCount:20,offset:200,itemHeight:0,fnHandleData:"",onItemAdded:"",onBatchAdded:function(){}},init:function(t,i){this.data=i,this.option=e.extend({},this.defaultOption,t),this._load_data_create_UI(this.option),this._bind_events(this.option)},updateData:function(e,t,i){if(this.data.length)for(var a=0;a<this.data.length;a++){var s=this.data[a].tid+"_"+this.data[a].sysTid;if(e===s){this.data[a][t]=i;break}}},updateJsonData:function(e,t,i,a,s){if(!(arguments.length<=3)&&this.data.length)for(var n=0;n<this.data.length;n++){var l=this.data[n].tid+"_"+this.data[n].sysTid;if(e===l){4===arguments.length&&this.data[n][a]&&(this.data[n][a][t]=i),5===arguments.length&&this.data[n][a]&&this.data[n][a][s]&&(this.data[n][a][s][t]=i);break}}},getData:function(e){if(this.data.length)for(var t=0;t<this.data.length;t++){var i=this.data[t].tid+"_"+this.data[t].sysTid;if(e===i)return this.data[t]}},removeData:function(e){if(this.data.length)for(var t=0;t<this.data.length;t++){var i=this.data[t].tid+"_"+this.data[t].sysTid;if(e===i){this.data.splice(t,1);break}}},_load_data_create_UI:function(e){var t=[];this.data&&this.data.length>=e.itemCount?t=this.data.splice(0,e.itemCount):(t=this.data,this.data=[]),this._creatList(e,t)},_creatList:function(t,i){if(!i||i.length){var a=t.target;if(a&&i){for(var s="",n="",l=0;l<i.length;l++){var d="";if(t.fnHandleData&&(d=t.fnHandleData(i[l])),t.onItemAdded){var o=t.tempEngine.get(t.templateName,d),r=t.onItemAdded(i[l]);for(var p in r)r.hasOwnProperty(p)&&(o=o.replace(p,r[p]));s+=o}else s+=t.tempEngine.get(t.templateName,i[l])}n=e(s).appendTo(e(a)),t.onBatchAdded&&t.onBatchAdded.call(this,e(t.target),n),this.isLoadingData=!1}}},_bind_events:function(t){e(window).scrollTop(1);var i=this,a=e(window).height();t.scrollContainer?e(t.scrollContainer).on("scroll",function(){a+e(this).scrollTop()>=e(this)[0].scrollHeight&&console.info("load more")}):(clearTimeout(i.timeOut),i._dlOnScroll=function(){i.isLoadingData||a+e(this).scrollTop()+t.offset>=e(t.target).height()&&(i.isLoadingData=!0,i.timeOut=setTimeout(function(){i._load_data_create_UI(t),i.data.length&&e(window).scrollTop(e(window).scrollTop()+t.itemHeight*t.itemCount)},300))},e(window).on("scroll",i._dlOnScroll)),t.onOnceItemAdded&&t.onOnceItemAdded.call(i,e(t.target))},destroy:function(){this.data=null,this.option=null,e(window).off("scroll",this._dlOnScroll)}},t.controls.define(i.name,i)}(jQuery,RayCloud),function(e){var t={46:".",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"},i=function(e){return t[e+""]};e.fn.numeral=function(t,a,s){e(this).keypress(function(e){var a=e.keyCode?e.keyCode:e.which;if(9!=a){if(t)return(0!=this.value.length&&-1==this.value.indexOf(".")||46!=a)&&(a>=48&&57>=a||46==a||8==a)?-1==this.value.indexOf(".")?!0:this.value.length-this.value.indexOf(".")>2&&""==GetSelectedText()?!1:!0:!1;var n=a>=48&&57>=a||8==a;return n&&"function"==typeof s&&s(this.value+i(a)),n
}}),"function"==typeof s&&e(this).keyup(function(){return s(this.value),!0}),a||e(this).bind("copy cut paste",function(e){return window.clipboardData?!clipboardData.getData("text").match(/\D/):void e.preventDefault()}),e(this).bind("dragenter",function(){return!1}),e(this).css("ime-mode","disabled"),e(this).bind("focus",function(){this.value.lastIndexOf(".")==this.value.length-1?this.value=this.value.substr(0,this.value.length-1):isNaN(this.value)&&(this.value="")})}}(jQuery,RayCloud),function(e,t){var i={start_connect:function(){this.socket&&(this._fn_sendDisconnect(),this.socket=null),this.socket.on("connect",function(){console.info("建立连接")}),this.socket.on("stock.change",function(e){t.pub("module.stock.list.change",e)}),this.socket.on("disconnect",function(){console.info("断开连接，请重新授权!")}),this._fn_send_auth()},_fn_sendDisconnect:function(){this.socket.disconnect()},_fn_send_auth:function(){var e=this,i=t.user.get().twdaoToken;return i?void this.socket.emit("auth",i,function(e){"auth failure"!=e?console.info("授权成功"):console.error("授权失败")}):(console.error("授权失败，twdaoToken为空！"),void e._fn_sendDisconnect())}};t.controls.define("control.util.socketio",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){function i(e,t,i){var a=[];return a="EMS"==e||"EYB"==e?n(t,i):"SF"==e?l(t,i):"ZJS"==e?49==t.substring(0,2)||16==t.substring(0,2)?o(t,i):d(t,i):o(t,i)}function a(e){var t=/[0-9]+/g,i=e.match(t);if("undefined"==typeof i||null==i)return f("warn","运单号填写有误，请检查！"),!1;if(0==i.length)return f("warn","运单号填写有误，请检查！"),!1;var a=parseInt(i[0],10)+"",s={num:parseInt(a)};return s.prefix=0==e.indexOf(a)?"":e.substring(0,e.indexOf(a)),s.suffix=s.prefix.length+a.length==e.length?"":e.substring(s.prefix.length+a.length,e.length),s}function s(e,t,i){var a=[],s=e;a.push(s);for(var n=1;t>n;n++)s=i(s),a.push(s);return a}function n(e,t){return s(e,t,p)}function l(e,t){return s(e,t,c)}function d(e,t){return s(e,t,_)}function o(e,t){e=""+e;var i=[];if(16>=e){var s=a(e);if(!s)return!1;for(var n=0;t>n;n++)i.push(s.prefix+s.num++ +s.suffix)}else{var l=e.substring(0,4),d=e.substring(4,e.length),s=a(d),o="";if(!s)return!1;for(var n=0;t>n;n++){if(o&&o.length!=(""+(s.num+n)).length){l=parseInt(l,10)+1;var r=""+(s.num+n);i.push(l+s.prefix+r.substring(1,r.length)+s.suffix)}else i.push(l+s.prefix+(s.num+n)+s.suffix);o=""+(s.num+n)}}return i}function r(e,t,i){return parseInt(e.substring(t,i))}function p(e){var t=new Number(e.substring(2,10));t++;for(var i=e.substring(0,2),a=e.substring(11,13),s=8-(t+"").length,n=0;s>n;n++)t="0"+t;e=i+t+a;var l=[r(e,2,3),r(e,3,4),r(e,4,5),r(e,5,6),r(e,6,7),r(e,7,8),r(e,8,9),r(e,9,10)];return i+t+m(l)+a}function c(e){var t=[r(e,0,1),r(e,1,2),r(e,2,3),r(e,3,4),r(e,4,5),r(e,5,6),r(e,6,7),r(e,7,8),r(e,8,9),r(e,9,10),r(e,10,11),r(e,11,12)],i=new Number(e.substring(0,11));i++;for(var a=0;a<11-(i+"").length;a++)i="0"+i;return i+""+u(t)}function _(e){var t=new Number(e.substring(0,9));t++;var i=new Number(e.substring(9,10));i++,7==i&&(i=0),10==i&&(i=0,t++);for(var a=0;a<9-(t+"").length;a++)t="0"+t;return t+""+i}function m(e){var t=8*e[0]+6*e[1]+4*e[2]+2*e[3]+3*e[4]+5*e[5]+9*e[6]+7*e[7],i=11-t%11;return 10==i?0:11==i?5:i}function u(e){var t="*";if(9==e[10]&&9==e[9]&&9==e[8]&&9==e[7]&&9==e[6]&&9==e[5]&&9==e[4])switch(e[3]){case 0:case 2:case 4:case 6:case 8:t=(e[11]+5)%10;break;case 1:case 3:case 5:case 7:t=(e[11]+4)%10;break;default:t="*"}else if(9==e[10]&&9==e[9]&&9==e[8]&&9==e[7]&&9==e[6]&&9==e[5])switch(e[4]){case 0:case 1:case 2:case 4:case 5:case 7:case 8:t=(e[11]+9)%10;break;case 3:case 6:t=(e[11]+8)%10;break;default:t="*"}else if(9==e[10]&&9==e[9]&&9==e[8]&&9==e[7]&&9==e[6])switch(e[5]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:t=(e[11]+3)%10;break;default:t="*"}else if(9==e[10]&&9==e[9]&&9==e[8]&&9==e[7])switch(e[6]){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:t=(e[11]+6)%10;break;case 0:t=(e[11]+7)%10;break;default:t="*"}else if(9==e[10]&&9==e[9]&&9==e[8])switch(e[7]){case 0:case 3:case 6:t=(e[11]+0)%10;break;case 1:case 2:case 4:case 5:case 7:case 8:t=(e[11]+9)%10;break;default:t="*"}else if(9==e[10]&&9==e[9])switch(e[8]){case 0:case 2:case 4:case 6:case 8:t=(e[11]+3)%10;break;case 1:case 3:case 5:case 7:t=(e[11]+2)%10;break;default:t="*"}else if(9==e[10])switch(e[9]){case 0:case 1:case 2:case 4:case 5:case 7:case 8:t=(e[11]+6)%10;break;case 3:case 6:t=(e[11]+5)%10;break;default:t="*"}else 9!=e[10]&&(t=(e[11]+9)%10);return t}function h(e,t){var i=/^[a-zA-Z]*[0-9]+[a-zA-Z]*$/;if(!i.test(t))return"请输入合法的运单号！";if("EMS"==e||"EYB"==e)return 13!=t.length?"EMS单号长度必须为13个字符！":!0;if("SF"==e){if(12!=t.length)return"顺丰单号长度必须为12个字符！";var a=/^[0-9]+$/;return a.test(t)?!0:"顺丰单号需要为数字！"}if("ZJS"==e){if(10!=t.length)return"宅急送单号长度必须为10个字符！";var s=/^[0-9]+$/;return s.test(t)?!0:"宅急送单号需要为数字！"}return!0}var f=function(t,i){e.dialog.alert(i)},v={create:function(e,t,a){return i(e,t,a)},validate:function(e,t){return h(e,t)}};t.controls.define("control.trade.util.create_express_no",{init:function(){return v}})}(jQuery,RayCloud),function(e,t){function i(t){if(t=t||{},!t.tid)throw new Error("[controls.trade:initialization] 初始化异常,tid必须传入.");this._originalOptions=e.extend(!0,{},t),this.options=e.extend(!0,{},t),this._id=t.tid+"_"+t.sysTid,i.map[this._id]=this}i.idx=1,i.map={},i.remove=function(e){this.map[e]&&delete this.map[e]},i.getModel=function(e){var t=this.map[e];return void 0===t?null:t},i.shippingaddress_update=function(i,a,s){var n=i._id;if(!n||!this.map[n])throw new Error("[control.trade::shippingaddress_update] 非法参数.");var l=this.getModel(n).toJSON();if("WAIT_SELLER_SEND_GOODS"!==l.status)throw new Error("[control.trade::shippingaddress_update] "+l.tid+" 参数异常.");var d={};if(e.each(["receiverName","receiverState","receiverCity","receiverDistrict","receiverAddress","receiverZip","receiverPhone","receiverMobile"],function(e,t){i.hasOwnProperty(t)&&(d[t]=i[t])}),e.each(["receiverName","receiverState","receiverCity","receiverDistrict","receiverAddress","receiverZip"],function(e,t){if(!d.hasOwnProperty(t))throw new Error('[control.trade:shippingaddress_update] 参数错误:"'+t+'".')}),!d.hasOwnProperty("receiverPhone")&&!d.hasOwnProperty("receiverMobile"))throw new Error("[control.trade:shippingaddress_update] 参数错误.");e.extend(d,{tid:l.tid,taobaoId:l.taobaoId,sysTid:l.sysTid}),API.trade_shippingaddress_update(d,e.proxy(function(i){var s=i.data.errorTids,l="";return s&&s.length?(e.each(s,function(e,t){l+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>"}),void e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+l+"</table></div>",okVal:"确定",ok:function(){}})):(this.getModel(n)._save(e.extend(!0,{},d)),t.pub("control.trade.save_shipping_address_success",d,i),d=null,void(a&&a(i)))},this),s)},i.trade_update=function(t,i,a){var s=t.uniqueId,n=t.uniqueId.split("_"),l=n[0],d=n[1],o=t.itemUI,r=parseInt(o.attr("taobaoId")),t={tid:l,sysTid:d,taobaoId:r};API.trade_sync_single(t,e.proxy(function(e){var t=e.data;this.getModel(s)._save(t),t.tid=l,i&&i(t)},this),a)},i.trade_postage_update=function(t,i,a){var s=t.uniqueId,n=t.uniqueId.split("_"),l=n[0],d=(n[1],{tids:l,taobaoIds:t.taobaoId,postFee:t.postFee});API.trade_postage_update(d,e.proxy(function(){this.getModel(s)._save({tid:l,postFee:t.postFee,payment:t.payment}),i&&i(this.getModel(s))},this),a)},i.logistics_express_save=function(a,s,n,l,d,o){for(var r,p,c={templateId:a.templateId,outSids:a.outSids},_=String(a.ids).split(","),m=[],u=[],h=[],f=0,v=_.length;v>f;f++){if(r=_[f],!this.map[r])throw new Error("[control.trade::logistics_express_save] 参数异常.");p=this.getModel(r).toJSON(),m.push(p.sysTid||""),h.push(p.taobaoId),u.push(p.tid)}c.sysTids=m.join(","),c.tids=u.join(","),c.taobaoIds=h.join(",");var g=t.pages._fn_act_get_hashs(),b="trade_logistics_express_save",y=c;"pt"===g.root&&"custom"===g.app&&(b="pt_custom_user_express_fill_logistics",y={ids:c.tids,templateId:c.templateId,codeNumbers:c.outSids}),API[b](y,e.proxy(function(t){var n=c.outSids.split(","),l=a.expressTemplateName,d=a.expressCode;e.each(_,function(e,t){var a=i.getModel(t);if(a){var s={expressTemplateId:c.templateId,expressTemplateName:l,expressCode:d,expressTemplateType:0},o=n[e];"N/A"===o||-1==o&&a.toJSON().expressTemplateId!=c.templateId?s.outSid="":-1!=o&&(s.outSid=o),a._save(s)}}),a=null,s&&s(t)},this),n,l,d,o)},i.logistics_wlb_save=function(t,a,s,n,l,d){for(var o,r,p={templateId:t.templateId,outSids:t.outSids},c=String(t.ids).split(","),_=[],m=[],u=[],h=0,f=c.length;f>h;h++){if(o=c[h],!this.map[o])throw new Error("[control.trade::logistics_express_save] 参数异常.");r=this.getModel(o).toJSON(),_.push(r.sysTid||""),u.push(r.taobaoId),m.push(r.tid)}p.sysTids=_.join(","),p.tids=m.join(","),p.taobaoIds=u.join(","),API.trade_logistics_wlb_save(p,e.proxy(function(s){var n=t.expressTemplateName,l=t.expressCode;e.each(c,function(e,t){var a=i.getModel(t);if(a){var s={expressTemplateId:p.templateId,expressTemplateName:n,expressCode:l,expressTemplateType:1,outSid:""};a._save(s)}}),t=null,a&&a(s)},this),s,n,l,d)},i.trade_sellermemoflag_update=function(a,s,n,l,d,o){var r,p,c=String(a.ids).split(","),_={reset:a.reset,memo:a.memo},m=[],u=[],h=[];a.flag&&(_.flag=a.flag);for(var f=0,v=c.length;v>f;f++){if(r=c[f],!this.map[r])throw new Error("[control.trade::trade_sellermemoflag_update] 参数异常.");p=this.getModel(r).toJSON(),m.push(p.tid),u.push(p.taobaoId),h.push(p.sysTid)}_.tids=m.join(","),_.taobaoIds=u.join(","),_.sysTids=h.join(","),API.trade_sellermemoflag_update(_,function(n){var l=function(e,t){for(var i=[],a=0,s=e.length;s>a;a++)i.push(t(e[a],a,e));return i},d=function(t){var s=i.getModel(t);if(s){var n=s.toJSON().messageMemos;e.each(n,function(e){n[e].sellerMemo="true"===_.reset?a.memo:(n[e].sellerMemo||"")+a.memo,_.flag&&(n[e].sellerFlag=_.flag)}),s._save({messageMemos:n})}},o=n.subCode,r=[];20001===o&&(r=l(n.data.errorTids,function(e){return e.tid})),r.length?(e.each(m,function(t,i){-1===e.inArray(i,r)&&d(c[t])}),t.clearShow(),t.showFail(n.message+"<br>"+r.join(","))):(e.each(c,function(e,t){d(t)}),s&&s())},n,l,d,o)},i.trade_sellermemoflag_merge_update=function(t,a){var s=t.id,n=t.tid,l=t.memo,d=t.flag;if(!this.map[s])throw new Error("[control.trade::trade_sellermemoflag_merge_update] 参数异常.");API.trade_sellermemoflag_merge_update({tid:n,taobaoId:this.getModel(s).toJSON().taobaoId,memo:l,flag:d,reset:"true"},e.proxy(function(){var e=i.getModel(s);if(e){var t=e.toJSON().messageMemos,o=t[n]||{},r={sellerFlag:d,tid:n};r.sellerMemo=l||"",o.buyerMessage&&(r.buyerMessage=r.buyerMessage),t[n]=r,e._save({messageMemos:t}),a&&a()}},this))},i.excep_add=function(t,i,a,s,n,l){var d=this.getModel(t),o=d.toJSON();API.trade_excep_add({tid:o.tid,taobaoId:o.taobaoId,sysTid:o.sysTid},e.proxy(function(){var e=this.getModel(t);e._save({isExcep:1}),i&&i()},this),a,s,n,l),d=null,o=null},i.excep_cancel=function(t,i,a,s,n,l){var d=this.getModel(t),o=d.toJSON();API.trade_excep_cancel({tid:o.tid,taobaoId:o.taobaoId,sysTid:o.sysTid},e.proxy(function(){var e=this.getModel(t);e._save({isExcep:0}),i&&i()},this),a,s,n,l),d=null,o=null},i.print_express_end=function(a,s,n,l,d,o,r){var p=[],c=[],_=[];e.each(a.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::print_express_end] 非法操作.");var s=a.toJSON();p.push(s.tid),c.push(s.sysTid),_.push(s.taobaoId)});var m=t.pages._fn_act_get_hashs(),u="",h="";"pt"===m.root&&"custom"===m.app?(u="pt_custom_user_update_printStatus",h={ids:p.join(","),status:1}):(s+"").indexOf("w")>-1?(u="trade_print_wlb_end",h={tids:p.join(","),sysTids:c.join(","),taobaoIds:_.join(","),templateId:s.replace(/w/,"")}):(u="trade_print_express_end",h={tids:p.join(","),sysTids:c.join(","),taobaoIds:_.join(","),templateId:s}),API[u](h,function(){e.each(a.split(","),function(e,t){var a=i.getModel(t);a&&a._save({expressStatus:1})}),n&&n()},l,d,o,r)},i.print_express_undo=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::print_express_undo] 非法操作.");var s=a.toJSON();o.push(s.tid),r.push(s.sysTid),p.push(s.taobaoId)}),API.trade_print_express_undo({tids:o.join(","),sysTids:r.join(","),taobaoIds:p.join(",")},function(){e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save({expressStatus:0})}),a&&a()},s,n,l,d)},i.print_deliver_end=function(a,s,n,l,d,o,r){var p=[],c=[],_=[];e.each(a.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::print_deliver_end] 非法操作.");var s=a.toJSON();p.push(s.tid),c.push(s.sysTid),_.push(s.taobaoId)});var m=t.pages._fn_act_get_hashs(),u="trade_print_deliver_end",h={tids:p.join(","),sysTids:c.join(","),taobaoIds:_.join(","),templateId:s};"pt"===m.root&&"custom"===m.app&&(u="pt_custom_user_update_printStatus",h={ids:p.join(","),sendGoodsPrint:1}),API[u](h,function(){e.each(a.split(","),function(e,t){var a=i.getModel(t);a&&a._save({deliverStatus:1})}),n&&n()},l,d,o,r)},i.print_deliver_undo=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::print_deliver_undo] 非法操作.");var s=a.toJSON();o.push(s.tid),r.push(s.sysTid),p.push(s.taobaoId)}),API.trade_print_deliver_undo({tids:o.join(","),sysTids:r.join(","),taobaoIds:p.join(",")},function(){e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save({deliverStatus:0})}),a&&a()},s,n,l,d)},i.trade_undo=function(e,t,i,a){var s=this.getModel(e);if(s){var n=s.toJSON();API.trade_undo({sysTid:n.sysTid,tid:t.tid,taobaoId:t.taobaoId},function(e){i&&i(e)},a)}},i.trade_split=function(e,t,i,a){var s=this.getModel(e);s&&API.trade_split({sysTid:t.sysTid,tid:t.tid,taobaoId:t.taobaoId,oid:t.oid},function(e){i&&i(e)},a)},i.trade_split_num=function(t,i,a,s){var n=this.getModel(t);n&&e.dialog({title:"按数量拆单",content:'<div><h2 style="font-size:18px;">订单商品数：<em class="num">'+i.orderNum+'</em></h2><div style="margin-top:10px;font-size:14px;">拆分的数量：<input class="j-input-num" type="text" value="" style="width:60px;"></div></div>',ok:function(){var t=e(this.DOM.content);return t.find("input").val()>0&&t.find("input").val()<1*t.find(".num").text()?void API.trade_splitTradeByNum({sysTid:i.sysTid,tid:i.tid,taobaoId:i.taobaoId,oid:i.oid,num:t.find("input").val()},function(e){a&&a(e)},s):(e.dialog.alert("拆分的数量必须大于0且小于订单商品数"),!1)},cancel:!0})},i.manual_merge=function(e,t,i,a,s){for(var n=[],l=[],d=[],o=0;o<e.length;o++){var r=e[o].split("_");n.push(r[0]),l.push(r[1]),d.push(t[o])}API.trade_merge({tids:n.join(","),sysTids:l.join(","),taobaoIds:d.join(","),receiverInfoTid:i.receiverInfoTid,expressPrintStatus:i.expressPrintStatus,deliverPrintStatus:i.deliverPrintStatus,isVerify:i.isVerfiy},function(e){a&&a(e)},s)},i.create_wlb_no=function(i,a,s,n){var l=this.getModel(i);if(l){var d=l.toJSON(),o=t.pages._fn_act_get_hashs(),r="trade_create_wlb_no";if("pt"===o.root&&"custom"===o.app&&(r="pt_custom_user_wlb_waybill_get",d.expressTemplateName.indexOf("网点：")>=0))return void e.dialog.alert("自定义打印暂不支持网点电子面单");API[r]({sysTids:d.sysTid,tids:d.tid,taobaoIds:d.taobaoId,templateId:a.templateId},function(t){if(t.data.successResult){var i=t.data,a=t.data.errorResult||[],n="";e.each(a,function(e,t){n+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorMsg+"</td></tr>"});var d=function(){i.successResult.length&&(l._save({_has_outSid:1,outSid:i.successResult[0].outSid}),s&&s(t))};n?e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+n+"</table></div>",okVal:"确定",ok:function(){d()}}):d()}},n)}},i.express_wlb_info=function(i,a,s,n){var l=this.getModel(i);if(l){var d=l.toJSON(),o=t.pages._fn_act_get_hashs(),r="trade_express_wlb_info";if("pt"===o.root&&"custom"===o.app&&(r="pt_wlb_user_branch_get_custom",d.expressTemplateName.indexOf("网点：")>=0))return void e.dialog.alert("自定义打印暂不支持网点电子面单");API[r]({templateId:a.templateId,sysTid:d.sysTid,tid:d.tid,taobaoId:d.taobaoId},function(e){s&&s(e)},n,!1)}},i.express_wlb_select_n_save=function(a,s,n){var l=t.controls.get("control.trade.module.reachable"),d=a.ids,o=[],r=[],p=[],c=t.pages._fn_act_get_hashs();if(d.length){d=d.split(",");for(var _=0;_<d.length;_++){var m=this.getModel(d[_]);if(m){var u=m.toJSON();o.push(u.sysTid),r.push(u.tid),p.push(u.taobaoId)}}var h={templateId:a.expressId.replace(/w/,""),addressId:a.addressId,branchCode:a.branchCode,sysTids:o.join(","),tids:r.join(","),taobaoIds:p.join(","),branchTaobaoId:a.branchTaobaoId};if("0"==a.getoronlysave){var f="trade_create_wlb_no";"pt"===c.root&&"custom"===c.app&&(f="pt_custom_user_wlb_waybill_get"),API[f](h,function(t){var n=t.data;if(n.errorMessage)return void e.dialog.alert(n.errorMessage);if(n.successResult.length){for(var d=[],o=[],r=0;r<n.successResult.length;r++){var p=n.successResult[r].outSid,c=n.successResult[r].tid+"_"+n.successResult[r].sysTid;d.push(p),o.push(c);var _=i.getModel(c);if(_){var m={expressTemplateId:a.expressId.replace(/w/,""),expressTemplateName:a.templateName,expressCode:a.expressCode,expressTemplateType:1};"N/A"===p||-1==p&&_.toJSON().expressTemplateId!=a.templateId.replace(/w/,"")?m.outSid="":-1!=p&&(m.outSid=p),_._save(m)}}var u=t.data.addressReachable,h=l.getCanDelivereds({addressReachable:u,ids:o});s&&s({ids:o,outSids:d,templateType:1,templateId:a.expressId.replace(/w/,""),templateName:a.templateName,canDelivereds:h})}},n)}else API.trade_express_wlb_select_n_save(h,function(t){var n=t.data.noNeedCancelResult,d=a.ids.split(",");if(n&&n.length)for(var o=0;o<n.length;o++){var r=n[o].tid+"_"+n[o].sysTid,p=e.inArray(r,d);p>-1&&d.splice(p,1)}var c=t.data.addressReachable,_=l.getCanDelivereds({addressReachable:c,ids:d});s&&s({ids:d,outSids:[],templateType:1,templateId:a.expressId.replace(/w/,""),templateName:a.templateName,canDelivereds:_});for(var m=0;m<d.length;m++){var u=i.getModel(d[m]);if(u){var h={expressTemplateId:a.expressId.replace(/w/,""),expressTemplateName:a.templateName,expressCode:a.expressCode,expressTemplateType:1,outSid:""};u._save(h)}}},n)}},i.verify=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::verify] 非法操作.");var s=a.toJSON();o.push(s.tid),r.push(s.sysTid),p.push(s.taobaoId)}),API.trade_verify({tids:o.join(","),sysTids:r.join(","),taobaoIds:p.join(",")},function(){e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save({isVerify:1})}),a&&a()},s,n,l,d)},i.verify_cancel=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::verify_cancel] 非法操作.");var s=a.toJSON();o.push(s.tid),r.push(s.sysTid),p.push(s.taobaoId)}),API.trade_verify_cancel({tids:o.join(","),sysTids:r.join(","),taobaoIds:p.join(",")},function(){e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save({isVerify:0})}),a&&a()},s,n,l,d)},i.reload=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::reload] 参数异常.");var s=a.toJSON();o.push(s.taobaoId),r.push(s.sysTid),p.push(s.tid)}),API.trade_search_tids({taobaoIds:o.join(","),sysTids:r.join(","),tids:p.join(",")},function(s){var n=s.data.list||[];return n.length!=t.split(",").length?!1:(e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save(n[e])}),void(a&&a()))},s,n,l,d)},i.logistics_online_send=function(t,a,s,n,l,d){t=t.split(",");var o=[],r=[],p=[],c=[],_=[];e.each(t,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::logistics_online_send] 参数异常.");var s=a.toJSON();if(1===s.isExcep||1===s.isHalt||1===s.isRefund)throw new Error("[control.trade::logistics_online_send] 异常订单不能进行发货操作:"+s.tid);if(1===s.canConfirmSend)throw new Error("[control.trade::logistics_online_send] 已在线发货订单不能再次进行在线发货操作:"+s.tid);o.push(s.tid),r.push(s.taobaoId),p.push(s.sysTid),c.push(s.outSid||-1),_.push(s.expressCode)}),API.trade_logistics_online_send({tids:o.join(","),taobaoIds:r.join(","),sysTids:p.join(","),outSids:c.join(","),companyCodes:_.join(",")},e.proxy(function(s){var n=function(e){var t=i.getModel(e);t&&t._save(t.toJSON().outSid?{status:"WAIT_BUYER_CONFIRM_GOODS"}:{canConfirmSend:1})};if(20001===s.subCode){var l=s.data.errorTids,d=[],m=s.data.successTids,u="";e.each(t,function(t,i){e.each(l,function(e,t){u+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>",(20101==t.errorSubCode||20102==t.errorSubCode||20103==t.errorSubCode||20104==t.errorSubCode)&&d.push(i)})});var h=[];e.each(m,function(e,t){h.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),u&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+u+"</table></div>",okVal:"确定",ok:d.length?function(){h.length&&a&&a(h),i.reload(d.join(",")),d=null}:function(){h.length&&a&&a(h)}})}else e.each(t,function(e,t){n(t)}),a&&a(t);t=null,o=null,r=null,p=null,c=null,_=null},this),s,n,l,d)},i.logistics_online_cancel=function(t,a,s,n,l,d){t=t.split(",");var o=[],r=[],p=[];e.each(t,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::logistics_online_cancel] 参数异常.");var s=a.toJSON();if(1!==s.canConfirmSend)throw new Error("[control.trade::logistics_online_cancel] 没有在线发货的不能调用取消在线发货接口:"+s.tid);o.push(s.tid),r.push(s.taobaoId),p.push(s.sysTid)}),API.trade_logistics_online_cancel({tids:o.join(","),taobaoIds:r.join(","),sysTids:p.join(",")},e.proxy(function(s){var n=function(e){var t=i.getModel(e);t&&t._save({canConfirmSend:0})};if(20001===s.subCode){var l=s.data.errorTids,d=[],c=s.data.successTids,_="";e.each(t,function(t,i){e.each(l,function(e,t){_+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>",(20101==t.errorSubCode||20102==t.errorSubCode||20103==t.errorSubCode||20104==t.errorSubCode)&&d.push(i)})});var m=[];e.each(c,function(e,t){m.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),_&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+_+"</table></div>",okVal:"确定",ok:d.length?function(){m.length&&a&&a(m),i.reload(d.join(",")),d=null}:function(){m.length&&a&&a(m)}})}else e.each(t,function(e,t){n(t)}),a&&a(t);t=null,o=null,r=null,p=null},this),s,n,l,d)},i.logistics_online_confirm=function(t,a,s,n,l,d){t=t.split(",");var o=[],r=[],p=[],c=[];e.each(t,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::logistics_online_confirm] 参数异常.");var s=a.toJSON();if(1===s.isExcep||1===s.isHalt||1===s.isRefund)throw new Error("[control.trade::logistics_online_confirm] 异常订单不能进行发货操作:"+s.tid);if(1!==s.canConfirmSend)throw new Error("[control.trade::logistics_online_confirm] 未在线发货订单不能调用确认在线发货操作:"+s.tid);if(!s.outSid)throw new Error("[control.trade::logistics_online_confirm] 运单号必须:"+s.tid);o.push(s.tid),r.push(s.taobaoId),p.push(s.sysTid),c.push(s.outSid||-1)}),API.trade_logistics_online_confirm({tids:o.join(","),taobaoIds:r.join(","),sysTids:p.join(","),outSids:c.join(",")},e.proxy(function(s){var n=function(e){var t=i.getModel(e);t&&t._save({status:"WAIT_BUYER_CONFIRM_GOODS"})};if(20001===s.subCode){var l=s.data.errorTids,d=[],_=s.data.successTids,m="";e.each(t,function(t,i){e.each(l,function(e,t){m+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>",(20101==t.errorSubCode||20102==t.errorSubCode||20103==t.errorSubCode||20104==t.errorSubCode)&&d.push(i)})});var u=[];e.each(_,function(e,t){u.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),m&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+m+"</table></div>",okVal:"确定",ok:d.length?function(){u.length&&a&&a(u),i.reload(d.join(",")),d=null}:function(){u.length&&a&&a(u)}})}else e.each(t,function(e,t){n(t)}),a&&a(t);t=null,o=null,r=null,p=null,c=null},this),s,n,l,d)},i.logistics_offline_send=function(a,s,n,l,d,o){a=a.split(",");var r=[],p=[],c=[],_=[],m=[];e.each(a,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::logistics_offline_send] 参数异常.");var s=a.toJSON();if(1===s.isExcep||1===s.isHalt||1===s.isRefund)throw new Error("[control.trade::logistics_offline_send] 异常订单不能进行发货操作:"+s.tid);if(1===s.canConfirmSend)throw new Error("[control.trade::logistics_offline_send] 已在线发货订单不能再次进行在线发货操作:"+s.tid);r.push(s.tid),p.push(s.taobaoId),c.push(s.sysTid),_.push(s.outSid||-1),m.push(s.expressCode)});var u=t.pages._fn_act_get_hashs(),h="trade_logistics_offline_send",f={tids:r.join(","),taobaoIds:p.join(","),sysTids:c.join(","),outSids:_.join(","),companyCodes:m.join(",")};"pt"===u.root&&"custom"===u.app&&(h="pt_custom_user_sendGoods",f={ids:r.join(",")}),API[h](f,e.proxy(function(t){var n=function(e){var t=i.getModel(e);t&&t._save({status:"WAIT_BUYER_CONFIRM_GOODS"})};if(20001===t.subCode){var l=t.data.errorTids,d=[],o=t.data.successTids,u="";e.each(a,function(t,i){e.each(l,function(e,t){u+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>",(20101==t.errorSubCode||20102==t.errorSubCode||20103==t.errorSubCode||20104==t.errorSubCode)&&d.push(i)})});var h=[];e.each(o,function(e,t){h.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),u&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+u+"</table></div>",okVal:"确定",ok:d.length?function(){h.length&&s&&s(h),i.reload(d.join(",")),d=null}:function(){h.length&&s&&s(h)}})}else e.each(a,function(e,t){n(t)}),s&&s(a);a=null,r=null,p=null,c=null,_=null,m=null},this),n,l,d,o)},i.logistics_dummy_send=function(t,a,s,n,l,d){t=t.split(",");var o=[],r=[],p=[];e.each(t,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::logistics_dummy_send] 参数异常.");var s=a.toJSON();if(1===s.isExcep||1===s.isHalt||1===s.isRefund)throw new Error("[control.trade::logistics_dummy_send] 异常订单不能进行发货操作:"+s.tid);if(1===s.canConfirmSend)throw new Error("[control.trade::logistics_dummy_send] 已在线发货订单不能再次进行在线发货操作:"+s.tid);o.push(s.tid),r.push(s.taobaoId),p.push(s.sysTid)}),API.trade_logistics_dummy_send({tids:o.join(","),taobaoIds:r.join(","),sysTids:p.join(",")},e.proxy(function(s){var n=function(e){var t=i.getModel(e);t&&t._save({status:"WAIT_BUYER_CONFIRM_GOODS"})};if(20001===s.subCode){var l=s.data.errorTids,d=[],c=s.data.successTids,_="";e.each(t,function(t,i){e.each(l,function(e,t){_+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>",(20101==t.errorSubCode||20102==t.errorSubCode||20103==t.errorSubCode||20104==t.errorSubCode)&&d.push(i)})});var m=[];e.each(c,function(e,t){m.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),_&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+_+"</table></div>",okVal:"确定",ok:d.length?function(){m.length&&a&&a(m),i.reload(d.join(",")),d=null}:function(){m.length&&a&&a(m)}})}else e.each(t,function(e,t){n(t)}),a&&a(t);t=null,o=null,r=null,p=null},this),s,n,l,d)},i.halt=function(e,a,s,n,l,d){var o=this.getModel(e);if(!o)throw new Error("[control.trade::halt] 非法操作.");var r=o.toJSON();if(0!==r.isHalt)throw new Error("[control.trade:halt] 参数异常:"+r.tid);API.trade_halt({tids:r.tid,taobaoIds:r.taobaoId,sysTids:r.sysTid},function(){var a=i.getModel(e);a&&(t.pub("control.trade.view.click.trade_halt.done"),a._save({isHalt:1}),a=null,e=null)},s,n,l,d),r=null,o=null},i.batch_halt=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::verify] 非法操作.");var s=a.toJSON();o.push(s.tid),r.push(s.sysTid),p.push(s.taobaoId)}),API.trade_halt({tids:o.join(","),sysTids:r.join(","),taobaoIds:p.join(",")},function(){e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save({isHalt:1})}),a&&a()},s,n,l,d)},i.batch_halt_cancel=function(t,a,s,n,l,d){var o=[],r=[],p=[];e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::verify] 非法操作.");var s=a.toJSON();o.push(s.tid),r.push(s.sysTid),p.push(s.taobaoId)}),API.trade_halt_cancel({tids:o.join(","),sysTids:r.join(","),taobaoIds:p.join(",")},function(){e.each(t.split(","),function(e,t){var a=i.getModel(t);a&&a._save({isHalt:0})}),a&&a()},s,n,l,d)},i.halt_cancel=function(e,a,s,n,l,d){var o=this.getModel(e);if(!o)throw new Error("[control.trade::halt_cancel] 非法操作.");var r=o.toJSON();if(1!==r.isHalt)throw new Error("[control.trade:halt_cancel] 参数异常:"+r.tid);API.trade_halt_cancel({tids:r.tid,taobaoIds:r.taobaoId,sysTids:r.sysTid},function(){var a=i.getModel(e);a&&(t.pub("control.trade.view.click.trade_halt_cancel.done"),a._save({isHalt:0}),a=null,e=null)},s,n,l,d),r=null,o=null},i.prototype={getId:function(){return this._id},toJSON:function(t){return t===!0?e.extend(!0,{},this._originalOptions):e.extend(!0,{},this.options)},set:function(t){e.extend(!0,this.options,t)},_save:function(i){i.hasOwnProperty("tid")&&delete i.tid;var a=this._findChangeList(this._originalOptions,i);e.extend(!0,this._originalOptions,i),e.extend(!0,this.options,i);var s=!1;for(var n in a){s=!0;break}if(s){var l,d=this._id,o=[];for(n in a)l=a[n],o.push(n),t.pub("control.trade.valuechange."+d+"."+n,{oldValue:l.oldValue,newValue:l.newValue});t.pub("control.trade.valuechange."+d+".*",a),t.pub("control.trade.valuechange.*",{id:d,changeList:o})}},_findChangeList:function(t,i){var a,s,n={};for(var l in i)a=t[l],s=i[l],e.isPlainObject(s)||e.isArray(s)?this._deepEqual(a,s)||(n[l]={oldValue:e.extend(!0,{},a),newValue:e.extend(!0,{},s)}):s!==a&&(n[l]={oldValue:a,newValue:s});return n},_deepEqual:function(e,t){return JSON.stringify(e)===JSON.stringify(t)},load:function(t,i){API.trade_detail({tid:this.options.tid,taobaoId:this.options.taobaoId},e.proxy(function(i){this._save(e.extend(!0,{},i.data)),t&&t(i.data)},this),i)},reload:function(){this.load()},destroy:function(){this._originalOptions=null,this.options=null,i.remove(this._id),this._id=null}},t.controls.define("control.trade",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=t.controls.get("control.common_express"),s=t.controls.get("control.trade.util.create_express_no"),n={save:function(e,n,l,d,o,r){var p=e.ids.split(","),c=e.expressId,_=e.startOutSid,m=t.controls.get("control.trade.module.reachable"),u=function(e){if(1===e.isWlb)c=c.replace(/w/,""),i.logistics_wlb_save({ids:p.join(","),templateId:c,expressTemplateName:e.templateName,expressCode:e.code},function(t){var i=t.data.addressReachable,a=m.getCanDelivereds({addressReachable:i,ids:p});n&&n({ids:p,templateId:c,expressTemplateName:e.templateName,expressTemplateType:e.isWlb,expressCode:e.code,canDelivereds:a})},function(){},d,o,r);else{var t="",a=[];if(_)if(-1==_)t=-1;else{if(s.validate(e.code,_)!==!0)return!1;a=s.create(e.code,_,p.length)}else t="N/A";if(!a.length)for(var l=0,u=p.length;u>l;l++)a.push(t);i.logistics_express_save({ids:p.join(","),templateId:c,expressTemplateName:e.templateName,expressCode:e.code,outSids:a.join(",")},function(t){var i=t.data.addressReachable,s=m.getCanDelivereds({addressReachable:i,ids:p});n&&n({ids:p,templateId:c,expressTemplateName:e.templateName,expressCode:e.code,outSids:a,canDelivereds:s})},function(){},d,o,r)}},h=i.getModel(p[0]);if(!h)return!1;var f=h.toJSON();a.get_all_details(c,f.taobaoId,function(e){u(e)})}};t.controls.define("control.trade.express",{init:function(){return n}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a={online_send:function(t,a,s,n,l,d){var o=[],r=[];
return e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade.logistics:online_send] 参数异常.");var s=a.toJSON();(1===s.isExcep||1===s.isHalt||1===s.isRefund)&&o.push(s.tid),1===s.canConfirmSend&&r.push(s.tid)}),o.length?(e.dialog.alert("以下订单为异常订单，请先处理再发货！<br>订单号："+o.join(",")),!1):r.length?(e.dialog.alert("以下订单已在线发货（待确认），不能再作发货操作！<br>订单号："+r.join(",")),!1):void i.logistics_online_send(t,a,s,n,l,d)},online_confirm:function(t,a,s,n,l,d){var o=[],r=[],p=[];return e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade.logistics:online_confirm] 参数异常.");var s=a.toJSON();(1===s.isExcep||1===s.isHalt||1===s.isRefund)&&o.push(s.tid),1!==s.canConfirmSend&&r.push(s.tid),s.outSid||p.push(s.tid)}),o.length?(e.dialog.alert("以下订单为异常订单，请先处理再发货！<br>订单号："+o.join(",")),!1):r.length?(e.dialog.alert("以下订单为在线发货（待确认），不能使用确认发货操作！<br>订单号："+r.join(",")),!1):p.length?(e.dialog.alert("以下订单还未保存运单号！<br>订单号："+p.join(",")),!1):void i.logistics_online_confirm(t,a,s,n,l,d)},online_cancel:function(e,t,a,s,n,l){i.logistics_online_cancel(e,t,a,s,n,l)},offline_send:function(t,a,s,n,l,d){var o=[],r=[],p=[];return e.each(t.split(","),function(t,a){var s=i.getModel(a);if(!s)throw new Error("[control.trade.logistics:online_confirm] 参数异常.");var n=s.toJSON();(1===n.isExcep||1===n.isHalt||1===n.isRefund)&&o.push(n.tid),1===n.canConfirmSend&&r.push(n.tid),e.trim(n.outSid)||p.push(n.tid)}),o.length?(e.dialog.alert("以下订单为异常订单，请先处理再发货！<br>订单号："+o.join(",")),!1):r.length?(e.dialog.alert("以下订单已在线发货（待确认），不能再作发货操作！<br>订单号："+r.join(",")),!1):p.length?(e.dialog.alert("以下订单还未保存运单号！<br>订单号："+p.join(",")),!1):void i.logistics_offline_send(t,a,s,n,l,d)},dummy_send:function(t,a,s,n,l,d){var o=[],r=[];return e.each(t.split(","),function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade.logistics:dummy_send] 参数异常.");var s=a.toJSON();(1===s.isExcep||1===s.isHalt||1===s.isRefund)&&o.push(s.tid),1===s.canConfirmSend&&r.push(s.tid)}),o.length?(e.dialog.alert("以下订单为异常订单，请先处理再发货！<br>订单号："+o.join(",")),!1):r.length?(e.dialog.alert("以下订单已在线发货（待确认），不能再作发货操作！<br>订单号："+r.join(",")),!1):void i.logistics_dummy_send(t,a,s,n,l,d)}};t.controls.define("control.trade.logistics",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i={data:[],load:function(i,a){if(!this.data.length){var s=t.user.get();s&&s.userConf&&(this.data=s.userConf.tradeQueryTabs||[])}return this.data.length?void i():void API.user_trade_tabs_list({},e.proxy(function(e){this.data=e.data,i()},this),a)},load_detail:function(e,t){t()},getData:function(){return this.data.slice(0)},update:function(){},destroy:function(){this.data=[]}};t.controls.define("control.trade.list_tab",{init:function(){return i}})}(jQuery,RayCloud),function(){}(jQuery,RayCloud),function(){}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=t.controls.get("control.common_express"),s=(t.controls.get("control.trade.express"),t.controls.get("control.trade.util.create_express_no")),n=(t.controls.get("control.trade.logistics"),{savaExpress_courierNumber:function(n,l,d,o){var r=this,p=(i.getModel(n).toJSON(!0),{ids:String(n),expressId:l,startOutSid:d}),c=p.ids.split(","),l=p.expressId,_=p.startOutSid,m=t.controls.get("control.trade.module.reachable"),u=i.getModel(c[0]);if(!u)return!1;var h=u.toJSON();a.get_all_details(l,h.taobaoId,function(i){var a="",n=[];if(_)if(-1==_)a=-1;else{if(s.validate(i.code,_)!==!0)return e.dialog.alert(s.validate(i.code,_)),!1;n=s.create(i.code,_,c.length)}else a="N/A";if(!n.length)for(var d=0,p=c.length;p>d;d++)n.push(a);r._save({ids:c.join(","),templateId:l,expressTemplateName:i.templateName,expressCode:i.code,outSids:n.join(","),templateTaobaoId:i.taobaoId},function(e){var a=e.data.addressReachable,s=m.getCanDelivereds({addressReachable:a,ids:c});t.pub("control.trade.view.focusout.edit_logistics.done",{ids:c,templateId:l,expressTemplateName:i.templateName,expressCode:i.code,outSids:n,canDelivereds:s}),o&&o()})})},batch_saveExpress_Number:function(n,l,d,o){var r=this;if(!d)return!1;for(var p=o,c=-1,_=0,m=p.length;m>_;_++)if(p[_]==n){c=_;break}if(-1===c)return!1;var u=p.slice(c),h={ids:String(u),expressId:l,startOutSid:d},f=h.ids.split(","),l=h.expressId,v=h.startOutSid,g=t.controls.get("control.trade.module.reachable"),b=i.getModel(f[0]);if(!b)return!1;var y=b.toJSON();a.get_all_details(l,y.taobaoId,function(i){var a="",n=[];if(v)if(-1==v)a=-1;else{if(s.validate(i.code,v)!==!0)return e.dialog.alert(s.validate(i.code,v)),!1;n=s.create(i.code,v,f.length)}else a="N/A";if(!n.length)for(var d=0,o=f.length;o>d;d++)n.push(a);r._save({ids:f.join(","),templateId:l,expressTemplateName:i.templateName,expressCode:i.code,outSids:n.join(",")},function(e){var a=e.data.addressReachable,s=g.getCanDelivereds({addressReachable:a,ids:f});t.pub("control.trade.view.click.batch_update_express_id.done",{ids:f,templateId:l,expressTemplateName:i.templateName,expressCode:i.code,outSids:n,canDelivereds:s,templateType:0})})})},_save:function(t,a){for(var s,n,l={templateId:t.templateId,codeNumbers:t.outSids},d=String(t.ids).split(","),o=[],r=[],p=[],c=0,_=d.length;_>c;c++)s=d[c],n=i.getModel(s).toJSON(),o.push(n.sysTid||""),p.push(n.taobaoId),r.push(n.tid);l.ids=r.join(","),l.sysTids=o.join(","),l.tids=r.join(","),l.taobaoIds=p.join(","),l.templateTaobaoId=t.templateTaobaoId,l.templateName=t.expressTemplateName,l.templateId.indexOf("w")>=0?(l.templateId=l.templateId.replace(/w/,""),l.templateType=1):l.templateType=0,API.pt_custom_user_express_fill_logistics(l,function(s){var n=l.codeNumbers.split(","),o=t.expressTemplateName,r=t.expressCode;e.each(d,function(e,t){var a=i.getModel(t);if(a){var s={expressTemplateId:l.templateId,expressTemplateName:o,expressCode:r,expressTemplateType:l.templateType},d=n[e];"N/A"===d||-1==d&&a.toJSON().expressTemplateId!=l.templateId?s.outSid="":-1!=d&&(s.outSid=d),a._save(s)}}),t=null,a&&a(s)})},_sendProd:function(a){var s=a,n=[],l=[],d=[];if(e.each(s,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade.logistics:online_confirm] 参数异常.");var s=a.toJSON();(1===s.isExcep||1===s.isHalt||1===s.isRefund)&&n.push(s.tid),1===s.canConfirmSend&&l.push(s.tid),s.outSid||d.push(s.tid)}),n.length)return e.dialog.alert("以下订单为异常订单，请先处理再发货！<br>订单号："+n.join(",")),!1;if(l.length)return e.dialog.alert("以下订单已在线发货（待确认），不能再作发货操作！<br>订单号："+l.join(",")),!1;if(d.length)return e.dialog.alert("以下订单还未保存运单号！<br>订单号："+d.join(",")),!1;var o=[];e.each(s,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::logistics_offline_send] 参数异常.");var s=a.toJSON();if(1===s.isExcep||1===s.isHalt||1===s.isRefund)throw new Error("[control.trade::logistics_offline_send] 异常订单不能进行发货操作:"+s.tid);if(1===s.canConfirmSend)throw new Error("[control.trade::logistics_offline_send] 已在线发货订单不能再次进行在线发货操作:"+s.tid);o.push(s.tid)}),API.pt_custom_user_sendGoods({ids:o.join(",")},e.proxy(function(a){var n=function(e){var t=i.getModel(e);t&&t._save({status:"WAIT_BUYER_CONFIRM_GOODS"})};if(20001===a.subCode){var l=a.data.errorTids,d=[],o=a.data.successTids,r="";e.each(s,function(t,i){e.each(l,function(e,t){r+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>",(20101==t.errorSubCode||20102==t.errorSubCode||20103==t.errorSubCode||20104==t.errorSubCode)&&d.push(i)})});var p=[];e.each(o,function(e,t){p.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),r&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+r+"</table></div>",okVal:"确定",ok:d.length?function(){p.length&&success&&success(p),Trade.reload(d.join(",")),d=null}:function(){p.length&&success&&success(p)}})}else e.each(s,function(e,t){n(t)}),t.showSuccess("发货成功！",.8),t.pub("control.trade.module.logistics_offline_send.done",s);s=null,sysTids=null},this))},_editLogistics:function(t){return 0===t.length?void e.dialog.alert("您还未选择订单！"):void 0},print_express:function(a,s){if(!a.length)return void e.dialog.alert("您还未选择订单！");var n=[];e.each(a,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::print_express_end] 非法操作.");var s=a.toJSON();n.push(s.tid)});var l=0,d="control.trade.view.click.print_express_undo.done";s===!0&&(l=1,d="control.trade.view.click.print_express_end.done"),API.pt_custom_user_update_printStatus({ids:n.join(","),status:l,templateType:i.getModel(a[0]).toJSON().expressTemplateType},function(){e.each(a,function(e,t){var a=i.getModel(t);a&&a._save({expressStatus:l})}),t.pub(d,a)})},print_deliver:function(a,s){if(!a.length)return void e.dialog.alert("您还未选择订单！");var n=[];e.each(a,function(e,t){var a=i.getModel(t);if(!a)throw new Error("[control.trade::print_deliver_end] 非法操作.");var s=a.toJSON();n.push(s.tid)}),s===!0?API.pt_deliver_user_default_get({},function(){API.pt_custom_user_update_printStatus({ids:n.join(","),sendGoodsPrint:1},function(){e.each(a,function(e,t){var a=i.getModel(t);a&&a._save({deliverStatus:1})}),t.pub("control.trade.view.click.print_deliver_end.done",a)})}):API.pt_custom_user_update_printStatus({ids:n.join(","),sendGoodsPrint:0},function(){e.each(a,function(e,t){var a=i.getModel(t);a&&a._save({deliverStatus:0})}),t.pub("control.trade.view.click.print_deliver_undo.done",a)})}});t.controls.define("control.pt.custom.base",{init:function(){return n}})}(jQuery,RayCloud),function(e,t){function i(e){this.map={},this.id_list=[],this.selected_id_list=[];for(var t,i,s=e.length,n=0;s>n;n++)t=new a(e[n]),i=t.getId(),this.map[String(i)]=1,this.id_list[n]=i;this._event_bind()}var a=t.controls.get("control.trade"),s=t.controls.get("control.trade.express"),n=t.controls.get("control.trade.util.create_express_no"),l=t.controls.get("control.trade.logistics");i.prototype={_event_bind:function(){t.sub("control.trade.view.click.change_express",this._eventHandlerProxy_click_changeExpress=this._fn_event_handler("click_change_express")),t.sub("control.trade.view.focusout.edit_logistics",this._eventHandlerProxy_focusout_editLogistics=this._fn_event_handler("focusout_edit_logistics")),t.sub("control.trade.view.click.batch_update_express_id",this._eventHandlerProxy_click_batchUpdateExpressId=this._fn_event_handler("click_batch_update_express_id")),t.sub("control.trade.view.click.logistics_info",this._eventHandlerProxy_click_logisticsInfo=this._fn_event_handler("click_logistics_info")),t.sub("control.trade.view.click.trade_halt",this._eventHandlerProxy_click_tradeHalt=this._fn_event_handler("click_trade_halt")),t.sub("control.trade.view.click.edit_shipping_address",this._eventHandlerProxy_click_editShippingAddress=this._fn_event_handler("click_edit_shipping_address")),t.sub("control.trade.view.click.edit_messageMemos",this._eventHandlerProxy_click_editMessageMeos=this._fn_event_handler("click_edit_messageMemos")),t.sub("control.trade.view.click.cancel_merge",this._eventHandlerProxy_click_cancelMerge=this._fn_event_handler("click_cancel_merge")),t.sub("control.trade.view.click.split",this._eventHandlerProxy_split=this._fn_event_handler("split")),t.sub("control.trade.view.click.cancel_split",this._eventHandlerProxy_click_cancelSplit=this._fn_event_handler("click_cancel_split")),t.sub("control.trade.view.click.create_wlb_no",this._eventHandlerProxy_click_createWlbNo=this._fn_event_handler("click_create_wlb_no")),t.sub("control.trade.view.click.express_wlb_info",this._eventHandlerProxy_click_getWlbInfo=this._fn_event_handler("express_wlb_info")),t.sub("control.trade.manual_merge",this._eventHandlerProxy_manual_merge=this._fn_event_handler("manual_merge"))},_event_unbind:function(){t.removeSub("control.trade.view.click.change_express",this._eventHandlerProxy_click_changeExpress),t.removeSub("control.trade.view.focusout.edit_logistics",this._eventHandlerProxy_focusout_editLogistics),t.removeSub("control.trade.view.click.batch_update_express_id",this._eventHandlerProxy_click_batchUpdateExpressId),t.removeSub("control.trade.view.click.logistics_info",this._eventHandlerProxy_click_logisticsInfo),t.removeSub("control.trade.view.click.trade_halt",this._eventHandlerProxy_click_tradeHalt),t.removeSub("control.trade.view.click.edit_shipping_address",this._eventHandlerProxy_click_editShippingAddress),t.removeSub("control.trade.view.click.edit_messageMemos",this._eventHandlerProxy_click_editMessageMeos),t.removeSub("control.trade.view.click.cancel_merge",this._eventHandlerProxy_click_cancelMerge),t.removeSub("control.trade.view.click.cancel_split",this._eventHandlerProxy_click_cancelSplit),t.removeSub("control.trade.view.click.split",this._eventHandlerProxy_split),t.removeSub("control.trade.view.click.create_wlb_no",this._eventHandlerProxy_click_createWlbNo),t.removeSub("control.trade.view.click.express_wlb_info",this._eventHandlerProxy_click_getWlbInfo),t.removeSub("control.trade.manual_merge",this._eventHandlerProxy_manual_merge)},_fn_event_handler:function(t){if(!t)throw new Error("[control.trade.collection:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[control.trade.collection:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{click_change_express:function(e,i,a){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_change_express] 参数异常.");t.pub("control.trade.module.common_express.select",e,i,a)},focusout_edit_logistics:function(i,l,d,o){if(!i||!this.map[i])throw new Error("[control.trade.collection:edit_logistics] 参数异常.");var r=a.getModel(i).toJSON(!0);if((r.outSid||"")!=d){if(d){var p=n.validate(r.expressCode,d);if(p!==!0)return e.dialog.alert(p,e.proxy(function(){o&&o.errorCallBack()},this)),!1}s.save({ids:String(i),expressId:l,startOutSid:d},function(e){t.pub("control.trade.view.focusout.edit_logistics.done",e)},null,!1,!1,!0)}},click_batch_update_express_id:function(e,i,a,n){if(!e||!this.map[e])throw new Error("[control.trade.collection:batch_update_express_id] 参数异常.");if(!a)return!1;for(var l=n,d=-1,o=0,r=l.length;r>o;o++)if(l[o]==e){d=o;break}if(-1===d)return!1;var p=l.slice(d);s.save({ids:p.join(","),expressId:i,startOutSid:a},function(e){e.templateType=0,t.pub("control.trade.view.click.batch_update_express_id.done",e)})},click_trade_halt:function(e,t){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_trade_halt] 参数异常.");t===!0?a.halt(e,null,null,!1,!1,!0):a.halt_cancel(e,null,null,!1,!1,!0)},click_print_deliver_end:function(e,t){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_print_deliver_express] 参数异常.");t===!0?API.pt_deliver_user_default_get({},function(t){a.print_deliver_end(String(e),t.data.id,null,null,!1,!1,!0)}):a.print_deliver_undo(String(e),null,null,!1,!1,!0)},trade_verify:function(e,t){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_print_deliver_express] 参数异常.");t===!0?a.verify(String(e),null,null,!1,!1,!0):a.verify_cancel(String(e),null,null,!1,!1,!0)},click_edit_shipping_address:function(i){if(!i||!this.map[i])throw new Error("[control.trade.collection:edit_shipping_address] 参数异常.");var s=a.getModel(i).toJSON();if("WAIT_SELLER_SEND_GOODS"!==s.status)throw new Error("[control.trade.collection:edit_shipping_address] "+s.tid+" 参数异常.");return 1===s.canConfirmSend?(e.dialog.alert("已在线发货订单不能修改收货地址！"),!1):(s._id=i,void t.pub("control.trade.module.shipping_address.edit",s))},click_edit_messageMemos:function(e,i){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_edit_messageMemos] 参数异常.");t.pub("control.trade.module.seller_memoflag.merge.edit",e,i)},click_logistics_info:function(e,i,a,s,n){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_logistics_info] 参数异常.");t.pub("control.trade.module.logistics_info",e,i,a,s,n)},click_cancel_merge:function(i,s,n){if(!i||!this.map[i])throw new Error("[control.trade.collection:click_cancel_merge] 参数异常.");a.trade_undo(i,{tid:s,taobaoId:n},e.proxy(function(e){e=e||{},t.pub("control.trade.view.click.cancel_merge_done",e.data)},this))},click_cancel_split:function(i,s,n){if(!i||!this.map[i])throw new Error("[control.trade.collection:click_cancel_split] 参数异常.");a.trade_undo(i,{tid:s,taobaoId:n},e.proxy(function(e){e=e||{},t.pub("control.trade.view.click.cancel_split_done",e.data)},this))},split:function(i,s,n,l,d,o,r){if(!i||!this.map[i])throw new Error("[control.trade.collection:split] 参数异常.");var p={oid:n,sysTid:l,tid:s,taobaoId:d},c="trade_split";"num"===o&&(c="trade_split_num",p.orderNum=r),a[c](i,p,e.proxy(function(e){e=e||{},t.pub("control.trade.view.click.split_done",e.data)},this))},manual_merge:function(i,s,n,l,d,o){a.manual_merge(i,s,{receiverInfoTid:n,expressPrintStatus:l,deliverPrintStatus:d,isVerfiy:o},e.proxy(function(e){e=e||{},t.pub("control.trade.manual_merge_done",e.data,i)},this))},click_create_wlb_no:function(i,s){if(!i||!this.map[i])throw new Error("[control.trade.collection:click_create_wlb_no] 参数异常.");a.create_wlb_no(i,{templateId:s},e.proxy(function(e){e=e||{},t.pub("control.trade.view.click.create_wlb_no_done_4print",i,e.data)},this))},express_wlb_info:function(i,s){if(!i||!this.map[i])throw new Error("[control.trade.collection:express_wlb_info] 参数异常.");a.express_wlb_info(i,{templateId:s},e.proxy(function(e){e=e||{},t.pub("control.trade.view.click.express_wlb_info.done",e.data),t.pub("control.trade.view.click.express_wlb_info.done_inprint",e.data)},this))}},_update_map_in_collection:function(e){this.map[String(e)]=1},_update_id_list_in_collection:function(t,i){var a=e.inArray(t,this.id_list);if(a>-1)for(var s=0;s<i.length;s++)this.id_list.splice(a+1,0,i[s]),a+=1},remove_id_from_id_list:function(t){var i=e.inArray(t,this.id_list);i>-1&&this.id_list.splice(i,1)},_update_trade_model_in_collection:function(e,t){new a(t)},command:function(e){if(!e)throw new Error("[control.trade.collection:command] 参数非法.");var t=this._command_map[e];if(!t)throw new Error("[control.trade.collection:command] "+e+" 参数异常.");t.apply(this,Array.prototype.slice.call(arguments,1))},_command_map:{edit_logistics:function(i){return 0===i.length?void e.dialog.alert("您还未选择订单！"):void t.pub("control.trade.module.express.edit",i.join(","))},print:function(i){return 0===i.length?void e.dialog.alert("您还未选择订单！"):void t.pub("control.trade.module.print",i.join(","))},edit_messageMemos:function(i){return 0===i.length?void e.dialog.alert("您还未选择订单！"):void t.pub("control.trade.module.message_memo.edit",i.join(","))},logistics_offline_send:function(e){l.offline_send(e.join(","),function(e){t.showSuccess("发货成功！",.8),t.pub("control.trade.module.logistics_offline_send.done",e)})},logistics_online_send:function(i){e.dialog.confirm("您是否确定使用在线发货",function(){l.online_send(i.join(","),function(e){t.showSuccess("操作成功！",.8),t.pub("control.trade.view.click.logistics_online_send.done",e)})})},logistics_online_cancel:function(e){l.online_cancel(String(e),function(e){t.showSuccess("操作成功！",.8),t.pub("control.trade.view.click.logistics_online_cancel.done",e)})},logistics_online_confirm:function(i,a){if(!i||!this.map[i])throw new Error("[control.trade.collection:click_logistics_online_confirm] 参数异常.");return a?void l.online_confirm(String(i),function(e){t.showSuccess("操作成功！",.8),t.pub("control.trade.view.click.logistics_online_confirm.done",e)},null,!1,!1,!0):(e.dialog.alert("您还未保存运单号！"),!1)},logistics_dummy_send:function(i){return i.length?void e.dialog.confirm("您是否确定使用无需物流发货",function(){l.dummy_send(i.join(","),function(e){t.showSuccess("发货成功！",.8),t.pub("control.trade.view.click.logistics_dummy_send.done",e)})}):void e.dialog.alert("您还未选择订单！")},print_express_end:function(i,s){if(!i.length)return void e.dialog.alert("您还未选择订单！");if(s===!0){var n=a.getModel(i[0]).toJSON().expressTemplateType,l=a.getModel(i[0]).toJSON().expressTemplateId+"";1==n&&(l="w"+l),a.print_express_end(i.join(","),l,function(){t.pub("control.trade.view.click.print_express_end.done",i)})}else a.print_express_undo(i.join(","),function(){t.pub("control.trade.view.click.print_express_undo.done",i)})},print_deliver_end:function(i,s){return i.length?void(s===!0?API.pt_deliver_user_default_get({},function(e){a.print_deliver_end(i.join(","),e.data.id,function(){t.pub("control.trade.view.click.print_deliver_end.done",i)})}):a.print_deliver_undo(i.join(","),function(){t.pub("control.trade.view.click.print_deliver_undo.done",i)})):void e.dialog.alert("您还未选择订单！")},trade_verify:function(i,s){return i.length?void(s===!0?a.verify(i.join(","),function(){t.pub("control.trade.view.click.trade_verify.done",i)}):a.verify_cancel(i.join(","),function(){t.pub("control.trade.view.click.trade_verify_cancel.done",i)})):void e.dialog.alert("您还未选择订单！")},trade_halt:function(i,s){return i.length?void(s===!0?a.batch_halt(i.join(","),function(){t.pub("control.trade.view.click.trade_halt.done",i)}):a.batch_halt_cancel(i.join(","),function(){t.pub("control.trade.view.click.trade_halt_cancel.done",i)})):void e.dialog.alert("您还未选择订单！")},manual_merge_orders:function(i){if(!i.length)return void e.dialog.alert("您还未选择订单！");if(i.length<2)return void e.dialog.alert("将要合并的订单至少为两笔");for(var a=!1,s=0;s<i.length;s++){var n=i;if(5==n.mergeSplitType){a=!0;break}}return a?void e.dialog.alert("已拆分的订单不能再进行合单操作"):void t.pub("control.trade.module.manual.merge.orders",i)},check_error_tids_for_data:function(e,t,i,s){var n=a.getModel(e);if(!n)throw new Error("[control.trade.logistics:online_confirm] 参数异常.");var l=n.toJSON();(1===l.isExcep||1===l.isHalt||1===l.isRefund)&&t.push(l.tid),1===l.canConfirmSend&&i.push(l.tid),l.outSid||s.push(l.tid)}},destroy:function(){this._event_unbind();this.map;e.each(this.id_list,function(e,t){a.getModel(t)&&a.getModel(t).destroy()}),this.map={},this.id_list=[],this.selected_id_list=[]}},t.controls.define("control.trade.collection",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.common_express"),a=t.controls.get("control.trade.express"),s=t.controls.get("control.pt.custom.base"),n=['<div style="position: absolute; z-index: 9999999; width: 354px; border: 1px solid #2b3d50; background: #ffffff; padding: 10px; display:none;">','<span class="ui-tag-group ui-tag-group-s1 mb_10 J_Express" style="margin-left:0"></span>','<a class="ml_5 J_Click" data-name="set_default">设置常用快递模板</a>',"</div>"],l='<span data-value="{value}" class="tag {class}" data-name="change_express" style="width:140px;margin:2px 5px;">{name}</span>',d={show:function(t,i,a,s){this.modelId=t,this.expressId=i,this.hasOutSid=s,this.target=a.currentTarget,this._render(),this._fn_ctrl_load(e.proxy(this._update,this)),this._show(a)},_show:function(t){var i=e(t.target).offset();this.$el.css({left:i.left,top:i.top+16}).show(),this._status_display=!0},hide:function(){this.$el&&(this.$el.hide(),this._status_display=!1,this.modelId=null,this.expressId=null,this.target=null)},_render:function(){this.$el||(this.$el=e(n.join("")).appendTo("body"),this._event_bind())},_fn_ctrl_load:function(e){i.get(e)},_update:function(t){var i=[],a=this.expressId;this._tempData=t,e.each(t,function(e,t){i.push(l.replace("{value}",t.templateId).replace("{class}",t.templateId==a?"J_Click current":"J_Click").replace("{name}",t.templateName))}),this.$el.find(".J_Express").html(i.join(""))},_event_bind:function(){this.$el.on("click",".J_Click",e.proxy(function(t){t.preventDefault(),this._fn_event_handler(e(t.currentTarget).attr("data-name")).call(this,t)},this)),e(document).on("click.control.trade.moudule.common_express.select",e.proxy(function(t){if(this._status_display){var i=this.$el[0],a=t.target;i===a||e.contains(i,a)||a===this.target||e.contains(this.target,a)||this.hide()}},this))},_event_unbind:function(){this.$el.off("click",".J_Click"),e(document).off("click.control.trade.moudule.common_express.select")},_fn_event_handler:function(t){if(!t)throw new Error("[control.trade.module.common_express.select:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[control.trade.module.common_express.select:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{change_express:function(i){if(e(i.currentTarget).hasClass("current"))return void this.hide();var n=this.modelId,l=e(i.currentTarget).attr("data-value"),d=this._tempData,o=function(){var e=t.pages._fn_act_get_hashs();if("pt"===e.root&&"custom"===e.app){s.savaExpress_courierNumber(n,l,"",function(e){t.pub("control.trade.module.common_express.edit.done_4print",n,l,d,e)})}else a.save({ids:String(n),expressId:l,startOutSid:""},function(e){t.pub("control.trade.module.common_express.edit.done_4print",n,l,d,e)},null,!1,!1,!0)};this.expressId.indexOf("w")>-1&&this.hasOutSid?e.dialog.confirm("该操作会导致原电子面单号失效，您是否继续操作",o):o(),this.hide()},set_default:function(){this.hide(),t.pub("control.trade.module.common_express.edit")}},destroy:function(){this.$el&&(this.hide(),this.$el.empty().remove(),this.$el=null,this._tempData=null)}};t.controls.define("control.trade.module.common_express.select",{init:function(){return d}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=t.controls.get("control.common_express"),s=['<div style="display:none;">','<form action="" method="post">','<div class="clearfix pd_10 J_Express" style="min-height:56px;"> </div>','<div class="ft-center pd_15">','<button class="btn btn-primary" type="submit">保存</button>','<span class="btn btn-gray ml_10 J_Close">关闭</span>',"</div>","</form>","</div>"],n={show:function(){this._render(),this._fn_ctrl_load_express(e.proxy(this._update,this)),this.$dialog=e.dialog({title:"选择常用快递单模板(最多10个)",width:890,close:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close(),this.$dialog=null},_render:function(){this.$el||(this.$el=e(s.join("")).appendTo("body"),this._event_bind())},_update:function(t){var i=[];e.each(t,function(e,t){i.push('<label class="f-lt" style="width:170px;margin:5px 0;"><input type="checkbox" name="id" value="{templateId}" data-taobaoId="{taobaoId}" {checked} {disabled}>{templateName}{default}</label>'.replace("{templateId}",t.templateId).replace("{taobaoId}",t.taobaoId).replace("{checked}",t.commonUse?"checked":"").replace("{disabled}",t.isDefault?"disabled":"").replace("{templateName}",t.templateName).replace("{default}",t.isDefault?'<span style="background:green;color:#ffffff;paddding:0 2px;">默认</span>':""))}),this.$el.find(".J_Express").empty().html(i.join("")).find("input").iCheck()},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this.destroy,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(s){s.preventDefault();var n=i.getData(s.currentTarget);n.id=n.id||[],n.id=e.isArray(n.id)?n.id:[n.id];var l=e(s.currentTarget).find('input[name="id"]:disabled').val();n.id.push(l);var d=[],o=[],r=e(s.currentTarget).find('input[name="id"]:checked'),p=t.pages._fn_act_get_hashs();if(!(l&&n.id.length||"pt"==p.root||"custom"==p.app))throw new Error("[control.trade.module.common_express:submit_form] 参数异常.");return n.id.length>10?void e.dialog.alert("常用快递模版最多可设置10个！"):(e.each(r,function(t,i){d.push(e(i).attr("value")),o.push(e(i).attr("data-taobaoId"))}),"pt"!==p.root||"custom"!==p.app||d.length?(API.pt_common_tag_batch({ids:d.join(","),taobaoIds:o.join(",")},e.proxy(function(){this.destroy(),a.clear(),t.pub("control.trade.module.common_express.edit.success")},this)),!1):void e.dialog.alert("请至少选择1个快递模版！"))},_fn_ctrl_load_express:function(e){var i=t.pages._fn_act_get_hashs(),a="pt_common_user_all",s={};"pt"===i.root&&"custom"===i.app&&(a="pt_custom_user_express_all",s={isMix:1}),API[a](s,function(t){e(t.data)})},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.dialog=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.common_express.edit",{init:function(){return n}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=window.component.AddrDropDown,s=t.controls.get("control.trade"),n=['<form action="" method="post">','<input type="hidden" name="_id" value="{{_id}}">','<input type="hidden" name="tid" value="{{tid}}">','<input type="hidden" name="taobaoId" value="{{taobaoId}}">','<div class="pt_5 pb_5 ft_14">','姓名：<input type="text" name="receiverName" value="{{receiverName}}" style="width:60px;margin-right:14px;"> ','手机：<input type="text" name="receiverMobile" value="{{receiverMobile}}" style="width:100px;margin-right:14px;"> ','固定电话：<input type="text" name="receiverPhone" value="{{receiverPhone}}" style="width:100px;margin-right:14px;"> ','邮编：<input type="text" name="receiverZip" value="{{receiverZip}}" style="width:60px">',"</div>",'<div class="pt_5 pb_5 ft_14">','所在地区：<span class="J_Area_Container"></span>',"</div>",'<div class="pt_5 pb_5 ft_14">','详细地址：<input type="text" name="receiverAddress" value="{{receiverAddress}}" style="width:560px">',"</div>",'<div class="fc-red pt_5 pb_5  ft_14">注：手机和固定电话至少填写一个</div>','<div class="ft-center pd_15">','<button class="btn btn-primary" type="submit">保存</button>','<span class="btn btn-gray ml_10 J_Close">关闭</span>',"</div>","</form>"];t.template.addTemp("template.control.trade.module.shipping_address.edit",n);var l={show:function(t){this._render(),this._update(t),this.$dialog=e.dialog({title:"修改收货地址",width:690,close:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e('<div style="display:none;"></div>').appendTo("body"),this._event_bind())},_update:function(e){e.receiverMobile=e.receiverMobile||"",e.receiverPhone=e.receiverPhone||"",this.$el.empty().html(t.template.get("template.control.trade.module.shipping_address.edit",e));var i=this.address_component=new a;i.renderUI(this.$el.find(".J_Area_Container"),[{name:"receiverState",value:e.receiverState},{name:"receiverCity",value:e.receiverCity},{name:"receiverDistrict",value:e.receiverDistrict}]),this.$el.find("select").css("marginRight","10px")},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this.hide,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(t){t.preventDefault();var a=i.getData(t.target),n=this.address_component.getValue();a.receiverState=n.province||"",a.receiverCity=n.city||"",a.receiverDistrict=n.area||"",a.receiverName=e.trim(a.receiverName),a.receiverMobile=e.trim(a.receiverMobile),a.receiverPhone=e.trim(a.receiverPhone),a.receiverZip=e.trim(a.receiverZip),a.receiverAddress=e.trim(a.receiverAddress);var l=[];if(""===a.receiverName&&l.push("姓名不能为空！"),""===a.receiverMobile&&""===a.receiverPhone&&l.push("手机和固定电话至少填写一个！"),a.receiverMobile&&!a.receiverMobile.match(/^1\d{10}$/)&&l.push("手机号码格式不正确！"),a.receierPhone&&!a.receierPhone.match(/^[\d-]+$/)&&l.push("固定电话格式不正确！"),""===a.receiverZip&&l.push("邮编不能为空！"),""===a.receiverAddress&&l.push("详细地址不能为空！"),l.length){var d=[];return e.each(l,function(e,t){d.push("<li>{msg}</li>".replace("{idx}",e).replace("{msg}",t))}),e.dialog.alert("<ol>"+d.join("")+"</ol>"),!1}return s.shippingaddress_update(a,e.proxy(function(){this.hide()},this)),!1},clear:function(){this._modelId=null,this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.dialog=null,this.address_component=null)},destroy:function(){this.hide()}};t.controls.define("control.trade.module.shipping_address.edit",{init:function(){return l}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=t.controls.get("control.trade"),s=['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="tid">','<input type="hidden" name="reset" value="true">','<dl class="dl-horizontal">','<dt class="pt_5 pb_5">旗帜：</dt>','<dd class="pt_5 pb_5">','<label class="mr_20"><input type="radio" name="flag" value="0"><span class="trade-icon-flag-0"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="1"><span class="trade-icon-flag-1"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="2"><span class="trade-icon-flag-2"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="3"><span class="trade-icon-flag-3"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="4"><span class="trade-icon-flag-4"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="5"><span class="trade-icon-flag-5"></span></label>',"</dd>",'<dt class="pt_5 pb_5">卖家备注：</dt>','<dd class="pt_5 pb_5">','<textarea name="memo" style="width:400px;height:200px;"></textarea>','<span id="chackTextarea-num" style="display: block; padding: 5px; color: #f00; text-align: right; width: 390px"><em class="comment-nums-detail">0</em>/500</span>',"</dd>","</dl>",'<div class="ft-center pd_15">','<button class="btn btn-primary" type="submit">保存</button>','<span class="btn btn-gray ml_10 J_Click" data-name="close">关闭</span>',"</div>","</form>","</div>"];
t.template.addTemp("template.control.trade.module.seller_memoflag.merge.edit",s);var n={show:function(t,i){var s=a.getModel(t);if(!s)throw new Error("[control.trade.module.seller_memoflag.merge.edit:show] 参数异常.");var n=s.toJSON(),l=n.messageMemos,d=l[i];d||(d={}),this.modelId=t,this._render(),this._update({tid:i,flag:d.sellerFlag||0,memo:""}),this.$dialog=e.dialog({title:"修改备注",width:690,close:e.proxy(this.clear,this),content:this.$el.show()}),this.$el.find("textarea").val(d.sellerMemo||"").focus(),this.textareaInsert()},textareaInsert:function(){var e=this.$el.find("textarea[name=memo]"),t=this.$el.find("button[type=submit]"),i=this.$el.find(".comment-nums-detail");e.insertinput({maxLength:500,exceed:!0,charsType:!0,maxHeight:200,onInput:function(e,a){a.leftLength>=0?(t.prop("disabled",!1).css("cursor","pointer"),i.text(a.maxLength-a.leftLength)):(i.text(a.leftLength),t.prop("disabled",!0).css("cursor","not-allowed"))}})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(t.template.get("template.control.trade.module.seller_memoflag.merge.edit")).appendTo("body"),this._event_bind())},_update:function(e){this.$el.find('input[name="tid"]').val(e.tid);var t=e.flag||0;this.$el.find('input[name="flag"]').filter(function(e,i){return i.value==t}).prop("checked",!0),this.$el.find('input[name="reset"]').filter(function(e,t){return"false"==t.value}).prop("checked",!0),this.$el.find("textarea").val(e.memo||""),this.$el.find('input[type="radio"]').iCheck()},_event_bind:function(){this.$el.on("click",".J_Click",e.proxy(function(t){t.preventDefault(),this._fn_event_handler(e(t.currentTarget).attr("data-name")).call(this,t)},this)),this.$el.on("submit","form",this._fn_event_handler("submit"))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Click")},_fn_event_handler:function(t){if(!t)throw new Error("[module.trade.module.seller_memoflag.merge.edit:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[module.trade.module.seller_memoflag.merge.edit] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{submit:function(s){s.preventDefault();var n=i.getData(s.target);n.memo=e.trim(n.memo);var l=!1,d=a.getModel(this.modelId),o=d.toJSON();if(1!=o.mergeSplitType)for(var r=o.orders,p=r[0].tid,c=1;c<r.length;c++)if(r[c].tid!=p){l=!0;break}if(l){var _={id:this.modelId,tid:n.tid,memo:n.memo,flag:n.flag,reset:n.reset};return a.trade_sellermemoflag_merge_update(_,e.proxy(function(){this.hide(),t.pub("control.trade.module.single_message_memo.edit.done",_)},this)),!1}var m={ids:String(this.modelId),memo:n.memo,flag:n.flag,reset:n.reset};return a.trade_sellermemoflag_update(m,e.proxy(function(){this.hide(),t.pub("control.trade.module.single_message_memo.edit.done",m)},this)),!1},close:function(){this.destroy()}},clear:function(){this.modelId=null,this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.seller_memoflag.merge.edit",{init:function(){return n}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=t.controls.get("control.common_express"),s=t.controls.get("control.trade"),n=t.controls.get("control.trade.util.create_express_no"),l=t.controls.get("control.trade.express"),d=['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="ids" valud="">','<dl class="dl-horizontal common-template" style="line-height: 36px;">','<dt class="">物流公司(快递模板)</dt>','<dd class="">','<select class="J_Select" name="expressId" data-zindex="999999" style="width:160px;"></select>','<a class="ml_10 J_Setting_Express">设置常用快递模板</a>',"</dd>",'<div class="number-detail-container">',"</div>","</dl>",'<p class="clear fc-999 mt_10">',"提醒：<br>",'<span class="helpmsg-wlb address-help-tip">','1. <span style="color: #F5040A;">如果订单为电子面单且已获取面单号，修改快递模板、网点信息会导致原单号失效，请谨慎操作</span><br>','2. 温馨小贴士：一笔订单至多能获取<span class="times">5</span>次电子面单号',"</span>",'<span class="helpmsg-common">',"1. 将所选第一条订单里的运单号作为“起始运单号”的默认值；其他订单按运单号规则自动生成<br>","2. 若运单号未填写，将只保存快递模板，快递模板若有变更，原运单号会清空","</span>","</p>",'<div class="pd_15 ft-center">','<button class="btn btn-primary" type="submit">保存物流</button>','<span class="btn btn-gray ml_10 J_Close">关闭</span>',"</div>","</form>","</div>"],o=['<div class="wlb-details">','<div class="sender-addr">','<span class="note-label">发货地址</span>','<select class="content select-address" id="wlb-sender-addr-menu"  name="wlbsenderaddress" data-zindex="999999">','<option act-loop="item in waybillAddresses" value="{{item.addressId}}-{{item.taobaoId}}" shopFlag="{{item.shopFlag}}" taobaoId="{{item.taobaoId}}" wlbTemplateType="{{wlbTemplateType}}" cpType="{{cpType}}" branchCode="{{item.branchCode}}" branchName="{{item.branchName}}" quantity="{{item.quantity}}">',"{{item.province}} {{item.city}} {{item.area}} {{item.addressDetail}}","</option>","</select>","</div>",'<div class="net-code">','<span class="note-label">网点名称</span>','<span data-branchcode="{{branchCode}}" id="sender-addr-shopFlag" act-if="waybillAddresses[0].shopFlag != undefined" style="cursor: default;font-size:12px;color:#fff;padding: 2px 5px;background:#d50000 none repeat scroll 0 0;">{{waybillAddresses[0].shopFlag}}</span>','<span class="content code-content">{{branchName}}</span>','<span class="available-container" act-if="cpType == 2">','<span class="available-no">(可用单号 <span class="wlb-quantity">{{quantity}}</span>)</span>',"</span>","</div>",'<div class="save-type">','<label><input type="radio" value="0" name="getoronlysave" checked/>批量获取电子面单号</label>','<label><input type="radio" value="1" name="getoronlysave"/>仅保存网点信息</label>',"</div>","</div>"],r=['<div class="common-details">','<dt class="J_Start_No">超始运单号</dt>','<dd class="J_Start_No">','<input type="text" name="startId" style="width:175px;">','<span class="fc-999">（可不填写）</span>',"</dd>","</div>"];t.template.addTemp("template.control.trade.express.edit.wlb_num_info",o),t.template.addTemp("template.control.trade.express.edit.common_num_info",r);var p={show:function(t){this._render(),t=t.split(",");var i=s.getModel(t[0]);if(!i)throw new Error("[control.trade.module.express.edit] 参数异常.");if(this._fn_validate_status(t)){var a=i.toJSON();this.expressId=a.expressTemplateId,this.sysTid=a.sysTid,this.taobaoId=a.taobaoId,this.tid=a.tid,1==a.expressTemplateType&&(this.expressId="w"+a.expressTemplateId),this.outSid=a.outSid||"",this.ids=t.join(","),this._fn_ctrl_load_express(e.proxy(this._dom_update,this)),this.$dialog=e.dialog({title:"批量填写物流",width:690,close:e.proxy(this.clear,this),content:this.$el.show()}),this._status_display=!0}},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$dialog=null,this.$el=null),this._status_display=!1,this.expressId=null,this.outSid=null,this.ids=null,this.sysTid=null,this.taobaoId=null,this.tid=null,this._wlb_address_data_info=null},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(d.join("")).appendTo("body"),this._event_bind())},_dom_update:function(e){this.$el.find('input[name="ids"]').val(this.ids),this._dom_update_express(e,this.expressId),this._onselect()},_dom_update_express:function(t,i){var a=[];e.each(t,function(e,t){var s=t.templateId==i?'selected = "selected"':"";a.push('<option value="{value}" {selected}>{text}</option>'.replace("{value}",t.templateId).replace("{selected}",s).replace("{text}",t.templateName))}),this.$el.find('select[name="expressId"]').html(a.join("")),this.$el.find('select[name="expressId"]').iSelect("update")},_fn_ctrl_load_express:function(e){a.get(function(t){e(t)})},_fn_validate_status:function(t){for(var i=0;i<t.length;i++){var a=s.getModel(t[i]),n={0:1,1:1};if(n[a.options.status]){if(0!=a.options.status&&1!=a.options.status)return e.dialog.alert("批量填写物流只允许操作待发货的订单，请重新选择"),!1}else if("WAIT_SELLER_SEND_GOODS"!=a.options.status&&"SELLER_CONSIGNED_PART"!=a.options.status)return e.dialog.alert("批量填写物流只允许操作待发货的订单，请重新选择"),!1}return!0},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._onsubmit,this)),this.$el.on("click",".J_Close",e.proxy(this.destroy,this)),this.$el.on("click",".J_Setting_Express",e.proxy(this._fn_event_handler_click_settingExpress,this)),this.$el.on("change",".J_Select",e.proxy(this._onselect,this)),this.$el.on("change",".select-address",e.proxy(this._onselectAddress,this)),t.sub("control.trade.module.common_express.edit.success",this._fnEventHandlerProxy_commonExpressEditSucss=e.proxy(this._fn_event_hanlder_commonExpressChange,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close"),this.$el.off("click",".J_Setting_Express"),this.$el.off("change","J_Select"),this.$el.off("change",".select-address"),t.removeSub("control.trade.module.common_express.edit.success",this._fnEventHandlerProxy_commonExpressEditSucss)},_onsubmit:function(d){d.preventDefault();var o=i.getData(this.$el.find("form")[0]);return a.get_detail(o.expressId,e.proxy(function(i){if(0===i.isWlb){if(o.startId=e.trim(o.startId),o.startId){var a=n.validate(i.code,o.startId);if(a!==!0)return e.dialog.alert(a),!1}l.save({ids:o.ids,expressId:o.expressId,startOutSid:o.startId||-1},e.proxy(function(e){this.hide(),e.templateName=i.templateName,e.templateType=0,t.pub("trade.list.sub_module_taskbar.edit_logistics.done",e)},this))}else{var d=this._wlb_address_data_info,r=this.$el.find("form").find("#wlb-sender-addr-menu").find('[value="'+e("#wlb-sender-addr-menu").val()+'"]'),p={ids:o.ids,expressId:o.expressId,getoronlysave:o.getoronlysave,templateName:i.templateName,expressCode:i.code,branchTaobaoId:r.attr("taobaoId")};if(d&&d.waybillAddresses.length)for(var c=0;c<d.waybillAddresses.length;c++)if(o.wlbsenderaddress.split("-")[0]==d.waybillAddresses[c].addressId){branchCode=d.waybillAddresses[c].branchCode;break}p.addressId=o.wlbsenderaddress.split("-")[0],p.branchCode=branchCode,s.express_wlb_select_n_save(p,e.proxy(function(e){this.hide(),e.ids.length&&t.pub("trade.list.sub_module_taskbar.edit_logistics.done",e)},this))}},this)),!1},_onselectAddress:function(t){var i=e(t.target),a=i.val(),s=i.find('option[value="'+a+'"]'),n=(s.attr("branchCode"),s.attr("branchName")),l=s.attr("quantity"),d=s.attr("shopFlag");this.$el.find(".code-content").html(n),this.$el.find(".wlb-quantity").html(l),d&&e("#sender-addr-shopFlag").html(d)},_onselect:function(){var i=this.$el.find('select[name="expressId"]').val();a.get_detail(i,e.proxy(function(e){this.$el&&(1==e.isWlb?(this.$el.find(".helpmsg-common").hide(),this.$el.find(".helpmsg-wlb").show(),this._fn_get_wlb_info_for_batch_update(e.templateId,e.templateName)):(this.$el.find(".helpmsg-wlb").hide(),this.$el.find(".helpmsg-common").show(),this.$el.find(".number-detail-container").empty().append(t.template.get("template.control.trade.express.edit.common_num_info"))),this.$el.find('input[name="startId"]').val(e.templateId==this.expressId?this.outSid:""))},this))},_fn_get_wlb_info_for_batch_update:function(e,t){var i=this;API.trade_express_wlb_info({templateId:e.replace(/w/,""),sysTid:i.sysTid,taobaoId:i.taobaoId,tid:i.tid},function(e){i._wlb_address_data_info=e.data,i._fn_render_UI_for_wlb(e.data,t)},function(){},!1)},_fn_render_UI_for_wlb:function(e,i){if(e){e.templateName=i,e.branchCode=e.waybillAddresses.length&&e.waybillAddresses[0].branchCode,e.branchName=e.waybillAddresses.length&&e.waybillAddresses[0].branchName,e.quantity=e.waybillAddresses.length&&e.waybillAddresses[0].quantity;var a=t.template.get("template.control.trade.express.edit.wlb_num_info",e);this.$el.find(".number-detail-container").empty().append(a),this.$el.find("#wlb-sender-addr-menu").iSelect(),this.$el.find('input[type="radio"]').iCheck()}},_fn_event_handler_click_settingExpress:function(){t.pub("control.trade.module.common_express.edit")},_fn_event_hanlder_commonExpressChange:function(){this._status_display===!0&&this._fn_ctrl_load_express(e.proxy(this._dom_update,this))},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.express.edit",{init:function(){return p}})}(jQuery,RayCloud),function(e,t){function a(e){this.modelId=e,this.$el=null,this._domReady=!1,this.readyList=[],this.idx="",this._status_locked=!1}var s=t.controls.get("control.sleep_queue"),n=t.controls.get("control.print_pt"),l=t.controls.get("control.trade"),d=t.controls.get("control.trade.express"),o=t.controls.get("control.common_express"),r=t.controls.get("control.trade.util.create_express_no"),p=t.controls.get("control.trade.logistics"),c=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),_=['<li class="f-lt J_Idx" style="width:40px;padding:10px 0; line-height: 48px;text-align: center;">',"{{_idx}}","</li>",'<li class="f-lt" style="width:210px;padding:10px 0;">',"订单实付：&#165;{{payment}}(含运费{{postFee}})<br>","订单号：",'<a act-if="routeType == undefined" target="_blank" href="http://trade.taobao.com/trade/detail/trade_item_detail.htm?bizOrderId={{tid}}">{{tid}}</a>','<span act-if="routeType == pt_custom">{{tid}}</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 2">合</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 4">合</span>','<span class="trade-icon-a12525" act-if="mergeSplitType == 6">拆</span>',"</li>",'<li class="f-lt" style="width:142px;padding:10px 0;">','{{buyerNick}}<span act-if="buyerNick != undefined && buyerNick != ">/</span>{{receiverName}}','<div act-if="_has_receiverMobile == 1">{{receiverMobile}}</div>','<div act-if="_has_receiverMobile == 0">{{receiverPhone}}</div>',"</li>",'<li class="f-lt template-info-container" style="width:440px;padding:10px 0;overflow: hidden;" uniqueId="{{tid}}_{{sysTid}}" taobaoid="{{taobaoId}}">',"<span>快递模板：",'<span act-if="status == WAIT_SELLER_SEND_GOODS || sendGoods == 0">','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 0" data-name="change_express" data-value="{{expressTemplateId}}">{{expressTemplateName}}</a>','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 1" data-name="change_express" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</a>',"</span>",'<span act-if="status == SELLER_CONSIGNED_PART">','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 0" data-name="change_express" data-value="{{expressTemplateId}}">{{expressTemplateName}}</a>','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 1" data-name="change_express" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</a>',"</span>",'<span act-if="status == WAIT_BUYER_CONFIRM_GOODS || sendGoods == 1">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>",'<span act-if="status == TRADE_FINISHED">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>","</span>",'<span act-if="status == WAIT_SELLER_SEND_GOODS || sendGoods == 0" class="ml_20">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" ><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="{{outSid}}" data-value="{{outSid}}" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid">保存</span></span>','<span act-if="_has_outSid == 0"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="" data-value="" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid">保存</span></span>','<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_update_express_id" data-title="智能填写运单号"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1"><input type="text" name="outSid" class="ipt-small input-small input-wlb" value="{{outSid}}" data-value="{{outSid}}" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly></span>','<span act-if="_has_outSid == 0"><input type="text" name="outSid" class="ipt-small input-small input-wlb" value="点击获取单号" data-value="" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly></span>','<span class="btn btn-small btn-mini ml_5 btn-wlb" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</span>",'<span act-if="status == SELLER_CONSIGNED_PART" class="ml_20">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" ><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="{{outSid}}" data-value="{{outSid}}" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid">保存</span></span>','<span act-if="_has_outSid == 0"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="" data-value="" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid">保存</span></span>','<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_update_express_id" data-title="智能填写运单号"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1"><input type="text" name="outSid" class="ipt-small input-small input-wlb" value="{{outSid}}" data-value="{{outSid}}" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly></span>','<span act-if="_has_outSid == 0"><input type="text" name="outSid" class="ipt-small input-small input-wlb" value="点击获取单号" data-value="" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly></span>','<span class="btn btn-small btn-mini ml_5 btn-wlb" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</span>",'<span act-if="status == WAIT_BUYER_CONFIRM_GOODS || sendGoods == 1" class="ml_20">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" >{{outSid}}</span>','<span act-if="_has_outSid == 0"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1">{{outSid}}</span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 btn-wlb showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</span>",'<span act-if="status == TRADE_FINISHED" class="ml_20">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1">{{outSid}}</span>','<span act-if="_has_outSid == 0"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1">{{outSid}}</span>','<span act-if="_has_outSid == 0"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 btn-wlb showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</span>","<br>","{{receiverState}}{{receiverCity}}{{receiverDistrict}} {{receiverAddress}}","</li>",'<li class="f-lt" style="width:70px;padding:10px 0;">','<span class="J_expressStatus">','<span class="trade-icon-1b6fd7 J_Tip" act-if="expressStatus == 1" data-title="快递单已打印">快</span>','<span class="trade-icon-818181 J_Tip" act-if="expressStatus == 0" data-title="快递单未打印">快</span>','<span class="trade-icon-1b6fd7 J_Tip" act-if="status == 1 && expressStatus == undefined" data-title="快递单已打印">快</span>','<span class="trade-icon-818181 J_Tip" act-if="status == 0 && expressStatus == undefined" data-title="快递单未打印">快</span>',"</span>",'<span class="J_deliverStatus">','<span class="trade-icon-3d900a J_Tip" act-if="deliverStatus == 1" data-title="发货单已打印">发</span>','<span class="trade-icon-818181 J_Tip" act-if="deliverStatus == 0" data-title="发货单未打印">发</span>',"</span>",'<span class="J_isVerify">','<span class="trade-icon-dc398a J_Tip" act-if="isVerify == 1" data-title="订单已审核">审</span>','<span class="trade-icon-818181 J_Tip" act-if="isVerify == 0" data-title="订单未审核">审</span>',"</span>","<br>",'<span class="J_isExcep"><span class="trade-icon-22b7ae J_Tip" act-if="isExcep == 1" data-title="淘宝异常订单">异</span></span>','<span class="J_isHalt"><span class="trade-icon-7327db J_Tip" act-if="isHalt == 1" data-title="挂起订单">挂</span></span>','<span class="isRefund">','<span class="trade-icon-a1055d J_Tip" act-if="isRefund == 1" data-title="退款订单">退</span>',"</span>","</li>",'<li class="f-lt J_Operate ft-center" style="width:95px;padding:10px 0;">','<div act-if="status == WAIT_SELLER_SEND_GOODS || status == 1">','<div act-if="canConfirmSend == 1">','<a class="J_Click" data-name="logistics_online_confirm">确认在线发货</a>','<br><a class="J_Click" data-name="logistics_online_cancel">取消在线发货</a>',"</div>","</div>",'<div act-if="status == SELLER_CONSIGNED_PART">','<div act-if="canConfirmSend == 1">','<a class="J_Click" data-name="logistics_online_confirm">确认在线发货</a>','<br><a class="J_Click" data-name="logistics_online_cancel">取消在线发货</a>',"</div>","</div>","</li>",'<li class="f-rt ft-center" style="width:50px;padding:20px 0 10px 0;" act-if="_deleteAble == 1">','<span class="trade-icon-delete J_Delete J_Click J_Tip" data-name="delete_trade" data-title="删除"></span>',"</li>"];t.template.addTemp("control.trade.model.print.trade_view",_),a.prototype={renderTo:function(t,i,a){this.$el||(this.$el=e('<ul class="clearfix" style="display:block;line-height:24px;border-bottom: 1px solid #eaeaea;"></ul>').appendTo(t),this.update("all",i,a),this.done(),this._event_bind())},ready:function(e){return this._domReady?void e.apply(this):void this.readyList.push(e)},done:function(){this._domReady=!0;var e=0,t=this.readyList;for(e;e<t.length;e++)t[e].call(this)},update:function(e){if(!e)throw new Error("[control.trade.print.trade_view:update] 参数非法.");if(!this._update_function_map[e])throw new Error("[control.trade.print.trade_view:update] "+e+" 参数异常.");var t=function(e,t){return function(){this._update_function_map[e].apply(this,t)}}(e,Array.prototype.slice.call(arguments,1));this.ready(t)},_update_function_map:{all:function(i,a){a&&(this.idx=a),i._has_receiverMobile=i.receiverMobile?1:0,i._has_outSid=i.outSid?1:0,i._idx=this.idx,i.receiverAddress=c.escape(i.receiverAddress),i._deleteAble=i._deleteAble||0,i.expressTemplateName=i.expressTemplateName||"";var s=t.pages._fn_act_get_hashs();"pt"==s.root&&"custom"==s.app&&(i.routeType="pt_custom"),i.outSid=e.trim(i.outSid),this.$el.empty().html(t.template.get("control.trade.model.print.trade_view",i)),this.$el.find(".J_Tip").iTip({skin:"blue",triggerType:"hover",zIndex:999999})},idx:function(e){this.idx=e,this.$el.find(".J_Idx").html(e)},_deleteAble:function(e){this.$el.find(".J_Delete")[e?"show":"hide"]()},_express:function(e){this.$el.find(".J_Express_Name").attr("data-value",e.expressTemplateId).html(e.expressTemplateName),this.$el.find(".J_CanDelivered").html(1==e.canDelivered?'<span class="ml_5 trade-icon-right"></span>':0==e.canDelivered?'<span class="ml_5 trade-icon-right"></span>':""),this.$el.find('input[name="outSid"]').val(e.outSid),this.$el.find(".J_Tip").iTip({skin:"blue",triggerType:"hover",zIndex:999999})},_outSid_error:function(){var e=this.$el.find('input[name="outSid"]');e[0].focus()},canConfirmSend:function(e){if(1==e){var t=['<div act-if="canConfirmSend == 1">','<a class="J_Click" data-name="logistics_online_confirm">确认在线发货</a>','<br><a class="J_Click" data-name="logistics_online_cancel">取消在线发货</a>',"</div>"];this.$el.find(".J_Operate").html(t.join(","))}else this.$el.find(".J_Operate").html("")},expressStatus:function(e){this.$el.find(".J_expressStatus").html(1==e?'<span class="trade-icon-1b6fd7 J_Tip"  data-title="快递单已打印">快</span>':'<span class="trade-icon-818181 J_Tip"  data-title="快递单未打印">快</span>'),this.$el.find(".J_expressStatus").find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})},deliverStatus:function(e){this.$el.find(".J_deliverStatus").html(1==e?'<span class="trade-icon-3d900a J_Tip" data-title="发货单未打印">发</span>':'<span class="trade-icon-818181 J_Tip" data-title="发货单未打印">发</span>'),this.$el.find(".J_deliverStatus").find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})},isRefund:function(e){this.$el.find(".J_isVerify").html(1==e?'<span class="trade-icon-a1055d J_Tip" data-title="退款订单">退</span>':""),this.$el.find(".J_isVerify").find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})}},_event_bind:function(){this.$el.on("click",".J_Click",e.proxy(function(t){t.preventDefault(),t.stopPropagation(),this._fn_event_handler(e(t.currentTarget).attr("data-name")).call(this,t)},this)),this.$el.on("focusin",".J_Focusout",this._fn_event_handler("focusin_outSid")),this.$el.on("focusout",".J_Focusout",this._fn_event_handler("focusout_outSid")),this.$el.on("click",".J_Save_OutSid",this._fn_event_handler("edit_logistics")),this.$el.on("click",".input-wlb",this._fn_event_handler("create_wlb_no")),this.$el.on("click",".btn-wlb",this._fn_event_handler("express_wlb_info"))},_event_unbind:function(){this.$el.off("click",".J_Click"),this.$el.off("focusin",".J_Focusout"),this.$el.off("focusout",".J_Focusout"),this.$el.off("click",".J_Save_OutSid"),this.$el.off("click",".input-wlb"),this.$el.off("click",".btn-wlb")},_fn_event_handler:function(t){if(!t)throw new Error("[module.trade.module.print.trade_view:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[module.trade.module.print.trade_view:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){return this._status_locked===!0?!1:void this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{focusin_outSid:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Save_OutSid").stop().animate({width:36}),this.$el.find(".trade-icon-bottom").stop().animate({width:0})},focusout_outSid:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(e.proxy(function(){var e=this.$el.find('input[name="outSid"]');e.val(e.attr("data-value")),this.$el.find(".J_Save_OutSid").stop().animate({width:0}),this.$el.find(".trade-icon-bottom").stop().animate({width:24})},this),200)},edit_logistics:function(i){this._timer&&(clearTimeout(this._timer),this._timer=null);var a=this.$el.find('input[name="outSid"]');return e.trim(a.val())===a.attr("data-value")?(this._timer=setTimeout(e.proxy(function(){var e=this.$el.find('input[name="outSid"]');e.val(e.attr("data-value")),this.$el.find(".J_Save_OutSid").stop().animate({width:0}),this.$el.find(".trade-icon-bottom").stop().animate({width:24})},this),200),!1):(this.$el.find(".J_Save_OutSid").stop().css("width",36),this.$el.find(".trade-icon-bottom").stop().css("width",0),void t.pub("control.trade.module.print.trade_view.edit_logistics",this.modelId,this.$el.find(".J_Express_Name").attr("data-value"),a.val(),i))},batch_update_express_id:function(){t.pub("control.trade.module.print.trade_view.batch_update_express_id",this.modelId,this.$el.find(".J_Express_Name").attr("data-value"),e.trim(this.$el.find('input[name="outSid"]').val()))},change_express:function(e){t.pub("control.trade.module.print.trade_view.click_express_name",this.modelId,this.$el.find(".J_Express_Name").attr("data-value"),e)},logistics_online_confirm:function(){t.pub("control.trade.module.print.trade_view.click.logistics_online_confirm",this.modelId,this.$el.find('input[name="outSid"]').val())},logistics_online_cancel:function(){t.pub("control.trade.module.print.trade_view.click.logistics_online_cancel",this.modelId)},delete_trade:function(){e.dialog.confirm("您确定要取消这笔订单吗？",e.proxy(function(){t.pub("control.trade.module.print.trade_view.click.delete_trade",this.modelId,this.idx)},this))},create_wlb_no:function(i){var a=e(i.target),s=a.parents(".f-lt").find(".J_Express_Name").attr("data-value").replace(/w/,""),n=a.attr("data-value");n||t.pub("control.trade.view.click.create_wlb_no",this.modelId,s)},express_wlb_info:function(i){var a=this,s=e(i.target),n=s.parents(".f-lt"),l=n.find(".J_Express_Name").attr("data-value").replace(/w/,"");t.sub("control.trade.view.click.express_wlb_info.done_inprint",a._getWlbInfo=function(e){a._fn_get_wlb_info_done_inprint(n,e),t.removeSub("control.trade.view.click.express_wlb_info.done_inprint",a._getWlbInfo)}),t.pub("control.trade.view.click.express_wlb_info",this.modelId,l)}},_fn_get_wlb_info_done_inprint:function(e,i){var a=t.controls.get("control.trade.module.wlb.info.dialog"),s=e.find(".J_Express_Name"),n=s.html(),l=s.attr("data-value");a.show(i,n,l,e)},lock:function(e){this._status_locked=e===!1?!1:!0},destroy:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el&&(this.$el.find(".J_Save_OutSid").stop(),this.$el.find(".trade-icon-bottom").stop(),this._event_unbind(),this.$el.empty().remove(),this.$el=null,this._domReady=!1,this.readyList=[],this.idx="")},delay_destroy:function(t){this._timer&&(clearTimeout(this._timer),this._timer=null),this.lock(),this.$el&&(this.$el.find(".J_Save_OutSid").stop(),this.$el.find(".trade-icon-bottom").stop(),this._event_unbind(),this.$el.fadeOut(t||800,e.proxy(function(){this.$el&&(this.$el.empty().remove(),this.$el=null,this._status_locked=!1)},this))),this._domReady=!1,this.readyList=[],this.idx=""}};var m={$el:null,_event_bind:function(){t.sub("control.trade.module.print.trade_view.click_express_name",this._fnEventHandlerProxy_ClickExpressName=this._fn_event_handler("click_express_name")),t.sub("control.trade.module.print.trade_view.edit_logistics",this._fnEventHandlerProxy_EditLogistics=this._fn_event_handler("edit_logistics")),t.sub("control.trade.module.print.trade_view.batch_update_express_id",this._fnEventHandlerProxy_BatchUpdateExpressId=this._fn_event_handler("batch_update_express_id")),t.sub("control.trade.module.print.trade_view.click.logistics_online_confirm",this._eventHandlerProxy_click_logisticsOnlineConfirm=this._fn_event_handler("click_logistics_online_confirm")),t.sub("control.trade.module.print.trade_view.click.logistics_online_cancel",this._eventHandlerProxy_click_logisticsOnlineCancel=this._fn_event_handler("click_logistics_online_cancel")),t.sub("control.trade.module.print.trade_view.click.delete_trade",this._eventHandlerProxy_click_deleteTrade=this._fn_event_handler("click_delete_trade")),t.sub("control.trade.valuechange.*",this._fnEventHandlerProxy_TradeValueChange=this._fn_event_handler("trade_valuechange"))},_event_unbind:function(){t.removeSub("control.trade.module.print.trade_view.click_express_name",this._fnEventHandlerProxy_ClickExpressName),t.removeSub("control.trade.module.print.trade_view.edit_logistics",this._fnEventHandlerProxy_EditLogistics),t.removeSub("control.trade.module.print.trade_view.batch_update_express_id",this._fnEventHandlerProxy_BatchUpdateExpressId),t.removeSub("control.trade.module.print.trade_view.click.logistics_online_confirm",this._eventHandlerProxy_click_logisticsOnlineConfirm),t.removeSub("control.trade.module.print.trade_view.click.logistics_online_cancel",this._eventHandlerProxy_click_logisticsOnlineCancel),t.removeSub("control.trade.module.print.trade_view.click.delete_trade",this._eventHandlerProxy_click_deleteTrade),t.removeSub("control.trade.valuechange.*",this._fnEventHandlerProxy_TradeValueChange)},_fn_event_handler:function(t){if(!t)throw new Error("[control.trade.module.print.collection:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[control.trade.module.print.collection:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))
},this)},_event_handler_object:{click_express_name:function(e,i,a){if(!e||!this.map[e])throw new Error("[control.trade.collection:click_change_express] 参数异常.");t.pub("control.trade.module.common_express.select",e,i,a)},edit_logistics:function(i,a,s){if(!i||!this.map[i])throw new Error("[control.trade.model.print.collection:edit_logistics] 参数异常.");var n=l.getModel(i).toJSON(!0);if((n.outSid||"")!=s){if(s){var o=r.validate(n.expressCode,s);if(o!==!0)return e.dialog.alert(o,e.proxy(function(){this.map[i]&&this.map[i].view.update("_outSid_error")},this)),!1}d.save({ids:String(i),expressId:a,startOutSid:s},function(e){t.pub("control.trade.view.focusout.edit_logistics.done_4print",e)},null,!1,!1,!0)}},batch_update_express_id:function(e,i,a){if(!e||!this.map[e])throw new Error("[control.trade.model.print.collection:batch_update_express_id] 参数异常.");var s=l.getModel(e).toJSON();if(!s.outSid)return!1;for(var n=-1,o=0,r=this.list,p=this.list.length;p>o;o++)if(r[o]==e){n=o;break}if(-1===n)return!1;var c=this.list.slice(n);d.save({ids:c.join(","),expressId:i,startOutSid:a},function(e){e.templateType=0,t.pub("control.trade.view.click.batch_update_express_id.done_4print",e)})},click_logistics_online_confirm:function(i,a){if(!a)return e.dialog.alert("您还未保存运单号！"),!1;if(!i||!this.map[i])throw new Error("[control.trade.model.print.collection:click_logistics_online_confirm] 参数异常.");p.online_confirm(String(i),function(){t.pub("control.trade.view.logistics_online_confirm.done_4print",[i])},null,!1,!1,!0)},click_logistics_online_cancel:function(e){if(!e||!this.map[e])throw new Error("[control.trade.model.print.collection:click_logistics_online_cancel] 参数异常.");p.online_cancel(String(e),function(){t.pub("control.trade.view.logistics.online_cancel.done_4print",[e])},null,!1,!1,!0)},click_delete_trade:function(t){if(!t||!this.map[t])throw new Error("[control.trade.model.print.collection:click_delete_trade] 参数异常.");if(1===this.list.length)throw new Error("[control.trade.model.print.collection:click_delete_trade] 只有一条不能删除.");var i=e.inArray(String(t),this.list),a=this.list.slice(i+1);this.remove(t);for(var s=0;s<a.length;s++)this.map[a[s]].view.update("idx",i+s+1);1===this.list.length&&this.map[this.list[0]].view.update("_deleteAble",0)},trade_valuechange:function(t){var i=t.id,a=t.changeList,s=this.map,n=this.list.length;if(e.each(["expressTemplateName","expressTemplateId","outSid","canDelivered"],function(t,o){if(-1!==e.inArray(o,a)&&(d=s[i])){var r=l.getModel(i).toJSON();return r._deleteAble=n>1?1:0,d.view.update("all",r),!1}}),-1!==e.inArray("status",a)){var d=s[i];return d&&this.remove(i),!1}if(-1!==e.inArray("canConfirmSend",a)){var d=s[i];d&&d.view.update("canConfirmSend",l.getModel(i).toJSON().canConfirmSend)}if(-1!==e.inArray("expressStatus",a)){var d=s[i];if(d){var t=l.getModel(i).toJSON();d.view.update("expressStatus",t.expressStatus)}}if(-1!==e.inArray("deliverStatus",a)){var d=s[i];if(d){var t=l.getModel(i).toJSON();d.view.update("deliverStatus",t.deliverStatus)}}if(-1!==e.inArray("isRefund",a)){var d=s[i];if(d){var t=l.getModel(i).toJSON();d.view.update("isRefund",t.isRefund,t)}}}},update:function(t){this.map={},this.list=t.split(",");var i=[],n=this.map,d=this.$el;e.each(this.list,function(e,t){var s=l.getModel(t);if(!s)throw new Error("[control.trade.module.print.collection] 参数异常.");i.push(s.toJSON()),n[t]={view:new a(t)}});var o=0,r=i.length;this._sleepQueue=new s(i,e.proxy(function(e){if(!this.list||!this.list.length)return this._sleepQueue&&this._sleepQueue.stop(),void(this._sleepQueue=null);var t=this.map[this.list[o]]&&this.map[this.list[o]].view;t&&(e._deleteAble=r>1?1:0,t.renderTo(d,e,++o))},this),8).start(),this._event_bind()},remove:function(i){if(this.map[i]){this.map[i].view.delay_destroy();var a=e.inArray(String(i),this.list);this.list.splice(a,1),delete this.map[i],t.pub("control.trade.module.print.collection.remove_id",i)}},command:function(e){if(!e)throw new Error("[control.trade.module.print.collection:command] 参数非法.");var t=this._command_map[e];if(!t)throw new Error("[control.trade.module.print.collection:command] "+e+" 参数异常.");t.apply(this,Array.prototype.slice.call(arguments,1))},_command_map:{logistics_offline_send:function(){if(!this.list.length)return!1;var e=this.list.slice(0);p.offline_send(this.list.join(","),function(){t.showSuccess("发货成功！",.8),t.pub("control.trade.module.logistics_offline_send.done_4print",e)})},logistics_online_send:function(){if(!this.list.length)return!1;var i=this;e.dialog.confirm("您是否确定使用在线发货",function(){var e=i.list.slice(0);p.online_send(i.list.join(","),function(){t.showSuccess("操作成功！",.8),t.pub("control.trade.view.click.logistics_online_send.done_4print",e)})})},logistics_dummy_send:function(){if(!this.list.length)return!1;var i=this;e.dialog.confirm("您是否确定使用无需物流发货",function(){var e=i.list.slice(0);p.dummy_send(i.list.join(","),function(){t.showSuccess("发货成功！",.8),t.pub("control.trade.view.click.logistics_dummy_send.done_4print",e)})})}},destroy:function(){this._sleepQueue&&(this._sleepQueue.stop(),this._sleepQueue=null),this._event_unbind();for(var e in this.map)this.map[e].view&&this.map[e].view.destroy();this.map=null,this.list=null,this.$el=null}},u=['<div style="display:none;">','<div class="J_Preview_List">',"</div>",'<div class="clearfix ">','<div class="ui-tag-group f-lt">','<span class="tag J_Print_Type current" data-id="0">快递单</span>','<span class="tag J_Print_Type" data-id="1">发货单</span>','<span class="tag J_Print_Type" data-id="2">拣货单</span>',"</div>",'<div class="print_tip inline-block ft-center">',"</div>",'<div class="f-rt">','<div class="pagination-pages">','<div class="pagination-page J_Preview_Pages ft-left" style="margin-right:0">',"</div>","</div>","</div>","</div>",'<div class="mt_10 mb_10 ft-center" style="height:280px;overflow-y:auto; *position: relative; *z-index: 999"><div class="inline-block J_Preview"></div></div>','<div class="ui-box ui-box-s1" style="margin-top:7px;">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">订单列表</div>',"</div>",'<div class="ui-box-bd nopadding J_Trade_List" style="overflow-y: auto; max-height: 140px;">',"</div>","</div>",'<div class="pd_15 ft-center">','<label class="mr_15 J_slt_printer"></label>','<span class="btn btn-success J_Print J_Common_btn">打印</span>','<span class="btn btn-success J_Print J_Deliver_btn" style="display:none">打印</span>','<span class="btn btn-success J_Print J_Picker_btn" style="display:none">打印</span>','<span class="btn btn-primary ml_15 J_Edit_Logistics">录入物流</span>','<span class="J_Logistics_Send">','<span class="trade-hover-text pl_5 ml_15 inline-block">','<span class="btn btn-primary J_logistics_offline_send">发货 |</span>','<span class="btn btn-primary trade-hover" style="margin-left: -14px;">v','<ul class="trade-hover-bd ft-left trade-hover-menu" style="bottom:100%;top:auto;color:#336699;left: -52px;border: 2px solid #2b3d50;">','<li class="trade-hover-item J_logistics_offline_send"><span class="default-check"></span>自己联系物流</li>','<li class="trade-hover-item J_logistics_online_send">在线下单(支持货到付款)</li>','<li class="trade-hover-item J_logistics_dummy_send">无需物流(虚拟)</li>',"</ul>","</span>","</span>","</span>",'<span class="btn btn-gray ml_15 J_Close">关闭</span>',"</div>","</div>"],_=['<ul class="clearfix" style="line-height:24px;border-top: 1px solid #eaeaea;margin-top:-1px;">','<li class="f-lt" style="width:40px;padding:10px 0; line-height: 48px;text-align: center;">',"{idx}","</li>",'<li class="f-lt" style="width:210px;padding:10px 0;">',"订单实付：&#165;{payment}(含运费{postFee})<br>","{itemKindCount}种商品，共{itemCount}件","</li>",'<li class="f-lt" style="width:142px;padding:10px 0;">',"{buyerNick}/{receiverName}<br>","{mobile}","</li>",'<li class="f-lt" style="width:430px;padding:10px 0;">','快递模板：<span class="">{expressTemplateName}</span>','<span class="">运单号：...</span><br>',"{receiverState}{receiverCity}{receiverDistrict} {receiverAddress}","</li>","</ul>"].join(""),h={expressDoneString:'<span class="trade-icon-1b6fd7 J_Tip" data-title="快递单已打印">快</span>',deliverDoneString:'<span class="trade-icon-3d900a J_Tip" data-title="发货单已打印">发</span>',show:function(t){var i=t.split(","),a=!1;if(i.length>1){var s=l.getModel(i[0]);if(!s)throw new Error("[control.trade.model.print:show] 参数异常.");for(var n=s.toJSON().expressTemplateId,d=1,o=i.length;o>d;d++){var r=l.getModel(i[d]);if(!r)throw new Error("[control.trade.model.print:show] 参数异常.");if(r.toJSON().expressTemplateId!=n){a=!0;break}}}a?e.dialog.confirm("您选的订单不是同一种快递模板，是否继续打印？",e.proxy(function(){this._fn_check_data(t)},this)):this._fn_check_data(t)},_fn_check_data:function(t){t=String(t).split(",");var i=t[0],a=l.getModel(i);if(!a)throw new Error("[control.trade.module.print:_fn_check_data] 参数异常.");var s=a.toJSON(),d=s.expressTemplateId,o=s.expressTemplateType,r=s.templateTaobaoId,p=[],c=[],_=[];e.each(t,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.model.print:_fn_check_data] 参数异常.");var a=i.toJSON();p.push(a.tid),c.push(a.sysTid),_.push(a.taobaoId)});var m=e.proxy(function(i){if(20001===i.subCode){var a=[],s=t,n="";e.each(i.data.errorTids,function(t,i){n+='<tr class="error-row"><td>'+i.tid+'</td><td class="error-details">'+i.errorSubMsg+"</td></tr>",(20101==i.errorSubCode||20102==i.errorSubCode||20103==i.errorSubCode||20104==i.errorSubCode)&&e.each(s,function(e,t){return p[e]==i.tid&&c[e]==i.sysTid?(a.push(t),!1):void 0})}),n='<div class="errormsg-table-wrapper"><div class="error-msg-note">以下订单您确定要打印吗？</div><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+n+"</table></div>",s=null,e.dialog({title:"确认",icon:"confirm.gif",content:n,okVal:"确定",ok:e.proxy(function(){a.length&&l.reload(a.join(",")),this._show(t.join(","))},this),cancelVal:"取消",cancel:e.proxy(function(){a.length&&l.reload(a.join(","))},this)})}else this._show(t.join(","))},this);1==o?n.getPtWlbExpressData({tids:p.join(","),sysTids:c.join(","),taobaoIds:_.join(","),templateId:d,mandatory:!1,templateTaobaoId:r},m):n.getPtCommonExpressData({tids:p.join(","),sysTids:c.join(","),taobaoIds:_.join(","),templateId:d,mandatory:!1,templateTaobaoId:r},m)},_show:function(i){this.modelIds=i.split(","),this.curPreviewType=0,this.curPreviewType_Id=null,this.curPreviewPageNo=1,this._status_locked=!1,this.expressId=null,this.deliverId=null,this._render(),this.$el.find(".J_slt_printer").empty().append(n.selectPrinter()),this.$el.find(".J_slt_printer select").iSelect();var a=t.pages.getHashKey("queryId");a||(a=1),1!=a&&(this.$el.find(".J_Edit_Logistics").hide(),this.$el.find(".J_Logistics_Send").hide()),m.$el=this.$el.find(".J_Trade_List"),m.update(i);var s=this.modelIds[0],d=l.getModel(s);if(!d)throw new Error("[control.trade.module.print:show] 参数异常.");var o=d.toJSON(),r=o.expressTemplateId;this.expressId=r,this.curPreviewType_Id=r,this.$dialog=e.dialog({title:"预览\\打印",width:1100,fixed:!1,content:this.$el.show(),close:e.proxy(this.clear,this)}),1!=t.pages.getHashKey("queryId")&&e('.J_Print_Type[data-id="2"]').hide(),1==o.expressTemplateType&&(r="w"+r,this.expressId="w"+o.expressTemplateId,this.curPreviewType_Id="w"+o.expressTemplateId),this.LODOP=getLodop(),this.iPrinterCount=this.LODOP.GET_PRINTER_COUNT(),this._fn_load_print_data(0,r,0,1,e.proxy(function(e){this._common_printer_name=e.template.printerName,(r+"").indexOf("w")>-1?this.update("preview",n.getPtWlbHtml(e)):this.update("preview",n.getPtCommonHtml(e));for(var t=0;t<this.iPrinterCount;t++)this._common_printer_name==this.LODOP.GET_PRINTER_NAME(t)&&this.$el.find(".J_slt_printer select").iSelect("select",t);this.commomPrintVal=this.$el.find(".J_slt_printer select").val()},this)),this.$el.find(".J_Print_Type").removeClass("current").filter(function(t,i){return 0==e(i).attr("data-id")}).addClass("current"),this.update("preview_page",1,this.modelIds.length),this._status_display=!0},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){if(!this.$el){this.$el=e(u.join("")).appendTo("body");var i=t.pages._fn_act_get_hashs();"pt"===i.root&&"custom"===i.app&&(e(".trade-hover-text").find(".trade-hover").hide(),e(".trade-hover-text").find(".J_logistics_offline_send").text("发货")),this._event_bind()}},update:function(e){if(!e)throw new Error("[control.trade.module.print:update] 参数非法.");if(!this._update_function_map[e])throw new Error("[control.trade.module.print:update] "+e+" 参数异常.");this._update_function_map[e].apply(this,Array.prototype.slice.call(arguments,1))},_update_function_map:{express:function(t,i){i=i||this.expressId;var a=[];e.each(t,function(e,t){a.push('<span class="tag J_Express_Template_Item" data-templateId="{templateId}" style="margin-top:5px;">{templateName}</span>'.replace("{templateId}",t.templateId).replace("{templateName}",t.templateName))}),this.$el.find(".J_Express_Template").length||this.$el.find(".J_Preview_List").empty().html('<span class="ui-tag-group ui-tag-group-s1 J_Express_Template" style="display:inline;"></span><a class="ml_15 J_Setting_Common_Express inline-block mt_10 mb_5">设置常用快递模板</a>'),this.$el.find(".J_Express_Template").html(a.join(""));this.$el.find(".J_Express_Template").find(".tag").filter(function(t,a){return e(a).attr("data-templateId")==i}).addClass("current")},deliver_list:function(t){var i=['<span class="ui-tag-group ui-tag-group-s1">'];e.each(t.list,function(e,t){i.push('<span class="tag current" data-id="{id}">{name}</span>'.replace("{id}",t.id).replace("{name}",t.name))}),i.push("</span>"),this.$el.find(".J_Preview_List").empty().html(i.join(""))},preview:function(e){this.$el.find(".J_Preview").empty().scrollTop(0).html(e)},print_type:function(t){t=1==t?1:0,this.$el.find(".J_Print_Type").removeClass("current").filter(function(i,a){return e(a).attr("data-id")==t}).addClass("current")},preview_page:function(e,t){var i='<span class="page-prev"><a class="{prevPage} J_Prev_Page">上一页<b></b></a></span><span class="page-next"><a class="{nextPage} J_Next_Page">下一页<b></b></a></span>',a=e>1?"":"disable",s=t>e?"":"disable";this.$el.find(".J_Preview_Pages").html(i.replace("{prevPage}",a).replace("{nextPage}",s))}},_fn_ctrl_load_express:function(e){o.get(e)},_status_pt_deliver_user_default_data:null,_fn_get_pt_deliver_user_default_data:function(t,i){return this._status_pt_deliver_user_default_data?void t(this._status_pt_deliver_user_default_data):void API.pt_deliver_user_default_get({},e.proxy(function(e){this._status_pt_deliver_user_default_data=e.data,t(this._status_pt_deliver_user_default_data)},this),i)},_status_print_data:{0:{},1:{}},_fn_load_print_data:function(t,a,s,d,o){var r=this,p=e.proxy(function(e){this._status_print_data[t][a]=e;var i={fieldValues:1==d?e.fieldValues.slice(0,1):e.fieldValues.slice(s,s+d),template:e.template};o(i)},this),c=e.proxy(function(i,s,d){r.queryFnInprogress=!0;var o=[],p=[],c=[];return e.each(i,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.model.print:_fn_load_print_data] 参数异常.");var a=i.toJSON();o.push(a.tid),p.push(a.sysTid),c.push(a.taobaoId)}),0==t?(a+"").indexOf("w")>-1?n.getPtWlbExpressData({tids:o.join(","),sysTids:p.join(","),taobaoIds:c.join(","),templateId:a.replace(/w/,""),mandatory:!0},e.proxy(function(e){s(e)},this),d):n.getPtCommonExpressData({tids:o.join(","),sysTids:p.join(","),taobaoIds:c.join(","),templateId:a,mandatory:!0},e.proxy(function(e){s(e)},this),d):n.getPtDeliverExpressData({tids:o.join(","),sysTids:p.join(","),taobaoIds:c.join(","),templateId:a,mandatory:!0},e.proxy(function(e){s(e)},this),d,!1)},this),_=0,m=[],u=0,h=null,f=[],v=!1;r.queryFnInprogress=!1,modelIds=[],i=0,r.modelIds&&r.modelIds.length&&(_=1+Math.ceil((r.modelIds.length-1)/200));var g=function(){if(!r.queryFnInprogress)if(0===i?(modelIds=r.modelIds&&r.modelIds.slice(s,s+1),i=1):(modelIds=r.modelIds&&r.modelIds.slice(i,i+200),i+=200),modelIds&&modelIds.length){var a=c(modelIds,function(e){r.queryFnInprogress=!1;var i=e.data;h=i.template,m=m.concat(i.fieldValues),u++,u===_?v||p({fieldValues:m,template:h}):1==d&&0==t&&(p({fieldValues:m,template:h}),v=!0),f=[]},function(){e.each(f,function(e,t){t&&t.abort&&t.abort()})});f.push(a)}else clearTimeout(r.timeout);modelIds&&!modelIds.length?clearTimeout(r.timeout):r.timeout=setTimeout(g,150)};g()},_event_bind:function(){this.$el.on("click",".J_Express_Template_Item",this._fn_event_handler("change_express_preview")),this.$el.on("click",".J_Setting_Common_Express",this._fn_event_handler("setting_common_express")),this.$el.on("click",".J_Print",this._fn_event_handler("print")),this.$el.on("click",".J_Prev_Page",this._fn_event_handler("prev_page")),this.$el.on("click",".J_Next_Page",this._fn_event_handler("next_page")),this.$el.on("click",".J_Print_Type",this._fn_event_handler("change_print_type")),this.$el.on("click",".J_Close",this._fn_event_handler("close")),this.$el.on("click",".J_Edit_Logistics",this._fn_event_handler("edit_logistics")),this.$el.on("click",".J_logistics_offline_send",this._fn_event_handler("logistics_offline_send")),this.$el.on("click",".J_logistics_online_send",this._fn_event_handler("logistics_online_send")),this.$el.on("click",".J_logistics_dummy_send",this._fn_event_handler("logistics_dummy_send")),t.sub("control.trade.module.print.collection.remove_id",this._fnEventHandlerProxy_collectionRemoveId=this._fn_event_handler("remove_id")),t.sub("control.trade.module.common_express.edit.success",this._fnEventHandlerProxy_commonExpressEditSucss=this._fn_event_handler("common_express_change"))},_event_unbind:function(){this.$el.off("click",".J_Express_Template_Item"),this.$el.off("click",".J_Setting_Common_Express"),this.$el.off("click",".J_Print"),this.$el.off("click",".J_Prev_Page"),this.$el.off("click",".J_Next_Page"),this.$el.off("click",".J_Print_Type"),this.$el.off("click",".J_Close"),this.$el.off("click",".J_Edit_Logistics"),this.$el.off("click",".J_logistics_offline_send"),this.$el.off("click",".J_logistics_online_send"),this.$el.off("click",".J_logistics_dummy_send"),t.removeSub("control.trade.module.print.collection.remove_id",this._fnEventHandlerProxy_collectionRemoveId),t.removeSub("control.trade.module.common_express.edit.success",this._fnEventHandlerProxy_commonExpressEditSucss)},_common_print_Status:!1,_deliver_print_Status:!1,_fn_ctrl_print_status:function(t,i){var a="快递单";".J_Common_btn"==t&&(this._common_print_Status=!0),".J_Deliver_btn"==t&&(this._deliver_print_Status=!0,a="发货单"),".J_Picker_btn"==t&&(this._picker_print_Status=!0,a="拣货单");var s=this.$el.find(t);if(!s.hasClass("disabled")){s.addClass("disabled").removeClass("btn-success");var n=10,l=this;s.iTip({skin:"blue",triggerType:"hover",content:"关闭窗口不影响打印",zIndex:999999});var d=setInterval(function(){l.$el?1>n?(s.removeClass("disabled").addClass("btn-success"),s.text("打印"),".J_Common_btn"==t&&(l._common_print_Status=!1),".J_Deliver_btn"==t&&(l._deliver_print_Status=!1),s.iTip("hide"),clearInterval(d)):(s.text("打印中（"+n+"s）"),n--):clearInterval(d)},1e3),o=e('<span style="display:none;">您选择了 <font color="red">'+i+"</font> 笔"+a+"打印</span>");e(".print_tip").html(o[0].outerHTML),e(".print_tip > span").show()}},_fn_event_handler:function(t){if(!t)throw new Error("[module.trade.module.print.trade_view:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[module.trade.module.print.trade_view:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){return this._status_locked===!0?!1:void this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{change_express_preview:function(t){var i=e(t.currentTarget);i.hasClass("current")||(this.$el.find(".J_Express_Template").find(".current").removeClass("current"),i.addClass("current"),this.curPreviewType_Id=i.attr("data-templateId"),this._fn_load_print_data(0,this.curPreviewType_Id,0,1,e.proxy(function(e){(this.curPreviewType_Id+"").indexOf("w")>-1?this.update("preview",n.getPtWlbHtml(e)):this.update("preview",n.getPtCommonHtml(e))},this)),this.update("preview_page",1,this.modelIds.length))},setting_common_express:function(){t.pub("control.trade.module.common_express.edit")},common_express_change:function(){this._status_display===!0&&this._fn_ctrl_load_express(e.proxy(function(){},this))},change_print_type:function(t){var i=e(t.currentTarget);if(!i.hasClass("current")){var a=i.attr("data-id");if(e(".print_tip").html(""),1==a)this._fn_get_pt_deliver_user_default_data(e.proxy(function(t){this.curPreviewType=1,this.curPreviewPageNo=1,this.$el.find(".J_Print_Type").removeClass("current").filter(function(t,i){return 1==e(i).attr("data-id")}).addClass("current"),this.deliverId=t.id,this.curPreviewType_Id=this.deliverId,this._fn_load_print_data(1,this.curPreviewType_Id,0,1,e.proxy(function(e){this.update("preview",n.getPtDeliverHtm(e.fieldValues,e.template,1)),this.$el.find(".J_slt_printer select").iSelect("select",n.setPrinter(e.template.printerName)),this.$el.find(".J_Common_btn").hide(),this.$el.find(".J_Deliver_btn").show(),this.$el.find(".J_Picker_btn").hide()},this))},this));else if(0==a)this.curPreviewType=0,this.curPreviewPageNo=1,this.curPreviewType_Id=this.expressId,this.$el.find(".J_Print_Type").removeClass("current").filter(function(t,i){return 0==e(i).attr("data-id")}).addClass("current"),this._fn_load_print_data(0,this.curPreviewType_Id,0,1,e.proxy(function(e){(this.curPreviewType_Id+"").indexOf("w")>-1?this.update("preview",n.getPtWlbHtml(e)):this.update("preview",n.getPtCommonHtml(e))},this)),this.$el.find(".J_slt_printer select").iSelect("select",this.commomPrintVal.toString()),this.$el.find(".J_Common_btn").show(),this.$el.find(".J_Deliver_btn").hide(),this.$el.find(".J_Picker_btn").hide();else{this.curPreviewType=2,this.$el.find(".J_Print_Type").removeClass("current").filter(function(t,i){return 2==e(i).attr("data-id")}).addClass("current"),this.$el.find(".J_Print_Type").parent().siblings(".f-rt").hide();var s=[],d=[],o=[];e.each(this.modelIds,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.model.print:_fn_load_print_data] 参数异常.");var a=i.toJSON();s.push(a.tid),d.push(a.sysTid),o.push(a.taobaoId)});var r=this;n.getPtPickerExpressData({tids:s.join(","),sysTids:d.join(","),taobaoIds:o.join(","),mandatory:!0},function(e){r.update("preview",n.getPtPickerHtm(e.data.fieldValues,e.data.template).template),r.$el.find(".J_slt_printer select").iSelect("select",n.setPrinter(e.data.template.printerName))}),this.$el.find(".J_Common_btn").hide(),this.$el.find(".J_Deliver_btn").hide(),this.$el.find(".J_Picker_btn").show()}this.update("preview_page",1,this.modelIds.length)}},prev_page:function(){1!==this.curPreviewPageNo&&(this.curPreviewPageNo--,this.update("preview_page",this.curPreviewPageNo,this.modelIds.length),0==this.curPreviewType?this._fn_load_print_data(0,this.curPreviewType_Id,this.curPreviewPageNo-1,1,e.proxy(function(e){(this.curPreviewType_Id+"").indexOf("w")>-1?this.update("preview",n.getPtWlbHtml(e,this.curPreviewPageNo)):this.update("preview",n.getPtCommonHtml(e,this.curPreviewPageNo))},this)):this._fn_load_print_data(1,this.curPreviewType_Id,this.curPreviewPageNo-1,1,e.proxy(function(e){this.update("preview",n.getPtDeliverHtm(e.fieldValues,e.template,this.curPreviewPageNo))},this)))},next_page:function(){this.curPreviewPageNo!==this.modelIds.length&&(this.curPreviewPageNo++,this.update("preview_page",this.curPreviewPageNo,this.modelIds.length),0==this.curPreviewType?this._fn_load_print_data(0,this.curPreviewType_Id,this.curPreviewPageNo-1,1,e.proxy(function(e){(this.curPreviewType_Id+"").indexOf("w")>-1?this.update("preview",n.getPtWlbHtml(e,this.curPreviewPageNo)):this.update("preview",n.getPtCommonHtml(e,this.curPreviewPageNo))},this)):this._fn_load_print_data(1,this.curPreviewType_Id,this.curPreviewPageNo-1,1,e.proxy(function(e){this.update("preview",n.getPtDeliverHtm(e.fieldValues,e.template,this.curPreviewPageNo))},this)))},print:function(){var t=e(".J_Trade_List");if(t.find(".J_Express_Name").text().indexOf("网点:")>=0)return void e.dialog.alert("暂不支持网点打印，请选择其它快递模版！");if(t.length&&t.find(".J_Express_Name").data("value").toString().indexOf("w")>=0&&t.find(".input-wlb").length&&!t.find(".input-wlb").data("value")&&0==this.curPreviewType)return void e.dialog.alert("未获取电子面单号，无法打印");if(!this.modelIds.length)return!1;if(this._common_print_Status&&this.$el.find(".J_Common_btn").is(":visible"))return!1;if(this._deliver_print_Status&&this.$el.find(".J_Deliver_btn").is(":visible"))return!1;var i=this.modelIds.join(","),a=this.curPreviewType_Id,s=this,d=[],o=0===this.curPreviewType,r=[],p=[],c="",_="",m=!1,u=[];if(e.each(this.modelIds,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.module.print] 参数异常.");var n=i.toJSON();o&&1===n.expressStatus?d.push(n.tid+"<br/>"):o||1!==n.deliverStatus||1!=s.curPreviewType?o||1!==n.pickerStatus||2!=s.curPreviewType||d.push(n.tid+"<br/>"):d.push(n.tid+"<br/>"),!o||"WAIT_SELLER_SEND_GOODS"!=n.status&&"SELLER_CONSIGNED_PART"!=n.status||(1==n.expressTemplateType&&(n.outSid||r.push(n.tid+"<br/>"),m=!0,_||(_=n.expressTemplateId),u.push(n.outSid)),c?n.expressTemplateId+"_"+n.expressTemplateType!=c&&p.push(n.tid+"<br/>"):(c=n.expressTemplateId+"_"+n.expressTemplateType,1==n.expressTemplateType&&(s.curPreviewType_Id="w"+n.expressTemplateId,a=s.curPreviewType_Id)))}),r.length)return void e.dialog.alert("以下订单未填写电子面单号<br/>订单号："+r.join(""));if(m&&p.length)return void e.dialog.alert("批量打印电子面单请使用相同的快递模板");var h=e.proxy(function(t){if(t&&t.data&&t.data.errorMessage)return void e.dialog.alert(t.data.errorMessage);if(d.length){var o="以下订单"+(0===this.curPreviewType?"快递单":1==this.curPreviewType?"发货单":"拣货单")+"已打印，是否继续？<br>订单号："+d.join("");return void e.dialog.confirm(o,e.proxy(function(){var t=this.$el.find(".J_slt_printer select").val();if(1==this.curPreviewType)this._fn_ctrl_print_status(".J_Deliver_btn",this.modelIds.length),this._fn_load_print_data(this.curPreviewType,this.curPreviewType_Id,0,this.modelIds.length,function(d){n.printPtDeliverHtm(d,t,function(){l.print_deliver_end(i,a,function(){for(var t=0;t<d.fieldValues.length;t++){var i=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[t]).attr("uniqueId")+"]");i.find(".J_deliverStatus > span").replaceWith(s.deliverDoneString)&&i.find(".J_deliverStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),i.find(".J_Operater").find('li[data-name="print_deliver_end"]').attr("data-name","print_express_undo").html("发货单未打印")}},null,!1,!1,!0)})});else if(2==this.curPreviewType){this._fn_ctrl_print_status(".J_Picker_btn",this.modelIds.length);var d=[],o=[],r=[];e.each(s.modelIds,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.model.print:_fn_load_print_data] 参数异常.");var a=i.toJSON();d.push(a.tid),o.push(a.sysTid),r.push(a.taobaoId)}),n.getPtPickerExpressData({tids:d.join(","),sysTids:o.join(","),taobaoIds:r.join(","),mandatory:!0},function(e){n.printPtPickerHtm(e,t)})}else{this._fn_ctrl_print_status(".J_Common_btn",this.modelIds.length);var p=this.curPreviewType_Id+"";this._fn_load_print_data(this.curPreviewType,this.curPreviewType_Id,0,this.modelIds.length,function(d){p.indexOf("w")>-1?0==d.template.templateType?n.printCN(d,t,function(){l.print_express_end(i,a,function(){for(var t=0;t<d.fieldValues.length;t++){var i=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[t]).attr("uniqueId")+"]");i.find(".J_expressStatus > span").replaceWith(s.expressDoneString)&&i.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),i.find(".J_Operater").find('li[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}},null,!1,!1,!0)}):n.printPtWlb(d,t,function(){l.print_express_end(i,a,function(){for(var t=0;t<d.fieldValues.length;t++){var i=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[t]).attr("uniqueId")+"]");i.find(".J_expressStatus > span").replaceWith(s.expressDoneString)&&i.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),i.find(".J_Operater").find('li[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}},null,!1,!1,!0)}):n.printPtCommonText(d,t,function(){l.print_express_end(i,a,function(){for(var t=0;t<d.fieldValues.length;t++){var i=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[t]).attr("uniqueId")+"]");i.find(".J_expressStatus > span").replaceWith(s.expressDoneString)&&i.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),i.find(".J_Operater").find('li[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}},null,!1,!1,!0)})})}},this))}var r=this.$el.find(".J_slt_printer select").val();if(1==this.curPreviewType)this._fn_ctrl_print_status(".J_Deliver_btn",this.modelIds.length),this._fn_load_print_data(this.curPreviewType,this.curPreviewType_Id,0,this.modelIds.length,function(t){n.printPtDeliverHtm(t,r,function(){l.print_deliver_end(i,a,function(){for(var i=0;i<t.fieldValues.length;i++){var a=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[i]).attr("uniqueId")+"]");a.find(".J_deliverStatus > span").replaceWith(s.deliverDoneString)&&a.find(".J_deliverStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a.find(".J_Operater").find('li[data-name="print_deliver_end"]').attr("data-name","print_express_undo").html("发货单未打印")}},null,!1,!1,!0)})});else if(2==this.curPreviewType){this._fn_ctrl_print_status(".J_Picker_btn",this.modelIds.length);var p=[],c=[],_=[];e.each(s.modelIds,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.model.print:_fn_load_print_data] 参数异常.");var a=i.toJSON();p.push(a.tid),c.push(a.sysTid),_.push(a.taobaoId)}),n.getPtPickerExpressData({tids:p.join(","),sysTids:c.join(","),taobaoIds:_.join(","),mandatory:!0},function(e){n.printPtPickerHtm(e,r)})}else{this._fn_ctrl_print_status(".J_Common_btn",this.modelIds.length);var m=this.curPreviewType_Id+"";this._fn_load_print_data(this.curPreviewType,this.curPreviewType_Id,0,this.modelIds.length,function(t){m.indexOf("w")>-1?0==t.template.templateType?n.printCN(t,r,function(){l.print_express_end(i,a,function(){for(var i=0;i<t.fieldValues.length;i++){var a=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[i]).attr("uniqueId")+"]");a.find(".J_expressStatus > span").replaceWith(s.expressDoneString)&&a.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a.find(".J_Operater").find('li[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}},null,!1,!1,!0)}):n.printPtWlb(t,r,function(){l.print_express_end(i,a,function(){for(var i=0;i<t.fieldValues.length;i++){var a=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[i]).attr("uniqueId")+"]");a.find(".J_expressStatus > span").replaceWith(s.expressDoneString)&&a.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a.find(".J_Operater").find('li[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}},null,!1,!1,!0)}):n.printPtCommonText(t,r,function(){l.print_express_end(i,a,function(){for(var i=0;i<t.fieldValues.length;i++){var a=e("#main").find(".module-trade-list-item[uniqueid="+e(s.$el.find(".template-info-container")[i]).attr("uniqueId")+"]");a.find(".J_expressStatus > span").replaceWith(s.expressDoneString)&&a.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a.find(".J_Operater").find('li[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}},null,!1,!1,!0)})})}},this);if(m){var f=[],v=[],g=[];e.each(this.modelIds,function(e,t){var i=l.getModel(t);if(!i)throw new Error("[control.trade.model.print:trade_print_wlb_confirm] 参数异常.");var a=i.toJSON();f.push(a.tid),v.push(a.sysTid),g.push(a.taobaoId)}),API.trade_print_wlb_confirm({templateId:_,waybillCodes:u.join(","),sysTids:v.join(","),tids:f.join(","),taobaoIds:g.join(",")},function(t){var i=t.data||{};
if("success"==i.status)h();else{var a=i.errorResult||[],s="";e.each(a,function(e,t){s+='<tr class="error-row"><td>'+t.outSid+'</td><td class="error-details">'+t.errorMsg+"</td></tr>"}),s&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>电子面单号</td><td class="error-details">错误原因</td></tr>'+s+"</table></div>",okVal:"确定",ok:function(){h()}})}})}else h()},edit_logistics:function(){t.pub("control.trade.module.express.edit",this.modelIds.join(","))},logistics_offline_send:function(){m.command("logistics_offline_send")},logistics_online_send:function(){m.command("logistics_online_send")},logistics_dummy_send:function(){m.command("logistics_dummy_send")},close:function(){this.destroy()},remove_id:function(t){var i=e.inArray(String(t),this.modelIds);return this.modelIds.splice(i,1),0===this.modelIds.length?void this.delay_destroy():(e.each(this._status_print_data,function(t,a){e.each(a,function(e,t){t.fieldValues.splice(i,1)})}),void(this.curPreviewPageNo-1==i&&(this.curPreviewPageNo=1,this.update("preview_page",this.curPreviewPageNo,this.modelIds.length),this._fn_load_print_data(this.curPreviewType,this.curPreviewType_Id,0,1,e.proxy(function(e){1==this.curPreviewType?this.update("preview",n.getPtDeliverHtm(e.fieldValues,e.template,1)):(this.curPreviewType_Id+"").indexOf("w")>-1?this.update("preview",n.getPtWlbHtml(e)):this.update("preview",n.getPtCommonHtml(e))},this)))))}},lock:function(){this._status_locked=!0},delay_destroy:function(t){this.lock(),this.$el&&(this._event_unbind(),this.$el.fadeOut(t||1e3,e.proxy(function(){this.$el&&(this.hide(),this.clear())},this)))},clear:function(){m.destroy(),this.$el&&(this._event_unbind(),this.$el.stop().empty().remove(),this.$el=null,this.$dialog=null,e(".print_tip > span").fadeOut(2e3,function(){e(".print_tip").html("")})),this.modelIds=null,this.curPreviewType=0,this.expressId=null,this.deliverId=null,this.curPreviewType_Id=null,this.curPreviewPageNo=1,this._status_print_data={0:{},1:{}},this._status_pt_deliver_user_default_data=null,this._status_display=!1,this._common_print_Status=!1,this._deliver_print_Status=!1},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.print",{init:function(){return h}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=t.controls.get("control.trade"),s=['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="ids">','<dl class="dl-horizontal">','<dt class="pt_5 pb_5">旗帜：</dt>','<dd class="pt_5 pb_5">','<label class="mr_20"><input type="radio" name="flag" value="">保留现有旗帜</label>','<label class="mr_20"><input type="radio" name="flag" value="0"><span class="trade-icon-flag-0"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="1"><span class="trade-icon-flag-1"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="2"><span class="trade-icon-flag-2"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="3"><span class="trade-icon-flag-3"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="4"><span class="trade-icon-flag-4"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="5"><span class="trade-icon-flag-5"></span></label>',"</dd>",'<dt class="pt_5 pb_5">修改方式：</dt>','<dd class="pt_5 pb_5">','<label class="mr_50"><input type="radio" name="reset" value="false" checked>在现有备注后追加</label>','<label><input type="radio" name="reset" value="true">覆盖现有备注</label>',"</dd>",'<dt class="pt_5 pb_5">卖家备注：</dt>','<dd class="pt_5 pb_5">','<textarea name="memo" style="width:400px;height:200px;"></textarea>','<span id="chackTextarea-num" style="display: block; padding: 5px; color: #f00; text-align: right; width: 390px"><em class="comment-nums-detail">0</em>/500</span>',"</dd>","</dl>",'<div class="ft-center pd_15">','<button class="btn btn-primary" type="submit">保存</button>','<span class="btn btn-gray ml_10 J_Click" data-name="close">关闭</span>',"</div>","</form>","</div>"];t.template.addTemp("template.control.trade.module.memoflag.edit",s);var n={show:function(t){this._render();var i=t.split(",")[0],s=a.getModel(i);if(!s)throw new Error("[control.trade.module.memoflag.edit:show] 参数异常.");var n=s.toJSON();this._update({ids:t,flag:n.messageMemos[n.tid].sellerFlag}),this.$dialog=e.dialog({title:"修改备注",width:690,close:e.proxy(this.clear,this),content:this.$el.show()}),this.textareaInsert()},textareaInsert:function(){var e=this.$el.find("textarea[name=memo]"),t=this.$el.find("button[type=submit]"),i=this.$el.find(".comment-nums-detail");e.insertinput({maxLength:500,exceed:!0,charsType:!0,maxHeight:200,onInput:function(e,a){a.leftLength>=0?(t.prop("disabled",!1).css("cursor","pointer"),i.text(a.maxLength-a.leftLength)):(i.text(a.leftLength),t.prop("disabled",!0).css("cursor","not-allowed"))}})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(t.template.get("template.control.trade.module.memoflag.edit")).appendTo("body"),this._event_bind())},_update:function(e){this.$el.find('input[name="ids"]').val(e.ids),this.$el.find('input[name="flag"]').filter(function(e,t){return""==t.value}).prop("checked",!0),this.$el.find('input[name="reset"]').filter(function(e,t){return"false"==t.value}).prop("checked",!0),this.$el.find("textarea").val(""),this.$el.find('input[type="radio"]').iCheck()},_event_bind:function(){this.$el.on("click",".J_Click",e.proxy(function(t){t.preventDefault(),this._fn_event_handler(e(t.currentTarget).attr("data-name")).call(this,t)},this)),this.$el.on("submit","form",this._fn_event_handler("submit"))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Click")},_fn_event_handler:function(t){if(!t)throw new Error("[module.trade.widget.edit_messageMemos:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[module.trade.widget.edit_messageMemos] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{submit:function(s){s.preventDefault();var n=i.getData(s.target);return a.trade_sellermemoflag_update(n,e.proxy(function(){this.hide(),t.pub("control.trade.module.message_memo.edit.done",n)},this)),!1},close:function(){this.destroy()}},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.memoflag.edit",{init:function(){return n}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=['<div style="border: 1px solid #eaeaea; background: #ffffff; padding: 10px 15px; line-height: 24px;">','<div style="border-bottom: 1px solid #eaeaea;" act-if="_has_logistics_info != 0"><span class="mr_20">快递模板：{{companyName}}</span><span class="inline-block">运单号：{{outSid}}</span></div>','<div act-if="traceList_length == 0">{{status}}</div>','<ul class="mt_10">','<li class="clearfix" act-loop="item in traceList">','<span style="width: 120px" class="f-lt mr_10">{{item.statusTime}}</span><span style="width:330px; float:left;overflow:hidden;">{{item.statusDesc}}</span>',"</li>","</ul>","</div>"];t.template.addTemp("template.control.trade.module.logistics_info",a);var s={show:function(t,i,a,s,n){return this.modelId=t,this.tid=i||"",this.taobaoId=a||"",this.oid=s||"",this.target=n.currentTarget,this._render(),this.$el&&this.$el.is(":visible")?void this.hide():(this._fn_ctrl_load(e.proxy(this._update,this)),void this._show(n))},_show:function(t){var i=e(t.target).offset(),a=e(window).width();i.left+500>a?this.$el.css({right:0,top:i.top+16}).show():this.$el.css({left:i.left,top:i.top+16}).show(),this._status_display=!0},hide:function(){this.$el&&(this.$el.hide(),this.$el.remove(),this.$el=null,this._status_display=!1,this.modelId=null,this.tid=null,this.taobaoId=null,this.oid=null,this.target=null)},_render:function(){this.$el||(this.$el=e('<div style="display:none;position: absolute; width: 500px; z-index: 9999999;"></div>').appendTo("body"),this._event_bind())},_fn_ctrl_load:function(e,t){var a=i.getModel(this.modelId);if(!a)throw new Error("[control.trade.module.logistics_info:_fn_ctrl_load] 参数异常.");var s=a.toJSON();API.trade_logistics_trace_search({tid:this.tid||s.tid,taobaoId:this.taobaoId||s.taobaoId,oids:this.oid},function(t){e(t.data)},t,!1,!1,!0)},_update:function(i){var a=[],s=i.length;e.each(i,function(e,i){i.traceList=i.traceList||[],i._has_logistics_info=i.companyName&&i.outSid?1:0,i.traceList_length=i.traceList.length,i.status=i.status||(s>1?"":"无法查看物流信息"),a[e]=t.template.get("template.control.trade.module.logistics_info",i)}),this.$el.html(a.join(""))},_event_bind:function(){e(document).on("click.control.trade.module.logistics_info",e.proxy(function(t){if(this._status_display){var i=this.$el[0],a=t.target;i===a||e.contains(i,a)||a===this.target||e.contains(this.target,a)||this.hide()}},this))},_event_unbind:function(){e(document).off("click.control.trade.module.logistics_info")},destroy:function(){this.hide()}};t.controls.define("control.trade.module.logistics_info",{init:function(){return s}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.common_express"),a=t.controls.get("control.trade.util.create_express_no"),s=t.controls.get("control.trade"),n=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),l=['<div style="position: absolute;z-index: 20005;width: 354px; border: 1px solid #2b3d50; background: #ffffff; padding: 10px; display:none;">','<span class="ui-tag-group ui-tag-group-s1 mb_10 J_Express" style="margin-left:0"></span>',"</div>"],d='<span data-value="{value}" class="tag {class}" express-code="{expressCode}" data-name="select_express" style="width:140px;margin:2px 5px;">{name}</span>',o=['<tr class="resend-item pass24hour-{{overtime}}" systid="{{sysTid}}" taobaoid="{{taobaoId}}" tid="{{tid}}">','<td class="resend-index">',"{{_idx}}","</td>",'<td class="resend-item-order">',"订单实付：&#165;{{payment}}(含运费{{postFee}})<br>",'订单号：<a target="_blank" href="http://trade.taobao.com/trade/detail/trade_item_detail.htm?bizOrderId={{tid}}">{{tid}}</a>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 2">合</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 4">合</span>','<span class="trade-icon-a12525" act-if="mergeSplitType == 6">拆</span>',"</td>",'<td class="resend-item-receiver">','<span act-if="buyerNick != undefined">{{buyerNick}}/{{receiverName}}</span>','<span act-if="buyerNick == undefined">{{receiverName}}</span>','<div act-if="_has_receiverMobile == 1">{{receiverMobile}}</div>','<div act-if="_has_receiverMobile == 0">{{receiverPhone}}</div>',"</td>",'<td  class="resend-item-express">',"<span>快递模板：",'<span act-if="overtime == 1">',"{{expressTemplateName}}","</span>",'<span act-if="overtime == 0">','<a class="J_Click J_Express_Name" data-name="change_express" data-value="">请选择快递模板</a>',"</span>","</span>",'<span class="ml_20">运单号：','<span act-if="overtime == 1">','<span act-if="expressTemplateType == 0">',"{{outSid}}","</span>",'<span act-if="expressTemplateType == 1">',"</span>","</span>",'<span act-if="overtime == 0">','<input type="text" name="outSid" class="ipt-small input-small J_Focusout" expressCode= "" value="" data-value="" data-name="edit_logistics" style="width:110px;">','<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_typein_express_no" data-title="智能填写运单号"></span>',"</span>","</span>","<br>","{{receiverState}}{{receiverCity}}{{receiverDistrict}} {{receiverAddress}}","</td>","</tr>"];t.template.addTemp("control.trade.model.resend.product",o);var r={crtHashs:t.pages._fn_act_get_hashs(),show:function(e){for(var t=[],i=0;i<e.length;i++){var a=s.getModel(e[i]).toJSON();a&&t.push(a)}this._render(t)},_render:function(i){var a=this,s=function(s){for(var l="",d=0,o=0;o<i.length;o++)i[o]._idx=o+1,i[o]._has_receiverMobile=i[o].receiverMobile?1:0,i[o].outSid=i[o].outSid||"",i[o].buyerNick=n.escape(i[o].buyerNick),i[o].receiverName=n.escape(i[o].receiverName),i[o].expressTemplateName=n.escape(i[o].expressTemplateName),i[o].receiverAddress=n.escape(i[o].receiverAddress),i[o].overtime=0,i[o].consignTime&&s-i[o].consignTime>864e5&&"pt"!=a.crtHashs.root&&(i[o].overtime=1,d++),l+=t.template.get("control.trade.model.resend.product",i[o]);l="pt"===a.crtHashs.root&&"custom"===a.crtHashs.app?'<div class="resend-tip">温馨小贴士：<span class="resend-helpmsg">1. 灰色背景的订单表示不可以重新发货</span></div><div class="trade-resend-wrapper"><table>'+l+"</table></div>":'<div class="resend-tip">温馨小贴士：<span class="resend-helpmsg">1. 已发货订单在发货后24小时内可以重新发货</span><span class="resend-helpmsg">2. 灰色背景的订单表示不可以重新发货</span><span class="resend-helpmsg">3. 普通面单和电子面单不能混合重新发货</span></div><div class="trade-resend-wrapper"><table>'+l+"</table></div>",a.$el=e(l).appendTo("body"),a._event_bind();var r=d==i.length||!1;a.$dialog=e.dialog({title:"重新发货",content:a.$el.show(),width:940,fixed:!1,okVal:r?"":"重新发货",ok:r?"":e.proxy(function(){return a._fn_resend_prdouct_data(),!1},this),cancelVal:"取消",cancel:function(){},close:function(){a.destroy()}})};this._getServerTime(s)},_getServerTime:function(e){API.util_getServerTime("",function(t){e&&e(t.data.datetime)},function(){throw Error("get server time failed.")})},_show:function(){},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_event_bind:function(){var e=this;this.$el.on("click",function(t){e._fn_actions_on_items(t)}),this.$el.find(".J_Tip").iTip({skin:"blue",triggerType:"hover",zIndex:10010})},_fn_actions_on_items:function(i){this.$el_select&&this.$el_select.remove();var a=e(i.target),s=a.attr("data-value");switch(dataName=a.attr("data-name")){case"change_express":this._fn_to_change_express(s,i);break;case"batch_typein_express_no":this._fn_to_batch_typein_express_no(a);break;case"express_wlb_info":var n=this,a=e(i.target),l=a.parents(".resend-item"),d=l.find(".J_Express_Name").attr("data-value").replace(/w/,""),o=l.attr("tid")+"_"+l.attr("systid");l.attr("uniqueid",o),t.sub("control.trade.view.click.express_wlb_info.done_inprint",n._getWlbInfo=function(e){n._fn_get_wlb_info_done(l,e),t.removeSub("control.trade.view.click.express_wlb_info.done_inprint",n._getWlbInfo)}),t.pub("control.trade.view.click.express_wlb_info",o,d)}},_fn_get_wlb_info_done:function(e,i){var a=t.controls.get("control.trade.module.wlb.info.dialog"),s=e.find(".J_Express_Name"),n=s.html(),l=s.attr("data-value");a.show(i,n,l,e)},_fn_to_change_express:function(t,a){var s=this;this._render_express_select(a),i.getUnCommonUse(function(i){var a=[];e.each(i,function(e,i){a.push(d.replace("{value}",i.templateId).replace("{class}",i.templateId==t?"J_Click current":"J_Click").replace("{name}",i.templateName).replace("{expressCode}",i.code))}),a.length&&s.$el_select.find(".J_Express").html(a.join(""))});var n=e(a.target).offset();this.$el_select.css({width:2*parseInt(s.$el_select.css("width"),10)+"px",left:n.left-460,top:n.top+16}).show()},_fn_to_batch_typein_express_no:function(t){for(var i=e(t).parents(".resend-item"),s=i.find(".J_Focusout"),n=i.find(".J_Express_Name"),l=s.val(),d=s.attr("expresscode"),o=n.attr("data-value"),r=n.html(),p=[],c=i;c.length;)p.push(c),c=c.next();if(l){var _=a.validate(d,l);if(_&&1!=_)return void e.dialog.alert(_,function(){s.focus()});for(var m=a.create(d,l,p.length),u=0;u<p.length;u++)p[u].find(".J_Express_Name").attr("data-value",o).html(r),p[u].find(".J_Focusout").attr("expresscode",d).val(m[u])}},_fn_resend_prdouct_data:function(){var i=this;if(this.$el){for(var n=this.$el.find(".resend-item"),l=[],d=[],o=[],r=[],p=[],c=[],_=[],m=[],u=[],h="",f="",v={},g=0;g<n.length-1;g++)for(var b=g+1;b<n.length;b++)try{if(e(n[g]).find(".J_Express_Name").attr("data-value").substring(0,1)!=e(n[b]).find(".J_Express_Name").attr("data-value").substring(0,1))return void e.dialog.alert("普通面单和电子面单不能混合重新发货")}catch(y){return void e.dialog.alert("普通面单和电子面单不能混合重新发货")}for(var x=0;x<n.length;x++){var w=e(n[x]),k=w.find(".J_Focusout");if(k.length){if(w.find(".J_Express_Name").attr("data-value").indexOf("w")<0)var T=w.find(".J_Express_Name").attr("data-value");else var T=w.find(".J_Express_Name").attr("data-value").substring(1);if(!w.find(".J_Express_Name").attr("data-value")){h="您的订单还未选择快递单模板。",errorInputDom=k;break}if(w.find(".J_Express_Name").attr("data-value").indexOf("w")<0){if(v[w.attr("tid")+"_"+w.attr("systid")]=0,!k.val()||!/^\w*\d+\w*$/.test(k.val())){h="请输入合法的运单号！",errorInputDom=k;break}if(h=a.validate(k.attr("expresscode"),k.val()),1!=h){errorInputDom=k;break}d.push(w.attr("tid")),o.push(w.attr("taobaoid")),r.push(w.attr("systid")),l.push(w.attr("tid")+"_"+w.attr("systid")),c.push(k.attr("expresscode")),_.push(T),m.push(w.find(".J_Express_Name").html()),p.push(k.val()),u.push(0)}else{v[w.attr("tid")+"_"+w.attr("systid")]=1;var S=API.trade_create_wlb_no({sysTids:w.attr("systid"),tids:w.attr("tid"),taobaoIds:w.attr("taobaoid"),templateId:T,type:1},function(e){try{if(e.data.successResult&&e.data.successResult.length>0&&(w.find(".J_Focusout").val(e.data.successResult[0].outSid),p.push(e.data.successResult[0].outSid),d.push(w.attr("tid")),o.push(w.attr("taobaoid")),r.push(w.attr("systid")),l.push(w.attr("tid")+"_"+w.attr("systid")),c.push(k.attr("expresscode")),_.push(T),m.push(w.find(".J_Express_Name").html()),u.push(1)),e.data.errorResult&&e.data.errorResult.length>0)return void(f+='<tr class="error-row"><td>'+w.attr("tid")+'</td><td class="error-details">'+e.data.errorResult[0].errorMsg+"</td></tr>")}catch(t){return}});try{if(S.responseJSON.message){t.clearShow(),f+='<tr class="error-row"><td>'+w.attr("tid")+'</td><td class="error-details">'+S.responseJSON.message+"</td></tr>";continue}}catch(y){continue}}}}if(h&&1!=h)return void e.dialog.alert(h,function(){errorInputDom.focus()});if(0==p.length&&e.dialog({title:"获取运单号失败",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+f+"</table></div>",okVal:"确定",ok:function(){}}),!d.length)return;var C=i.crtHashs,I="trade_resend_products",E={tids:d.join(","),taobaoIds:o.join(","),sysTids:r.join(","),outSids:p.join(","),companyCodes:c.join(","),templateIds:_.join(","),templateTypes:u.join(",")};"pt"===C.root&&"custom"===C.app&&(I="pt_custom_user_express_fill_logistics",E={ids:d.join(","),templateId:_.join(","),codeNumbers:p.join(",")}),API[I](E,function(a){if(a.data.errorTids&&a.data.errorTids.length){for(var n=a.data.errorTids,d=0;d<n.length;d++)f+='<tr class="error-row"><td>'+n[d].tid+'</td><td class="error-details">'+n[d].errorSubMsg+"</td></tr>";e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+f+"</table></div>",okVal:"确定",ok:function(){}})}else f?e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+f+"</table></div>",okVal:"确定",ok:function(){}}):(e.each(l,function(e,t){var i=s.getModel(t);if(i){var a={expressTemplateId:_[e],expressTemplateName:m[e],expressTemplateType:v[t],expressCode:c[e],outSid:p[e]};i._save(a)}}),i.$dialog.close(),t.pub("trade.list.sub_module_resend_product.edit_logistics.done",{ids:l,outSids:p,templateNames:m,expressTemplateType:v,templateIds:_}))},function(){},!1)}},_render_express_select:function(t){this.$el_select=e(l.join("")).appendTo("body"),this._event_bind_4$el_select(t)},_event_unbind:function(){this.$el&&this.$el.off("click"),this.$el_select&&this.$el_select.off("click")},_event_bind_4$el_select:function(t){var a=this;this.$el_select.on("click",function(s){var n=e(s.target);if(n.hasClass("tag")){var l=n.html(),o=n.attr("data-value"),r=n.attr("express-code"),p=e(t.target).parents(".resend-item"),c=p.find(".J_Express_Name");o!=c.attr("data-value")&&(p.find(".J_Express_Name").attr("data-value",o).html(l),c.attr("data-value").indexOf("w")<0?(p.find('span[data-name="express_wlb_info"]').replaceWith('<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_typein_express_no" data-title="智能填写运单号"></span>'),p.find(".J_Focusout").attr("expresscode",r).val("").removeAttr("disabled").attr("placeholder","").css("width","110px")):(p.find("span.trade-icon-bottom").replaceWith('<span class="btn btn-small btn-mini ml_5 J_Click" data-name="express_wlb_info" name="express_wlb_info">网点</span>'),p.find(".J_Focusout").attr("expresscode",r).attr("disabled","disabled").val("").attr("placeholder","重新发货自动获取运单号").css("width","11em"))),a.$el_select.remove()}else n.hasClass("J_Click")&&i.getUnCommonUse(function(t){var i=[];e.each(t,function(e,t){i.push(d.replace("{value}",t.templateId).replace("{class}","J_Click").replace("{name}",t.templateName).replace("{expressCode}",t.code))}),i.length&&(a.$el_select.css({width:2*parseInt(a.$el_select.css("width"),10)+"px",left:parseInt(a.$el_select.css("left"),10)-460+"px"}),a.$el_select.find(".J_Express").html(i.join("")),a.$el_select.find('[data-name="select_other"]').hide())})})},clear:function(){this.$el&&(this._event_unbind(),this.$el=null,this.$el_select&&this.$el_select.remove(),this.$el_select=null,this.$dialog=null)},destroy:function(){this.clear()}};t.controls.define("control.trade.module.resend.product",{init:function(){return r}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=['<div class="wlb-info-container">','<div class="express-info">','<span class="note-label">物流公司（快递模板）</span>','<span class="content">{{templateName}}</span>',"</div>",'<div act-if="showreadonlyaddress == 0" class="sender-addr">','<span class="note-label">发货地址</span>','<select class="content" id="sender-addr-menu"  name="senderaddress" data-zindex="999999">','<option act-loop="item in waybillAddresses" value="{{item.addressId}}-{{item.taobaoId}}" branchCode="{{item.branchCode}}" branchName="{{item.branchName}}" shopflag="{{item.shopFlag}}" taobaoId="{{item.taobaoId}}" cptype="{{cpType}}" wlbTemplateType="{{wlbTemplateType}}" quantity="{{item.quantity}}">',"{{item.province}} {{item.city}} {{item.area}} {{item.addressDetail}}","</option>","</select>","</div>",'<div act-if="showreadonlyaddress == 1" class="sender-addr-readonly">','<span class="note-label">发货地址</span>','<span class="content" title="{{detailAddr}}">',"{{detailAddr}}","</span>","</div>",'<div class="net-code">','<span class="note-label">网点名称</span>','<span class="ml_10" data-branchcode="{{branchCode}}" id="sender-addr-shopFlag" act-if="waybillAddresses[0].shopFlag != undefined" style="cursor: default;font-size:12px;color:#fff;padding: 2px 5px;background:#d50000 none repeat scroll 0 0;">{{waybillAddresses[0].shopFlag}}</span>','<span class="content code-content" data-branchcode="{{branchCode}}">{{branchName}}</span>','<span class="available-container" act-if="wlbTemplateType == 0 && cpType == 2">','<span class="available-no">可用单号</span>','<span class="available-count">{{quantity}}</span>',"</span>","</div>","</div>",'<div class="address-help-tip">','<div>温馨小贴士：一笔订单至多能获取<span class="times">5</span>次电子面单号</div>',"</div>"];t.template.addTemp("control.trade.model.wlb_temp_info",a);var s={show:function(a,s,n,l){if(!this.$dialog){var d=this;d.cpType=a.cpType,this._render(a,s,n,l),this.$dialog=e.dialog({title:"网点信息",content:this.$el.show(),width:500,fixed:!1,okVal:"确定",ok:e.proxy(function(){var o=d.$el.find("#sender-addr-menu"),r=e(o.find("option")[0]).attr("addressid"),p=d.$el.find(".code-content").attr("addressid"),c=e(o.find("option")[0]).attr("branchcode"),_=d.$el.find(".code-content").data("branchcode"),m=a.wlbTemplateType,u=d.$el.find('[value="'+e("#sender-addr-menu").val()+'"]'),h=u.attr("taobaoId");if(p&&p!=r){var f=function(){var e={},a=l.attr("uniqueId"),o=a.split("_");e.templateId=n.replace(/w/,""),e.addressId=p,e.tids=o[0],e.sysTids=o[1],e.taobaoIds=l.attr("taobaoid"),e.branchTaobaoId=h,e.branchCode=d.$el.find(".code-content").data("branchcode");var r=t.pages._fn_act_get_hashs(),u="trade_express_wlb_select_n_save";"pt"===r.root&&"custom"===r.app&&(u="trade_logistics_wlb_branch_select_custom"),API[u](e,function(){var o=l.find('[name="outSid"]'),r=o.val();r=/^\w*\d+\w*$/.test(r)?r:"";var p=i.getModel(a);if(p){var u={expressTemplateId:n.replace(/w/,""),expressTemplateName:s,expressTemplateType:1,outSid:1==d.cpType?r:""};p._save(u)}t.pub("trade.list.sub_module_taskbar.edit_logistics.done",{ids:[a],outSids:1==m?1==d.cpType?[r]:c==_?[r]:"":1==d.cpType?[r]:"",templateType:1,templateId:n.replace(/w/,""),templateName:s});({sysTids:-1,tids:e.tids,taobaoIds:e.taobaoIds})}),d.$dialog.close()};return 1==d.cpType||!/^\w*\d+\w*$/.test(l.find('input[name="outSid"]').val())||m&&c==_?f():e.dialog.confirm("该操作会导致原电子面单号失效，您是否继续操作",f),!1}},this),cancelVal:l.find(".showreadonlyaddress").length?"":"取消",cancel:l.find(".showreadonlyaddress").length?"":function(){},close:function(){d.destroy()}})}},_render:function(i,a,s,n){if(i){i.templateName=a,i.branchCode=i.waybillAddresses.length&&i.waybillAddresses[0].branchCode,i.branchName=i.waybillAddresses.length&&i.waybillAddresses[0].branchName,i.quantity=i.waybillAddresses.length&&i.waybillAddresses[0].quantity,n.find(".showreadonlyaddress").length?(i.showreadonlyaddress=1,i.detailAddr=(i.waybillAddresses[0].province+" "+i.waybillAddresses[0].city+" "+i.waybillAddresses[0].area+" "+i.waybillAddresses[0].addressDetail).replace(/\"/g,'\\"').replace(/\</g,"&lt;").replace(/\>/g,"&gt;")):i.showreadonlyaddress=0;var l=t.template.get("control.trade.model.wlb_temp_info",i);this.$el=e(l).appendTo("body"),this._event_bind()}},_event_bind:function(){var t=this;t.$el.find("#sender-addr-menu").iSelect().on("change",function(i){var a=e(i.target),s=a.val(),n=a.find('[value="'+s+'"]'),l=n.attr("branchCode"),d=n.attr("branchName");quantity=n.attr("quantity"),shopFlag=n.attr("shopflag"),shopFlag&&e("#sender-addr-shopFlag").html(shopFlag),t.$el.find(".code-content").data("branchcode",l),t.$el.find(".code-content").attr("addressid",s.split("-")[0]).html(d),t.$el.find(".available-count").html(quantity)})},_event_unbind:function(){},clear:function(){this.$el&&(this._event_unbind(),this.$el=null,this.$dialog=null)},destroy:function(){this.clear()}};t.controls.define("control.trade.module.wlb.info.dialog",{init:function(){return s}})}(jQuery,RayCloud),function(e,t){var i={show:function(t,i){var a=this;a.config=t,a.originalTarget=i,API.pt_simple_list({isMix:0},function(t){var i=t.data;a._render(i),a.$dialog=e.dialog({title:"选择快递单模板",width:800,clear:e.proxy(a.clear,a),content:a.$el.show()})})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(t){for(var i=['<div class="clearfix" style="padding-left: 20px;">'],a=this.originalTarget.attr("data-templateid"),s=0,n=t.length;n>s;s++){var l=t[s].templateId==a?"checked":"";i.push('<label class="f-lt" style="width:170px; height:22px;margin:5px 0;"><input '+l+' type="radio" style="border: 2px solid transparent; margin: 0; box-shadow:none" name="id" data-temptype="'+t[s].isWlb+'" data-code="'+t[s].code+' " data-text="'+t[s].templateName+'" value="'+t[s].templateId+'"> '+t[s].templateName+"</label>")}i.push("</div>"),this.$el=e(i.join("")).appendTo("body"),this._event_bind()},_event_bind:function(){this.$el.on("click","input[name=id]",e.proxy(this._fn_event_handler_express,this))},_event_unbind:function(){this.$el.off("click","input[name=id]")},_fn_event_handler_express:function(t){var i=e(t.currentTarget),a={id:this.originalTarget.attr("data-id"),templateId:i.val(),templateName:i.data("text"),isWlb:i.attr("data-temptype"),code:i.attr("data-code")};this.config&&this.config.callback&&this.config.callback(a),this.hide()},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.common_express.checkone",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=['<div class="module-close-order">','<div class="pd-15">','<label class="mr_15 operation-area">','<span class="ft_14">请选择关闭该订单的理由：</span>','<select  data-zindex="999999" class="close_trade_reason">',"<option>未及时付款</option>","<option>买家不想买</option>","<option>买家信息填写错误，重新拍</option>","<option>恶意买家/同行捣乱</option>","<option>买家拍错了</option>","<option>同城见面交易</option>","</select>","</label>","<div>",'<div class="help-tips">温馨小贴士：请您在与买家达成一致的前提下， 使用关闭订单这个功能！</div>',"</div>"].join(""),a={show:function(t,a,s,n){this.tid=a.split("_")[0],this.taobaoid=s,this.itemUI=t;var l=e(i);this.$dialog=e.dialog({title:"关闭订单",content:l,okVal:"确定",ok:e.proxy(function(){var i=l.find(".close_trade_reason").find("option:selected").text();API.trade_close({tid:this.tid,reason:i},e.proxy(function(){e.dialog.showSuccess("关闭成功！"),n&&t.fadeOut(2e3,function(){t.remove()})},this))},this),cancelVal:"取消",cancel:function(){}}),l.find("select").iSelect()},destroy:function(){this.$dialog&&(this.$dialog=null)}};t.controls.define("control.trade.module.trade.close",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i=['<div class="pd-15">','<span class="ft_14">延长本交易的“确认收货”期限为：</span>','<select  data-zindex="999999" class="delay_confirm_day">','<option value="3">3天</option>','<option value="5">5天</option>','<option value="7">7天</option>','<option value="10">10天</option>',"</select>","<div>"].join(""),a={show:function(t,a,s){var n=a.split("_");this.tid=n[0],this.sysTid=n[1],this.taobaoId=s,this.itemUI=t;var l=e(i);this.$dialog=e.dialog({title:"延长收货时间",content:l,okVal:"确定",ok:e.proxy(function(){var t=l.find(".delay_confirm_day").find("option:selected").val();API.receivetime_delay({tid:this.tid,sysTid:this.sysTid,taobaoId:this.taobaoId,days:t},e.proxy(function(){e.dialog.showSuccess("延长收货时间成功！")},this))},this),cancelVal:"取消",cancel:function(){}}),l.find("select").iSelect()},destroy:function(){this.$dialog&&this.$dialog.close()}};t.controls.define("control.trade.module.delay_confirm",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=(function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),{show:function(t,a,s){var n={uniqueId:a,itemUI:t};i.trade_update(n,e.proxy(s,this))},destroy:function(){this.$dialog&&this.$dialog.close()}});t.controls.define("control.trade.module.trade.sync_single",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.trade"),['<div class="marge-list-wrapper module-merge-order">','<div class="module-trade-list">','<table class="module-trade-list-header J_TradeList_Head" id="module-trade-list-header" style=" margin-left: 10px; width: 986px;">',"<tr>",'<th width="46">','<div class="cell-box ft-center">','<span class="check checked"><input type="checkbox" class="J_Select_All" checked></span>',"</div>","</th>",'<th width="160" class="filter-header">','<div class="cell-box order-info-head">','<span class="trade-hover ">','<span class="trade-hover-text">订单信息</span>',"</span>","</div>","</th>",'<th width="80" class="filter-header">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">商品信息</span>',"</span>","</div>","</th>",'<th  width="130" class="filter-header">','<div class="cell-box">','<span class="trade-hover J_TradeStatus_List_Container">','<span class="trade-hover-text">打印/审核/异常状态</span>',"</span>","</div>","</th>",'<th width="216" class="filter-header">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">物流信息</span>',"</span>","<div>","</th>",'<th  width="260" class="filter-header">','<div class="cell-box">','<span class="trade-hover">','<span class="trade-hover-text">留言备注</span>',"</span>","</div>","</th>","</tr>","</table>",'<div class="module-trade-list J_TradeList_Body" style="max-height: 400px;overflow-x: hidden;overflow-y: auto;margin-bottom: 0;"></div>',"</div>"]),a=['<div class="module-trade-list-item module-trade-list-item-selected" uniqueid=@@uniqueid taobaoid="{{taobaoId}}">','<div class="J_Tbody">','<div class="module-trade-list-item-row1">','<div class="cell-box area-checkbox">','<span class="check checked"><input type="checkbox" data-name="check_select_item" name="" class="J_Checkbox" checked></span>','<div class="mr_5"><span class="trade-icon-close J_Trigger_Show_Orders J_Click" data-name="trigger_show_orders"></span></div>',"</div>",'<div class="cell-box order-time">',"<div>{{_sort_time}}</div>",'<span class="trade-icon-ff9000" act-if="mergeSplitType == 2">合</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 4">合</span>','<span class="trade-icon-a12525" act-if="mergeSplitType == 5">拆</span>',"</div>",'<div class="cell-box product-count">','<a class="J_Click" data-name="trigger_show_orders">{{itemKindCount}}种商品</a>',"</div>",'<div class="cell-box express-status">','<span class="J_expressStatus">','<span class="trade-icon-1b6fd7 J_Tip" act-if="expressStatus == 1" data-title="快递单已打印">快</span>','<span class="trade-icon-818181 J_Tip" act-if="expressStatus == 0" data-title="快递单未打印">快</span>',"</span>",'<span class="J_deliverStatus">','<span class="trade-icon-3d900a J_Tip" act-if="deliverStatus == 1" data-title="发货单已打印">发</span>','<span class="trade-icon-818181 J_Tip" act-if="deliverStatus == 0" data-title="发货单未打印">发</span>',"</span>",'<span class="J_isVerify">','<span class="trade-icon-dc398a J_Tip" act-if="isVerify == 1" data-title="订单已审核">审</span>','<span class="trade-icon-818181 J_Tip" act-if="isVerify == 0" data-title="订单未审核">审</span>',"</span>","<br>",'<span class="J_isExcep"><span class="trade-icon-22b7ae J_Tip" act-if="isExcep == 1" data-title="淘宝异常订单">异</span></span>','<span class="J_isHalt"><span class="trade-icon-7327db J_Tip" act-if="isHalt == 1" data-title="挂起订单">挂</span></span>','<span class="isRefund">','<span class="trade-icon-a1055d J_Tip" act-if="isRefund == 1" data-title="退款订单">退</span>',"</span>","</div>",'<div class="cell-box J_Express_Container">',"@@expressUI","</div>",'<div class="cell-box J_messageMemos">',"@@MemoUI","</div>","</div>",'<div class="module-trade-list-item-row2">','<span style="padding:0;">','<div class="cell-box ship-detailed-info"  style="padding-left:15px;word-break:break-all;">','买家：<a target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid={{_buyerWangwang}}&siteid=cntaobao&status=2&charset=utf-8">{{buyerNick}}<img border="0" width="16" src="http://amos.alicdn.com/online.aw?v=2&uid={{_buyerWangwang}}&site=cntaobao&s=2&charset=utf-8" alt=" " /></a>','<span class="J_Shipping_Address">@@addressUI</span>',"</div>","</span>","</div>",'<div class="module-trade-list-item-row3" style="display: none;">','<div class="module-trade-list-items-wrap">','<div class="module-trade-list-items">','<table class="J_Orders_List">',"@@orderUI","</table>","</div>","</div>","</div>","</div>","</div>"],s=['<div>快递模板：<span class="J_Express_Name">{{expressTemplateName}}</span></div>','<div act-if="status == WAIT_SELLER_SEND_GOODS">运单号：','<span act-if="_has_outSid == 1">{{outSid}}</span>','<span act-if="_has_outSid == 0"></span>',"</div>"],n=["<div>留言：",'<span act-loop="message in messageMemos">','<span act-if="message._has_buyerMessage == 1" class="ml_5 trade-icon-liuyan J_Tip J_Click" data-name="trigger_show_orders" data-title="{{message._buyerMessage}}"></span>',"</span>","</div>",'<div class="message-note"><span class="note-wording">备注：</span>','<span act-loop="message in messageMemos">','<span act-if="message._has_sellerFlag == 1" flag-data-tid="{{message.tid}}" class="ml_5 trade-icon-flag trade-icon-flag-{{message.sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="message._has_sellerFlag == 0" flag-data-tid="{{message.tid}}" class="ml_5 trade-icon-flag flag-place-holder"></span>','<span class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" data-name="trigger_show_orders" note-data-tid="{{message.tid}}" act-if="message._has_sellerMemo == 1" data-title="{{message._sellerMemo:htmlFilter}}"></span>','<span class="ml_5 message-memo memo-place-holder J_Tip J_Click" data-name="trigger_show_orders" note-data-tid="{{message.tid}}" act-if="message._has_sellerMemo == 0" data-title=""></span>',"</span>","</div>"],l=['<b>|</b>收件人：{{receiverName}}<b>|</b><span act-if="_has_receiverMobile == 1">手机：{{receiverMobile}}</span><span act-if="_has_receiverMobile == 0">固话：{{receiverPhone}}</span><b>|</b>','<span class="detailed-address">详细地址：{{receiverState}} {{receiverCity}} {{receiverDistrict}} {{receiverAddress}}，{{receiverZip}}</span>'],d=['<tr class="order-temp" data-tid="{{tid}}">','<td class="order-colum">','<div class="cell-box ft-center">','<div class="fc_999">订单号：</div>','<a href="http://trade.taobao.com/trade/detail/trade_item_detail.htm?bizOrderId={{tid}}" target="_blank">{{tid}}</a>',"</div>","</td>",'<td class="order-colum item-snapshot">','<div class="item-snapshot-itemname" act-loop="order in list">','<div class="cell-box-wrapper" style="width: 470px;min-width:0;">','<div class="cell-box order-im">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank"><img src="{{order.picPath}}_80x80.jpg"></a>',"</div>",'<div class="cell-box product-name" style="width: 288px;min-width:0;">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank">{{order.title}}</a>','<div act-if="order._has_sku == 1" class="prod-properties">{{order.skuPropertiesName}}</div>','<div act-if="order._has_outerId == 1" class="seller-code">商家编码：{{order._outerId}}</div>',"</div>",'<div class="cell-box module-trade-list-item-price">','&#165;{{order.price}}x<span class="ft-bold ft_14">{{order.num}}</span>',"</div>","</div>",'<div class="cell-box item-order-status">',"{{order.status_name}}",'<div act-if="order.status == WAIT_BUYER_CONFIRM_GOODS"><a class="J_Click" data-name="logistics_info" data-tid="{{order.tid}}" data-taobaoId="{{order.taobaoId}}" data-oid="{{order.oid}}">查看物流</a></div>','<div act-if="order.isRefund == 1"><a target="_blank" href="http://refund.taobao.com/view_refund_detail.htm?bizOrderId={{order.oid}}">{{order._refundStatus}}</a></div>',"</div>","</div>","</td>",'<td class="order-colum order-note">','<div class="cell-box">','<div act-if="_has_paymentDisplay == 1">金额：{{paymentDisplay}}</div>','<div><span class="label-leavemessage">留言：</span>','<span act-if="_has_buyerMessage == 1" style="word-wrap: break-word;">{{buyerMessage}}</span>',"</div>",'<div><span class="note-wording">备注：</span>','<span act-if="_has_sellerFlag == 1" class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}}"></span>','<span act-if="_has_sellerMemo == 1" style="word-wrap: break-word;" class="msg-seller-memo">{{sellerMemo}}</span>',"</div>","</div>","</td>","</tr>"],o=['<div class="marged-form-wrapper">','<div class="merged-order-status">','<div class="merged-order-title">合并后的订单状态</div>','<div class="merged-order-types">','<div class="merge-item">','<div class="note-label">快递单打印状态：</div>','<div class="options">','<div class="merge-item-content express-print-status"><label><input type="radio" name="print_status" value="0" checked/>未打印</label></div>','<div class="merge-item-content express-print-status"><label><input type="radio" name="print_status" value="1"/>已打印</label></div>',"</div>","</div>",'<div class="merge-item">','<div class="note-label">发货单打印状态：</div>','<div class="options">','<div class="merge-item-content deliver-print-status"><label><input type="radio" name="send_status" value="0" checked/>未打印</label></div>','<div class="merge-item-content deliver-print-status"><label><input type="radio" name="send_status" value="1"/>已打印</label></div>',"</div>","</div>",'<div class="merge-item">','<div class="note-label">订单审核状态：</div>','<div class="options">','<div class="merge-item-content order-verify-status"><label><input type="radio" name="verify_status" value="0" checked/>未审核</label></div>','<div class="merge-item-content order-verify-status"><label><input type="radio" name="verify_status" value="1"/>已审核</label></div>',"</div>","</div>","</div>","</div>",'<div class="receiver-address-options">','<div class="receiver-address-title">合并后的收货信息</div>','<div class="detail-address" act-loop="item in addrArray"><label><input type="radio" name="shipping-address"/>{{item}}</label></div>',"</div>","</div>"];
t.template.addTemp("template.trade.module.manual.merge.temp_container",i),t.template.addTemp("template.trade.module.manual.merge.list_item",a),t.template.addTemp("template.trade.module.manual.merge.express",s),t.template.addTemp("template.trade.module.manual.merge.messageMemos",n),t.template.addTemp("template.control.trade.view.shipping_address_merge",l),t.template.addTemp("template.trade.module.manual.merge.orders",d),t.template.addTemp("template.trade.module.manual.merge.orders.toMergedForm_temp",o);var r={queryByWWNo:function(t){var i=this,t=t||"";i._create_dlg(t),this.$searchWWdialog=e.dialog({title:"根据旺旺号查询订单",width:600,fixed:!1,content:this.$el_dlg.show(),cancelVal:"取消",okVal:"下一步",ok:function(){var e=i.$searchWWdialog.DOM.content.find("input").val(),t=i.$searchWWdialog.DOM.content.find("select").length?i.$searchWWdialog.DOM.content.find("select").val():"";return""==e?!1:(i._do_query_by_wangwang(e,t),!1)},cancel:function(){}})},_create_dlg:function(i){var a=t.user.get(),s=a.bindShops,n=a.userConf.mmb,l="";if(1==n&&s&&s.length)for(var d="",o=0;o<s.length;o++)d+='<option value="'+s[o].taobaoId+'">'+s[o].title+"</option>";l=d?'请选择店铺：<select data-zIndex="11000" id="merge_taobao_shop">'+d+"</select><br/><br/>":"",helpTip=l?"温馨小贴士: 同一店铺，同一个买家的订单才能合并":"温馨小贴士:  同一个买家的订单才能合并";var r='<div style="padding: 20px;"><span  style="color:red">'+helpTip+"</span><br/><br/>"+l+'请输入用户旺旺号：<input type="text" id="wangwangNo" style="width: 200px;" value="'+i+'"/><br/><br/><span id="msg" style="color:red"></span></div>';this.$el_dlg=e(r).appendTo("body"),this.$el_dlg.find("select").iSelect()},_do_query_by_wangwang:function(e,t){var i=this;API.trade_merge_nick({nick:e,taobaoId:t},function(e){var t=e.data.list;i.$searchWWdialog&&i.$searchWWdialog.close(),i.show(t)},function(e){i.$searchWWdialog.DOM.content.find("#msg").text(e.message)},!1,!1,!1)},show:function(e){this._show(e)},_show:function(t){var i=this;this.dataArray=t,this._render(),this.$dialog=e.dialog({title:'选择要合并的订单<span style="color:red; font-size:12px">(拆分、退款、挂起、淘宝异常、在线发货的订单自动过滤)<span>',width:1038,fixed:!1,content:this.$el.show(),cancelVal:"取消",okVal:"下一步",ok:function(){if(i.$el.find(".J_Checkbox:checked").length<2)e.dialog.alert("将要合并的订单至少为两笔");else{var t=i.$el.find(".J_Checkbox:checked"),a=[],s=[],n=[];t.length&&e.each(t,function(t,i){var l=e(i).parents(".module-trade-list-item");a.push(l.find(".ship-detailed-info").html()),s.push(l.attr("uniqueid")),n.push(l.attr("taobaoid"))}),i._openNextDialog(a,s,n)}return!1},cancel:function(){i.clear()}})},_openNextDialog:function(i,a,s){var n=this;n.$dialog.hide(),this._render_next_dialog(i,a),this.$next_dialog=e.dialog({title:"选择合并后的订单收货信息",width:1038,fixed:!1,content:n.$el_next.show(),okVal:"确定",ok:function(){var i=n.$el_next.find(".express-print-status input:checked").val(),l=n.$el_next.find(".deliver-print-status input:checked").val(),d=n.$el_next.find(".order-verify-status input:checked").val(),o=n.$el_next.find(".detail-address input:checked").parents(".detail-address").attr("tid");return o?(t.pub("control.trade.manual_merge",a,s,o,i,l,d),void n.$dialog.close()):(e.dialog.alert("请选择合并后的收货信息"),!1)},cancelVal:"上一步",cancel:function(){n.$dialog.show()},close:function(){n.clearNextDialog()}})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render_next_dialog:function(i,a){if(!this.$el_next){if(i.length)for(var s=[],n=[],l={},d=0;d<i.length;d++)1!=l[i[d]]&&(s.push(i[d]),n.push(a[d]),l[i[d]]=1);this.$el_next=e(t.template.get("template.trade.module.manual.merge.orders.toMergedForm_temp",{addrArray:s})).appendTo("body"),this._event_bind_4nextDialog(n)}},_event_bind_4nextDialog:function(t){this.$el_next.find("input:radio").iCheck();var i=this.$el_next.find(".detail-address");e.each(i,function(i,a){var s=t[i],n=s.split("_")[0],l=s.split("_")[1];e(a).attr("tid",n).attr("systid",l)})},_render:function(){if(this.dataArray.length)for(var i="",a=0;a<this.dataArray.length;a++){var s=this.dataArray[a];itemString=t.template.get("template.trade.module.manual.merge.list_item",this._fn_prehandle_data(s)),StringCollectionObj=this._fn_createItemUI(s);for(var n in StringCollectionObj)StringCollectionObj.hasOwnProperty(n)&&(itemString=itemString.replace(n,StringCollectionObj[n]));i+=itemString}this.$el=e(t.template.get("template.trade.module.manual.merge.temp_container")).appendTo("body"),this.$el.find(".J_TradeList_Body").append(i),this.$el.find(".J_Tip").iTip({skin:"blue",triggerType:"hover",zIndex:10020}),this._event_bind()},_fn_createItemUI:function(e){var t=e.tid+"_"+e.sysTid;e=this._fn_prehandle_data(e);var i=this._fn_create_expressUI(e),a=this._fn_create_MemoUI(e),s=this._fn_create_addressUI(e),n=this._fn_create_orderUI(e);return{"@@uniqueid":t,"@@expressUI":i.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@MemoUI":a.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@addressUI":s.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@orderUI":n.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script")}},_fn_prehandle_data:function(i,a){i._buyerWangwang=encodeURIComponent(i.buyerNick),i=e.extend({outSid:"",expressTemplateName:"",expressTemplateType:0,receiverAddress:"",receiverCity:"",receiverDistrict:"",receiverState:"",receiverName:"",receiverZip:"",receiverPhone:"",itemKindCount:"",itemCount:""},i);var s="",n=t.pages._fn_act_get_hashs();if(n.timeType)s=n.timeType;else{var l={trade_list_1:"created",trade_list_4:"consign_time"};s=l[n.root+"_"+n.app+"_"+n.queryId]}a=a||{timeType:s||"created"};var d=!0,o=!0,r=!0;if(i.highlights)for(var p in i.highlights)if("orders"===p){var c=i.highlights.orders;this._status_highlights_orders=i.highlights.orders,e.each(i.orders,function(e,t){var a=c[t.oid];if(a){var s=i.orders[e];for(var n in a)s[n]&&!s[n].match(/[<>]/g)&&(s[n]=a[n])}}),delete i.highlights.orders}else i[p]&&!i[p].match(/[<>]/g)&&(i[p]=i.highlights[p],"receiverAddress"===p&&(d=!1));switch(i.escapeSellerMemo=o,i.escapeBuyerMessage=r,i.escapeAddress=d,a.timeType){case"consign_time":i._sort_time="发货："+t.util.date.getdate(i.consignTime,"YY-MM-DD HH:MM:SS");break;case"pay_time":i._sort_time="付款："+t.util.date.getdate(i.payTime,"YY-MM-DD HH:MM:SS");break;default:i._sort_time="下单："+t.util.date.getdate(i.created,"YY-MM-DD HH:MM:SS")}return i},_fn_create_expressUI:function(e){return e._has_outSid=e.outSid?1:0,t.template.get("template.trade.module.manual.merge.express",e)},_fn_create_MemoUI:function(i){var a,s=i.escapeSellerMemo,n=i.escapeBuyerMessage,l=(e.extend(!0,{},i),[]),d=null,o=i.orders;return e.each(o,function(e,t){d!==t.tid&&(a=i.messageMemos&&i.messageMemos[t.tid],a&&(a.buyerMessage&&(a.buyerMessage=n===!1?a.escapeBuyerMessage:a.buyerMessage,a._buyerMessage=n===!1?a.escapeBuyerMessage:a.buyerMessage,a._buyerMessage=a._buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),a.sellerMemo&&(a.sellerMemo=s===!1?a.buyerMessage:a.sellerMemo,a._sellerMemo=s===!1?a.buyerMessage:a.sellerMemo,a._sellerMemo=a._sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),a._has_buyerMessage=a.buyerMessage?1:0,a._has_sellerMemo=a.sellerMemo?1:0,a._has_sellerFlag=void 0!==a.sellerFlag?1:0,l.push(a)),d=t.tid)}),t.template.get("template.trade.module.manual.merge.messageMemos",{messageMemos:l})},_fn_create_addressUI:function(e){e.escapeAddress;return e._has_receiverMobile=e.receiverMobile?1:0,e.receiverPhone=e.receiverPhone||"",e.receiverAddress=e.receiverAddress||"",e.receiverAddress=e.receiverAddress,t.template.get("template.control.trade.view.shipping_address_merge",e)},_fn_create_orderUI:function(i){var a=!0,s=!0,n=[],l=0,d=null,o={WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"买家已付款",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"},r={WAIT_SELLER_AGREE:"买家申请退款",WAIT_BUYER_RETURN_GOODS:"卖家同意退款",WAIT_SELLER_CONFIRM_GOODS:"买家退货中",SELLER_REFUSE_BUYER:"卖家拒绝退款"};e.each(i.orders,function(e,t){t.status_name=o[t.status]||"",t._has_sku=t.skuPropertiesName?1:0,t._has_sku&&(t.skuPropertiesName=t.skuPropertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;">$1</span>')),t._outerId=t.outerSkuId||t.outerId||"",t._has_outerId=t._outerId?1:0,1===t.isRefund&&(t._refundStatus=r[t.refundStatus]||"",t._refundStatus||(t.isRefund=-1)),d!==t.tid?(d&&t.tid&&l++,n[l]=n[l]||{list:[]},n[l].oid=t.oid,n[l].tid=t.tid,n[l].taobaoId=t.taobaoId,n[l].mergeSplitType=i.mergeSplitType,n[l].list.push(t),d=t.tid):n[l].list.push(t)});var p,c=[];return e.each(n,function(n,l){p=i.messageMemos[l.tid]||{},e.extend(l,p),l.paymentDisplay=l.paymentDisplay||i.paymentDisplay||"",l._has_paymentDisplay=l.paymentDisplay?1:0,l._has_buyerMessage=l.buyerMessage?1:0,l._has_sellerMemo=l.sellerMemo?1:0,l._has_sellerFlag=void 0!==l.sellerFlag?1:0,l.buyerMessage&&(l.buyerMessage=s===!1?l.buyerMessage:l.buyerMessage,l.buyerMessage=l.buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),l.sellerMemo&&(l.sellerMemo=a===!1?l.sellerMemo:l.sellerMemo,l.sellerMemo=l.sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),l.sysTid=i.sysTid||"",l.status=i.status||"",c.push(t.template.get("template.trade.module.manual.merge.orders",l))}),c.join("")},_event_bind:function(){var t=this;this.$el&&this.$el.on("click",function(i){var a=e(i.target),s=t.$el.find(".J_Checkbox"),n=s.parents(".module-trade-list-item");if(a.hasClass("J_Select_All")&&(a.prop("checked")?(s.prop("checked",!0),n.addClass("module-trade-list-item-selected")):(s.prop("checked",!1),n.removeClass("module-trade-list-item-selected"))),a.hasClass("J_Checkbox")&&(a.prop("checked")?(a.parents(".module-trade-list-item").addClass("module-trade-list-item-selected"),t.$el.find(".J_Checkbox:checked").length===t.$el.find(".module-trade-list-item").length&&t.$el.find(".J_Select_All").prop("checked",!0)):(t.$el.find(".J_Select_All").prop("checked")&&t.$el.find(".J_Select_All").prop("checked",!1),a.parents(".module-trade-list-item").removeClass("module-trade-list-item-selected"))),"trigger_show_orders"==a.attr("data-name")){var l=a.parents(".module-trade-list-item"),d=l.find(".J_Trigger_Show_Orders");d.hasClass("trade-icon-close")?(d.removeClass("trade-icon-close").addClass("trade-icon-open"),l.find(".module-trade-list-item-row3").show()):(d.removeClass("trade-icon-open").addClass("trade-icon-close"),l.find(".module-trade-list-item-row3").hide())}})},_event_unbind:function(){},clear:function(){this.$el&&(this.$el.empty().remove(),this.$el=null,this.$dialog=null)},clearNextDialog:function(){this.$el_next&&(this.$el_next.empty().remove(),this.$el_next=null,this.$next_dialog=null)},destroy:function(){this.hide(),this.clear(),this.clearNextDialog()}};t.controls.define("control.trade.module.manual.merge.orders",{init:function(){return r}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=['<div class="module-close-order">','<div style="margin:0 0 12px 0;color:#FF6600;">温馨小贴士：新改的邮费必需低于原始邮费</div>','<div class="pd-15">','<label class="mr_15 operation-area">','<span class="ft_14">邮费：</span>','<input name="postage" style="width:80px" />&nbsp;&nbsp;元','<span class="ml_15"><a href="javascript:void(0);" class="free_postage">免邮费</a></span>',"</label>","<div>",'<div class="help-tips">订单金额：<span class="payment" style="font-weight:700;color:#FF6600;">0.01</span> = <span class="total_fee">529.98</span> + <span class="post_fee" style="font-weight:700;color:#009933;">10.00</span> - <span class="total_discount">529.97</span></div>',"</div>"].join(""),s={show:function(t,s,n){var l=e(a),d=i.getModel(s);return d?(l.find(".payment").text(d.options.payment),l.find(".total_fee").text(d.options.totalFee),l.find(".post_fee").text(d.options.postFee),l.find(".total_discount").text(d.options.totalDiscountFee),this.$dialog=e.dialog({title:"修改邮费",content:l,okVal:"确定",ok:e.proxy(function(){var a=parseFloat(d.options.postFee),o=l.find("input[name=postage]").val();if(""==o)return e.dialog.alert("请输入邮费，新改的邮费必需低于原始邮费"),l.find("input[name=postage]").val(a).focus(),!1;if(o=parseFloat(o),o>=a)return e.dialog.alert("新改的邮费必需低于原始邮费"),!1;var r={},p=this._fn_calculate_payment(d,o);r.uniqueId=s,r.taobaoId=n,r.payment=p,r.postFee=o,i.trade_postage_update(r,function(i){var a=i.options,s="金额："+a.payment+" = "+a.totalFee+" + "+a.postFee+" - "+a.totalDiscountFee;t.find(".J_Trade_Amount").html("").html(s),e.dialog.showSuccess("修改成功")})},this),cancelVal:"取消",cancel:function(){}}),l.find("input[name=postage]").val(d.options.postFee).numeral(!0,!1,e.proxy(function(e){this._fn_change_display(e,d)},this)),l.find(".free_postage").bind("click",e.proxy(function(){l.find("input[name=postage]").val("0"),l.find("input[name=postage]").focus(),this._fn_change_display("0",d)},this)),void(this.$template=l)):void e.dialog.alert("订单数据异常，请刷新页面重试！")},_fn_change_display:function(e,t){e=""==e?0:parseFloat(e);var i=t.options,a=this._fn_calculate_payment(t,e);this.$template.find(".payment").text(a),this.$template.find(".total_fee").text(i.totalFee),this.$template.find(".post_fee").text(e),this.$template.find(".total_discount").text(i.totalDiscountFee)},_fn_calculate_payment:function(e,t){var i=e.options;return(parseFloat(i.totalFee)+t-parseFloat(i.totalDiscountFee)).toFixed(2)},destroy:function(){this.$dialog&&this.$dialog.close()}};t.controls.define("control.trade.module.trade.postage_update",{init:function(){return s}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=t.controls.get("control.trade.express"),s=['<div class="address-reachable" id="reachable_temp_id">','<ul class="reachable-temp-list">','<div class="clearfix" style="border-bottom: 1px solid #ccc;padding: 4px 0 4px 15px;">','<span style="width: 120px;" class="f-lt mr_10">常用可达快递</span>',"</div>",'<li class="clearfix" act-loop="reachableExp in reachableExps" style="cursor: pointer;padding:0;">','<span act-if="{{reachableExp.reachable}} == 1" style="padding: 2px 0 0 15px;margin-right: 0;" class="f-lt mr_10" data-expressId="{{reachableExp.partnerId}}">{{reachableExp.partnerName}}<i act-if="{{reachableExp.reachableExpLiLen}} > 1" class="trade-icon-across-more"></i></span>',"</li>","</ul>","</div>"],n=['<div class="address-reachable" id="reachable_temp_id">',"<ul>",'<div class="clearfix" style="border-bottom: 1px solid #ccc;padding: 4px 0 4px 15px;">','<span style="width: 120px;" class="f-lt mr_10">常用可达快递</span>',"</div>",'<li class="clearfix">','<span style="width: 120px" class="f-lt mr_10">没有可达快递</span>',"</li>","</ul>","</div>"],l=['<div class="address-reachable" id="reachable_temp_option_id">','<ul class="reachable-temp-list">','<li class="clearfix" act-loop="template in templates" style="cursor: pointer;padding:0;">','<span style="width: 100px;padding: 2px 15px;" data-expressId="{{template.expressId}}" data-templateId="{{template.templateId}}" class="f-lt mr_10">{{template.name}}</span>',"</li>","</ul>","</div>"];t.template.addTemp("template.trade.address.reachable",s),t.template.addTemp("template.trade.address.reachable_no",n),t.template.addTemp("template.trade.address.reachable.option",l);var d={isReachable:function(t){var a,s=i.getModel(t.modelId).toJSON(),n=s.receiverState||"",l=s.receiverCity||"",d=s.receiverDistrict||"",o=s.receiverAddress||"",r={receiverState:n,receiverCity:l,receiverDistrict:d,receiverAddress:o,expressCompanyId:t.expressId};return e.ajax({type:"GET",url:"/trade/address/reachable",data:r,dataType:"json",async:!1,success:function(e){a=e.data.result}}),a},getCanDelivereds:function(t){var i=t.addressReachable,a=t.ids,s=[];if("undefined"==typeof i){for(var n=0;n<a.length;n++)s.push(0);return s}var l={};e.each(i,function(e,t){var i=t.tid+"_"+t.sysTid;l[i]=t.canDelivered});for(var n=0;n<a.length;n++)if(l[a[n]]&&"number"==typeof l[a[n]]){var d=l[a[n]];1!=d&&(d=0),s.push(d)}else s.push(0);return s},show:function(t,i,a){this.modelId=t,this.target=i.target,this.hasOutSid=a,this._render(),this._fn_ctrl_load(e.proxy(this._update,this)),this._show(i)},_show:function(t){var i=e(t.target).offset();this.$el.css({left:i.left,top:i.top+16}).show(),this._status_display=!0},hide:function(){this.$el&&(this.$el.hide(),this.$el.remove(),this.$el=null,this._status_display=!1,this.modelId=null,this.tid=null,this.taobaoId=null,this.oid=null,this.target=null)},_render:function(){this.$el||(this.$el=e('<div style="display:none;position: absolute; width: 120px; z-index: 9999999;"></div>').appendTo("body"),this._event_bind())},_fn_ctrl_load:function(e,t){var a=i.getModel(this.modelId);if(!a)throw new Error("[control.trade.module.reachable:_fn_ctrl_load] 参数异常.");a=a.toJSON();var s=a.receiverState||"",n=a.receiverCity||"",l=a.receiverDistrict||"",d=a.receiverAddress||"",o={receiverState:s,receiverCity:n,receiverDistrict:l,receiverAddress:d};API.trade_address_reachable_batch(o,function(t){e(t.data)},t,!1,!1,!0)},_update:function(s){var n=[];if(s.length>0)for(var l=0;l<s.length;l++)1==s[l].reachable&&n.push(s[l]);for(var d={},l=0;l<n.length;l++){var o=n[l].templates;n[l].reachableExpLiLen=o?o.length:0,d[n[l].partnerId]=o}var r={reachableExps:n},p=e(t.template.get("template.trade.address.reachable",r));0==n.length&&(p=e(t.template.get("template.trade.address.reachable_no",r))),this.$el.html(p);var c=this,_=i.getModel(c.modelId).toJSON(),m=_.expressTemplateType;p.find(".reachable-temp-list li").on("mouseover",function(i){var a=e(this).find("span").attr("data-expressId"),s=d[parseInt(a)];if(!s||s.length<=1){var n=p.find("#reachable_temp_option_id");return void(n&&n.remove())}for(var l=0;l<s.length;l++)s[l].templateId=1==s[l].isWlb?"w"+s[l].id:s[l].id;var o={templates:s},r=e(t.template.get("template.trade.address.reachable.option",o)),c=e("#reachable_temp_id").offset(),_=e(i.target).offset();r.css({left:120,top:_.top-c.top,position:"absolute"});var n=p.find("#reachable_temp_option_id");n.length?n.replaceWith(r):p.append(r)}),p.delegate(".reachable-temp-list li","click",function(){if(!e(this).find("i.trade-icon-across-more").length){var t=e(this).find("span").attr("data-expressId"),i=e(this).find("span").attr("data-templateId"),a=[];if("undefined"==typeof i){var s=d[parseInt(t)];if(s&&s.length>0){var n={};n.templateId=1==s[0].isWlb?"w"+s[0].id:s[0].id,n.templateName=s[0].name,n.isWlb=s[0].isWlb,n.expressId=s[0].expressId,a.push(n),i=n.templateId}}else{var s=d[parseInt(t)],n={};if(s)for(var l=0;s.length;l++){var o=1==s[l].isWlb?"w"+s[l].id:s[l].id;if(i==o){n.templateId=o,n.templateName=s[l].name,n.isWlb=s[l].isWlb,n.expressId=s[l].expressId;break}}a.push(n)}1==m&&c.hasOutSid?(p.remove(),e.dialog.confirm("该操作会导致原电子面单号失效，您是否继续操作?",function(){h(i,a)})):h(i,a)}});var u=this.modelId,h=function(e,i){a.save({ids:String(u),expressId:e,startOutSid:""},function(a){p.remove(),t.pub("control.trade.module.common_express.edit.done_4print",u,e,i,a)},null,!1,!1,!0)}},_event_bind:function(){e(document).on("click.control.trade.module.reachable",e.proxy(function(t){if(this._status_display){var i=this.$el[0],a=t.target;i===a||e.contains(i,a)||a===this.target||e.contains(this.target,a)||this.hide()}},this))},_event_unbind:function(){e(document).off("click.control.trade.module.reachable")},destroy:function(){this.hide(),this._event_unbind()}};t.controls.define("control.trade.module.reachable",{init:function(){return d}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade"),a=['<div class="module-trade-list-item {{_selectClass}}" uniqueid=@@uniqueid taobaoid="{{taobaoId}}">','<div class="sendgoods-order-title">',"订单信息</div>",'<div class="J_Tbody">','<div class="module-trade-list-item-row1">','<div act-if="_toShowItemCheckBox == 1" class="cell-box area-checkbox">','<span class="check"><input type="checkbox" data-name="check_select_item" name="" class="J_Checkbox"></span>','<div class="mr_5"><span class="trade-icon-open J_Trigger_Show_Orders J_Click" data-name="trigger_show_orders"></span></div>',"</div>",'<div act-if="_toShowItemCheckBox == 0" class="cell-box area-checkbox" style="width: 16px;">','<div class="mr_5" style="display: none;"><span class="trade-icon-open J_Trigger_Show_Orders J_Click" data-name="trigger_show_orders"></span></div>',"</div>",'<div class="cell-box order-time">',"<div>{{_sort_time}}</div>",'<span class="trade-icon-ff9000" act-if="mergeSplitType == 2">合</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 4">合</span>','<span class="trade-icon-a12525" act-if="mergeSplitType == 5">拆</span>',"</div>",'<div class="cell-box product-count">','<a class="J_Click" data-name="trigger_show_orders">{{itemKindCount}}种商品</a>',"</div>",'<div class="cell-box express-status">','<span class="J_expressStatus">','<span class="trade-icon-1b6fd7 J_Tip" act-if="expressStatus == 1" data-title="快递单已打印">快</span>','<span class="trade-icon-818181 J_Tip" act-if="expressStatus == 0" data-title="快递单未打印">快</span>',"</span>",'<span class="J_deliverStatus">','<span class="trade-icon-3d900a J_Tip" act-if="deliverStatus == 1" data-title="发货单已打印">发</span>','<span class="trade-icon-818181 J_Tip" act-if="deliverStatus == 0" data-title="发货单未打印">发</span>',"</span>",'<span class="J_isVerify">','<span class="trade-icon-dc398a J_Tip" act-if="isVerify == 1" data-title="订单已审核">审</span>','<span class="trade-icon-818181 J_Tip" act-if="isVerify == 0" data-title="订单未审核">审</span>',"</span>","<br>",'<span class="J_isExcep"><span class="trade-icon-22b7ae J_Tip" act-if="isExcep == 1" data-title="淘宝异常订单">异</span></span>','<span class="J_isHalt"><span class="trade-icon-7327db J_Tip" act-if="isHalt == 1" data-title="挂起订单">挂</span></span>','<span class="isRefund">','<span class="trade-icon-a1055d J_Tip" act-if="isRefund == 1" data-title="退款订单">退</span>',"</span>","</div>",'<div class="cell-box J_Express_Container">',"@@expressUI","</div>",'<div class="cell-box J_messageMemos">',"@@MemoUI","</div>","</div>",'<div class="module-trade-list-item-row2">','<span style="padding:0;">','<div class="cell-box ship-detailed-info"  style="padding-left:15px;word-break:break-all;">','买家：<a target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid={{_buyerWangwang}}&siteid=cntaobao&status=2&charset=utf-8">{{buyerNick}}<img border="0" width="16" src="http://amos.alicdn.com/online.aw?v=2&uid={{_buyerWangwang}}&site=cntaobao&s=2&charset=utf-8" alt=" " /></a>','<span class="J_Shipping_Address">@@addressUI</span>',"</div>","</span>","</div>",'<div class="module-trade-list-item-row3">','<div class="module-trade-list-items-wrap">','<div class="module-trade-list-items">','<table class="J_Orders_List">',"@@orderUI","</table>","</div>","</div>","</div>","</div>","</div>"],s=['<div>快递模板：<span class="J_Express_Name">{{expressTemplateName}}</span></div>','<div act-if="status == WAIT_SELLER_SEND_GOODS">运单号：','<span act-if="_has_outSid == 1">{{outSid}}</span>','<span act-if="_has_outSid == 0"></span>',"</div>"],n=["<div>留言：",'<span act-loop="message in messageMemos">','<span act-if="message._has_buyerMessage == 1" class="ml_5 trade-icon-liuyan J_Tip J_Click" data-name="trigger_show_orders" data-title="{{message._buyerMessage}}"></span>',"</span>","</div>",'<div class="message-note"><span class="note-wording">备注：</span>','<span act-loop="message in messageMemos">','<span act-if="message._has_sellerFlag == 1" flag-data-tid="{{message.tid}}" class="ml_5 trade-icon-flag trade-icon-flag-{{message.sellerFlag}} J_Click" data-name="trigger_show_orders"></span>','<span act-if="message._has_sellerFlag == 0" flag-data-tid="{{message.tid}}" class="ml_5 trade-icon-flag flag-place-holder"></span>','<span class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" data-name="trigger_show_orders" note-data-tid="{{message.tid}}" act-if="message._has_sellerMemo == 1" data-title="{{message._sellerMemo:htmlFilter}}"></span>','<span class="ml_5 message-memo memo-place-holder J_Tip J_Click" data-name="trigger_show_orders" note-data-tid="{{message.tid}}" act-if="message._has_sellerMemo == 0" data-title=""></span>',"</span>","</div>"],l=['<b>|</b>收件人：{{receiverName}}<b>|</b><span act-if="_has_receiverMobile == 1">手机：{{receiverMobile}}</span><span act-if="_has_receiverMobile == 0">固话：{{receiverPhone}}</span><b>|</b>','<span class="detailed-address">详细地址：{{receiverState}} {{receiverCity}} {{receiverDistrict}} {{receiverAddress}}，{{receiverZip}}</span>'],d=['<tr class="order-temp" data-tid="{{tid}}">','<td class="order-colum">','<div class="cell-box ft-center">','<div class="fc_999">订单号：</div>','<a href="http://trade.taobao.com/trade/detail/trade_item_detail.htm?bizOrderId={{tid}}" target="_blank">{{tid}}</a>',"</div>","</td>",'<td class="order-colum item-snapshot">','<div class="item-snapshot-itemname" act-loop="order in list">','<div class="cell-box-wrapper" style="width: 600px;">','<div class="cell-box order-im">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank"><img src="{{order.picPath}}_80x80.jpg"></a>',"</div>",'<div class="cell-box product-name" style="width: 296px;">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank">{{order.title}}</a>','<div act-if="order._has_sku == 1" class="prod-properties">{{order.skuPropertiesName}}</div>','<div act-if="order._has_outerId == 1" class="seller-code">商家编码：{{order._outerId}}</div>',"</div>",'<div class="cell-box module-trade-list-item-price">','&#165;{{order.price}}x<span class="ft-bold ft_14">{{order.num}}</span>',"</div>","</div>",'<div class="cell-box item-order-status">',"{{order.status_name}}",'<div act-if="order.isRefund == 1"><span class="trade-icon-a1055d J_Tip" data-title="退款订单">退</span></div>',"</div>","</div>","</td>","</tr>"],o=['<div class="send-goods-form">','<div class="sendgoods-settings">','<div class="sendgoods-setting-details">','<div class="setting-field">','<div class="note-label">请扫描或输入：','<select id="sendgood-no" data-zindex="999999"><option value="0">运单号</option><option value="1">订单号</option></select>','<div class="search-input-wrapper"><input class="search-input" type="text" placeholder="输入单号后回车，支持扫描枪"/><span class="search-input-errormsg"></span></div>',"</div>",'<button class="btn btn-success btn-to-search" type="button">查询</button>','<div class="options">','<div class="send-type"><label><input type="radio" name="sendgood_type" value="0" checked/>自己联系物流发货</label></div>','<div class="send-type"><label><input type="radio" name="sendgood_type" value="1"/>在线下单发货</label></div>',"</div>",'<div class="operation-field">','<button class="btn btn-primary btn-to-send">发货</button>',"</div>","</div>",'<div class="setting-field-scan">','<div class="operation-field">','<label><span class="check"><input type="checkbox" class="J_Checkbox" name="scan_sendgood_direct"></span><span class="scan-or-enter">回车或扫描单号直接发货</span></label>',"</div>","</div>","</div>","</div>",'<div class="sendgoods-order-container" style="display: none;">','<div class="module-trade-list J_TradeList_Body sendgoods-order-info"></div>',"</div>","</div>"];t.template.addTemp("template.trade.module.scan.send.goods.list_item",a),t.template.addTemp("template.trade.scan.send.goods.express",s),t.template.addTemp("template.trade.scan.send.goods.messageMemos",n),t.template.addTemp("template.control.trade.view.shipping_address_sendgoods",l),t.template.addTemp("template.trade.scan.send.goods.orders",d),t.template.addTemp("template.trade.module.scan.send.goods.sendGoods_temp",o);var r={show:function(){this._show()},_show:function(){var t=this;this._render(),this._list=null,this.$dialog=e.dialog({title:"验单发货（不支持无需物流发货）",width:1038,fixed:!1,content:this.$el.show(),close:function(){t.clear()}})},_render:function(){this.$el=e(t.template.get("template.trade.module.scan.send.goods.sendGoods_temp")).appendTo("body"),this._event_bind()},_event_bind:function(){var t=this;if(this.$el){var i=this.$el.find(".search-input"),a=this.$el.find(".search-input-errormsg");this.$el.find("input:radio").iCheck(),this.$el.find("select").iSelect(),i.on("keydown",function(i){var s=this;setTimeout(function(){if(13==i.keyCode){var n=function(i){if(i.length){a.html("");var n=t.$el.find('[name="scan_sendgood_direct"]').prop("checked");n&&1==i.length?t._fn_send_goods(i,function(){e(s).focus()}):t._fn_create_scan_itemUI(i),e(s).val("").focus()}else{var l="对不起，没有符合条件的订单";a.html(l)}};t._fn_getData_by_input(e(s).val(),n)}},50)}),this.$el.find(".btn-to-search").on("click",function(){var e=function(e){if(e.length)a.html(""),t._fn_create_scan_itemUI(e),i.val("").focus();else{var s="对不起，没有符合条件的订单";a.html(s)}};t._fn_getData_by_input(i.val(),e)}),this.$el.on("click",function(t){var i=e(t.target);if(i.hasClass("J_Checkbox")&&(i.prop("checked")?i.parents(".module-trade-list-item").addClass("module-trade-list-item-selected"):i.parents(".module-trade-list-item").removeClass("module-trade-list-item-selected")),"trigger_show_orders"==i.attr("data-name")){var a=i.parents(".module-trade-list-item"),s=a.find(".J_Trigger_Show_Orders");s.hasClass("trade-icon-close")?(s.removeClass("trade-icon-close").addClass("trade-icon-open"),a.find(".module-trade-list-item-row3").show()):(s.removeClass("trade-icon-open").addClass("trade-icon-close"),a.find(".module-trade-list-item-row3").hide())}});var s=this.$el.find(".btn-to-send");s.on("click",function(){var e=function(){i.val("").focus()};t._fn_getList_then_send(e)})}},_fn_getList_then_send:function(e){var t=this,i=[];if(this._list&&this._list.length){if(this.$el.find('[data-name="check_select_item"]').length)for(var a=0;a<this._list.length;a++){var s=this._list[a].tid+"_"+this._list[a].sysTid,n=this.$el.find('[uniqueid="'+s+'"]');n.length&&n.find("input:checked").length&&i.push(this._list[a])}else i=this._list;var l=function(i){e();for(var a=0;a<i.length;a++)t.$el.find('[uniqueid="'+i[a]+'"]').remove(),t.$dialog._reset()};if(i.length)this._fn_send_goods(i,l);else{var d="请选择要发货的订单",o=this.$el.find(".search-input-errormsg");o.html(d)}}},_fn_send_goods:function(e,t){var i=this.$el.find('[name="sendgood_type"]:checked').val();this._fn_send_goods_by_type(i,e,t)},_fn_send_goods_by_type:function(e,t,i){1==e?this._fn_send_goods_by_online(t,i):this._fn_send_goods_by_offline(t,i)},_fn_send_goods_by_online:function(a,s){for(var n=[],l=[],d=[],o=[],d=[],r=[],p=[],c=!1,_=0;_<a.length;_++){if(""==a[_].outSid){c=!0;break}n.push(a[_].tid),l.push(a[_].taobaoId),o.push(a[_].outSid||-1),r.push(a[_].expressCode),d.push(a[_].sysTid),p.push(a[_].tid+"_"+a[_].sysTid)}if(c){var m="您选择的订单没有填写运单号，不能发货成功";return void this.$el.find(".search-input-errormsg").html(m).show()}var u=function(e){var t=i.getModel(e);t&&t._save(t.toJSON().outSid?{status:"WAIT_BUYER_CONFIRM_GOODS"}:{canConfirmSend:1})},h=function(e){t.showSuccess("操作成功！",.8),s&&s(e),t.pub("control.trade.view.click.logistics_online_send.done_4print",e)};API.trade_logistics_online_send({tids:n.join(","),taobaoIds:l.join(","),outSids:o.join(","),sysTids:d.join(","),companyCodes:r.join(",")},e.proxy(function(t){if(20001===t.subCode){var i=t.data.errorTids,a=t.data.successTids,s="";e.each(i,function(e,t){s+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>"});var n=[];e.each(a,function(e,t){n.push(t.tid+"_"+t.sysTid),u(t.tid+"_"+t.sysTid)}),s&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+s+"</table></div>",okVal:"确定",ok:function(){n.length&&h(n)}})}else e.each(p,function(e,t){u(t)}),h&&h(p)},this),null)},_fn_send_goods_by_offline:function(a,s){for(var n=[],l=[],d=[],o=[],d=[],r=[],p=[],c=!1,_=0;_<a.length;_++){if(""==a[_].outSid){c=!0;break}n.push(a[_].tid),l.push(a[_].taobaoId),o.push(a[_].outSid||-1),d.push(a[_].sysTid),r.push(a[_].expressCode),p.push(a[_].tid+"_"+a[_].sysTid)}if(c){var m="您选择的订单没有填写运单号，不能发货成功";return void this.$el.find(".search-input-errormsg").html(m).show()}API.trade_logistics_offline_send({tids:n.join(","),taobaoIds:l.join(","),sysTids:d.join(","),outSids:o.join(","),companyCodes:r.join(",")},e.proxy(function(a){var n=function(e){var t=i.getModel(e);
t&&t._save({status:"WAIT_BUYER_CONFIRM_GOODS"})},l=function(e){t.showSuccess("操作成功！",.8),s&&s(e),t.pub("control.trade.module.logistics_offline_send.done_4print",e)};if(20001===a.subCode){var d=a.data.errorTids,o=a.data.successTids,r="";e.each(d,function(e,t){r+='<tr class="error-row"><td>'+t.tid+'</td><td class="error-details">'+t.errorSubMsg+"</td></tr>"});var c=[];e.each(o,function(e,t){c.push(t.tid+"_"+t.sysTid),n(t.tid+"_"+t.sysTid)}),r&&e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper"><table class="error-table"><tr class="error-row error-head"><td>订单号</td><td class="error-details">错误原因</td></tr>'+r+"</table></div>",okVal:"确定",ok:function(){c.length&&l(c)}})}else e.each(p,function(e,t){n(t)}),l&&l(p)},this),null)},_fn_getData_by_input:function(e,i){if(""!=e){var a=this,s=(t.pages._fn_act_get_hashs(),a.$el.find("select").val()),n=0==s?"outSid:"+e:"(subTids:"+e+" OR tid:"+e+")";API.trade_search({mixKey:n,sys:!0,queryId:8},function(e){var t=e.data.list||[];t&&t.length&&(a._list=t),i&&i(t)},function(){},!1)}},_fn_create_scan_itemUI:function(e){for(var i=this,a="",s=0;s<e.length;s++){var n=e[s];n._toShowItemCheckBox=e.length>1?1:0,n._selectClass=e.length>1?"":"";var l=t.template.get("template.trade.module.scan.send.goods.list_item",i._fn_prehandle_data(n)),d=i._fn_createItemUI(n);for(var o in d)d.hasOwnProperty(o)&&(l=l.replace(o,d[o]));a+=l}i.$el.find(".btn-to-send").show(),i.$el.find(".sendgoods-order-container").show(),i.$el.find(".sendgoods-order-info").html(a).find(".J_Tip").iTip({skin:"blue",triggerType:"hover",zIndex:10020}),i.$dialog._reset()},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_fn_createItemUI:function(e){var t=e.tid+"_"+e.sysTid;e=this._fn_prehandle_data(e);var i=this._fn_create_expressUI(e),a=this._fn_create_MemoUI(e),s=this._fn_create_addressUI(e),n=this._fn_create_orderUI(e);return{"@@uniqueid":t,"@@expressUI":i.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@MemoUI":a.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@addressUI":s.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@orderUI":n.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script")}},_fn_prehandle_data:function(i,a){i._buyerWangwang=encodeURIComponent(i.buyerNick),i=e.extend({outSid:"",expressTemplateName:"",expressTemplateType:0,receiverAddress:"",receiverCity:"",receiverDistrict:"",receiverState:"",receiverName:"",receiverZip:"",receiverPhone:"",itemKindCount:"",itemCount:""},i);var s="",n=t.pages._fn_act_get_hashs();if(n.timeType)s=n.timeType;else{var l={trade_list_1:"created",trade_list_4:"consign_time"};s=l[n.root+"_"+n.app+"_"+n.queryId]}a=a||{timeType:s||"created"};var d=!0,o=!0,r=!0;if(i.highlights)for(var p in i.highlights)if("orders"===p){var c=i.highlights.orders;this._status_highlights_orders=i.highlights.orders,e.each(i.orders,function(e,t){var a=c[t.oid];if(a){var s=i.orders[e];for(var n in a)s[n]&&!s[n].match(/[<>]/g)&&(s[n]=a[n])}}),delete i.highlights.orders}else i[p]&&!i[p].match(/[<>]/g)&&(i[p]=i.highlights[p],"receiverAddress"===p&&(d=!1));switch(i.escapeSellerMemo=o,i.escapeBuyerMessage=r,i.escapeAddress=d,a.timeType){case"consign_time":i._sort_time="发货："+t.util.date.getdate(i.consignTime,"YY-MM-DD HH:MM:SS");break;case"pay_time":i._sort_time="付款："+t.util.date.getdate(i.payTime,"YY-MM-DD HH:MM:SS");break;default:i._sort_time="下单："+t.util.date.getdate(i.created,"YY-MM-DD HH:MM:SS")}return i},_fn_create_expressUI:function(e){return e._has_outSid=e.outSid?1:0,t.template.get("template.trade.scan.send.goods.express",e)},_fn_create_MemoUI:function(i){var a,s=i.escapeSellerMemo,n=i.escapeBuyerMessage,l=(e.extend(!0,{},i),[]),d=null,o=i.orders;return e.each(o,function(e,t){d!==t.tid&&(a=i.messageMemos&&i.messageMemos[t.tid],a&&(a.buyerMessage&&(a.buyerMessage=n===!1?a.escapeBuyerMessage:a.buyerMessage,a._buyerMessage=n===!1?a.escapeBuyerMessage:a.buyerMessage,a._buyerMessage=a._buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),a.sellerMemo&&(a.sellerMemo=s===!1?a.buyerMessage:a.sellerMemo,a._sellerMemo=s===!1?a.buyerMessage:a.sellerMemo,a._sellerMemo=a._sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),a._has_buyerMessage=a.buyerMessage?1:0,a._has_sellerMemo=a.sellerMemo?1:0,a._has_sellerFlag=void 0!==a.sellerFlag?1:0,l.push(a)),d=t.tid)}),t.template.get("template.trade.scan.send.goods.messageMemos",{messageMemos:l})},_fn_create_addressUI:function(e){e.escapeAddress;return e._has_receiverMobile=e.receiverMobile?1:0,e.receiverPhone=e.receiverPhone||"",e.receiverAddress=e.receiverAddress||"",e.receiverAddress=e.receiverAddress,t.template.get("template.control.trade.view.shipping_address_sendgoods",e)},_fn_create_orderUI:function(i){var a=!0,s=!0,n=[],l=0,d=null,o={WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"买家已付款",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"},r={WAIT_SELLER_AGREE:"买家申请退款",WAIT_BUYER_RETURN_GOODS:"卖家同意退款",WAIT_SELLER_CONFIRM_GOODS:"买家退货中",SELLER_REFUSE_BUYER:"卖家拒绝退款"};e.each(i.orders,function(e,t){t.status_name=o[t.status]||"",t._has_sku=t.skuPropertiesName?1:0,t._has_sku&&(t.skuPropertiesName=t.skuPropertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;">$1</span>')),t._outerId=t.outerSkuId||t.outerId||"",t._has_outerId=t._outerId?1:0,1===t.isRefund&&(t._refundStatus=r[t.refundStatus]||"",t._refundStatus||(t.isRefund=-1)),d!==t.tid?(d&&t.tid&&l++,n[l]=n[l]||{list:[]},n[l].oid=t.oid,n[l].tid=t.tid,n[l].taobaoId=t.taobaoId,n[l].mergeSplitType=i.mergeSplitType,n[l].list.push(t),d=t.tid):n[l].list.push(t)});var p,c=[];return e.each(n,function(n,l){p=i.messageMemos[l.tid]||{},e.extend(l,p),l.paymentDisplay=l.paymentDisplay||i.paymentDisplay||"",l._has_paymentDisplay=l.paymentDisplay?1:0,l._has_buyerMessage=l.buyerMessage?1:0,l._has_sellerMemo=l.sellerMemo?1:0,l._has_sellerFlag=void 0!==l.sellerFlag?1:0,l.buyerMessage&&(l.buyerMessage=s===!1?l.buyerMessage:l.buyerMessage,l.buyerMessage=l.buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),l.sellerMemo&&(l.sellerMemo=a===!1?l.sellerMemo:l.sellerMemo,l.sellerMemo=l.sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),l.sysTid=i.sysTid||"",l.status=i.status||"",c.push(t.template.get("template.trade.scan.send.goods.orders",l))}),c.join("")},_event_unbind:function(){this.$el.find(".search-input").off("keydown"),this.$el.off("click")},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.trade.module.scan.send.goods",{init:function(){return r}})}(jQuery,RayCloud),function(e,t){var i,a={buildTimeLag:function(e){var t=new Object;return t.time_lag=e,this.calculatTimeLag(t)},calculatTimeLag:function(e){e.day=Math.floor(e.time_lag/864e5);var t=e.time_lag%864e5;return e.hour=Math.floor(t/36e5),t%=36e5,e.minute=Math.floor(t/6e4),t%=6e4,e.second=Math.floor(t/1e3),e},initCountDownView:function(e,t,a){var s=this;if(0==a)return void this.__displayCountDown(e,0,0,0,0);var n=a-t;if(0>=n)return void this.__displayCountDown(e,0,0,0,0);var l=this.buildTimeLag(n);this.__displayCountDown(e,l.day,l.hour,l.minute,l.second),i&&clearInterval(i),i=setInterval(function(){if(n-=1e3,0>=n)s.__displayCountDown(e,0,0,0,0);else{var t=s.buildTimeLag(n);s.__displayCountDown(e,t.day,t.hour,t.minute,t.second)}},1e3)},__displayCountDown:function(e,t,i,a,s){"0"==t&&"0"==i&&"0"==a&&"0"==s?e.find(".clockspan").html("<span class='day'>超时</span>"):(e.find(".day").text(t),e.find(".hour").text(i),e.find(".minute").text(a),e.find(".second").text(s))}},s={WAIT_BUYER_PAY:"待付款",SELLER_CONSIGNED_PART:"部分发货",WAIT_SELLER_SEND_GOODS:"待发货",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"},n={WAIT_SELLER_AGREE:"买家申请退款",WAIT_BUYER_RETURN_GOODS:"卖家同意退款",WAIT_SELLER_CONFIRM_GOODS:"买家退货中",SELLER_REFUSE_BUYER:"卖家拒绝退款",SUCCESS:"退款成功",CLOSED:"退款关闭"},l={TRADE_NO_CREATE_PAY:1,WAIT_BUYER_PAY:1,SELLER_CONSIGNED_PART:2,WAIT_SELLER_SEND_GOODS:2,WAIT_BUYER_CONFIRM_GOODS:3,TRADE_BUYER_SIGNED:4,TRADE_FINISHED:5,TRADE_CLOSED_BY_TAOBAO:6,TRADE_CLOSED:6},d={WAIT_SELLER_AGREE:21,WAIT_BUYER_RETURN_GOODS:22,WAIT_SELLER_CONFIRM_GOODS:22,SUCCESS:23,SELLER_REFUSE_BUYER:31,CLOSED:32,NO_REFUND:40},o={OrderProcess:function(e,t,i,a,s,n,l,d,o,r,p,c){this.name=e,this.num=t,this.createdFormat=i,this.countdownDispaly=a,this.statusIndex=s,this.refundStatusIndex=n,this.progress=l,this.isEnd=d,this.isFinished=o,this.countdownDay=r,this.createdFormatField=p,this.processType=c},OrderProcessInit:function(){var e=[];e.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","0天0小时0分0秒",1,0,23,!1,!1,3,"created",1)),e.push(new this.OrderProcess("付款",2,"2015/03/27 01:57:07","0天0小时0分0秒",2,0,23,!1,!1,3,"payTime",1)),e.push(new this.OrderProcess("发货",3,"2015/03/27 01:57:07","0天0小时0分0秒",3,0,23,!1,!1,10,"consignTime",1)),e.push(new this.OrderProcess("确认收货",4,"2015/03/27 01:57:07","",4,0,23,!1,!1,0,"endTime",1)),e.push(new this.OrderProcess("交易成功",5,"2015/03/27 01:57:07","",5,0,0,!0,!1,0,"endTime",1));var t=[];t.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","0天0小时0分0秒",1,0,23,!1,!1,3,"created",2)),t.push(new this.OrderProcess("付款",2,"2015/03/27 01:57:07","0天0小时0分0秒",2,0,23,!1,!1,3,"payTime",2)),t.push(new this.OrderProcess("申请退款",3,"2015/03/27 01:57:07","0天0小时0分0秒",2,21,23,!1,!1,2,"refundTime",2)),t.push(new this.OrderProcess("处理退款",4,"2015/03/27 01:57:07","",2,22,23,!1,!1,0,"refundConfirmTime",2)),t.push(new this.OrderProcess("交易关闭",5,"2015/03/27 01:57:07","",6,23,0,!0,!1,0,"endTime",2));var i=[];i.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","0天0小时0分0秒",1,0,18,!1,!1,3,"created",3)),i.push(new this.OrderProcess("付款",2,"2015/03/27 01:57:07","0天0小时0分0秒",2,0,18,!1,!1,3,"payTime",3)),i.push(new this.OrderProcess("发货",3,"2015/03/27 01:57:07","0天0小时0分0秒",3,0,18,!1,!1,3,"consignTime",3)),i.push(new this.OrderProcess("申请退款",4,"2015/03/27 01:57:07","0天0小时0分0秒",3,21,18,!1,!1,5,"refundTime",3)),i.push(new this.OrderProcess("处理退款",5,"2015/03/27 01:57:07","",3,22,18,!1,!1,0,"refundConfirmTime",3)),i.push(new this.OrderProcess("交易关闭",6,"2015/03/27 01:57:07","",6,23,0,!0,!1,0,"endTime",3));var a=[];a.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","0天0小时0分0秒",1,0,90,!1,!1,3,"created",4)),a.push(new this.OrderProcess("交易关闭",2,"2015/03/27 01:57:07","",6,0,0,!0,!1,0,"endTime",4));var s=[];s.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","",1,0,30,!1,!1,0,"created",5)),s.push(new this.OrderProcess("发货",2,"2015/03/27 01:57:07","",3,0,30,!1,!1,0,"consignTime",5)),s.push(new this.OrderProcess("买家签收",3,"2015/03/27 01:57:07","",4,0,30,!1,!1,0,"",5)),s.push(new this.OrderProcess("交易成功",4,"2015/03/27 01:57:07","",5,0,0,!0,!1,0,"endTime",5));var n=[];n.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","",1,0,90,!1,!1,0,"created",6)),n.push(new this.OrderProcess("交易关闭",2,"2015/03/27 01:57:07","",6,0,0,!0,!1,0,"endTime",6));var l=[];l.push(new this.OrderProcess("下单",1,"2015/03/27 01:57:07","",1,0,45,!1,!1,0,"created",7)),l.push(new this.OrderProcess("发货",2,"2015/03/27 01:57:07","",3,0,45,!1,!1,0,"consignTime",7)),l.push(new this.OrderProcess("交易关闭",3,"2015/03/27 01:57:07","",6,0,0,!0,!1,0,"endTime",7));var d={1:e,2:t,3:i,4:a,5:s,6:n,7:l};this.process=d},getOrderProcess:function(e){var t,i=e.isRefund,a=e.type,s=e.status,n=l[s];return t="cod"==a?6==n?"undefined"==typeof e.consignTime||""==e.consignTime||"946656000000"==e.consignTime?this.process[6]:this.process[7]:this.process[5]:0==i?6==n?this.process[4]:this.process[1]:"undefined"==typeof e.consignTime||""==e.consignTime||"946656000000"==e.consignTime?this.process[2]:this.process[3],e.statusIndex=n,e.refundsLen=e.refunds&&e.refunds.length>0?e.refunds.length:0,this.initRefundDate(e),this.initCreatedFormat(e,t),this.initFinishedStatus(e,t),t},initItemData:function(i){i.created&&(i.createdFormat=t.util.date.getdate(i.created,"YY-MM-DD HH:mm:ss")),i.payTime&&(i.payTimeFormat=t.util.date.getdate(i.payTime,"YY-MM-DD HH:mm:ss")),i.consignTime&&(i.consignTimeFormat=t.util.date.getdate(i.consignTime,"YY-MM-DD HH:mm:ss")),i.confirmGoodsTime&&(i.confirmGoodsTimeFormat=t.util.date.getdate(i.confirmGoodsTime,"YY-MM-DD HH:mm:ss")),i.refundTime&&(i.refundTimeFormat=t.util.date.getdate(i.refundTime,"YY-MM-DD HH:mm:ss")),i.refundConfirmTime&&(i.refundConfirmTimeFormat=t.util.date.getdate(i.refundConfirmTime,"YY-MM-DD HH:mm:ss")),i.finishedTime&&(i.finishedTimeFormat=t.util.date.getdate(i.finishedTime,"YY-MM-DD HH:mm:ss")),i.orders&&e.each(i.orders,function(e,t){t.statusName=s[t.status],t.refundStatus&&(t.refundStatusName=n[t.refundStatus]),t.favorableFee=t.discountFee-t.adjustFee,t.favorableFee=t.favorableFee.toFixed(2),t.skuPropertiesName&&(t.skuPropertiesNameColor=t.skuPropertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;display: inline;">$1</span>')),t.hasSku=t.skuPropertiesName?1:0;var i=l[t.status];t.statusIndex="undefined"!=typeof i?i:1}),i.refunds&&e.each(i.refunds,function(e,i){i.createdDate=t.util.date.getdate(i.created,"YY-MM-DD"),i.statusName=n[i.status]}),this.initTradeStatusIndex(i),this.initSellerFlagMemo(i)},initRefundDate:function(t){if(t&&t.refunds){var i,a;e.each(t.refunds,function(e,t){if(t.status){var s=d[t.status];s="undefined"==typeof s?0:parseInt(s),21==s&&t.created&&(!i||i>t.created)?i=t.created:22==s&&t.modified&&(!a||a>t.modified)?(i=t.created,a=t.modified):(i=t.created,a=t.modified)}}),t.refundTime=i,t.refundConfirmTime=a}},initFinishedStatus:function(t,i){if(i){var a=i[0].processType,s=t.statusIndex,n=t.refundStatusIndex;e.each(i,function(e,t){2==a||3==a?s>t.statusIndex?t.isFinished=!0:s==t.statusIndex&&t.refundStatusIndex>0?n&&n>=t.refundStatusIndex&&(t.isFinished=!0):s==t.statusIndex&&0==t.refundStatusIndex&&(t.isFinished=!0):s>=t.statusIndex&&(t.isFinished=!0)})}},initCountDownView:function(e,t){var i=t.OrderProcesss,s=t.serverTime;if(s||(s=new Date),i&&s){for(var n,l=0,d=0;d<i.length;d++)i[d].isFinished&&(l=d);for(var d=0;d<i.length;d++)l==d?n=i[d]:e.find(".OrderProcess_"+i[d].num).find(".d-duration").html("");if(!n)return void e.find(".OrderProcess_"+i[d].num).find(".d-duration").html("");var o=n.countdownDay;if(0==o)return n.countdownDispaly="",void e.find(".OrderProcess_"+n.num).find(".d-duration").html("");var r=n.createdFormat;if(10==o)if(t.timeoutActionTime&&"946656000000"!=t.timeoutActionTime)a.initCountDownView(e,s,t.timeoutActionTime);else{var p=new Date(r),c=this.addTime(p,o);a.initCountDownView(e,s,c)}else if(r&&""!=r){var p=new Date(r),c=this.addTime(p,o);a.initCountDownView(e,s,c)}else e.find(".OrderProcess_"+n.num).find(".d-duration").html("")}},addTime:function(e,t){var i=e.getTime(),a=1e3*t*60*60*24;return i+=a,new Date(i)},initCreatedFormat:function(i,a){a&&e.each(a,function(e,a){var s=a.createdFormatField;a.createdFormat="created"==s?i.created:"payTime"==s?i.payTime:"consignTime"==s?i.consignTime:"endTime"==s?i.endTime:"refundTime"==s?i.refundTime:"refundConfirmTime"==s?i.refundConfirmTime:"endTime"==s?i.endTime:"",a.createdFormat&&""!=a.createdFormat&&(a.createdFormat=t.util.date.getdate(a.createdFormat,"YY-MM-DD HH:mm:ss")),"2000/01/01 00:00:00"==a.createdFormat&&(a.createdFormat="")})},initSellerFlagMemo:function(t){var i=[],a="";t.messageMemoList?(e.each(t.messageMemoList,function(e,t){"undefined"!=typeof t.sellerFlag&&i.push(t.sellerFlag),t.sellerMemo&&""!=t.sellerMemo&&(a+=t.sellerMemo+"；")}),""!=a&&(a=a.substring(0,a.length-1))):(t.sellerMemo&&(a=t.sellerMemo),"undefined"!=typeof t.sellerFlag&&i.push(t.sellerFlag)),t.sellerFlags=i,t.sellerMemos=a},STATUS_NAME_MAP:function(){return s},refundStatusList:function(){return n},getTradeDetail:function(e,t,i){API.trade_detail(e,function(e){t(e.data)},i)},getTradeItemInfo:function(e,t,i){API.trade_item_info(e,function(e){t(e.data)},i)},getOrderByNumIid:function(t,i){if(null==t||null==t.orders)return null;var a;return e.each(t.orders,function(e,t){return t.numIid==i?void(a=t):void 0}),a},updateSku:function(e,t,i){"undefined"==typeof e.outerId&&(e.outerId="");var a={oid:e.oid,taobaoId:e.taobaoId,skuId:e.skuId,skuProps:e.properties,skuPropsName:e.propertiesName,outerId:e.outerId};API.trade_sku_update(a,function(e){t(e.data)},i)},initTradeStatusIndex:function(t){var i=l[t.status];if(t.statusIndex="undefined"!=typeof i?i:1,1==t.isRefund){var a=0;t.refunds&&e.each(t.refunds,function(e,t){if(t.status){var i=d[t.status];i="undefined"==typeof i?0:parseInt(i),0==e?a=i:d[t.status]&&a>i&&(a=i)}}),t.refundStatusIndex=a}},getQuantityBySkuId:function(t,i){if(!t)return 0;var a=0;return e.each(t,function(e,t){return t.skuId==i?void(a=t.quantity):void 0}),a}};t.controls.define("control.trade.module.order.detail",{init:function(){return o}})}(jQuery,RayCloud),function(e,t){var a={get_sku_data:function(t){var i,a,s=t.skus,n=t.propertyAlias,l=(t.propsName,{}),d={};e(s).each(function(){e(this.propertiesName.split(";")).each(function(e,t){a=t.split(":"),i=d[a[0]],i||(i=d[a[0]]={name:a[2],id:a[0],cds:{}}),i.cds[a[1]]={name:RegExp("\b?"+a[0]+":"+a[1]+":([^;\b]*)\b?").test(n)?RegExp.$1:a[3],id:a[1]}}),l[this.properties]=this});var o,r,p,c,_=[];for(o in d){c=d[o],r={name:c.name,id:c.id,cds:[]};for(p in c.cds)r.cds.push(c.cds[p]);c.len=r.cds.length,_.push(r)}return{m0:l,m1:d,a0:_,property_alias:n}},calc_sku_item_status:function(t,i,a){var s,n,l=e.extend(!0,{},i),d=t.find('input[type="radio"]').filter('[data-is-no-data="false"]').prop("disabled",!1),o=d.filter(":checked"),r=(o.length,[]),p=[],c=(l.m1,l.m0);d.parent().removeAttr("title");var _={};o.each(function(){var t=e(this),i=t.parents("div[data-sku_name]").attr("data-sku_pid"),n=t.attr("data-sku_sid"),l=i+":"+n;for(s in c)if(RegExp("("+l.replace(/\:/g,"\\:")+";?)").test(s)&&(0==c[s].quantity||c[s].price!=a)){var d=(s+"").replace(RegExp(l.replace(/\:/g,"\\:")+";?|;$"),"");c[s].is_mark||(c[s].is_mark=!0,r.push(s)),_[l]?_[l].len+=1:_[l]={len:1},e(d.split(";")).each(function(){_[l][this]?_[l][this]+=1:_[l][this]=1})}p.push(l)});var m=[],u=p.length;e(p).each(function(e){var t;t=0===e?p.slice(e+1,u):e===u-1?p.slice(0,u-1):p.slice(0,e).concat(p.slice(e+1,u)),m.push(t)}),e(m).each(function(i,a){var s=a;e(r).each(function(i,a){var n=!0,l=a+"";if(e(s).each(function(e,t){return RegExp("("+t.replace(/\:/g,"\\:")+";?)").test(a)?void(l=l.replace(RegExp.$1,"")):(n=!1,!1)}),n){var d=p.join(";");if(l=l.replace(/\;$/,"").split(";"),1===l.length)return void e(l).each(function(e,i){RegExp(i.replace(/\:/g,"\\:")).test(d)||(i=i.split(":"),t.find('div[data-sku_pid="'+i[0]+'"] input[data-sku_sid="'+i[1]+'"]').prop("disabled",!0).parent().attr("title","该型号没有库存或者价格和当前销售价格不一致！"))})}})});var h;for(s in _)if(h=_[s])for(n in h)if("len"!==n&&h[n]===h.len){var f=n.split(":");t.find('div[data-sku_pid="'+f[0]+'"] input[data-sku_sid="'+f[1]+'"]').prop("disabled",!0).parent().attr("title","该型号没有库存或者价格和当前销售价格不一致！")}},init_sku_item_status:function(t,a,s,n){var l=e.extend(!0,{},a),d=l.m1,o=l.m0;t.find('input[type="radio"]').attr("data-is-no-data","false");var r={},p=this;if(n){var c;e(n.split(";")).each(function(e,i){c=i.split(":"),r[c[0]]=c[1],t.find('div[data-sku_name="'+c[0]+'"] input[data-sku_value="'+c[1]+'"]').attr("data-is_default_sku","true").iCheck("check")})}for(i in d){var _,m,u,h=1,f=d[i];for(j in d)j!==i&&(h*=d[j].len);d[i].n_mix=h;for(j in f.cds){_=i+":"+j;for(k in o)!RegExp("("+_.replace(/\:/g,"\\:")+";?)").test(k)||0!=o[k].quantity&&o[k].price==s||(m?m++:m=1);m===h&&(u=t.find('div[data-sku_pid="'+i+'"] input[data-sku_sid="'+j+'"]'),u.attr("data-is_default_sku")||u.prop("disabled",!0).attr("data-is-no-data","true").parent().attr("title","该型号没有库存或者价格和当前销售价格不一致！")),m=null}}p.calc_sku_item_status(t,a,s),t.on("click",'input[type="radio"]',function(){var i=e(this),n=i.parents("div[data-sku_name]").attr("data-sku_name"),l=i.attr("data-sku_value");r[n]===l?(i.iCheck("uncheck"),r[n]=null):r[n]=l,p.calc_sku_item_status(t,a,s),p.edit_quantity(t,a)}),p.edit_quantity(t,a)},before_save_data:function(i,a,s,n){var l=i.find('input[type="radio"]:checked');if(l.length!==i.find("div[data-sku_name]").length)return t.showWarn("请选择要修改的sku属性"),!1;var d,o=[];l.each(function(){d=e(this),o.push(d.parents("div[data-sku_name]").attr("data-sku_pid")+":"+d.attr("data-sku_sid"))});var r,p,c,_=a.m0;for(r in _)if(p=!0,e(o).each(function(e,t){return RegExp("("+t.replace(/\:/g,"\\:")+";?)").test(r)?void 0:(p=!1,!1)}),p){c=_[r];break}return c?c.price!=s?(t.showWarn("该组合的价格不满足之前的原有价格！"),!1):(c.oid=n,a.property_alias&&e(a.property_alias.split(";")).each(function(e,t){if(t&&""!==t&&/(\d+\:\d+)\:(.*)/.test(t)){var i=RegExp.$1,a=RegExp.$2;c.propertiesName=c.propertiesName.replace(RegExp("("+i+")(:[^:]*):([^;\b]*)"),"$1$2:"+a)}}),c.propertiesName=c.propertiesName.replace(/\d+\:\d+\:/g,""),0===c.quantity?(t.showWarn("该组合的库存为0！"),!1):(c.oid=n,c)):(t.showWarn("没有找到合适的sku 组合, 请重新组合"),!1)},edit_quantity:function(t,i){var a=t.find('input[type="radio"]:checked');if(a.length==t.find("div[data-sku_name]").length){var s,n=[];a.each(function(){s=e(this),n.push(s.parents("div[data-sku_name]").attr("data-sku_pid")+":"+s.attr("data-sku_sid"))});var l,d,o,r=i.m0;for(l in r)if(d=!0,e(n).each(function(e,t){return RegExp("("+t.replace(/\:/g,"\\:")+";?)").test(l)?void 0:(d=!1,!1)}),d){o=r[l];break}if(!o)return tip("warn","抱歉，没有找到合适的sku 组合, 请重新组合"),!1;e(".item_quantity").text(o.quantity)}}};t.controls.define("control.trade.sku.edit",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i=['<div style="border: 1px solid #eaeaea; background: #ffffff; padding: 10px 15px; line-height: 24px;">','<div style="border-bottom: 1px solid #eaeaea;"><span class="mr_20">系统单号：{{sid}}</span></div>','<div act-if="tracesLength == 0">暂无操作记录</div>','<ul class="mt_10">','<li class="clearfix" act-loop="trace in traces" style="border-bottom: 1px solid #eaeaea;">','<span style="width: 120px" class="f-lt mr_10">{{trace.operateDate}}</span>','<span style="width: 100px" class="f-lt mr_10">{{trace.action}}</span>','<span style="width: 80px" class="f-rt mr_10">{{trace.operator}}</span>',"</li>","</ul>","</div>"];t.template.addTemp("template.control.trade.module.traces_info",i);var a={show:function(e,t){return this.itemData=e,this.target=t.currentTarget,this._render(),this.$el&&this.$el.is(":visible")?void this.hide():(this._update(e),void this._show(t))},_show:function(t){var i=e(t.target).offset(),a=e(window).width();i.left+500>a?this.$el.css({right:0,top:i.top+16}).show():this.$el.css({left:i.left-307,top:i.top+16}).show(),this._status_display=!0},hide:function(){this.$el&&(this.$el.hide(),this.$el.remove(),this.$el=null,this._status_display=!1,this.modelId=null,this.tid=null,this.taobaoId=null,this.oid=null,this.target=null)},_render:function(){this.$el||(this.$el=e('<div style="display:none;position: absolute; width: 400px; z-index: 9999999;"></div>').appendTo("body"),this._event_bind())},_update:function(i){var a=0;i.traces&&(a=i.traces.length,e.each(i.traces,function(e,i){i.operateTime&&(i.operateDate=t.util.date.getdate(i.operateTime,"YY-MM-DD HH:mm:ss"))})),i.tracesLength=a;var s=t.template.get("template.control.trade.module.traces_info",i);this.$el.html(s)},_event_bind:function(){e(document).on("click.control.trade.module.traces_info",e.proxy(function(t){if(this._status_display){var i=this.$el[0],a=t.target;i===a||e.contains(i,a)||a===this.target||e.contains(this.target,a)||this.hide()}},this))},_event_unbind:function(){e(document).off("click.control.trade.module.traces_info")},destroy:function(){this.hide()}};t.controls.define("control.trade.module.traces_info",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i={STATUS_NAME_MAP:{WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"待发货",SELLER_CONSIGNED_PART:"待发货",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_BUYER_SIGNED:"已签收(货到付款)",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"}};t.controls.define("control.trade.CONSTANTS",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={_get_filter_json_data:function(){return this._filter_json_data},_get_filter_html:function(e,t){var i='<ul class="filter-item-list"></ul>',a=this._get_filter_condition_html(e);if(this._filter_json_data={},t&&t.length){for(var s="",n=0;n<t.length;n++)this._filter_json_data[t[n].id]=t[n],s+='<li class="filter-li" id="'+t[n].id+'"><span class="filter-li-title">'+t[n].name+'</span><span class="remove-filter" title="删除"></span></li>';i='<ul class="filter-item-list">'+s+"</ul>"}return['<div class="trade-filter-container">',e?'<div class="filter-items"><div class="new-add-title">过滤条件<a class="add-filter" style="float: right; margin-right: 10px;">添加</a></div>'+i+"</div>":"",a,"</div>"].join("")},_get_filter_condition_html:function(e){for(var i=t.user.get().bindShops||[],a="",s="",n=[{id:1,name:"华东",value:"east",child:[{id:11,name:"上海",value:"上海"},{id:12,name:"江苏",value:"江苏"},{id:13,name:"浙江",value:"浙江"},{id:14,name:"安徽",value:"安徽"},{id:15,name:"江西",value:"江西"}]},{id:2,name:"华北",value:"north",child:[{id:21,name:"北京",value:"北京"},{id:22,name:"天津",value:"天津"},{id:23,name:"山西",value:"山西"},{id:24,name:"山东",value:"山东"},{id:25,name:"河北",value:"河北"},{id:26,name:"内蒙古",value:"内蒙古"}]},{id:3,name:"华中",value:"center",child:[{id:31,name:"湖南",value:"湖南"},{id:32,name:"湖北",value:"湖北"},{id:33,name:"河南",value:"河南"}]},{id:4,name:"华南",value:"south",child:[{id:41,name:"广东",value:"广东"},{id:42,name:"广西",value:"广西"},{id:43,name:"福建",value:"福建"},{id:44,name:"海南",value:"海南"}]},{id:5,name:"东北",value:"eastnorth",child:[{id:51,name:"辽宁",value:"辽宁"},{id:52,name:"吉林",value:"吉林"},{id:53,name:"黑龙江",value:"黑龙江"}]},{id:6,name:"西北",value:"northwest",child:[{id:61,name:"陕西",value:"陕西"},{id:62,name:"新疆",value:"新疆"},{id:63,name:"甘肃",value:"甘肃"},{id:64,name:"宁夏",value:"宁夏"},{id:65,name:"青海",value:"青海"}]},{id:7,name:"西南",value:"southwest",child:[{id:71,name:"重庆",value:"重庆"},{id:72,name:"云南",value:"云南"},{id:73,name:"贵州",value:"贵州"},{id:74,name:"西藏",value:"西藏"},{id:75,name:"四川",value:"四川"}]},{id:8,name:"港澳台",value:"hkt",child:[{id:81,name:"香港",value:"香港"},{id:82,name:"澳门",value:"澳门"},{id:73,name:"台湾",value:"台湾"}]},{id:9,name:"海外",value:"oversea",child:[{id:91,name:"海外",value:"海外"}]}],l=0;l<i.length;l++)a+='<div class="field-content"><label><span class="check"><input type="checkbox" name="shopname" value="'+i[l].userId+'"/></span><span class="plat-name">['+i[l].flag+"]</span>"+i[l].title+"</label></div>";for(var d=0;d<n.length;d++){for(var o=n[d].child,r="",p=0;p<o.length;p++)r+='<label><span class="check"><input type="checkbox" name="receiverArea" value="'+o[p].value+'" class="J_Checkbox region-city"></span>'+o[p].name+"</label>";r='<div class="region-address">'+r+"</div>",s+=['<div class="region-container">','<div class="region-name"><label><span class="check"><input type="checkbox" name="receiverArea" value="'+n[d].value+'" class="J_Checkbox J_Region"></span>'+n[d].name+"</label></div>"+r,"</div>"].join("")}var c=e?'<div class="filter-name-field"><span class="filter-name-strong">*</span><span class="filter-name">过滤条件名称:</span><input type="text" class="filter-name-input"/><span class="filter-name-error" style="display: none;">过滤条件名称不能为空， 请重新输入！</span></div>':"",_=e?'<button class="btn btn-primary filter-btn-save">保存</button>':'<button class="btn btn-primary filter-btn-ok">确定</button>';return['<div class="filter-detail-conditions">',c,'<div class="up-details">','<div class="field-area order-type-field">','<div class="field-title">订单类型</div>','<div class="field-content"><label><span class="check"><input type="checkbox" name="tradeType" value="1"/></span>货到付款</label></div>','<div class="field-content"><label><span class="check"><input type="checkbox" name="tradeType" value="7"/></span>合并订单</label></div>','<div class="field-content"><label><span class="check"><input type="checkbox" name="tradeType" value="8"/></span>拆分订单</label></div>',"</div>",'<div class="field-area prod-no-field">','<div class="field-title">商品</div>','<div class="field-content"><label><input type="radio" name="oneItem" value="1"/>1种商品</label></div>','<div class="field-content"><label><input type="radio" name="oneItem" value="0"/>2种及以上商品</label></div>','<div class="field-content">指定商品</div>','<div class="field-content"><input type="text" class="appointkind-input search-sku-prop" name="appointkindinput" placeholder="规格属性"/></div>',"</div>",'<div class="field-area address-type-field">','<div class="field-title">地址类型</div>','<div class="field-content"><label><input type="radio" name="addressType" value="0"/>城区地址</label></div>','<div class="field-content"><label class="rural-check"><input type="radio" name="addressType" value="1"/><span class="rural-address">非城区地址（地址中包含镇、乡、村、左旗、右旗关键字，因此可能存在误差）</span></label></div>',"</div>",'<div class="field-area note-info-field">','<div class="field-title">留言</div>','<div class="field-content"><label><input type="radio" name="containMemo" value="0"/>无留言且无备注</label></div>','<div class="field-content"><label><input type="radio" name="containMemo" value="3"/>有留言或备注</label></div>',"</div>","</div>",'<div class="down-details">','<div class="field-area order-statu-field">','<div class="field-title">快递单打印状态</div>','<div class="field-content">','<label><input type="radio" name="expressStatus" value="0"/>未打印</label>','<label><input type="radio" name="expressStatus" value="1"/>已打印</label>',"</div>",'<div class="field-title">发货单打印状态</div>','<div class="field-content">','<label><input type="radio" name="deliverStatus" value="0"/>未打印</label>','<label><input type="radio" name="deliverStatus" value="1"/>已打印</label>',"</div>",'<div class="field-title">订单审核状态</div>','<div class="field-content">','<label><input type="radio" name="isVerify" value="0"/>未审核</label>','<label><input type="radio" name="isVerify" value="1"/>已审核</label>',"</div>",'<div class="field-title">订单退款状态</div>','<div class="field-content">','<label><input type="radio" name="isRefund" value="0"/>非退款</label>','<label><input type="radio" name="isRefund" value="1"/>退款</label>',"</div>",'<div class="field-title">订单挂起状态</div>','<div class="field-content">','<label><input type="radio" name="isHalt" value="0"/>非挂起</label>','<label><input type="radio" name="isHalt" value="1"/>挂起</label>',"</div>",'<div class="field-title">淘宝异常状态</div>','<div class="field-content">','<label><input type="radio" name="isExcep" value="0"/>非淘宝异常</label>','<label><input type="radio" name="isExcep" value="1"/>淘宝异常</label>',"</div>","</div>",'<div class="field-area area-info-field">','<div class="field-title">地区</div>'+s,"</div>","</div>",'<div class="filter-op-area">',_,'<button class="btn btn-cancel filter-btn-cancel">取消</button>',"</div>","</div>"].join("")}},a={show:function(t,a,s){var n="",l="";a?(n="新增过滤条件",l=i._get_filter_html(a,s)):(n="更多查询",l=i._get_filter_html()),this.filterDlg=e.dialog({title:n,content:l,okVal:a?"确定":"保存"}),this._event_bind(e(".trade-filter-container"),t)},show_for_search:function(t,a){var s=e(i._get_filter_html());s.css("position","absolute").appendTo(a),this._event_bind(e(".trade-filter-container"),t)},_event_bind:function(a,s){var n=this;this._event_unbind(a),a.find(".filter-name-input").focus(),a.find("[type=radio]").iCheck(),a.find(".region-container").on("click",function(t){var i=e(t.target);if(i.hasClass("J_Region")){var a=i.parents(".region-name"),s=a.next();i.prop("checked")?s.find("input").prop("checked",!0):s.find("input").prop("checked",!1)}else if(i.hasClass("region-city")){var s=i.parents(".region-address"),a=s.prev();i.prop("checked")?s.find("input").length==s.find("input:checked").length&&a.find("input").prop("checked",!0):a.find("input").prop("checked",!1)}}),a.find(".add-filter").on("click",function(t){e(t.target);a.find(".filter-li").length>=7?e.dialog.alert("您的过滤条件个数已经达到上限，请删除其他条件再新增！"):(a.find(".filter-detail-conditions").replaceWith(i._get_filter_condition_html(!0)),a.find(".filter-li").removeClass("li-selected"),a.find(".filter-name-input").focus(),n._event_bind(e(".trade-filter-container"),s))
}),a.find(".filter-item-list").on("click",function(l){var d=e(l.target);if(d.hasClass("filter-li")){var o=d.attr("id");d.siblings().removeClass("li-selected"),d.addClass("li-selected"),n._rerender_filter_field_UI(a,o,s)}else d.hasClass("remove-filter")&&e.dialog.confirm("你确定要删除该过滤条件？",function(){var l=d.parent();API.trade_search_custom_delete({id:l.attr("id")},function(){l.remove(),a.find(".filter-detail-conditions").replaceWith(i._get_filter_condition_html(!0)),n._event_bind(e(".trade-filter-container"),s),a.find(".filter-name-input").focus(),t.pub("trade.searchlist.render.filter")},function(){},!1)})}),a.find(".filter-btn-ok").on("click",function(){var i=n._get_filter_data(a,s);n.filterDlg&&n.filterDlg.close();var l=t.pages._fn_act_get_hashs();l.queryId&&(i.queryId=l.queryId);var d=e.extend(s,i);e.each(d,function(e,t){t||""!==t||delete d[e]}),t.pages.setCurHash(d)}),a.find(".filter-btn-save").on("click",function(){var e=n._get_filter_data(a,s);return""===e.name?(a.find(".filter-name-error").show(),void a.find(".filter-name-input").focus()):(e.printFilter&&delete e.printFilter,void API.trade_search_custom_save(e,function(){t.pub("trade.searchlist.render.filter"),n.filterDlg&&n.filterDlg.close()},function(){},!1))}),a.find(".filter-btn-cancel").on("click",function(){n.filterDlg&&n.filterDlg.close()})},_rerender_filter_field_UI:function(t,a,s){var n=this,l=i._get_filter_json_data(),d=l[a]||{};d&&(t.find(".filter-detail-conditions").replaceWith(i._get_filter_condition_html(!0)),n._event_bind(e(".trade-filter-container"),s),n._init_filter_data(t,d))},_init_filter_data:function(e,t){e.find(".filter-name-input").val(t.name).attr("id",t.id);var i=t.sysStatus,a=t.tradeType,s=t.receiverArea;if(i&&i.length)for(var n=0;n<i.length;n++)e.find('[value="'+i[n]+'"]').prop("checked",!0);if(a&&a.length)for(var l=0;l<a.length;l++)e.find('[value="'+a[l]+'"]').prop("checked",!0);if(s&&s.length)for(var d=0;d<s.length;d++)e.find('[value="'+s[d]+'"]').prop("checked",!0);e.find(".prod-no-field").find('[value="'+t.oneItem+'"]').iCheck("check"),e.find(".search-sku-prop").val(t.skuProp||""),e.find(".address-type-field").find('[value="'+t.addressType+'"]').iCheck("check"),e.find(".note-info-field").find('[value="'+t.containMemo+'"]').iCheck("check"),e.find('[name="expressStatus"][value="'+t.expressStatus+'"]').iCheck("check"),e.find('[name="deliverStatus"][value="'+t.deliverStatus+'"]').iCheck("check"),e.find('[name="isVerify"][value="'+t.isVerify+'"]').iCheck("check"),e.find('[name="isRefund"][value="'+t.isRefund+'"]').iCheck("check"),e.find('[name="isHalt"][value="'+t.isHalt+'"]').iCheck("check"),e.find('[name="isExcep"][value="'+t.isExcep+'"]').iCheck("check")},_get_filter_data:function(t,i){var a={},s=t.find(".filter-name-input");a.queryId=i.queryId,s.length&&(s.attr("id")&&(a.id=s.attr("id")),a.name=e.trim(s.val()));var n=t.find('[name="sysStatus"]:checked'),l=[];n.length&&(e.each(n,function(t,i){l.push(e(i).val())}),a.sysStatus=l.join(","));var d=t.find('[name="tradeType"]:checked'),o=[];d.length&&(e.each(d,function(t,i){o.push(1*e(i).val())}),a.tradeType=o.join(","));var r=t.find('[name="receiverArea"]:checked'),p=[];r.length&&(e.each(r,function(t,i){p.push(e(i).val())}),a.receiverArea=p.join(","));var c=t.find('[name="oneItem"]:checked');c.length&&(a.oneItem=1*c.val()),a.skuProp=t.find(".search-sku-prop").val();var _=t.find('[name="addressType"]:checked');_.length&&(a.addressType=1*_.val());var m=t.find('[name="containMemo"]:checked');m.length&&(a.containMemo=1*m.val());var u=t.find('[name="expressStatus"]:checked');u.length&&u.val()&&(a.expressStatus=1*u.val(),a.printFilter=1);var h=t.find('[name="deliverStatus"]:checked');h.length&&h.val()&&(a.deliverStatus=1*h.val(),a.printFilter=1);var f=t.find('[name="isVerify"]:checked');f.length&&f.val()&&(a.isVerify=1*f.val(),a.printFilter=1);var v=t.find('[name="isRefund"]:checked');v.length&&v.val()&&(a.isRefund=1*v.val(),a.printFilter=1);var g=t.find('[name="isHalt"]:checked');g.length&&g.val()&&(a.isHalt=1*g.val(),a.printFilter=1);var b=t.find('[name="isExcep"]:checked');return b.length&&b.val()&&(a.isExcep=1*b.val(),a.printFilter=1),e.extend({sysStatus:"",tradeType:"",receiverArea:"",oneItem:"",addressType:"",containMemo:"",expressStatus:"",deliverStatus:"",isVerify:"",isRefund:"",isHalt:"",isExcep:"",printFilter:""},a)},_event_unbind:function(e){e.find(".region-container").off("click"),e.find(".add-filter").off("click"),e.find(".filter-item-list").off("click"),e.find(".filter-btn-ok").off("click"),e.find(".filter-btn-save").off("click"),e.find(".filter-btn-cancel").off("click")}};t.controls.define("control.trade.searchlist.filterDetails",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade.searchlist.filterDetails"),a={renderTo:function(i,a){var s=this,n=function(){API.trade_search_custom_list({queryId:a.queryId},function(t){var n=t.data,l=['<div class="clearfix f-lt module-trade-tab-navs custom-filter">'];l.push('<a class="module-trade-tab-nav filter-tab-nav filter-tab-all" data-id="">全部</a>'),n&&n.length&&e.each(n,function(e,t){l.push('<a class="module-trade-tab-nav filter-tab-nav" data-id="{id}">{name}<span class="close-filter"></span></a>'.replace(/{id}/g,t.id).replace("{name}",t.name))}),l.push(['<span class="trade-add-filter" title="过滤条件最多支持7个"></span>','<div class="btn-dropdown">','<a data-name="trade_sync" class="btn-dropdown-hd btn-sync" href="javascript:;">同步订单</a>','<span class="btn-dropdown-bd">','<span class="btn-dropdown-arrow"></span>',"<ul>",'<li class="J_Click btn-sync">全量同步</li>','<li class="J_Click appoint-download">指定下载</li>',"</ul>","</span>","</div>","</div>"].join("")),s.$el=e(l.join("")).appendTo(i.empty()),s._event_bind(a,n)},function(){},!1)};t.sub("trade.searchlist.render.filter",function(){n()}),n()},_event_bind:function(a,s){var n=this,l=a.customId;this._event_unbind(),l&&n.$el.find(".filter-tab-nav[data-id="+l+"]").addClass("filter-selected"),!l&&n.$el.find('.filter-tab-nav[data-id=""]').addClass("filter-selected"),n.$el.find(".trade-add-filter").iTip({skin:"blue",triggerType:"hover",zIndex:10020}),this.$el.find(".btn-sync").on("click",function(e){t.pub("trade.list.sub_module_querybar.trade_sync",e)}),n.$el.on("click",function(l){var d=e(l.target);if(d.hasClass("trade-add-filter"))n.$el.find(".module-trade-tab-nav").length<8&&i.show(a,!0,s);else if(d.hasClass("filter-tab-nav"))d.addClass("filter-selected").siblings().removeClass("filter-selected"),t.pages.setCurHash({queryId:a.queryId||1,sys:a.sys||!0,customId:d.data("id")});else{if(d.hasClass("close-filter")){var o=d.parent();return API.trade_search_custom_delete({id:o.data("id")},function(){o.remove(),t.pages.setCurHash({queryId:a.queryId||1,sys:a.sys||!0,customId:""}),t.pub("trade.searchlist.render.filter")},function(){},!1),!1}d.hasClass("appoint-download")&&n._open_appoint_dlg()}})},_open_appoint_dlg:function(){for(var i=this,a=t.user.get(),s=a.shopList||[],n="",l={},d=0;d<s.length;d++)l[s[d].taobaoId]=s[d];if(a.userConf.mmb)for(var d=0;d<s.length;d++){var o="";0===d&&(o="checked"),n+='<label><input type="radio" name="shop_name" '+o+' value="'+s[d].taobaoId+'"/><span class="shop-name">'+s[d].title+"</span></label>"}else n='<label><input type="radio" name="shop_name" checked value="'+a.taobaoId+'"/><span class="shop-name">'+l[a.taobaoId].title+"</span></label>";n=n?'<div class="plat-name">淘宝</div><div class="shop-name-wrap">'+n+"</div>":"",i.appointDlg=e.dialog({title:"指定下载",content:'<div class="filter-appoint-area"><div class="appoint-platform">'+n+'</div><div class="appoint-trade-no"><span class="trade-note">平台交易号：</span><span class="trade-no-input"><input type="text" name="trade_no" id="trade_no"/></span></div></div>',okVal:"确定",ok:function(){var a=e(".filter-appoint-area").find('[name="shop_name"]:checked');return taobaoId="",tid=e.trim(e(".filter-appoint-area").find("#trade_no").val()),a.length&&(taobaoId=e(".filter-appoint-area").find('[name="shop_name"]:checked').val()),""!==tid&&/^\d+$/.test(""+tid)?API.trade_syncTradesByTid({taobaoId:taobaoId,tids:tid},function(a){if(a.data){var s=t.controls.get("control.trade.CONSTANTS").STATUS_NAME_MAP;"ERROR_FIND"==a.data[0].status?e.dialog.alert("该交易号不是所选店铺的，请核对后重新操作",function(){e("#trade_no").select()}):(i.appointDlg.close(),e.dialog({title:"下载成功",content:'<div style="padding: 20px;"><div style="font-size: 24px; text-align: center;">订单同步成功！</div><div style="text-align: left; margin-left: 50px;"><div style="margin-top: 8px;"><span>系统单号：</span><span>'+a.data[0].tid+'</span></div><div style="margin-top: 8px;"><span>系统状态：</span><span>'+s[a.data[0].status]+"</span></div></div></div>",okVal:"确定",ok:function(){}}))}}):e.dialog.alert("平台交易号为空或者不合法， 请重新输入"),!1},cancelVal:"取消",cancel:function(){}}),i._init_appoint_dlg(e(".filter-appoint-area"))},_init_appoint_dlg:function(e){e.find("input:radio").iCheck(),e.find("#trade_no").off("keyup").on("keyup",function(t){13==t.keyCode&&e.parents(".ui_dialog").find(".ui_state_highlight").trigger("click")}).focus()},_event_unbind:function(){this.$el.off("click")}};t.controls.define("control.trade.searchlist.customFilter",{init:function(){return a}})}(jQuery,RayCloud),function(e,t){var i={load:function(e,t,i){API.pt_common_user_list(e,function(e){t(e.data)},i)},name_edit:function(e,t,i){API.pt_common_user_name_edit(e,t,i)},user_top:function(e,t,i){API.pt_common_user_top(e,t,i)},user_delete:function(e,t,i){API.pt_common_user_delete({id:e},t,i)},list_groupId:function(e,t,i){API.pt_common_list_groupId(e,function(e){t(e.data)},i)},user_add:function(e,t,i){API.pt_common_user_add(e,function(e){t(e.data)},i)},user_switch:function(e,t,i){API.pt_common_user_switch(e,function(e){t(e.data)},i)},common_status:function(e,t,i){API.pt_common_status(e,function(e){t(e.data)},i)},pt_common_user_sort_top:function(e,t,i){API.pt_common_user_sort_top(e,function(e){t(e.data)},i)},pt_common_user_sort:function(e,t,i){API.pt_common_user_sort(e,function(e){t(e.data)},i)}};t.controls.define("control.pt.common_list",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={load:function(e,t,i){API.pt_wlb_user_list(e,function(e){t(e.data)},i)},name_edit:function(e,t,i){API.pt_wlb_user_name_edit(e,function(e){t(e.data)},i)},update_default_addr:function(e,t,i){API.pt_wlb_user_branchaccount_default(e,t,i)},user_sync:function(e,t,i){API.pt_wlb_user_sync(e,t,i)},user_top:function(e,t,i){API.pt_wlb_user_top(e,t,i)},wlb_default:function(e,t,i){API.pt_wlb_default(e,t,i)},user_delete:function(){}};t.controls.define("control.pt.wlb_list",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={loadList:function(e,t,i){API.item_list(e,function(e){t(e.data)},i)},removeItems:function(e,t,i){API.item_delete(e,function(e){t(e.data)},i)},editItems:function(e,t,i){API.item_edit(e,function(e){t(e.data)},i)},batchEdit:function(e,t,i){API.item_batchEdit(e,function(e){t(e.data)},i)}};t.controls.define("control.pt.product_list",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=['<div style="display:none;">','<textarea style="min-width: 550px; height: 200px;" name="content_to_sub"></textarea>','<div class="content_to_sub_tip fc-red pd_5 ft-right" style="display: none">请至少输入10个字符!</div>','<div class="ft-center pt_10">','<span class="btn btn-primary J_Msg">好了，提交</span>','<span class="btn btn-gray ml_20 J_Close">下次吧</span>',"</div>","</div>"],a={show:function(){this._render(),this.$dialog=e.dialog({title:"提建议",close:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(i.join("")).appendTo("body"),this._event_bind())},_event_bind:function(){this.$el.on("click",".J_Msg",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this._fn_event_handler_click_close,this))},_event_unbind:function(){this.$el.off("click","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(){var t=this.$el.find("textarea[name=content_to_sub]"),i=e.trim(t.val());return i.length<10?void this.$el.find(".content_to_sub_tip").show():void API.user_suggestion({content:i},e.proxy(function(t){t.data.status&&e.dialog({title:"提示",icon:"ok.png",content:"保存成功！",ok:!0,close:function(){a.hide()}})},this))},_fn_event_handler_click_close:function(){this.hide()},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}},s={render:function(){this.$el||(this.$el=e(n.join("")).appendTo(e("body")),this.$el.find(".tool-tip").iTip({triggerType:"hover",skin:"blue"}),this._dom_go_top=this.$el.find('a[data-type="go-top"]'),this.eventBind())},_tools_handle_list:{"leave-msg":function(){a.show()},"go-top":function(){e("body,html").animate({scrollTop:0},600)}},_fn_is_show_go_top:function(){var t=e(window).scrollTop();t>0?this._dom_go_top.show(200):this._dom_go_top.hide(200)},eventBind:function(){this._fn_is_show_go_top(),this.$el.on("click",".J_tool-clk",this._fn_J_tools_handle_proxy=e.proxy(this._fn_J_tools_handle,this)),e(window).on("scroll",e.proxy(this._fn_is_show_go_top,this))},eventUnbind:function(){this.$el.off("click"),e(window).off("scroll")},_fn_J_tools_handle:function(t){t.preventDefault();var i=e(t.currentTarget),a=i.data("type");this._tools_handle_list[a].call(this,t)},destory:function(){this.$el&&(this.$el.empty().remove(),this.$el=null,this.eventUnbind())}},n=['<div class="dmj-tools">','<a href="#" class="J_tool-clk tool-tip" title="提建议" data-type="leave-msg"><i class="icon-tools-msg"></i></a>','<a href="javascript:location.reload()"><i class="icon-tools-update tool-tip" title="刷新页面"></i></a>','<a href="javascript:history.back(-1)"><i class="icon-tools-prev tool-tip" title="返回上一页"></i></a>','<a href="#" class="J_tool-clk" data-type="go-top" style="display: none"><i class="icon-tools-top tool-tip" title="回到顶部"></i></a>',"</div>"];t.controls.define("control.dmj_tools",{init:function(){return s}})}(jQuery,RayCloud),function(e,t){var i=['<div class="advertisement-container">','<div class="advertise-close"></div>','<div class="reward-area">',"</div>",'<a class="click-to-reward"></a>','<div class="book-area">','<a class="book-order monthly" href="http://tb.cn/HPO8v0y" target="_blank"></a>','<a class="book-order quarterly" href="http://tb.cn/uMnxu0y" target="_blank"></a>','<a class="book-order semiyearly" href="http://tb.cn/dQZxu0y" target="_blank"></a>','<a class="book-order yearly" href="http://tb.cn/43axu0y" target="_blank"></a>',"</div>",'<div class="instructs-area">',"</div>","</div>"],a={show:function(){this._render()},_render:function(){this.$el||(this.$el=e(i.join("")).appendTo("body"),this._set_position(),this._event_bind())},_set_position:function(){var e=document.documentElement.clientHeight,t=document.documentElement.clientWidth;this.$el.css({left:(t-this.$el.width())/2,top:(e-this.$el.height())/2})},_event_bind:function(){var e=this,t={s:"reward-class-0",a:"reward-class-1",b:"reward-class-2",c:"reward-class-3",d:"reward-class-4",e:"reward-class-5"};e.lotteryInprogress=!1,this.$el.on("click",".advertise-close",function(){e.clear()}),this.$el.on("click",".click-to-reward",function(){if(!e.lotteryInprogress){e.lotteryInprogress=!0;var i=e.$el.find(".reward-area");i.removeClass("reward-class-0 reward-class-1 reward-class-2 reward-class-3 reward-class-4 reward-class-5"),i.addClass("reward-animation"),setTimeout(function(){API.activity_prize({},function(a){e.lotteryInprogress=!1,i.removeClass("reward-animation");var s=a.data,n=s.level?s.level.toLowerCase():"",l=""+("undefined"!=typeof s.error?s.error:"");return l?void setTimeout(function(){e._openRewardDlg("error"+l)},1e3):void(n&&(i.addClass(t[n]),setTimeout(function(){e._openRewardDlg(n)},1e3)))},function(){e.lotteryInprogress=!1,i.removeClass("reward-animation")},!1)},2e3)}})},_openRewardDlg:function(t){var i={error1:'<div class="notice-msg">您的抽奖机会已用完, <br/>续费可以再获得一次抽奖机会！</div>',error0:'<div class="notice-msg">活动已结束！</div>',s:'<div class="reward-note">恭喜您抽中<span class="notice-msg">特</span>等奖，获得<span class="notice-msg">1000</span>条短信奖励！ 奖品将会在<span class="notice-msg">3</span>个工作日内发到您账号</div>',a:'<div class="reward-note">恭喜您抽中<span class="notice-msg">1</span>等奖，获得<span class="notice-msg">600</span>条短信奖励！ 奖品将会在<span class="notice-msg">3</span>个工作日内发到您账号</div>',b:'<div class="reward-note">恭喜您抽中<span class="notice-msg">2</span>等奖，获得<span class="notice-msg">200</span>条短信奖励！ 奖品将会在<span class="notice-msg">3</span>个工作日内发到您账号</div>',c:'<div class="reward-note">恭喜您抽中<span class="notice-msg">3</span>等奖，获得<span class="notice-msg">80</span>条短信奖励！ 奖品将会在<span class="notice-msg">3</span>个工作日内发到您账号</div>',d:'<div class="reward-note">恭喜您抽中<span class="notice-msg">4</span>等奖，获得<span class="notice-msg">30</span>条短信奖励！ 奖品将会在<span class="notice-msg">3</span>个工作日内发到您账号</div>',e:'<div class="reward-note">您获得<span class="notice-msg">再抽一次</span>机会，<br/>请再接再厉！</div>'},a=i[t];e.dialog({title:"提醒",content:'<div class="reward-remind-dlg"><div class="reward-remind-top"><div class="reward-remind-icon"></div><div>'+a+'</div></div><div class="reward-remind-down"><div class="reward-remind-discount"><软件5折低价回馈></div><div class="reward-remind-success">续费成功可额外获得一次抽奖机会</div></div></div>'})},_event_unbind:function(){this.$el.off("click",".advertise-close"),this.$el.off("click",".click-to-reward")},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null)}};t.controls.define("control.advertise_tool",{init:function(){return a}})}(jQuery,RayCloud),function(e){var t="msie"==e.browser.name&&e.browser.version<=9,i=/[\u2E80-\u9FFF\uF92C-\uFFE5]/g,a=/[\u2E80-\u9FFF\uF92C-\uFFE5]/,s=new RegExp("(http[s]{0,1}|ftp)://[a-zA-Z0-9\\.\\-]+\\.([a-zA-Z]{2,4})(:\\d+)?(/[a-zA-Z0-9\\.\\-~!@#$%^&*+?:_/=<>]*)?","gi"),n=function(e,t){this.initialize("insertinput",e,t)};n.prototype={constructor:n,initialize:function(t,i,a){var s=this;this.type=t,this.ele=i,this.$element=e(i),this.options=this.options||this.getOptions(a),this._inputTimeout=null,this._eventObj=null,this.bindInput();var n=this.options;n.doOnInput&&e.isFunction(n.onInput)&&n.onInput.call(this,s._eventObj,{maxLength:n.maxLength,leftLength:s.getLeftLength()})},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.minHeight=this.$element.height(),"INPUT"===this.ele.tagName.toLowerCase()&&(t.maxHeight=null),t},bindInput:function(){var e=this;t?function(){e.ele&&e.$element.unbind("propertychange keyup cut paste").bind("propertychange keyup cut paste",function(t){e._eventObj=t,e._inputTimeout&&clearTimeout(e._inputTimeout),e._inputTimeout=setTimeout(function(){e.inputHandler(t)},e.options.inputDelay)})}():function(){e.ele&&e.ele.addEventListener("input",function(t){e._eventObj=t;e._inputTimeout&&clearTimeout(e._inputTimeout),e._inputTimeout=setTimeout(function(){e.inputHandler(t)},e.options.inputDelay)},!1)}()},isGreateMaxLength:function(e,t){var a=this.options,s=a.charsType?2*a.maxLength:a.maxLength;if(s>0){var n=(a.charsType?e.replace(i,"lv"):e).replace(/\r/g,"").length,l=t?(a.charsType?t.replace(i,"lv"):t).replace(/\r/g,"").length:0;return n-l>s}return!1},setInsertPos:function(e){var t=this.ele;if(t.focus(),t.selectionStart||"0"==t.selectionStart)t.selectionStart=e,t.selectionEnd=e;else if(document.selection){var i=t.createTextRange();i.moveStart("character",e),i.collapse(!0),i.select()}},getInsertPos:function(){var e=this.ele;e.focus();var t=0;if(e.selectionStart||0===e.selectionStart)t=e.selectionStart;else if(document.selection){e.focus();var i=document.selection.createRange(),a=i.duplicate();for(a.moveToElementText(e);i.compareEndPoints("StartToStart",a)>0;)i.moveStart("character",-1),t++}return t},getSelection:function(){var e=this.ele;if(e.focus(),e.selectionStart||0===e.selectionStart)return{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd};if(document.selection){var t,i={},a=document.selection.createRange();if(e!=a.parentElement())return;var s=document.body.createTextRange();s.moveToElementText(e);for(var n=0;s.compareEndPoints("StartToStart",a)<0;n++)s.moveStart("character",1);for(t=0;n>=t;t++)"\n"==e.value.charAt(t)&&n++;i.selectionStart=n,s=document.body.createTextRange(),s.moveToElementText(e);for(var l=0,d=0;(l=s.compareEndPoints("StartToEnd",a))<0;d++)"\n"==e.value.charAt(d)&&d++,s.moveStart("character",1);return"\n"==e.value.charAt(d)&&d++,i.selectionEnd=d,i}},getLeftLength:function(){var e=this.ele,t=this.options,a=0;if(t.urlCharsTag){for(var n=e.value.match(s)||[],l=n.length,d=0,o=0;l>o;o++)d+=n[o].length;return t.charsType?Math.round((2*t.maxLength-e.value.replace(/\r/g,"").replace(i,"lv").length+d+a)/2)-10*l:t.maxLength-e.value.replace(/\r/g,"").length}return t.charsType?(2*t.maxLength-e.value.replace(/\r/g,"").replace(i,"lv").length+a)/2:t.maxLength-e.value.replace(/\r/g,"").length},autoTextarea:function(e){var t,i=this.ele,a=this.options,s=i.style;i.style.height=a.minHeight+"px",i.scrollHeight-a.minHeight>12&&(e&&i.scrollHeight>e?(t=e,s.overflowY="scroll"):(t=i.scrollHeight,s.overflowY="hidden"),s.height=t+"px",i.currHeight=parseInt(s.height))},getSelectedText:function(){var e=this.ele,t="";return t=e.selectionStart||"0"==e.selectionStart?e.value.substring(e.selectionStart,e.selectionEnd):document.selection.createRange().text,t.replace(/\r/g,"")},insertCon:function(t,i,a){var s=this.ele,n=this.options,l=this.getSelectedText();if(n.exceed||!this.isGreateMaxLength(s.value+t,l)){if("#在这里输入你想要说的话题#"==t&&""!=l&&(t="#"+l+"#",i=void 0),a&&"#在这里输入你想要说的话题#"==t){var d=s.value.indexOf(t);d>=0&&(s.value=s.value.replace(t,""),this.setInsertPos(d))}if(document.selection){s.focus();var o=document.selection.createRange();o.text=t;var r=o.text.length;if(i)o.moveEnd("character",r+i),0>=i?o.moveStart("character",r-2*i-t.length):o.moveStart("character",r-i-t.length),o.select();else{var p=this.getSelection();if(p.selectionStart!==p.selectionEnd){var c=this.getInsertPos()+t.length;this.setInsertPos(c)}}}else if(s.selectionStart||"0"==s.selectionStart){var _=s.selectionStart,m=s.selectionEnd,u=s.scrollTop;s.value=s.value.substring(0,_)+t+s.value.substring(m,s.value.length),s.focus();var h=_+t.length;s.selectionStart=h,s.selectionEnd=h,s.scrollTop=u,i&&(s.setSelectionRange(_-i,s.selectionEnd+i),s.focus())}else s.value+=t,s.focus();e.isFunction(n.onInput)&&n.onInput.call(this,{type:"insert"},{maxLength:n.maxLength,leftLength:this.getLeftLength()})}},inputHandler:function(t){var s=this.options,n=this,l=this.$element.val().replace(/\r/g,"");if(!s.exceed&&this.isGreateMaxLength(l)){var d=this.ele.scrollTop,o=this.getInsertPos(),r=0;if(s.charsType)for(var p=l.replace(i,"lv").length-2*s.maxLength,c=0;p>c;r++)c+=a.test(l.charAt(o-r-1))?2:1;else r=l.length-s.maxLength;var _=o-r;this.$element.val(l.substr(0,_)+l.substr(o)),this.setInsertPos(_),this.scrollTop=d}var m=s.maxHeight;m&&"number"===e.type(m)&&this.autoTextarea(m),e.isFunction(s.onInput)&&s.onInput.call(this,t,{maxLength:s.maxLength,leftLength:n.getLeftLength()})}},e.fn.insertinput=function(t){for(var i=[],a=0,s=arguments.length;s>a;a++)i.push(arguments[a]);var l=i.slice(1);return this.each(function(){var a=e(this),s=a.data("insertinput"),d="object"==typeof t&&t;s||(s=new n(this,d),a.data("insertinput",s)),"string"==typeof i[0]&&s[i[0]].apply(s,l)})},e.fn.insertinput.Constructor=n,e.fn.insertinput.defaults={maxLength:-1,onInput:null,charsType:!1,urlCharsTag:!1,exceed:!1,maxHeight:null,inputDelay:50,doOnInput:!0}}(jQuery,RayCloud),function(e,t){var i={update:function(e,t,i,a,s,n){API.pt_custom_user_express_fill_logistics(e,function(e){t&&t(e.data)},i,a,s,n)}};t.controls.define("control.pt.custom.express",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=t.controls.get("control.common_express"),s=t.controls.get("control.trade.util.create_express_no"),n=t.controls.get("control.pt.custom.express"),l=['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="ids" valud="">','<dl class="dl-horizontal" style="line-height: 36px;">','<dt class="">物流公司(快递模板)</dt>','<dd class="">','<select class="J_Select" name="expressId" data-zindex="999999" style="width:160px;"></select>','<a class="ml_10 J_Setting_Express">设置常用快递模板</a>',"</dd>",'<dt class="J_Start_No">超始运单号</dt>','<dd class="J_Start_No">','<input type="text" name="startId" style="width:175px;">','<span class="fc-999">（可不填写）</span>',"</dd>","</dl>",'<p class="clear fc-999 mt_10">',"提醒：<br>","1. 将所选第一条订单里的运单号作为“起始运单号”的默认值；其他订单按运单号规则自动生成<br>","2. 若运单号未填写，将只保存快递模板，快递模板若有变更，原运单号会清空","</p>",'<div class="pd_15 ft-center">','<button class="btn btn-primary" type="submit">保存物流</button>','<span class="btn btn-gray ml_10 J_Close">关闭</span>',"</div>","</form>","</div>"],d={show:function(t){this.config=t,this._render(),this._fn_ctrl_load_express(e.proxy(function(e){this._fn_check_config(e),this._dom_update(e,this.config)},this)),this.$dialog=e.dialog({title:"批量填写物流",width:690,close:e.proxy(this.clear,this),content:this.$el.show()}),this._status_display=!0},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$dialog=null,this.$el=null),this._status_display=!1,this.config=null},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(l.join("")).appendTo("body"),this._event_bind())},_dom_update:function(e,t){this.$el.find('input[name="ids"]').val(t.ids),this._dom_update_express(e,t.expressId),this.$el.find('input[name="startId"]').val(t.startOutId||""),this._onselect()},_dom_update_express:function(t,i){var a=[];e.each(t,function(e,t){if(t.templateId.indexOf("w")<0){var s=t.templateId==i?'selected = "selected"':"";a.push('<option value="{value}" {selected}>{text}</option>'.replace("{value}",t.templateId).replace("{selected}",s).replace("{text}",t.templateName))}}),this.$el.find('select[name="expressId"]').html(a.join("")),this.$el.find('select[name="expressId"]').iSelect("update")},_fn_ctrl_load_express:function(e){a.get(function(t){e(t)})},_fn_check_config:function(t){var i=this.config.expressId,a=!1,s=null;e.each(t,function(e,t){!s&&t.isDefault&&(s=t.templateId),a||i!=t.templateId||(a=!0)}),a||(this.config.expressId=s,this.config.startOutId="")},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._onsubmit,this)),this.$el.on("click",".J_Close",e.proxy(this.destroy,this)),this.$el.on("click",".J_Setting_Express",e.proxy(this._fn_event_handler_click_settingExpress,this)),this.$el.on("change","select",e.proxy(this._onselect,this)),t.sub("control.trade.module.common_express.edit.success",this._fnEventHandlerProxy_commonExpressEditSucss=e.proxy(this._fn_event_hanlder_commonExpressChange,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close"),this.$el.off("click",".J_Setting_Express"),this.$el.off("change","select"),t.removeSub("control.trade.module.common_express.edit.success",this._fnEventHandlerProxy_commonExpressEditSucss)},_onsubmit:function(t){t.preventDefault();var l=i.getData(this.$el.find("form")[0]);return a.get_detail(l.expressId,e.proxy(function(t){var i="";if(t.isWlb);else if(""===e.trim(l.startId))i="";else{var a=s.validate(t.code,l.startId);if(a!==!0)return e.dialog.alert(a),!1;i=s.create(t.code,l.startId,l.ids.split(",").length).join(",")}n.update({ids:l.ids,templateId:l.expressId,templateType:t.isWlb,codeNumbers:i},e.proxy(function(){var e=this.config.success;this.hide(),e&&e({ids:l.ids,templateId:l.expressId,templateType:t.isWlb,templateName:t.templateName,codeNumbers:i})},this))},this)),!1},_onselect:function(){var t=this.$el.find('select[name="expressId"]').val();a.get_detail(t,e.proxy(function(e){this.$el&&(1==e.isWlb?this.$el.find(".J_Start_No").hide():this.$el.find(".J_Start_No").show(),this.$el.find('input[name="startId"]').val(e.templateId==this.expressId?this.outSid:""))},this))},_fn_event_handler_click_settingExpress:function(){t.pub("control.trade.module.common_express.edit")},_fn_event_hanlder_commonExpressChange:function(){this._status_display===!0&&this._fn_ctrl_load_express(e.proxy(function(e){this._fn_check_config(e),this._dom_update(e,this.config)},this))},destroy:function(){this.hide()}};t.controls.define("control.pt.custom.module.edit_express",{init:function(){return d}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.common_express"),a=['<div style="position: absolute; z-index: 9999999; width: 354px; border: 1px solid #2b3d50; background: #ffffff; padding: 10px; display:none;">','<span class="ui-tag-group ui-tag-group-s1 mb_10 J_Express" style="margin-left:0"></span>','<a class="ml_5 J_Click" data-name="set_default">设置常用快递模板</a>',"</div>"],s='<span data-value="{value}" class="tag {class}" data-name="change_express" style="width:140px;margin:2px 5px;">{name}</span>',n={show:function(i,a){t.pub("control.pt.custom.module.common_expresss_checkone",i,e(a.target))},_show:function(t){var i=e(t.currentTarget).offset();this.$el.css({left:i.left,top:i.top+16}).show(),this._status_display=!0},hide:function(){this.$el&&(this.$el.hide(),this._status_display=!1,this.config=null,this.target=null)},_render:function(){this.$el||(this.$el=e(a.join("")).appendTo("body"),this._event_bind())},_fn_ctrl_load:function(e){i.get(e)},_update:function(t){var i=[],a=this.config.templateId;e.each(t,function(e,t){i.push(s.replace("{value}",t.templateId).replace("{class}",t.templateId==a?"J_Click current":"J_Click").replace("{name}",t.templateName))}),this.$el.find(".J_Express").html(i.join(""))},_event_bind:function(){this.$el.on("click",".J_Click",e.proxy(function(t){t.preventDefault(),this._fn_event_handler(e(t.currentTarget).attr("data-name")).call(this,t)},this)),e(document).on("click.control.pt.custom.moudule.change_express",e.proxy(function(t){if(this._status_display){var i=this.$el[0],a=t.target;i===a||e.contains(i,a)||a===this.target||e.contains(this.target,a)||this.hide()}},this))},_event_unbind:function(){this.$el.off("click",".J_Click"),e(document).off("click.control.pt.custom.moudule.change_express")},_fn_event_handler:function(t){if(!t)throw new Error("[control.pt.custom.module.change_express:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[control.pt.custom.module.change_express:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{change_express:function(t){return e(t.currentTarget).hasClass("current")?void this.hide():void i.get_detail(e(t.currentTarget).attr("data-value"),e.proxy(function(e){e.id=this.config.id;var t=this.config.callback;this.hide(),t&&t(e),t=null},this))},set_default:function(){this.hide(),t.pub("control.pt.custom.module.edit_common_expresss")}},destroy:function(){this.$el&&(this.hide(),this.$el.empty().remove(),this.$el=null)}};t.controls.define("control.pt.custom.module.change_express",{init:function(){return n}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=window.component.AddrDropDown,s=(t.controls.get("control.common_express"),t.controls.get("control.pt.custom.module.change_express")),n=t.controls.get("control.trade.util.create_express_no"),l={show:function(i){this.id=i.sid||"",this.templateId=i.templateId||"",this.list=e.extend({receiverName:"",receiverMobile:"",receiverTel:"",receiverProvince:"",receiverCity:"",receiverArea:"",receiverDetailAddress:"",receiverZip:"",sellerMemo:"",tradeTime:"",codeNumber:""},i),this.list.tradeTime=this.list.tradeTime?t.util.date.getdate(this.list.tradeTime,"YY-MM-DD HH:MM:SS"):"",this._render(),this.$dialog=e.dialog({title:e.isEmptyObject(i)?"添加打印信息":"修改打印信息",close:e.proxy(this.clear,this),content:this.$el.show()}),i.templateId?this._fn_dom_update_express({templateId:i.templateId,templateName:i.templateName,isWlb:i.templateType,code:i.companyCode}):API.pt_simple_list({isMix:0},e.proxy(function(t){var i=t.data,a=i[0];e.each(i,function(e,t){return 0==t.isWlb&&1===t.isDefault?(a=t,!1):void 0
}),this._fn_dom_update_express(a)},this))},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){if(!this.$el){var i=this.list;this.$el=e(t.template.get("template.control.pt.custom.module.user_edit",i)).appendTo("body");var s=this.address_component=new a;s.renderUI(this.$el.find(".J_Send_Area"),[{name:"receiverProvince",value:i.receiverProvince},{name:"receiverCity",value:i.receiverCity},{name:"receiverArea",value:i.receiverArea}]),this.$el.find("select").css({marginRight:"10px",padding:"4px",border:"1px solid #ccc"}),this._event_bind()}},_fn_dom_update_express:function(e){var t='快递模板：<a data-id="{templateId}" data-templateid="{templateId}" class="J_Express_Template">{templateName}</a>&nbsp;&nbsp;运单号：<input type="hidden" name="templateId" value="{templateId}"><input type="hidden" name="templateName" value="{templateName}"><input type="hidden" name="templateType" value="{isWlb}"><input type="hidden" name="companyCode" value="{code}">';t=t.replace(/{templateId}/g,e.templateId).replace(/{isWlb}/g,e.isWlb).replace(/{templateName}/g,e.templateName).replace("{code}",e.code),this.$el.find(".J_Express_Template_Container").html(t)},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this._fn_event_handler_click_close,this)),this.$el.on("click",".J_Express_Template",e.proxy(this._fn_event_handler_click_changeExpress,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close"),this.$el.off("click",".J_Express_Template")},_fn_event_handler_submit_form:function(a){a.preventDefault();var s=i.getData(a.currentTarget),l=this.address_component.getValue();if(s.receiverProvince=l.province||"",s.receiverCity=l.city||"",s.receiverArea=l.area||"",""===s.receiverName)return void e.dialog.alert("请输入姓名！");if(""===s.receiverMobile&&""===s.receiverTel)return void e.dialog.alert("手机和固话至少填写一个!");if(s.receiverMobile&&!e.trim(s.receiverMobile).match(/^1\d{10}$/))return void e.dialog.alert("手机号码格式不正确!");if(s.receiverTel&&!e.trim(s.receiverTel).match(/^[0-9\-]+$/))return void e.dialog.alert("固定定话号码格式不正确!");if(""===s.receiverProvince)return void e.dialog.alert("请选择所在地区！");if(""===s.receiverZip)return void e.dialog.alert("请输入邮编！");if(!e.trim(s.receiverZip).match(/^\d{6}$/))return void e.dialog.alert("请输入正确的邮编！");if(""===s.receiverDetailAddress)return void e.dialog.alert("请输入详细地址！");var d=e.trim(s.codeNumber);if(""!==d){var o=n.validate(s.companyCode,d);if(o!==!0)return void e.dialog.alert(o)}""===e.trim(s.tradeTime)&&delete s.tradeTime,""==this.id?this._fn_ctrl_user_add(s,e.proxy(function(){this.hide(),t.pages.modifyCurHash({_t:(new Date).getTime()},!0,!0)},this)):(s.id=this.id,this._fn_ctrl_user_edit(s,e.proxy(function(){this.hide(),s.codeNumber=s.codeNumber||"",t.pub("control.pt.custom.user.edit.update",s)},this)))},_fn_event_handler_click_close:function(){this.hide()},_fn_event_handler_click_changeExpress:function(t){var i=e(t.currentTarget),a={id:i.attr("data-id"),templateId:i.attr("data-id"),callback:e.proxy(function(e){this._fn_dom_update_express(e),this.$el.find('input[name="codeNumber"]').val("")},this)};s.show(a,t)},_fn_ctrl_form_validation:function(){},_fn_ctrl_user_add:function(e,t,i,a,s,n){API.pt_custom_user_add(e,function(e){t&&t(e.data)},i,a,s,n)},_fn_ctrl_user_edit:function(e,t,i,a,s,n){API.pt_custom_user_edit(e,function(e){t&&t(e.data)},i,a,s,n)},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null,this.id=null)},destroy:function(){this.hide()}};t.controls.define("control.pt.custom.module.user.edit",{init:function(){return l}});var d=['<div style="display:none;" class="pd_5 custom-address">','<form action="" method="post" class="ft_14">','<div class="pb_10">','<label class="mr_10"><span>姓名<em class="fc-red">*</em>：</span><input type="text" name="receiverName" value="{{receiverName}}" /></label>','<label class="mr_10"><span>手机<em class="fc-blue">*</em>：</span><input type="text" name="receiverMobile" value="{{receiverMobile}}" /></label>','<label class="mr_10"><span>固定电话<em class="fc-blue">*</em>：</span><input type="text" name="receiverTel" value="{{receiverTel}}" /></label>',"</div>",'<div class="pb_10">','<label class="mr_10"><span>所在地区<em class="fc-red">*</em>：</label></span>','<span class="mr_10 J_Send_Area">',"</span>",'<label class="mr_10"><span>邮编<em class="fc-red">*</em>：</span><input type="text" name="receiverZip" value="{{receiverZip}}" style="width: 80px" /></label>',"</div>",'<div class="pb_10">','<label class="mr_10"><span>详细地址<em class="fc-red">*</em>：</span><input type="text" style="width: 565px" name="receiverDetailAddress" value="{{receiverDetailAddress}}" /></label>',"</div>",'<div class="pb_10">','<label class="mr_10"><span>备注：</span><input type="text" style="width: 600px" name="sellerMemo" value="{{sellerMemo}}" /></label>',"</div>",'<div class="pb_10">','<label class="mr_10"><span>交易时间：</span><input type="text" data-date-format="yyyy-mm-dd HH:MM:SS" data-max-date="today" name="tradeTime" value="{{tradeTime}}" class="w120 date-picker" style="width: 160px" data-zIndex="11000" /></label>','<span class="ml_20 J_Express_Template_Container"></span><input type="text" name="codeNumber" value="{{codeNumber}}">',"</div>",'<div class="pb_10 pt_10">注：<span class="fc-red">*</span>为必填项，<span class="fc-blue">*</span>其中手机和固话至少填写一个</div>','<div class="pd_15 ft-center">','<button type="submit" class="btn btn-primary">保存</button>','<span class="btn ml_10 J_Close">关闭</span>',"</div>","</form>","</div>"];t.template.addTemp("template.control.pt.custom.module.user_edit",d)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=(t.controls.get("control.pt.custom.model"),['<div style="">','<form action="" method="post">','<dl class="dl-horizontal">','<dt class="pt_5 pb_5" style="width: 100px;">修改方式：</dt>','<dd class="pt_5 pb_5" style="margin-left: 110px">','<label class="mr_50"><input type="radio" name="reset" checked value="false" />在现有备注后追加</label>','<label><input type="radio" name="reset" value="true" />覆盖现有备注</label>',"</dd>",'<dt class="pt_5 pb_5" style="width: 100px;">卖家备注：</dt>','<dd class="pt_5 pb_5" style="margin-left: 110px">','<textarea name="memo" style="width:400px;height:180px;"></textarea>','<span id="chackTextarea-num" style="display: block; padding: 5px; color: #f00; text-align: right; width: 390px"><em class="comment-nums-detail">0</em>/500</span>',"</dd>","</dl>",'<div class="ft-center pd_15">','<button class="btn btn-primary" type="submit" style="cursor: pointer;">保存</button>','<span class="btn btn-gray ml_10 J_Close" data-name="close">关闭</span>',"</div>","</form>","</div>"]),s={show:function(t){this._render(),this.id=t,this.$dialog=e.dialog({title:"修改备注信息",close:e.proxy(this.clear,this),content:this.$el.show()}),this.textareaInsert()},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(a.join("")).appendTo("body"),this._dom_radio=this.$el.find("input[name=reset]"),this._event_bind())},_event_bind:function(){this._dom_radio.iCheck(),this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this._fn_event_handler_click_close,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(a){a.preventDefault();var s=i.getData(a.currentTarget);s.ids=this.id,this._fn_ctrl_user_update_memo(s,e.proxy(function(e){e.status&&t.pub("control.pt.custom.memo.edit",s),this.hide()},this))},_fn_event_handler_click_close:function(){this.hide()},_fn_ctrl_user_update_memo:function(e,t,i,a,s,n){API.pt_custom_user_update_memo(e,function(e){t&&t(e.data)},i,a,s,n)},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null,this.id=null)},destroy:function(){this.hide(),this.clear()},textareaInsert:function(){var e=this.$el.find("textarea[name=memo]"),t=this.$el.find("button[type=submit]"),i=this.$el.find(".comment-nums-detail");e.insertinput({maxLength:500,exceed:!0,charsType:!0,maxHeight:200,onInput:function(e,a){a.leftLength>=0?(t.prop("disabled",!1).css("cursor","pointer"),i.text(a.maxLength-a.leftLength)):(i.text(a.leftLength),t.prop("disabled",!0).css("cursor","not-allowed"))}})}};t.controls.define("control.pt.custom.memo.edit",{init:function(){return s}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.pt.custom.express"),a=t.controls.get("control.pt.custom.module.change_express"),s=t.controls.get("control.print_pt"),n={show:function(t,i){this.id=i,this.list=t,this.dataList={list:t},this._render(),this.$dialog=e.dialog({title:"预览/打印",close:e.proxy(this.clear,this),width:1050,content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},commonData:null,_render:function(){if(!this.$el){var i=e.extend(!0,{},this.dataList);e.each(i.list,function(e,i){i.tradeTime=i.tradeTime?t.util.date.getdate(i.tradeTime,"YY-MM-DD HH:MM:SS"):"-",i.created=t.util.date.getdate(i.created,"YY-MM-DD HH:MM:SS"),i.sortId=e+1}),this.$el=e(t.template.get("template.control.pt.custom.print.preview",i)).appendTo("body"),this.$J_Preview_Pages=this.$el.find(".J_Preview_Pages"),this.$J_Trade_List=this.$el.find(".J_Trade_List"),this._fn_get_custom_user_query(this.list[0].templateId,this.id.toString(),e.proxy(function(e){this.commonData={fieldValues:e.fieldValues.reverse(),template:e.template},this.$el.find(".J_slt_printer").empty().append(s.selectPrinter(e.template.printerName||0)),this.$el.find(".J_slt_printer select").iSelect(),this._fn_ctrl_render_commom_html(this.commonData,0)},this)),this.id.length>1&&this.$J_Preview_Pages.find(".J_Next_Page").removeClass("disable"),this._event_bind()}},_fn_ctrl_render_commom_html:function(e,t){var i={fieldValues:[e.fieldValues[t]],template:e.template},a=s.getPtCommonHtml(i);this.$el.find(".J_Preview").empty().append(a)},_event_bind:function(){this.$el.on("click",".J_Click",this._fn_event_handler_proxy=e.proxy(this._fn_event_handler,this))},_event_unbind:function(){this.$el.off("click",".J_Click")},_fn_event_handler:function(t){t.preventDefault();var i=e(t.currentTarget),a=i.data("name");this._event_handler_list[a].call(this,t)},_event_handler_list:{J_Print:function(){var i=this.$el.find(".J_slt_printer select").val();s.printPtCommonText(this.commonData,i,e.proxy(function(i){i&&(this.$J_Trade_List.find("ul").each(function(){var t=e(this);t.find(".J_expressStatus").html('<span class="trade-icon-1b6fd7 J_Tip" title="快递单已打印">快</span>')}),this.$J_Trade_List.find(".J_expressStatus .J_Tip").iTip({triggerType:"hover",skin:"blue"}),t.pub("control.pt.custom.update.print.status",this.id.join(","),1))},this))},J_Close:function(){this._fn_event_handler_click_close()},J_Edit_Logistics:function(){},delete_trade:function(e){return},change_express:function(t){var s=e(t.currentTarget),n={id:s.attr("data-id"),templateId:s.attr("data-templateId"),templateCode:s.attr("data-templateCode"),templateType:s.attr("data-templateType"),callback:function(e){var t={ids:e.id,templateId:e.templateId,codeNumbers:""};i.update(t,function(t){t.status&&(e.templateName!=s.text()&&s.closest("li").find(".J_Focusout").attr("data-value","").val(""),s.text(e.templateName),s.attr("data-templateId",e.templateId),s.attr("data-templateCode",e.Code))})}};a.show(n,t)},j_prev_page:function(t){var i=e(t.currentTarget);if(!i.hasClass("disable")){var a=i.data("value"),s=i.closest(".J_Preview_Pages").find(".J_Next_Page");this._fn_ctrl_render_commom_html(this.commonData,a-1),s.data("value",a),s.removeClass("disable"),i.data("value",a-1),1==a&&i.addClass("disable")}},j_next_page:function(t){var i=e(t.currentTarget);if(!i.hasClass("disable")){var a=i.data("value"),s=i.closest(".J_Preview_Pages").find(".J_Prev_Page");this._fn_ctrl_render_commom_html(this.commonData,a),s.data("value",a),s.removeClass("disable"),i.data("value",a+1),a==this.commonData.fieldValues.length-1&&i.addClass("disable")}}},_fn_get_custom_user_query:function(t,i,a){e.when(API.pt_common_user_query({id:t}),API.pt_custom_user_printdata({ids:i})).done(function(e,t){for(var i=e[0].data,s=t[0].data,n=0,l=s.length;l>n;n++)s[n].custom_content=i.customContent;a&&a({fieldValues:s,template:i})})},_fn_event_handler_click_close:function(){this.hide()},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null,this.list=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.pt.custom.print.preview",{init:function(){return n}});var l=['<div class="clearfix ">','<div class="f-rt">','<div class="pagination-pages">','<div class="pagination-page J_Preview_Pages ft-left" style="margin-right:0">','<span class="page-prev"><a class="J_Click disable J_Prev_Page" data-name="j_prev_page" data-value="0">上一页<b></b></a></span>','<span class="page-next"><a class="J_Click disable J_Next_Page" data-name="j_next_page" data-value="1">下一页<b></b></a></span>',"</div>","</div>","</div>","</div>",'<div class="mt_10 mb_10 ft-center" style="height:280px;overflow-y:auto; *position: relative; *z-index: 999"><div class="inline-block J_Preview"></div></div>','<div class="ui-box ui-box-s1" style="margin-top:7px;">','<div class="ui-box-hd"><div class="ui-box-hd-tit">订单列表</div></div>','<div class="ui-box-bd nopadding J_Trade_List" style="overflow-y: auto; max-height: 140px;">','<ul act-loop="item in list" class="clearfix" data-id="{{item.id}}" style="display:block;line-height:24px;border-bottom: 1px solid #eaeaea;">','<li class="f-lt J_Idx" style="width:50px;padding:10px 0; line-height: 48px;text-align: center;">{{item.sortId}}</li>','<li class="f-lt" style="width:150px;padding:10px 0;">',"<div>{{item.receiverName}}</div><div>{{item.receiverMobile}}</div>","</li>",'<li class="f-lt" style="width:250px;padding:10px 0;">',"<div>添加时间：{{item.created}}</div><div>交易时间：{{item.tradeTime}}</div>","</li>",'<li class="f-lt" style="width:400px;padding:10px 0;overflow: hidden;">',"<span>快递模板：",'<span data-name="change_express" data-templateId="{{item.templateId}}" data-templateType="{{item.templateType}}" data-templateCode="{{item.templateCode}}" data-id="{{item.id}}">{{item.templateName}}</span>',"</span>",'<span class="ml_20">运单号：',"<span>","<span>",'<input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="{{item.codeNumber}}" data-value="" data-name="edit_logistics" style="width:110px;" disabled />',"</span>","</span>","</span>","<br />{{item.receiverProvince}} {{item.receiverCity}} {{item.receiverArea}} {{item.receiverDetailAddress}}","</li>",'<li class="f-lt" style="width:70px;padding:10px 0;">','<span class="J_expressStatus">','<span act-if="item.status == 0" class="trade-icon-818181 J_Tip" title="快递单未打印">快</span>','<span act-if="item.status == 1" class="trade-icon-1b6fd7 J_Tip" title="快递单已打印">快</span>',"</span>","</li>",'<li class="f-rt ft-center" style="width:50px;padding:15px 0 10px 0;">',"</li>","</ul>","</div>","</div>",'<div class="pd_15 ft-center">','<label class="mr_15 J_slt_printer"></label>','<span class="btn btn-success J_Click" data-name="J_Print">打印</span>','<span class="btn btn-gray ml_15 J_Click" data-name="J_Close">关闭</span>',"</div>"];t.template.addTemp("template.control.pt.custom.print.preview",l)}(jQuery,RayCloud),function(e,t){var i={list:function(e,t,i){API.settings_template_match_list(e,function(e){t(e.data)},i)},openStatus:function(e,t,i){API.settings_template_match_open_status(e,function(e){t(e.data)},i)},save:function(e,t,i){API.settings_template_match_save(e,function(e){t(e.data)},i)}};t.controls.define("control.trade.smart_match",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={name:"control.shortsign",show:function(i,a,s,n){var l="";a?window.open("https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/shortsign.do?redirectUri="+i+"&state=short_sign&view=web"):(l=i?"url:https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/shortsign.do?redirectUri="+i+"&state=short_sign&view=web":"url:https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/shortsign.do&state=short_sign&view=web",this.dialogHandler=e.dialog({content:l,width:"620px",height:"720px",lock:!0,fixed:!0,title:"短授权"}),t.sub("iframe.shortsign.success",e.proxy(function(){this._fn_ctrl_remove_sub(),this.dialogHandler.close(),e.dialog.showSuccess("短授权成功！"),s&&"function"==typeof s&&s()},this)),t.sub("iframe.shortsign.fail",e.proxy(function(t){this._fn_ctrl_remove_sub(),this.dialogHandler.close(),e.dialog.alter(t),n&&"function"==typeof n&&n()},this)))},_fn_ctrl_remove_sub:function(){t.removeSub("iframe.shortsign.success"),t.removeSub("iframe.shortsign.error")},destroy:function(){this.dialogHandler&&this.dialogHandler.close(),this._fn_ctrl_remove_sub()}};t.controls.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i={show:function(i,a){var s=i.deadline,n=i.nick,l=t.util.date.getcurdate().getTime(),d=Math.floor((s-l)/864e5);if(0>d&&(d=0),!(a&&a>0&&d>a)){var o='<div class="module-index-remind pd_10"><div style="height:73px;background:url(resources/css/build/images/xx.jpg?20160217) center 0 no-repeat;"></div><div class="ft-center ft_16 pd_10">您好 <em class="fc-error">{nick}</em>，您还剩余{time}，<br>为了不影响您的正常使用，请记得提前<em class="fc-error">续费</em>哦！</div><div class="mt_10 ft-center"><a class="btn btn-large" href="http://tb.cn/aoG49dx" target="_blank">10元/月</a><a class="btn btn-large ml_20" href="http://tb.cn/Pxz39dx" target="_blank">21元/季度</a><a class="btn btn-large ml_20 main_item" href="http://tb.cn/wdp39dx" target="_blank"><span class="img-groom">推荐</span>40元/半年</a><a class="btn btn-large ml_20" href="http://tb.cn/leo39dx" target="_blank">78元/年</a></div><div class="ft_14 pt_10" style="padding-left: 28px"><em class="fc-error">温馨小贴士：续费前请注意您当前的订购账号。</em></div>';e.dialog({title:"续费",content:o.replace("{nick}",n).replace("{time}",d>=1?'<strong class="fc-error ft_26">'+d+"</strong>天":'<strong class="fc-error ft_26">'+Math.floor((s-l)/36e5)+"</strong>小时"),ok:!1,width:570,lock:!0,resize:!1,fixed:!0})}},getRenewMsg:function(){var i=t.user,a=i.get("bindUsers"),s={};if(a&&a.length>0){var n="",l=0;e.each(a,function(e,t){""==n?(n=t.nick,l=t.deadline):l>t.deadline&&(n=t.nick,l=t.deadline)}),s.nick=n,s.deadline=l}else s.nick=i.get("nick"),s.deadline=i.get("deadline");return s},getDeadline:function(i){var a=t.user,s=a.get("bindUsers"),n=0;return s&&s.length>0?e.each(s,function(e,t){return i==t.nick?void(n=t.deadline):void 0}):n=a.get("deadline"),n}};t.controls.define("control.user.deadline",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i={STO:{name:"申通快递",url:"http://www.sto.cn/"},YTO:{name:"圆通快递",url:"http://www.yto.net.cn/"},ZTO:{name:"中通快递",url:"http://www.zto.com/"},HTKY:{name:"百世汇通",url:"http://www.htky365.com/"},YUNDA:{name:"韵达快递",url:"http://www.yundaex.com/"},ZJS:{name:"宅急送",url:"http://www.zjs.com.cn/"},TTKDEX:{name:"天天快递",url:"http://www.ttkdex.com/"},UC:{name:"优速快递",url:"http://www.uc56.com/"},QFKD:{name:"全峰快递",url:"http://www.qfkd.com.cn"},GTO:{name:"国通快递",url:"http://www.gto365.com/"},POSTB:{name:"邮政小包",url:"http://www.chinapost.com.cn/"},EMS:{name:"EMS",url:"http://www.ems.com.cn/"},SF:{name:"顺丰快递",url:"http://www.sf-express.com/"},FAST:{name:"快捷快递",url:"http://www.kjkd.com/"},DBKD:{name:"德邦快递",url:"http://www.deppon.com/"}};t.controls.define("control.express_url_list",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=['<div class="header">','<div class="clearfix header-inner">','<h1 class="site-logo">','<a href="#/index/"></a>',"</h1>",'<div class="header-user-info">','<span class="user-name">',"<em>{{nick}}</em><b></b>",'<span class="up-sj"></span>','<ul class="user-opr-list">','<li><a class="J_Logout"><i class="icon-quit"></i>退出</a></li>',"</ul>","</span>",'<span act-if="_is_bind_shop == 1" class="user-name">',"<em>切换店铺</em><b></b>",'<span class="up-sj"></span>','<ul class="user-opr-list">','<span act-loop="shop in bindShops" class="bind-shop-wrapper">','<li act-if="taobaoId != shop.taobaoId">','<a class="J_Switch_Shop" data-id="{{shop.taobaoId}}">{{shop.title}}</a>',"</li>","</span>",'<span class="bind-shop-wrapper">',"<li>",'<a class="bind-other-shops">绑定其他店铺</a>',"</li>","</span>","</ul>","</span>","<span>到期时间：{{endtime}} ({{endday}}天)</span>",'<a class="btn btn-small btn-danger J_Renewals" style="background:#F8811D;color:#fff;">续费</a>','<span class="desk-quick">','<a class="icon-desktop" href="/shortcut/download"></a>','<span class="up-sj"></span>',"<ul>","<li>创建桌面快捷</li>","</ul>","</span>",'<span class="opr-tools clearfix">','<span class="wangwang-group">','<i class="icon-wangw"  style="*margin-top:13px;"></i>','<span class="up-sj"></span>',"<ul>",'<li><a target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid=guanghua2cc&siteid=cntaobao&status=2&charset=utf-8">客服咨询：<img border="0" src="http://amos.alicdn.com/online.aw?v=2&uid=guanghua2cc&site=cntaobao&s=2&charset=utf-8" alt="" /></a></li>','<li><a href="http://www.taobao.com/go/act/other/wwgroup.php?uid=&tribeid=1433020647" target="_blank">旺旺群聊：<img src="http://img02.taobaocdn.com/tps/i2/T1m206XhdDXXXXXXXX-25-20.gif" alt=""></a></li>',"</ul>","</span>","</span>","</div>","</div>","</div>"];t.template.addTemp("template.header",i)}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.dmj_tools"),t.controls.get("control.user.deadline")),a={name:"header",type:"basic",_elm_dom_root:"#header",_elm_template_name:"template.header",_fn_dom_render:function(){this._user_data_obj=RayCloud.user._data,this._fn_user_time_data(this._user_data_obj),this._elm_dom_container=this._user_data_obj.slaveUserData?e(t.template.get(this._elm_template_name,this._user_data_obj.slaveUserData)).appendTo(this._elm_dom_root):e(t.template.get(this._elm_template_name,this._user_data_obj)).appendTo(this._elm_dom_root),this._fn_event_xufei_bind()},_fn_user_time_data:function(e){var t=e.deadline,i=new Date(t),a=i.getFullYear(),s=i.getMonth()+1,n=i.getDate(),l=a+"-"+s+"-"+n,d=(i-(new Date).getTime())/864e5;e.endtime=l,e.endday=parseInt(d,10);var o=e;o.bindShops&&o.bindShops.length>0&&o.userConf&&0==o.userConf.mmb&&(e._is_bind_shop=1),e.slaveUserData&&this._fn_user_time_data(e.slaveUserData)},init:function(){this._fn_dom_render(),this.bind()},getContainer:function(){},update:function(){},_fn_event_xufei_bind:function(){e(document.body).on("click",".J_Renewals",function(){var e=i.getRenewMsg();i.show(e)})},bind:function(){var i=this;i.bind_status||(i.bind_status=!0,this._elm_dom_container.on("click.logout",".J_Logout",function(){API.user_logout({},function(){window.location.href="https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/auth2.do&state=1000&view=web"})}),this._elm_dom_container.on("click",".J_Switch_Shop",e.proxy(function(i){var a=e(i.target),s=parseInt(a.attr("data-id"));if(this._user_data_obj.bindUsers&&this._user_data_obj.bindUsers.length>0){var n=this._fn_ctrl_find_user(s);if("undefined"==typeof n)return void e.dialog.alert("系统错误，请刷新页面重试！");var l=(new Date).getTime();if(l>=n.deadline)return void e.dialog({title:"软件到期提醒",cancel:!0,ok:e.proxy(function(){return window.open("http://fuwu.taobao.com/ser/detail.htm?service_code=appstore-10316&tracelog=search&scm=&ppath=&labels="),e.dialog({title:"",cancel:!0,ok:e.proxy(function(){return API.user_refresh({taobaoId:s},e.proxy(function(i){t.user.set(i.data),this._user_data_obj=i.data,this._fn_user_time_data(this._user_data_obj);var n=this._fn_ctrl_find_user(s);if("undefined"==typeof n)return void e.dialog.alert("系统错误，请刷新页面重试！");var l=(new Date).getTime();l>=n.deadline&&e.dialog.alert("还未续费成功，请重试！"),this._fn_ctrl_show_switch(s,a.text())},this)),!0},this),okVal:"续费成功",fixed:!0,lock:!0,resize:!1,close:function(){},content:"续费如果成功，请点击‘续费成功’按钮，以便切换店铺。"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""}),!0},this),okVal:"去服务平台续费",fixed:!0,lock:!0,resize:!1,close:function(){},content:"您这家店铺:"+a.text()+" 已经到期，不能正常使用，请续费后再次使用。"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""})}this._fn_ctrl_show_switch(s,a.text())},this)),this._elm_dom_container.on("click",".bind-other-shops",e.proxy(function(){window.location.href=window.location.hostname.indexOf("item")>-1?t.jxcDomain+"/f.do?kind=1&loc=15":"#/setting/shop_info/"},this)),t.sub("api.load.error.need.reoauth",function(a){i.reoauthDia&&1!=i.reoauthDia.closed&&i.reoauthDia.close(),i.reoauthDia=e.dialog({title:"警告",icon:"warn.png",content:'<p style="font-size:14px;">'+a+"</p>",ok:function(){window.open("https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/refresh.do?taobaoId="+t.user.get().taobaoId+"&state=1000&view=web"),e(document.body).find(".J_sync-progress").length&&(e(document.body).find(".J_sync-progress").parents("table.ui-lhgdialog").parent().remove(),e("#ldg_lockmask").hide())},okVal:"重新授权"})}),t.sub("global.trade_sync",function(i){var a;API.trade_sync({totalCount:!0},function(e){var i=e.data.totalCount;a=setInterval(function(){API.trade_sync_count({},function(e){e=e.data,(e.complete||e.error===!0)&&a&&(clearInterval(a),a=null),t.pub("global.trade_sync.progress",{total:i,currentCount:e.currentCount,complete:e.complete,error:e.error,status:"success",result:e.result})},function(){a&&(clearInterval(a),a=null),t.pub("global.trade_sync.progress",{total:i,currentCount:0,complete:!0,error:!1,status:"fail",result:null})},!1,!1,!1)},1e3)},function(t){if(t.message)try{i.hide(),e.dialog.alert(t.message)}catch(a){}},!1,!1,!1)}))},_fn_ctrl_show_switch:function(t,i){e.dialog({title:"",cancel:!0,ok:e.proxy(function(){return API.user_switch_shop({taobaoId:t},function(){e.dialog.showSuccess("切换店铺成功！"),window.location.reload()}),!0},this),okVal:"切换店铺",fixed:!0,lock:!0,resize:!1,close:function(){},content:"您确定要切换到店铺:"+i+"吗？"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""})},_fn_ctrl_find_user:function(e){for(var t=0;t<this._user_data_obj.bindUsers.length;t++){var i=this._user_data_obj.bindUsers[t];if(i.taobaoId==e)return i}},unbind:function(){this._elm_dom_container.off("click.logout",".J_Logout"),this._elm_dom_container.off("click",".J_Switch_Shop"),t.removeSub("global.trade_sync")},destory:function(){var e=this;e.unbind()}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=['<div class="left-list" id="modlue_leftNav" style="min-height: 140px;">',"<ul>",'<li class="item current">','<a href="#/index/" class="link index__nav">','<i class="icon-home"></i>',"<span>首页</span>","</a>","</li>",'<li class="item">','<a class="link">','<i class="icon-order"></i>',"<span>交易管理</span>",'<em class="icon-down"></em>',"</a>",'<ul class="sub-menu">','<li class="trade_list_nav">','<a href="#/trade/list/?queryId=1&sys=true">订单处理</a>',"</li>",'<li class="pt_list_nav">','<a href="#/pt/list/">快递单模板</a>',"</li>",'<li class="pt_deliver_list_nav">','<a href="#/pt/deliver_list/">发货单模板</a>',"</li>",'<li class="pt_custom_nav">','<a href="#/pt/custom/?queryId=1&sys=true">自定义打印</a>',"</li>",'<li class="pt_product_short_nav">','<a href="#/pt/product_short/">商品简称</a>',"</li>",'<li class="pt_print_log_nav">','<a href="#/pt/print_log/">打单发货日志</a>',"</li>",'<li class="pt_smart_match_nav">','<a href="#/pt/smart_match/">快递智能匹配</a>',"</li>",'<li style="display: none" class="pt_common_nav"></li><li style="display: none"  class="pt_deliver_nav"></li>',"</ul>","</li>",'<li class="item">','<a href="javascript:;" class="link">','<i class="icon-message"></i>',"<span>短信服务</span>",'<em class="icon-down"></em>',"</a>",'<ul class="sub-menu">','<li class="sms_settings_nav">','<a href="#/sms/settings/">短信服务设置</a>',"</li>",'<li class="sms_sent_log_nav">','<a href="#/sms/sent_log/">短信发送记录</a>',"</li>",'<li class="sms_txn_log_nav">','<a href="#/sms/txn_log/">短信充值记录</a>',"</li>","</ul>","</li>",'<li class="item">','<a href="javascript:;" class="link">','<i class="icon-system"></i>',"<span>系统设置</span>",'<em class="icon-down"></em>',"</a>",'<ul class="sub-menu">','<li class="setting_shop_info_nav">','<a href="#/setting/shop_info/">店铺信息设置</a>',"</li>",'<li class="setting_sync_option_nav">','<a href="#/setting/sync_option/">同步设置</a>',"</li>","</ul>","</li>",'<li class="item">','<a href="javascript:;" class="link" >','<i class="icon-stock"></i>',"<span>库存管理</span>",'<em class="icon-down"></em>',"</a>",'<ul class="sub-menu">','<li class="st_stock_list">','<a href="#/stock/list/">库存管理</a>',"</li>",'<li class="st_add_list">','<a href="#/stock/stock_log_add/">入库统计</a>',"</li>",'<li class="st_educe_list">','<a href="#/stock/stock_log_reduce/">出库统计</a>',"</li>","</ul>","</li>","</ul>","</div>"];t.template.addTemp("template.leftnav",i)}(jQuery,RayCloud),function(e,t){var i={_host:window.location.hostname,build:function(e){var t=['<div class="left-list" id="modlue_leftNav" style="min-height: 140px;">',"<ul>"];return t.push(this._fn_ctrl_build_menus(e,!0)),t.push('</ul><span class="icon-menu-huodong j-huodong"></span></div>'),t.join("")},_fn_ctrl_build_menus:function(e,t){if(!e||0==e.length)return"";var i="",a=[];t||a.push('<ul class="sub-menu">');for(var s=0;s<e.length;s++){var n=e[s];if(t){var l=1==n.id?"current":"",d=['<li class="item {current}">'.replace("{current}",l)];1==n.id?(d.push('<a href="{path}" class="link index__nav">'.replace("{path}",this._fn_ctrl_build_path(n))),d.push('<i class="{icon}"></i>'.replace("{icon}",n.icon)),d.push("<span>{name}</span>".replace("{name}",n.name))):(d.push('<a class="link">'),d.push('<i class="{icon}"></i>'.replace("{icon}",n.icon)),d.push("<span>{name}</span>".replace("{name}",n.name)),d.push('<em class="icon-down"></em>')),d.push("</a>"),n.children&&n.children.length>0&&d.push(this._fn_ctrl_build_menus(n.children,!1)),d.push("</li>"),i+=d.join("")}else{var o=['<li class="{icon}">'.replace("{icon}",n.icon),'<a href="{path}">{name}</a>'.replace("{path}",this._fn_ctrl_build_path(n)).replace("{name}",n.name),"</li>"];a.push(o.join(""))}}return t?i:(a.push("</ul>"),a.join(""))},_fn_ctrl_build_path:function(e){return this._host==e.domain?"#"+e.path:"http://"+e.domain+"/f.do?kind="+e.kind+"&loc="+e.loc}},a={name:"left_nav",type:"basic",_elm_dom_root:"#module-user-leftNav",_elm_template_name:"template.leftnav",_fn_event_get_left_nav_hashs:function(t){if(t){var i=t.app||"",a=t.root+"_"+i+"_nav",s=e("."+a);this._fn_ctrl_current_leftnav("."+a),s.css("font-weight","bold"),s.siblings().css("font-weight","normal"),s.closest("li.item").siblings().find("li").css("font-weight","normal")}},_fn_ctrl_current_leftnav:function(t){var i=this,a=e(t).closest("li.item");if(a.addClass("current"),a.siblings().removeClass("current"),e(t).hasClass("link")){var s=i._fn_create_new_href(e(t).attr("href"));e(t).attr("href",s)}else{var n=e(t).find("a"),s=i._fn_create_new_href(n.attr("href"));e(n).attr("href",s)}},_fn_create_new_href:function(e){return e?e=e.indexOf("t=")<0?e.indexOf("?")<0?e+"?t="+(new Date).getTime():e+"&t="+(new Date).getTime():e.replace(/(t=\d+)/,"t="+(new Date).getTime()):void 0},_fn_dom_render:function(a){var s=this;t.sub("raycloud.pages.hashchange",e.proxy(this._fn_event_get_left_nav_hashs,this)),this._elm_dom_container=e(i.build(a.menuConf)).appendTo(this._elm_dom_root),this._fn_ctrl_dom_render(),localStorage.huodongDate!==t.util.date.getdate(new Date,"YY-MM-DD")&&(setTimeout(function(){s._fn_show_huodong()},1500),localStorage.huodongDate=t.util.date.getdate(new Date,"YY-MM-DD"))},_fn_ctrl_dom_render:function(){this._dom_left_nav_link=this._elm_dom_container.find("a.link"),this._fn_event_bind()
},_fn_event_bind:function(){var t=this;this._dom_left_nav_link.on("click",this._fn_event_left_nav_current_proxy=e.proxy(this._fn_event_left_nav_current,this)),this._elm_dom_container.on("click.huodongOn",".j-huodong",function(){t._fn_show_huodong()}),e(document.body).on("click.huodongOff",".huodong-close, .j-page-lantern",function(){e("#ldg_lockmask").hide(),e(".huodong").remove()})},_fn_event_unbind:function(){this._dom_left_nav_link.off("click"),this._elm_dom_container.off("click.huodongOn",".j-huodong"),e(document.body).off("click.huodongOff",".huodong-close, .j-page-lantern")},_fn_show_huodong:function(){e("#ldg_lockmask").show();var t=['<div class="huodong">','<a class="huodong-close" href="javascript:;" title="关闭"></a>','<a class="huodong-btn huodong-btn-1" href="http://tb.cn/k3ge2dx" target="_blank"></a>','<a class="huodong-btn huodong-btn-2 j-page-lantern" href="#/lantern/"></a>','<div class="huodong-txt">',"<strong>活动说明：</strong>","<p>1、本活动不与其他优惠活动叠加使用</p>","<p>2、本活动的优惠，掌柜小二将会在2到3个工作日内按时送达并给予温馨提示</p>","</div>","</div>"].join("");e(document.body).append(t)},_fn_event_left_nav_current:function(t){var i=t.currentTarget;"#"==e(i).attr("href")&&t.preventDefault(),this._fn_ctrl_current_leftnav(i)},init:function(){this._fn_dom_render(t.user.get())},getContainer:function(){},update:function(){},destory:function(){this._fn_event_unbind()}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=["{{firstNav}}",'<span class="arrow" act-if="hasSecond == true">&gt;</span>',"{{secondNav}}",'<span class="arrow" act-if="hasThird == true">&gt;</span>',"{{thirdNav}}"],a=['<div act-if="len != 0" class="notice-list-wrap">','<i class="notice-icon"></i>','<i act-if="len != 1" class="prev-btn" title="上一条">上一条</i>','<i act-if="len != 1"  class="next-btn" title="下一条">下一条</i>','<div class="notice-list">',"<ul>",'<li act-loop="item in list">','<a act-if="item.url !=  " href="{{item.url}}" target="_blank">{{item.content}}</a>','<span style="color: #ab0d0d;" act-if="item.url ==  ">{{item.content}}</span>',"</li>","</ul>","</div>","</div>"];t.template.addTemp("template.brandNav",i),t.template.addTemp("template.notice",a)}(jQuery,RayCloud),function(e,t){var i={index:"首页",trade:"交易管理","trade/list":"订单处理","trade/list/1":"待发货","trade/list/4":"已发货",pt:"交易管理","pt/list":"快递单模板","pt/wlb_list":"电子面单","pt/net_list":"网点电子面单","pt/pick_list":"拣货单模板","pt/fetch_list":"拿货单模板","pt/pick":"拣货单设计","pt/fetch":"拿货单设计","pt/common":'<a href="#/pt/list/">快递单模板</a>',"pt/common/detail":"设计","pt/deliver_list":"发货单模板","pt/deliver":'<a href="#/pt/deliver_list/">发货单模板</a>',"pt/deliver/detail":"设计","pt/custom":"自定义打印","pt/product_short":"商品简称","pt/print_log":"打单发货日志","pt/smart_match":"快递智能匹配",setting:"系统设置","setting/shop_info":"店铺信息设置","setting/sync_option":"同步设置",sms:"短信服务","sms/settings":"短信服务设置","sms/sent_log":"短信发送记录","sms/txn_log":"短信充值记录",prod:"商品管理","prod/prod_info":"商品档案","prod/cata_management":"分类管理","prod/prod_statistic":"商品销量统计",stock:"库存管理","stock/list":"库存管理","stock/stock_log_add":"入库统计","stock/stock_log_reduce":"出库统计",account:"对账","account/electron_surface":"菜鸟电子面单",lantern:"元宵节活动"},a={name:"toolbar",type:"basic",_elm_dom_root:"#toolbar",_fn_event_get_toolbar_hashs:function(a){if(a){var s={};s.firstNav=i[a.root]||"",s.hasSecond=a.app?!0:!1,s.secondNav=a.app?i[a.root+"/"+a.app]:"",s.hasThird=a.classification?!0:!1,s.thirdNav=a.classification?i[a.root+"/"+a.app+"/"+a.classification]:"",e(this._elm_dom_root).find(".brand-nav").html(t.template.get("template.brandNav",s))}},_fn_dom_render:function(){t.sub("raycloud.pages.hashchange",e.proxy(this._fn_event_get_toolbar_hashs,this)),this._fn_ctrl_load_notice(e.proxy(this._fn_dom_update_notice,this))},_fn_ctrl_load_notice:function(e){API.index_notice({},function(t){var i=t.data.length;e({list:t.data,len:i})})},_fn_dom_update_notice:function(i){this._elm_dom_container=e(t.template.get("template.notice",i)).appendTo(e(this._elm_dom_root)),this._fn_ctrl_dom_render(),this._fn_event_bind_scrollFixed()},_fn_ctrl_dom_render:function(){this._status_event_scrollFixed===!0&&this._fn_event_unbind_scrollFixed(),this.scrollWrap=e(this._elm_dom_root).find(".notice-list-wrap"),this.upbtn=e(this._elm_dom_root).find(".prev-btn"),this.downbtn=e(this._elm_dom_root).find(".next-btn"),this._fn_event_bind()},_status_event_scrollFixed:!1,_fn_event_bind_scrollFixed:function(){this._status_event_scrollFixed!==!0&&(e("#toolbar").scrollToFixed({marginTop:0,zIndex:100}),this._status_event_scrollFixed=!0)},_fn_event_unbind_scrollFixed:function(){this._status_event_scrollFixed!==!1&&(e("#toolbar").trigger("detach.ScrollToFixed"),this._status_event_scrollFixed=!1)},_fn_event_bind:function(){var t=this;1!=e(".notice-list li").length&&(this.scrollWrap.hover(function(){window.clearTimeout(t.scrollTimer)},function(){t.scrollTimer=window.setTimeout(function(){t._fn_status_scroll()},3e3)}),t.scrollTimer=setTimeout(function(){t._fn_status_scroll()},3e3),this.downbtn.bind("click",function(){t._fn_do_status_scroll(0)}),this.upbtn.bind("click",function(){t._fn_do_status_scroll(1)}))},_fn_status_scroll:function(){var t=this;e(".notice-list ul").animate({top:"-28px"},1e3,function(){e(".notice-list li:first").appendTo(".notice-list ul"),e(".notice-list ul").css("top","0")}),t.scrollTimer=window.setTimeout(function(){t._fn_status_scroll()},5e3)},_fn_do_status_scroll:function(t){0==t?e(".notice-list ul").animate({top:"-28px"},1e3,function(){e(".notice-list li:first").appendTo(".notice-list ul"),e(".notice-list ul").css("top","0")}):1==t&&(e(".notice-list li:last").prependTo(".notice-list ul"),e(".notice-list ul").css("top","-28px"),e(".notice-list ul").animate({top:"0px"},1e3))},_fn_event_unbind:function(){var e=this;e.scrollTimer&&clearTimeout(e.scrollTimer),e.downbtn.unbind("click"),e.upbtn.unbind("click")},_fn_event_left_nav_current:function(t){var i=t.currentTarget;"#"==e(i).attr("href")&&t.preventDefault(),this._fn_ctrl_current_leftnav(i)},init:function(){this._fn_dom_render()},getContainer:function(){},update:function(){},destory:function(){this._fn_event_unbind(),this._fn_event_unbind_scrollFixed(),this._elm_dom_container.empty().remove(),this._elm_dom_container=null}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i={name:"session_fail",type:"basic",init:function(){e(document).ajaxComplete(function(e,i){var a=i.responseJSON;a&&8===a.result&&(t.clearShow(),window.location.href="https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/auth2.do&state=1000&view=web")})},update:function(){},getContainer:function(){},destroy:function(){}};t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="J_sync-progress"><div class="progress progress-success loading-progress"><div class="bar" style="width: 0px;"></div></div></div>',"<style>.J_sync-progress .progress{width: 80%; height: 8px; margin: 0 10px 0 0; *display: inline; display: inline-block;vertical-align: middle;}</style>",'<div class="mb_10">',"共下载：",'<span>商品<strong class="ft-normal fc-red">{itemNum}</strong>款</span>',"</div>",'<div class="ft_12 fc-orange">',"<span>温馨小贴士：</span>如果您的商品或者订单较多，可能会耽误您几分钟，请耐心等待下......","</div>"].join(""),a={name:"item_sync",type:"basic",init:function(){this._event_bind()},_fn_update:function(e){var t=e.addItemOnSale+e.addItemInventory;this.$dialog&&this.$dialog.content(i.replace("{itemNum}",t))},_event_bind:function(){t.sub("global.click.item_sync",this._fn_event_handler_proxy_itemSync=e.proxy(this._event_itemSync,this))},_event_unbind:function(){t.removeSub("global.click.item_sync",this._fn_event_handler_proxy_itemSync)},_event_itemSync:function(t){this._sync_succss=t,this.$dialog=e.dialog({title:"正在同步商品",content:i.replace("{itemNum}",0),drag:!1,cancel:!1}),this._fn_ctrl_sync()},_fn_ctrl_sync:function(){this._fn_ctrl_sync_progress(e.proxy(function(i){this._fn_update(i),i.complete===!0?(t.showSuccess("商品同步完成！",.8),this._timer=setTimeout(e.proxy(function(){var e=this._sync_succss;this.clear(),e&&e()},this),800)):this._timer=setTimeout(e.proxy(this._fn_ctrl_sync,this),1e3)},this),e.proxy(function(){t.showFail("系统错误，请重试。"),this.clear()},this))},_fn_ctrl_sync_progress:function(t,i){API.item_sync_count({},e.proxy(function(e){t&&t(e.data)},this),i,!1,!1,!0)},getContainer:function(){},update:function(){},clear:function(){this._sync_succss=null,this._timer&&(clearTimeout(this._timer),this._timer=null),this.$dialog&&!this.$dialog.closed&&this.$dialog.close(),this.$dialog=null},destroy:function(){this.clear()}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i={name:"guide",getContainer:function(){},init:function(){},update:function(){if(this._stauts_guide===!0)return void window.location.replace("#/index/");var i=t.user.get();return i&&i.userConf.guide?void window.location.replace("#/index/"):(this._event_bind(),void API.shop_info({},e.proxy(function(e){var t=e.data,i=RayCloud.controls.get("control.first_use_config_guide",{nick:t.nick,taobaoId:t.taobaoId,shopName:t.title});i.show(),this.ctrl_guide=i},this)))},_event_bind:function(){this._event_binded||(t.sub("control.first_user_config_guide.guide_success",this._eventHanlderProxy=e.proxy(function(){this._stauts_guide=!0,window.location.replace("#/index/")},this)),this._event_binded=!0)},_event_unbind:function(){t.removeSub("control.first_user_config_guide.guide_success",this._eventHanlderProxy),this._event_binded=!1},destroy:function(){this._event_unbind(),this._stauts_guide=null,this.ctrl_guide&&(this.ctrl_guide.destroy(),this.ctrl_guide=null)}};t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="pd_20" style="padding-top: 0;">','<div class="clearfix mt_10">','<div class="J_User_Trade moudule-user-trade"></div>','<div class="J_Product_News moudule-product-news"></div>',"</div>",'<div class="J_User_Function_List mt_10"></div>',"</div>"],a=['<div class="ui-box ui-box-s1" style="overflow: hidden">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">订单信息</div>','<div class="f-rt"><span class="trade-flush J_Flush J_iTip" data-title="刷新" style="*margin-top:11px;"></span></div>',"</div>",'<div class="ui-box-bd">','<div class="ft_14 f-lt" style="line-height:26px;">',"<ul>",'<li>待付款订单： <a href="#/trade/list/?queryId=0&sys=true">{{countOfWaitPay}}</a></li>','<li>待发货订单： <a href="#/trade/list/?queryId=1&sys=true">{{countOfWaitSendGoods}}</a></li>','<li>已发货订单： <a href="#/trade/list/?queryId=4&sys=true">{{countOfWaitConfirmGoods}}</a></li>','<li>交易成功订单： <a href="#/trade/list/?queryId=6&sys=true">{{countOfFinished}}</a></li>','<li>退款订单<span class="g_alert_information J_iTip" data-title="包括待发货、已发货的退款订单" title=""></span>： {{countOfError}}</li>',"</ul>","</div>",'<div class="f-lt mt_50" style="margin-left: 73px;">','<a class="btn btn-primary ml_30" href="#/trade/list/">立刻去处理订单</a>',"</div>","</div>",'<div class="ui-box-ft">','<div class="ft-left ft_14">',"最近同步时间： {{lastSyncOrderTime}}",'<span class="btn ml_35 J_Trade_Sync">同步订单</span>',"</div>","</div>","</div>"],s=['<div class="ui-box ui-box-s1">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">产品动态</div>',"</div>",'<div class="ui-box-bd">','<ul class="news-list">',"{{temp}}","</ul>",'<div class="mt_5" style="text-align: center;font-size: 14px; margin-top: 22px"><a class="J_show_more" href="javascript:;">更多动态&gt;&gt;</a></div>',"</div>","</div>"],n=['<div class="ui-box ui-box-s1">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">功能导航</div>',"</div>",'<div class="ui-box-bd" style="position: relative;">','<div act-loop="item in list" class="module-index-setting-item module-index-setting-item-{{item.id}}">','<div class="fc-999">{{item.parentName}}</div>','<a href="#{{item.url}}">{{item.name}}</a>',"</div>",'<a class="module-index-advert-link" href="https://kuaimai.tmall.com/category-1161197680.htm?spm=a220o.1000855.w5002-12821499558.4.3yKY1p&search=y&catName=%C8%C8%C3%F4%D6%BD" target="_blank"></a>',"</div>","</div>"],l=['<div class="news-dialog-box">',"<ul>",'<li act-loop="item in list">',"<h3>{{item.startTime}}</h3>",'<div class="item-box" act-loop="content in item.content">','<i class="dot"></i>','<div class="item"><i class="con-icon"></i><a act-if="item.url != " href="{{item.url}}" target="_blank">{{content}}</a><span act-if="item.url == ">{{content}}</span><i class="arrow"></i></div>',"</div>","</li>","</ul>","</div>"];t.template.addTemp("template.index",i),t.template.addTemp("template.index.user_trade",a),t.template.addTemp("template.index.product_news",s),t.template.addTemp("template.index.user_function_list",n),t.template.addTemp("template.index.product_news_dialog_con",l)}(jQuery,RayCloud),function(e,t){var i={0:{url:"/setting/shop_info/"},9:{url:"/trade/list/"},10:{url:"/pt/list/"},11:{url:"/pt/deliver_list/"},46:{url:"/sms/settings/"}},a={getDate:function(e){var t=e,i=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),n=function(e){return(10>e?"0":"")+e};return a=n(a),s=n(s),i+"."+a+"."+s}},s=t.controls.get("control.advertise_tool"),n=t.controls.get("control.user.deadline"),l={name:"index",_elm_dom_root:"#main",_elm_template_name:"template.index",_fn_dom_render:function(){this._elm_dom_container||(this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root),this._fn_event_bind())},_fn_dom_update_g_alert_information:function(){},_fn_dom_update_userTrade:function(e){this._elm_dom_container.find(".J_User_Trade").find(".J_iTip").trigger("mouseout"),e.lastSyncOrderTime=t.util.date.getdate(e.lastSyncOrderTime,"YY-MM-DD HH:MM:SS"),this._elm_dom_container.find(".J_User_Trade").empty().html(t.template.get("template.index.user_trade",e)),this._elm_dom_container.find(".J_User_Trade").find(".J_iTip").iTip({skin:"blue",triggerType:"hover"})},_fn_dom_update_productNews:function(e){var i=this,a=this._fn_handle_data(e.list);this.product_news_data=a;for(var s="",n=0,l=0;l<a.length;l++)for(var d=a[l],o=d.content.length,r=0;o>r&&5!=n;r++){n++;var p=d.url||"";s+=""==p?"<li><b>·</b><span>"+d.startTime+"&nbsp;&nbsp;"+d.content[r]+"</span></li>":'<li><b>·</b><a href="'+p+'" target="_blank">'+d.startTime+"&nbsp;&nbsp;"+d.content[r]+"</a></li>"}this._elm_dom_container.find(".J_Product_News").empty().html(t.template.get("template.index.product_news",{temp:s})),this._elm_dom_container.find(".J_show_more").on("click",function(){i._fn_show_more_news()})},_fn_handle_data:function(e){for(var t=0;t<e.length;t++)e[t].startTime=a.getDate(Date.fromISO(e[t].startTime)),e[t].url||(e[t].url="");return e},_fn_show_more_news:function(){var i=this;e.dialog({title:"产品动态",content:t.template.get("template.index.product_news_dialog_con",{list:i.product_news_data}),ok:!1,width:560,lock:!0,resize:!1,fixed:!0})},_fn_dom_update_userFunctionList:function(e){this._elm_dom_container.find(".J_User_Function_List").html(t.template.get("template.index.user_function_list",e))},_fn_event_bind:function(){this._elm_dom_container.find(".J_User_Trade").on("click",".J_Flush",e.proxy(function(){this._fn_ctrl_load_userTrade(e.proxy(this._fn_dom_update_userTrade,this))},this)),this._elm_dom_container.find(".J_User_Trade").on("click",".J_Trade_Sync",e.proxy(this._fn_event_handler_tradeSync,this))},_fn_event_unbind:function(){e("body").off("click.showadvertise",".advertise-area"),e("body").find(".advertise-area").remove(),s&&s.clear(),this._elm_dom_container.find(".J_User_Trade").off("click",".J_Flush"),this._elm_dom_container.find(".J_User_Trade").on("click",".J_Trade_Sync")},_fn_event_handler_tradeSync:function(){this.ctrl_guide||(this.ctrl_guide=RayCloud.controls.get("control.trade_sync_pop")),this.ctrl_guide.sync(e.proxy(function(){this._fn_ctrl_load_userTrade(e.proxy(this._fn_dom_update_userTrade,this))},this))},_fn_ctrl_load_userTrade:function(e){API.user_trade({},function(t){e(t.data)})},_fn_ctrl_load_productNews:function(e){API.index_prodprogressinfo({},function(t){e({list:t.data})})},_fn_ctrl_load_userFunctionList:function(e){API.user_function_list({},function(t){e({list:t.data})})},_fn_show_remind:function(){var i=n.getRenewMsg();if(i.deadline&&!e.cookie("_deadline")){n.show(i,3);var a=t.util.date.getcurdate().getTime();e.cookie("_deadline",1,{expires:t.util.date.tojsdate(t.util.date.getdiffdate(a,"1d","YY-MM-DD"))})}},init:function(){},update:function(t,a){this._fn_check_browser_info(),this._fn_dom_render(),this._fn_ctrl_load_userTrade(e.proxy(this._fn_dom_update_userTrade,this)),this._fn_ctrl_load_productNews(e.proxy(this._fn_dom_update_productNews,this)),this._fn_ctrl_load_userFunctionList(e.proxy(function(t){var a=t.list;e.each(a,function(t,s){e.extend(a[t],i[s.id]||{})}),this._fn_dom_update_userFunctionList(t)},this)),this._fn_show_remind(),this._fn_dom_update_g_alert_information(),a&&a()},_fn_show_advertisement:function(){e("body").prepend('<div class="advertise-area"><span class="close-notif">&times;</span></div>'),e("body").on("click.showadvertise",".advertise-area",function(t){var i=e(t.target);i.hasClass("close-notif")?i.parent().remove():s.show()})},_fn_check_browser_info:function(){var t=navigator.userAgent.toLowerCase(),i=/msie [\d.]+;/gi,a=/firefox\/[\d.]+/gi,s=/chrome\/[\d.]+/gi,n=/safari\/[\d.]+/gi,l=/rv:[\d.]+/gi,d="",o=!1,r=!1,p=!1,c=!1,_="";t.indexOf("msie")>0?(d=t.match(i),o=!0):t.indexOf("firefox")>0?(d=t.match(a),r=!0):t.indexOf("chrome")>0?(d=t.match(s),p=!0):t.indexOf("safari")>0&&t.indexOf("chrome")<0?(d=t.match(n),c=!0):t.indexOf("rv:")>0&&(d=t.match(l),o=!0),_=(d+"").replace(/[^0-9.]/gi,"");var m=_.split(".");_=1*(m[0]+"."+m[1]||0);var u=!1;if(o&&_&&8>_?u=!0:p&&_>=42?u=!0:r&&(u=!0),u){var h=e('<div style="background: #F8F1D0;font-size: 16px;color: #ab0d0d; height: 40px;line-height: 40px;position: fixed;text-align: center;top: 0;width: 100%;z-index: 200;">您当前使用的浏览器可能会与掌柜部分功能不兼容，建议您使用稳定版的谷歌、IE、360，<a href="http://erp-other.oss-cn-hangzhou.aliyuncs.com/43.0.2357.130_chrome_installer.exe" style="background: #ab0d0d none repeat scroll 0 0;border-radius: 5px;color: #fff;font-size: 12px;padding: 5px 20px;text-decoration: none;">马上去下载</a><span style="color: red;cursor: pointer;font-size: 40px;margin-left: 5px;position: absolute;right: 10px;" class="close-notif">&times;</span></div>').appendTo("body");h.find(".close-notif").on("click",function(t){e(t.target).parent().remove()})}},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.empty().remove(),this._elm_dom_container=null,this.ctrl_guide&&this.ctrl_guide.destroy(),this.ctrl_guide=null)}};t.modules.define(l.name,l)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade.list_tab"),a={name:"trade.list.sub_module_tab",renderTo:function(t){if(!this.$el){var a=i.getData(),s=['<div class="clearfix f-lt module-trade-tab-navs">'];e.each(a,function(e,t){t.isSys&&!t.isHide&&s.push('<a class="module-trade-tab-nav" href="#/trade/list/?queryId={id}&sys=true" data-id="{id}">{name}<em></em></a>'.replace(/{id}/g,t.id).replace("{name}",t.name))}),s.push("</div>"),this.$el=e(s.join("")).appendTo(t)}},_update_tab:function(t){if(this.$el){this.$el.find(".module-trade-tab-nav").filter(".current").find("em").html("");var i=this.$el.find(".module-trade-tab-nav").removeClass("current").filter(function(i,a){return e(a).attr("data-id")==t}).addClass("current"),a=i.attr("href");a&&(a=a.indexOf("&_t")<0?i.attr("href")+"&_t="+ +new Date:a.replace(/(_t=\d*)/g,function(){return"_t="+ +new Date})),i.attr("href",a)}},update:function(e){this._update_tab(e.queryId)},update_search_total:function(e){this.$el&&this.$el.find(".module-trade-tab-nav").filter(".current").find("em").html(" ("+e+")")},init:function(){},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this.$el.empty().remove(),this.$el=null)}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-trade-searchBar J_SearchBar">','<form action="#/trade/list/" method="get">','<input type="hidden" name="pageNo" value="1">','<select name="taobaoId" style="width:10em;">','<option value="">&nbsp;</option>',"</select>",'<span class="mr_10 mr_printLogType"></span>','<select name="printLogType" style="width:9em;">','<option value="0">快递单打印记录</option>','<option value="1">发货单打印记录</option>',"</select>",'<span class="mr_10"></span>','<select name="printLogId" style="width:12em;">','<option value="">&nbsp;</option>',"</select>",'<select name="timeType" style="width:7em;">','<option value="">&nbsp;</option>',"</select>",'<span class="J_Time_Range">','<input type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startTime" class="w100 date-picker ml_10" > &mdash; <input type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="endTime" class="w100 date-picker" >',"</span>",'<input type="text" name="text" placeholder="搜订单号\\商家编码\\姓名\\旺旺\\手机号\\运单号\\收货信息\\留言备注" class="ml_10 search-content">','<button type="submit" class="btn btn-primary ml_10">查询</button>','<span act-if="showAdvanceSearch == 1" class="ml_10 advance-search"><a class="advance-search-link">更多查询</a></span>',"</form>",'<div class="module-trade-sync-orders-area">',"</div>","</div>"];t.template.addTemp("template.trade.list.sub_module_query",i)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a=t.controls.get("control.trade.searchlist.filterDetails"),s={name:"trade.list.sub_module_query",_template_name:"template.trade.list.sub_module_query",_log_template_name:this._template_name+".log",renderTo:function(i,a){this.$el||(this.$el=e(t.template.get(this._template_name)).appendTo(i),this._event_bind(a),this.$el.find("select").iSelect(),this.$el.find('input[name="text"]').placeholder(),this.$el.find(".ui-select").hide(),this.$el.find(".J_Time_Range").hide())},_update_print_log:function(i,a){a.queryId&&"3"!=a.queryId&&(this.$el.find(".ui-select-timeType").hide(),this.$el.find(".J_Time_Range").hide());var s=this.$el.find("select[name=printLogType]").val();"undefined"!=typeof i.printLogType&&(s=i.printLogType),API.trade_printlog_time({type:s},e.proxy(function(a){var s=a.data;if(s&&s.length>0){var n=[];e.each(s,function(e,i){var a=t.util.date.getdate(Number(i.printTime),"YY-MM-DD HH:MM:SS");n.push('<option value="{id}">{printTime}</option>'.replace("{id}",i.id).replace("{printTime}",a))}),this.$el.find("select[name=printLogId]").html("").html(n.join("")).iSelect("update")}else this.$el.find("select[name=printLogId]").html("").html('<option value="">&nbsp;</option>').iSelect("update");i.printLogType&&this.$el.find('select[name="printLogType"]').iSelect("select",i.printLogType),i.printLogId&&this.$el.find('select[name="printLogId"]').iSelect("select",i.printLogId),this.$el.find(".ui-select-printLogType").show(),this.$el.find(".mr_printLogType").show(),this.$el.find(".ui-select-printLogId").show(),i.printLogType=this.$el.find("select[name=printLogType]").val(),i.printLogId=this.$el.find("select[name=printLogId]").val(),null==i.printLogId&&(i.printLogId=""),t.pub("trade.search.printlog",i)},this)),this._update_text(i.text||"")},update:function(e,i){var a=t.user.get();if(a.userConf&&1==a.userConf.mmb&&a.masterUser&&1==a.masterUser?this._update_bind_shop_query(a,e):(this.$el.find(".ui-select-taobaoId").hide(),this.$el.find(".search-content").css("width","400px")),e.queryId&&"3"==e.queryId)return void this._update_print_log(e,i);this.$el.find(".ui-select-printLogType").hide(),this.$el.find(".mr_printLogType").hide(),this.$el.find(".ui-select-printLogId").hide(),this.$el.find(".ui-select-timeType").show(),this.$el.find(".J_Time_Range").show();var s=[{text:"下单时间",value:"created"},{text:"付款时间",value:"pay_time"}];4==e.queryId||6==e.queryId?s.push({text:"发货时间",value:"consign_time"}):(0==e.queryId||7==e.queryId||8==e.queryId)&&(s=[{text:"下单时间",value:"created"}]),e.queryId!=i.queryId&&this._render_select(s),this._update_select(e.timeType||"");var n=e.startTime&&t.util.date.getdate(Number(e.startTime),"YY-MM-DD HH:MM"),l=e.endTime&&t.util.date.getdate(Number(e.endTime),"YY-MM-DD HH:MM");this._update_time(n,l),this._update_text(e.text||"")},init:function(){},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null)},_update_bind_shop_query:function(t,i){var a=t.bindShops;if(a&&a.length>0){var s=[];s.push('<option value="-1">店铺名称</option>'),e.each(a,function(e,t){s.push('<option value="{taobaoId}">{title}</option>'.replace("{taobaoId}",t.taobaoId).replace("{title}",t.title))}),this.$el.find("select[name=taobaoId]").html("").html(s.join("")).iSelect("update"),i.taobaoId&&this.$el.find("select[name=taobaoId]").iSelect("select",i.taobaoId),this.$el.find(".ui-select-taobaoId").show(),this.$el.find(".search-content").css("width","274px")}},_event_bind:function(e){var t=this;this.$el.find("form").on("submit.query",this._event_handler("_onsubmit")),this.$el.find("select[name=printLogType]").on("change",this._event_handler("_onprinttype_change")),this.$el.find(".advance-search-link").on("click",function(i){t._do_advance_search(i,e)})},_event_unbind:function(){this.$el.find("form").off("submit.query"),this.$el.find("select[name=printLogType]").off("change")},_event_handler:function(t){return e.proxy(this[t],this)},_onprinttype_change:function(){var e=this.$el.find("select[name=printLogType]").val();window.location="#/trade/list/?queryId=3&sys=true&printLogType="+e},_onsubmit:function(a){a.preventDefault();var s=i.getData(a.currentTarget),n=e.trim(s.startTime),l=e.trim(s.endTime),d=(new Date).getTime();if(n){if(n+=-1===n.indexOf(":")?" 00:00:00":":00",!t.util.date.is_date(n))return void e.dialog.alert("开始时间格式不正确！",e.proxy(function(){this.$el.find("form")[0].elements.startTime.focus()},this));if(n=t.util.date.tojsdate(n).getTime(),n>=d)return void e.dialog.alert("开始时间必须小于当前时间！",e.proxy(function(){this.$el.find("form")[0].elements.startTime.focus()},this));s.startTime=n}if(l){if(l+=-1===l.indexOf(":")?" 00:00:00":":00",!t.util.date.is_date(l))return void e.dialog.alert("结束时间格式不正确！",e.proxy(function(){this.$el.find("form")[0].elements.endTime.focus()},this));if(l=t.util.date.tojsdate(l).getTime(),l>d)return void e.dialog.alert("结束时间必须小于当前时间！",e.proxy(function(){this.$el.find("form")[0].elements.endTime.focus()},this));s.endTime=l}return n&&l&&n>=l?void e.dialog.alert("开始时间必须小于结束时间！",e.proxy(function(){this.$el.find("form")[0].elements.startTime.focus()},this)):(s.text=encodeURIComponent(e.trim(s.text)),s.highlight=s.text?!0:!1,s._t=(new Date).getTime(),s.field=s.timeType,s.order="asc",void t.pub("trade.list.sub_module_query.submit",s))},_do_advance_search:function(e,t){a.show(t,!1)},_update_time:function(e,t){this.$el.find("form").find('input[name="startTime"]').val(e),this.$el.find("form").find('input[name="endTime"]').val(t)},_update_text:function(e){this.$el.find("form").find('input[name="text"]').val(e)},_render_select:function(t){var i=[];e.each(t,function(e,t){i.push('<option value="{value}">{text}</option>'.replace("{value}",t.value).replace("{text}",t.text))}),this.$el.find('select[name="timeType"]').html("").html(i.join("")).iSelect("update")},_update_select:function(e){this.$el.find('select[name="timeType"]').iSelect("select",e)}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=["<div>",'<div class="module-trade-list">','<div class="module-trade-list-header J_TradeList_Head module-trade-list-header-inpage" id="module-trade-list-header">','<span class="header-checkall">','<div class="cell-box ft-center">','<span class="check"><input type="checkbox" class="J_Select_All"></span>',"</div>","</span>",'<span class="filter-header header-index-info"><div class="cell-box trade-hover-text">序号</div></span>','<span class="filter-header header-order-info">','<div class="cell-box order-info-head">','<span class="trade-hover ">','<span class="trade-hover-text">系统订单号<span class="ml_5 trade-icon-down"></span></span>','<ul class="trade-hover-bd J_TradeList_SortList">',"</ul>","</span>","&nbsp;&nbsp;&nbsp;&nbsp;",'<span class="trade-hover order-status-container">','<span class="trade-hover-text"><span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd order-status">','<li data-value="others.all" data-type="" class="trade-hover-item">全部订单</li>','<li data-value="others.hebing" class="trade-order-item" name="for_hebing">合并状态</li>','<div class="sub-item"><input type="checkbox" id="mergedOrder" value="0" class="J_Checkbox"><label for="mergedOrder">合并订单</label></div>','<div class="sub-item"><input type="checkbox" id="unMergedOrder" value="3" class="J_Checkbox"><label for="unMergedOrder">非合并订单</label></div>','<div class="pt_5"><button id="order-query-btn" class="btn btn-primary">筛选</button></div>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-prod-info">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">商品数量<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd product-info">','<li class="trade-hover-item trade-all">全部订单</li>','<li class="trade-product-item" data-value="product.all" name="for_productInfo">商品种类</li>','<div class="sub-item"><input type="checkbox" id="onekind" class="J_Checkbox j-onekind"><label for="onekind">1种商品</label></div>','<div class="sub-item"><input type="checkbox" id="morethanonekind" class="J_Checkbox j-onekind"><label for="morethanonekind">2种及以上</label></div>','<li class="trade-product-num-item" data-value="productnum.all" name="for_productInfoNum">商品数量</li>','<div class="sub-item"><input type="checkbox" id="onenum" class="J_Checkbox j-onenum"><label for="onenum">1件商品</label></div>','<div class="sub-item"><input type="checkbox" id="morethanonenum" class="J_Checkbox j-onenum"><label for="morethanonenum">2件及以上</label></div>','<div class="pt_5"><button id="product-kind-query-btn" class="btn btn-primary">筛选</button></div>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-buyer-info">','<div class="cell-box trade-hover-text">买家信息</div>',"</span>",'<span class="filter-header header-print-info">','<div class="cell-box">','<span class="trade-hover J_TradeStatus_List_Container">','<span class="trade-hover-text">打印/审核/异常状态<span class="ml_5 trade-icon-t"></span></span>','<form action="#/trade/list/" method="get" class="trade-hover-bd print-status-info">','<li class="trade-hover-item">全部订单</li>','<li class="trade-print-item" name="for_expressStatus">快递单打印状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="expToPrint" name="expressStatus" value="0" class="J_Checkbox"><label for="expToPrint">未打印</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="expPrinted" name="expressStatus" value="1" class="J_Checkbox"><label for="expPrinted">已打印</label></span>',"</div>",'<li class="trade-print-item" name="for_senderStatus">发货单打印状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="senderToPrint" name="deliverStatus" value="0" class="J_Checkbox"><label for="senderToPrint">未打印</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="senderPrinted" name="deliverStatus" value="1" class="J_Checkbox"><label for="senderPrinted">已打印</label></span>',"</div>",'<li class="trade-print-item" name="for_orderCheckStatus">订单审核状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="orderToCheck" name="isVerify" value="0" class="J_Checkbox"><label for="orderToCheck">未审核</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="orderChecked" name="isVerify" value="1" class="J_Checkbox"><label for="orderChecked">已审核</label></span>',"</div>",'<li class="trade-print-item" name="for_drawBackStatus">订单退款状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="orderToDrawback" name="isRefund" value="0" class="J_Checkbox"><label for="orderToDrawback">非退款</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="orderDrawbacked" name="isRefund" value="1" class="J_Checkbox"><label for="orderDrawbacked">退款</label></span>',"</div>",'<li class="trade-print-item" name="for_hungupStatus">订单挂起状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="orderToHungup" name="isHalt" value="0" class="J_Checkbox"><label for="orderToHungup">非挂起</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="orderHungupped" name="isHalt" value="1" class="J_Checkbox"><label for="orderHungupped">挂起</label></span>',"</div>",'<li class="trade-print-item" name="for_exceptionStatus">淘宝异常状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="exceptionPrint" name="isExcep" value="0" class="J_Checkbox"><label for="exceptionPrint">非淘宝异常</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="exceptionPrinted" name="isExcep" value="1" class="J_Checkbox"><label for="exceptionPrinted">淘宝异常</label></span>',"</div>",'<div class="pt_5"><button id="print-query-btn" type="submit" class="btn btn-primary">筛选</button></div>',"</form>","</span>","</div>","</span>",'<span class="filter-header header-receiver-addr-info">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">收货地区<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd J-TradeList-receive-area">','<li data-value="" class="trade-hover-item">全部地区</li>','<li data-value="0" class="trade-hover-item">城区</li>','<li data-value="1" class="trade-hover-item">非城区</li>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-shipping-info">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">物流信息<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd shipping-info">','<li class="trade-hover-item">全部订单</li>','<ul class="ml_25">','<li style="font-weight:300">','<label act-if="canDelivered==1"><input type="radio" value="1" name="canDelivered" checked/>可达&nbsp;&nbsp;&nbsp;</label>','<label act-if="canDelivered!=1"><input type="radio" value="1" name="canDelivered"/>可达&nbsp;&nbsp;&nbsp;</label>','<label act-if="canDelivered==2"><input type="radio" value="2" name="canDelivered" checked/>不可达</label>','<label act-if="canDelivered!=2"><input type="radio" value="2" name="canDelivered"/>不可达</label>',"</li>","</ul>",'<li class="trade-product-item" name="for_shippingInfo">快递模板</li>','<div class="often-used-temp">',"</div>",'<div class="sub-item"><input type="checkbox" id="-1" templateid="-1" id="otherUsed" class="J_Checkbox"><label for="-1">其他快递模板</label></div>','<div class="pt_5"><button id="shipping-query-btn" class="btn btn-primary">筛选</button></div>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-note-info">','<div class="cell-box">','<span class="trade-hover">','<span class="trade-hover-text">留言备注<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd J_TradeList_MemoList">',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-operation-info">','<div class="cell-box trade-hover-text">操作</div>',"</span>","</div>","</div>",'<div class="module-trade-footer-container">','<div class="module-trade-footer-wrap">','<div class="clearfix module-trade-footer">','<label class="f-lt ml_10"><span class="check"><input type="checkbox"  class="J_Select_All"></span>全选</label>','<div class="f-lt ml_10 J_Pages"></div>','<div class="f-rt">','<label class="ml_10"><span class="check"><input type="checkbox" name="" class="J_Trigger_Trade_Orders"></span>显示订单商品</label>',"</div>","</div>","</div>","</div>","</div>"],a=['<div class="clearfix module-trade-pages">','<span class="f-lt">共有{{total}}条记录</span>','<span class="module-trade-pages-pageNo" act-if="pageNo == 1">|&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="1" title="首页">|&lt;</a>','<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<form action="" method="get"><input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;"></form>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;|</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{pageTotal}}"  title="末页">&gt;|</a>','<span class="pagination-page">','<select data-position="top">','<option value="10">10</option>','<option value="20">20</option>','<option value="50">50</option>','<option value="100">100</option>',"</select>","</span>","</div>"],a=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option value="10">10</option>','<option value="20">20</option>','<option value="50">50</option>','<option value="100">100</option>','<option value="200">200</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"],s=['<div class="checkbox-wrapper flag-checkbox-area"><div class="sub-item">','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="0"><span class="trade-icon-flag-0"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="1"><span class="trade-icon-flag-1"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="2"><span class="trade-icon-flag-2"></span></label>',"<br/>",'<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="3"><span class="trade-icon-flag-3"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="4"><span class="trade-icon-flag-4"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="5"><span class="trade-icon-flag-5"></span></label>',"</div></div>"];
t.template.addTemp("template.trade.list.sub_module_tradeContainer.pages",a),t.template.addTemp("template.trade.list.sub_module_tradeContainer",i),t.template.addTemp("template.trade.list.sub_module_tradeContainer_flag_search_temp",s)}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.widget.page"),t.controls.get("control.form_util")),a={name:"trade.list.sub_module_tradeContainer",_template_name:"template.trade.list.sub_module_tradeContainer",renderTo:function(i){this.$el||(this.$el=e(t.template.get(this._template_name,-1!=location.hash.indexOf("canDelivered=1")?{canDelivered:1}:-1!=location.hash.indexOf("canDelivered=2")?{canDelivered:2}:{})).appendTo(i),this.$el.find('.filter-header input[type="checkbox"]').iCheck(),this.$el.find('.filter-header input[type="radio"]').iCheck(),this._event_bind())},_checkAll:function(e){this.$el.find(".J_Select_All").prop("checked",e)},_render_expressTempList_menu:function(){var t=this.$el.find(".shipping-info"),i=t.find(".often-used-temp");API.pt_simple_list({isMix:1,isCommonUse:1},e.proxy(function(e){var a=e.data;if(a&&a.length)for(var s="",n=0;n<a.length;n++)s+='<div class="sub-item"><input type="checkbox" templateid="'+a[n].templateId+'" id="'+a[n].templateId+'" class="J_Checkbox"><label for="'+a[n].templateId+'">'+a[n].templateName+"</label></div>";i.children().length||i.append(s),i.find('input[type="checkbox"]').iCheck(),this._init_events_for_template(t)},this),null,!1,!1,!0)},_init_events_for_template:function(i){i.find(".J_Checkbox").on("ifClicked",function(){setTimeout(function(){var t=!1;e.each(i.find(".J_Checkbox"),function(i,a){e(a).prop("checked")&&(t=!0)}),t?i.find(".trade-product-item").addClass("trade-hover-item-selected"):i.find(".trade-product-item").removeClass("trade-hover-item-selected")},10)}),i.find("button").on("click",function(){var a=[];e.each(i.find(".J_Checkbox"),function(t,i){if(e(i).prop("checked")){var s=e(i).attr("templateid");s=s.indexOf("w")>-1?s.replace(/w/,"")+"_1":1*s,a.push(s)}}),t.pub("trade.list.sub_module_tradeContainer.template_search",{express:a,templateFilter:1,canDelivered:i.find('input[name="canDelivered"]:checked').val(),timeStamp:+new Date})})},_render_sortList:function(t){var i=[];e.each(t,function(e,t){i.push('<li class="trade-hover-item" data-value="{value}">{text}</li>'.replace("{value}",t.value).replace("{text}",t.text))}),this.$el.find(".J_TradeList_SortList").empty().html(i.join(""))},_init_sortList_event:function(e){var i=function(e,t){e&&t.addClass("trade-hover-item-selected"),!e&&t.removeClass("trade-hover-item-selected")},a=e.find("#mergedOrder"),s=e.find("#unMergedOrder"),n=e.find("[name=for_hebing]"),l=e.find("#chaiStatus"),d=e.find("#unChaiStatus"),o=e.find("[name=for_chai_dan]");a.on("ifClicked",function(e){!e.target.checked||s.prop("checked")?i(!0,n):i(!1,n)}),s.on("ifClicked",function(e){!e.target.checked||a.prop("checked")?i(!0,n):i(!1,n)}),l.on("ifClicked",function(e){!e.target.checked||d.prop("checked")?i(!0,o):i(!1,o)}),d.on("ifClicked",function(e){!e.target.checked||l.prop("checked")?i(!0,o):i(!1,o)}),e.find("button").on("click",function(){var e=[];a.prop("checked")&&e.push(1*a.val()),s.prop("checked")&&e.push(1*s.val()),l.prop("checked")&&e.push(1*l.val()),d.prop("checked")&&e.push(1*d.val()),e=e.length?e:void 0,t.pub("trade.list.sub_module_tradeContainer.order_sort",{others:e,order:"desc",timeStamp:+new Date})})},_init_productCount_event:function(e){var i=this,a=function(e,t){e&&t.addClass("trade-hover-item-selected"),!e&&t.removeClass("trade-hover-item-selected")},s=e.find("#onekind"),n=e.find("#morethanonekind"),l=e.find("[name=for_productInfo]"),d=e.find("#onenum"),o=e.find("#morethanonenum"),r=e.find("[name=for_productInfoNum]");s.on("ifClicked",function(e){!e.target.checked||n.prop("checked")?a(!0,l):a(!1,l)}),n.on("ifClicked",function(e){!e.target.checked||s.prop("checked")?a(!0,l):a(!1,l)}),d.on("ifClicked",function(e){!e.target.checked||o.prop("checked")?a(!0,r):a(!1,r)}),o.on("ifClicked",function(e){!e.target.checked||d.prop("checked")?a(!0,r):a(!1,r)}),i._bothOneMoreProductChecked=!1,e.find("button").on("click",function(){var e={timeStamp:+new Date,oneItem:void 0,oneItemKind:void 0};s.prop("checked")&&(e.oneItem=1),n.prop("checked")&&(e.oneItem=0),s.prop("checked")&&n.prop("checked")&&(e.oneItem="",i._bothOneMoreProductChecked=!0),d.prop("checked")&&(e.oneItemKind=1),o.prop("checked")&&(e.oneItemKind=0),d.prop("checked")&&o.prop("checked")&&(e.oneItemKind="",i._bothOneMoreProductChecked=!0),t.pub("trade.list.sub_module_tradeContainer.product_count",e)})},_init_printStatus_event:function(e){var t=function(e,t){e&&t.addClass("trade-hover-item-selected"),!e&&t.removeClass("trade-hover-item-selected")},i=e.find("#expToPrint"),a=e.find("#expPrinted"),s=e.find("[name=for_expressStatus]"),n=e.find("#senderToPrint"),l=e.find("#senderPrinted"),d=e.find("[name=for_senderStatus]"),o=e.find("#orderToCheck"),r=e.find("#orderChecked"),p=e.find("[name=for_orderCheckStatus]"),c=e.find("#orderToDrawback"),_=e.find("#orderDrawbacked"),m=e.find("[name=for_drawBackStatus]"),u=e.find("#orderToHungup"),h=e.find("#orderHungupped"),f=e.find("[name=for_hungupStatus]"),v=e.find("#exceptionPrint"),g=e.find("#exceptionPrinted"),b=e.find("[name=for_exceptionStatus]");i.on("ifClicked",function(e){!e.target.checked||a.prop("checked")?t(!0,s):t(!1,s)}),a.on("ifClicked",function(e){!e.target.checked||i.prop("checked")?t(!0,s):t(!1,s)}),n.on("ifClicked",function(e){!e.target.checked||l.prop("checked")?t(!0,d):t(!1,d)}),l.on("ifClicked",function(e){!e.target.checked||n.prop("checked")?t(!0,d):t(!1,d)}),o.on("ifClicked",function(e){!e.target.checked||r.prop("checked")?t(!0,p):t(!1,p)}),r.on("ifClicked",function(e){!e.target.checked||o.prop("checked")?t(!0,p):t(!1,p)}),c.on("ifClicked",function(e){!e.target.checked||_.prop("checked")?t(!0,m):t(!1,m)}),_.on("ifClicked",function(e){!e.target.checked||c.prop("checked")?t(!0,m):t(!1,m)}),u.on("ifClicked",function(e){!e.target.checked||h.prop("checked")?t(!0,f):t(!1,f)}),h.on("ifClicked",function(e){!e.target.checked||u.prop("checked")?t(!0,f):t(!1,f)}),v.on("ifClicked",function(e){!e.target.checked||g.prop("checked")?t(!0,b):t(!1,b)}),g.on("ifClicked",function(e){!e.target.checked||v.prop("checked")?t(!0,b):t(!1,b)})},_remember_memostatus_from_hash:function(e,t){var i=t.containMemo,a=t.sellerFlag,s="undefined"!=typeof i&&"undefined"==typeof a,n="undefined"!=typeof a,l="undefined"!=typeof a&&""!==a;if(s)e.find(".trade-hover-item").addClass("trade-hover-item-selected");else if(n){var d=e.find(".memo-checkbox-area");""===i?this._noMemoWithMemoMarked&&(e.find("[data-value=memo]").addClass("trade-hover-item-selected"),d.find(".J_Checkbox").iCheck("check")):(e.find("[data-value=memo]").addClass("trade-hover-item-selected"),d.find(".J_Checkbox[value="+i+"]").iCheck("check"))}if(l&&(e.find("[data-value=flag]").addClass("trade-hover-item-selected"),a=a.split(","),a.length))for(var o=e.find(".flag-checkbox-area"),r=0;r<a.length;r++)o.find(".J_Checkbox[value="+a[r]+"]").iCheck("check");this._change_filter_status(e.parent())},_init_events_for_memo:function(i){var a=this;i.find(".J_Checkbox").on("ifClicked",function(t){setTimeout(function(){var i=e(t.target),a=i.parents(".checkbox-wrapper");a.find("div.checked").length?a.prev().addClass("trade-hover-item-selected"):a.prev().removeClass("trade-hover-item-selected")},10)}),a._noMemoWithMemoMarked=!1,i.find("button").on("click",function(){var s=i.find(".flag-label .J_Checkbox"),n="",l=[];e.each(s,function(t,i){e(i).prop("checked")&&l.push(1*e(i).val())}),i.find("#noMemoNote").prop("checked")&&i.find("#withMemoNote").prop("checked")?(n="",a._noMemoWithMemoMarked=!0):i.find("#noMemoNote").prop("checked")?n=0:i.find("#withMemoNote").prop("checked")&&(n=3),t.pub("trade.list.sub_module_tradeContainer.memo_sort",{containMemo:n,sellerFlag:l,_t:+new Date})})},_update_sortList:function(t){var i=[t.field||t.timeType||"created",t.order||"asc"].join(".");this.$el.find(".J_TradeList_SortList").find(".trade-hover-item").removeClass("trade-hover-item-selected").filter(function(t,a){return e(a).attr("data-value")==i}).addClass("trade-hover-item-selected");var a=this.$el.find(".order-status-container"),s=this.$el.find(".order-status");if("undefined"==typeof t.others)s.find(".trade-hover-item").removeClass("trade-hover-item-selected"),this.$el.find(".trade-order-item").removeClass("trade-hover-item-selected"),this.$el.find(".J_Checkbox").iCheck("uncheck");else if(""===t.others)s.find(".trade-hover-item").addClass("trade-hover-item-selected"),this.$el.find(".trade-order-item").removeClass("trade-hover-item-selected"),this.$el.find(".J_Checkbox").iCheck("uncheck");else{var n=t.others.split(",");if(n.length){s.find(".trade-hover-item").removeClass("trade-hover-item-selected");for(var l=0;l<n.length;l++)(0==n[l]||3==n[l])&&this.$el.find('.trade-order-item[name="for_hebing"]').addClass("trade-hover-item-selected"),s.find(".J_Checkbox[value="+n[l]+"]").iCheck("check")}}this._change_filter_status(a)},_udpate_product_search_menu:function(e){var t=this.$el.find(".product-info");"undefined"==typeof e.oneItem?(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox.j-onekind").iCheck("uncheck")):""===e.oneItem?this._bothOneMoreProductChecked?(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-item").addClass("trade-hover-item-selected"),t.find(".J_Checkbox.j-onekind").iCheck("check")):(t.find(".trade-all").addClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox.j-onekind").iCheck("uncheck")):(t.find(".trade-product-item").addClass("trade-hover-item-selected"),1==e.oneItem&&t.find("#onekind").iCheck("check"),0==e.oneItem&&t.find("#morethanonekind").iCheck("check"),t.find(".trade-hover-item").removeClass("trade-hover-item-selected")),"undefined"==typeof e.oneItemKind?(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-num-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox.j-onenum").iCheck("uncheck")):""===e.oneItemKind?this._bothOneMoreProductChecked?(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-num-item").addClass("trade-hover-item-selected"),t.find(".J_Checkbox.j-onenum").iCheck("check")):(t.find(".trade-all").addClass("trade-hover-item-selected"),t.find(".trade-product-num-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox.j-onenum").iCheck("uncheck")):(t.find(".trade-product-num-item").addClass("trade-hover-item-selected"),1==e.oneItemKind&&t.find("#onenum").iCheck("check"),0==e.oneItemKind&&t.find("#morethanonenum").iCheck("check"),t.find(".trade-hover-item").removeClass("trade-hover-item-selected")),this._change_filter_status(t.parent())},_udpate_receiver_area_search_menu:function(e){var t=this.$el.find(".J-TradeList-receive-area");t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),""===e.addressType?t.find('[data-value=""]').addClass("trade-hover-item-selected"):"0"===e.addressType?t.find('[data-value="0"]').addClass("trade-hover-item-selected"):"1"===e.addressType&&t.find('[data-value="1"]').addClass("trade-hover-item-selected"),this._change_filter_status(t.parent())},_udpate_print_status_menu:function(e){var t=this.$el.find(".print-status-info");if("undefined"==typeof e.printFilter)t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-print-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else if(""===e.printFilter)t.find(".trade-hover-item").addClass("trade-hover-item-selected"),t.find(".trade-print-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else{var i=[{hashValue:e.expressStatus,toCheckBox:t.find("#expToPrint"),doneCheckBox:t.find("#expPrinted"),affectedEle:t.find('[name="for_expressStatus"]')},{hashValue:e.deliverStatus,toCheckBox:t.find("#senderToPrint"),doneCheckBox:t.find("#senderPrinted"),affectedEle:t.find('[name="for_senderStatus"]')},{hashValue:e.isVerify,toCheckBox:t.find("#orderToCheck"),doneCheckBox:t.find("#orderChecked"),affectedEle:t.find('[name="for_orderCheckStatus"]')},{hashValue:e.isRefund,toCheckBox:t.find("#orderToDrawback"),doneCheckBox:t.find("#orderDrawbacked"),affectedEle:t.find('[name="for_drawBackStatus"]')},{hashValue:e.isHalt,toCheckBox:t.find("#orderToHungup"),doneCheckBox:t.find("#orderHungupped"),affectedEle:t.find('[name="for_hungupStatus"]')},{hashValue:e.isExcep,toCheckBox:t.find("#exceptionPrint"),doneCheckBox:t.find("#exceptionPrinted"),affectedEle:t.find('[name="for_exceptionStatus"]')}];this._updatePrintCheckBox_status(i),t.find(".trade-hover-item").removeClass("trade-hover-item-selected")}this._change_filter_status(t.parent())},_updatePrintCheckBox_status:function(e){if(e.length)for(var t=0;t<e.length;t++)"undefined"!=typeof e[t].hashValue&&(e[t].affectedEle.addClass("trade-hover-item-selected"),""===e[t].hashValue&&e[t].toCheckBox.iCheck("check")&&e[t].doneCheckBox.iCheck("check"),0==e[t].hashValue&&e[t].toCheckBox.iCheck("check"),1==e[t].hashValue&&e[t].doneCheckBox.iCheck("check"))},_udpate_template_search_menu:function(e){var t=this.$el.find(".shipping-info");if("undefined"==typeof e.templateFilter)t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else if(""===e.templateFilter)t.find(".trade-hover-item").addClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else if(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),e.express){t.find(".trade-product-item").addClass("trade-hover-item-selected");for(var i=e.express.split(","),a=0;a<i.length;a++)i[a].indexOf("_1")>-1&&(i[a]="w"+i[a].replace(/_1/,"")),t.find("#"+i[a]).iCheck("check")}this._change_filter_status(t.parent())},_change_filter_status:function(e){e.find(".trade-hover-item-selected").length?e.find(".trade-icon-t").addClass("filter-selected"):e.find(".trade-icon-t").removeClass("filter-selected")},_update_showOrder:function(e){this.$el.find(".J_Trigger_Trade_Orders").prop("checked",1==e?!0:!1)},_update_memoList:function(i){var a=(i.containMemo,'<li class="{classname}" data-value="{value}">{text}</li>'),s=[{value:"",text:"全部"},{value:"flag",text:"旗帜"},{value:"memo",text:"留言备注"}],n=[];e.each(s,function(e,i){var s=""===i.value?"trade-hover-item":"trade-memo-item";if(n.push(a.replace("{classname}",s).replace("{value}",i.value).replace("{text}",i.text)),1===e){var l=t.template.get("template.trade.list.sub_module_tradeContainer_flag_search_temp");n.push(l)}else if(2===e){var d=['<div class="sub-item checkbox-wrapper memo-checkbox-area">','<span class="checkbox-wrapper"><input type="checkbox" id="noMemoNote" value="0" class="J_Checkbox"><label for="noMemoNote">无留言且无备注</label></span>',"<br/>",'<span class="checkbox-wrapper"><input type="checkbox" id="withMemoNote" value="3" class="J_Checkbox"><label for="withMemoNote">有留言或备注</label></span>',"</div>"].join("");n.push(d)}}),n=n.join("")+'<div class="pt_5"><button id="memo-query-btn" class="btn btn-primary">筛选</button></div>';var l=this.$el.find(".J_TradeList_MemoList");l.html(n),l.find(".J_Checkbox").iCheck(),this._remember_memostatus_from_hash(l,i),this._init_events_for_memo(l)},_update_sortStatus:function(t){t=t||this._status_hashs;var i=this.$el.find(".J_TradeStatus_Form"),a=0;i.find('input[type="checkbox"]').iCheck("uncheck"),e.each(["expressStatus","deliverStatus","isVerify","isRefund","isHalt","isExcep"],function(e,s){void 0===t[s]||(""===t[s]?(a+=2,i.find('input[name="'+s+'"]').iCheck("check")):(a+=1,i.find('input[name="'+s+'"]').filter(function(e,i){return i.value==t[s]}).iCheck("check")))}),a===i.find(".J_Checkbox").length&&i.find(".J_TradeStatus_Form_SelectAll").iCheck("check")},update:function(t,i){if(this._status_hashs=e.extend({},t),this._checkAll(!1),t.queryId!==i.queryId||t.timeType!==i.timeType){var a=[];switch(t.timeType){case"pay_time":a=[{text:"按付款时间升序",value:"pay_time.asc"},{text:"按付款时间降序",value:"pay_time.desc"}];break;case"consign_time":a=[{text:"按发货时间升序",value:"consign_time.asc"},{text:"按发货时间降序",value:"consign_time.desc"}];break;default:a=[{text:"按下单时间升序",value:"created.asc"},{text:"按下单时间降序",value:"created.desc"}]}a.push({text:"按订单金额升序",value:"payment.asc"}),a.push({text:"按订单金额降序",value:"payment.desc"}),1==t.queryId&&a.push({text:"按商品名称排序",value:"item_title_first.asc"}),this._render_sortList(a)}this._update_sortList(t),this._update_sortStatus(t),this._update_memoList(t),this._udpate_product_search_menu(t),this._udpate_receiver_area_search_menu(t),this._udpate_print_status_menu(t),this._udpate_template_search_menu(t),this._update_showOrder(t._open),this._render_expressTempList_menu()},update_pages:function(e){if(this.$el&&this.$el.find(".J_Pages").find("select").iSelect("destroy"),e){var i=Math.ceil(e.total/e.page.pageSize),a={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:i,isLastPage:e.page.pageNo==i};this.$el&&this.$el.find(".J_Pages").html(t.template.get("template.trade.list.sub_module_tradeContainer.pages",a)),this.$el.find(".J_Pages").find("select").val(e.page.pageSize+"").iSelect("update")}else this.$el.find(".J_Pages").html("")},update_checked:function(e){this.$el.find(".J_Select_All").prop("checked",e)},get_trade_container:function(){return this.$el.find(".J_TradeList_Body")},_event_bind:function(){var a=this;this.$el.find(".J_Select_All").on("click",this._fn_event_click_selectAll_proxy=e.proxy(function(i){var a=e(i.target).prop("checked");this.$el.find(".J_Select_All").filter(function(e,t){return t!==i.target}).prop("checked",a),t.pub("trade.list.sub_module_tradeContainer.select_all",a)},this)),this.$el.on("click",".J_TradeList_SortList .trade-hover-item, .order-status .trade-hover-item ",function(i){if(!e(i.target).hasClass("trade-hover-item-selected")){var a=e(i.target).attr("data-value").split(".");if("others"==a[0]){var s={};if("all"==a[1])s={others:[],order:"desc"};else{var n=1*e(i.target).attr("data-type"),l=[];l[0]=n,s={others:l,order:"desc"}}t.pub("trade.list.sub_module_tradeContainer.order_sort",s)}else t.pub("trade.list.sub_module_tradeContainer.order_sort",{field:a[0],order:a[1],others:void 0})}}),this.$el.on("click",".product-info .trade-hover-item ",function(i){if(!e(i.target).hasClass("trade-hover-item-selected")){a._bothOneMoreProductChecked=!1;var s=e(i.target).data("value");s?t.pub("trade.list.sub_module_tradeContainer.product_count",{field:"item_title_first",order:"asc",_t:+new Date}):t.pub("trade.list.sub_module_tradeContainer.product_count",{oneItem:"",_t:+new Date})}}),this.$el.on("click",".print-status-info .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.status_search",{printFilter:"",_t:+new Date})}),this.$el.on("click",".shipping-info .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.template_search",{templateFilter:"",express:void 0,_t:+new Date})}),this.$el.on("click",".J-TradeList-receive-area .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.receiver_area_search",{addressType:e(i.target).data("value"),_t:+new Date})}),this.$el.find(".J_TradeStatus_List_Container").on("mouseenter",e.proxy(function(){this._update_sortStatus()},this)),this.$el.on("submit",".J_TradeStatus_List_Container form",e.proxy(function(a){a.preventDefault();var s=i.getData(a.currentTarget);for(var n in s)e.isArray(s[n])&&(s[n]="");s._t=(new Date).getTime();var l=e.extend({printFilter:1,expressStatus:void 0,deliverStatus:void 0,isVerify:void 0,isRefund:void 0,isHalt:void 0,isExcep:void 0},s);t.pub("trade.list.sub_module_tradeContainer.status_search",l)},this)),this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").on("ifClicked",e.proxy(function(t){var i=!t.currentTarget.checked;setTimeout(e.proxy(function(){this.$el&&this.$el.find(".J_TradeStatus_List").find(".J_Checkbox").iCheck(i?"check":"uncheck")},this),1)},this)),this.$el.find(".J_TradeStatus_List").find(".J_Checkbox").on("ifClicked",e.proxy(function(t){var i=!t.currentTarget.checked;setTimeout(e.proxy(function(){if(this.$el)if(i){var e=this.$el.find(".J_TradeStatus_List").find(".J_Checkbox");e.length===e.filter(function(e,t){return t.checked===!0}).length&&this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").iCheck("check")}else this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").iCheck("uncheck")},this),1)},this)),this.$el.on("click",".J_TradeList_MemoList .trade-hover-item",function(i){if(!e(i.target).hasClass("trade-hover-item-selected")){var a=e(i.target).attr("data-value");t.pub("trade.list.sub_module_tradeContainer.memo_sort",{containMemo:a,sellerFlag:void 0,_t:+new Date})}}),this.$el.find(".J_Trigger_Trade_Orders").on("click",this._fn_event_click_triggerTradeOrders=function(i){var a=e(i.target).prop("checked");t.pub("trade.list.sub_module_tradeContainer.show_orders",a)}),this.$el.find(".J_Pages").on("click.page_no","a.module-trade-pages-pageNo",e.proxy(function(i){t.pub("trade.list.sub_module_tradeContainer.change_page_no",e(i.target).attr("data-page"))},this)),this.$el.find(".J_Pages").on("focusin.page_form",".input-small",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Submit_Container").stop().animate({width:44})},this)),this.$el.find(".J_Pages").on("focusout.page_form",".input-small",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(e.proxy(function(){this.$el.find(".J_Submit_Container").stop().animate({width:0})},this),200)},this)),this.$el.find(".J_Pages").on("click.submit",".J_Submit",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Submit_Container").stop()},this)),this.$el.find(".J_Pages").on("submit.page_form","form",e.proxy(function(i){i.preventDefault();var a=e(i.target).find("input"),s=e.trim(a.val()),n=a.attr("data-max")-0;return""===s?!1:s.match(/^\d+$/)?s-0>n?(e.dialog.alert("超出最大页数！"),!1):(t.pub("trade.list.sub_module_tradeContainer.change_page_no",s-0),!1):!1},this)),this.$el.find(".J_Pages").on("change.select","select",function(i){t.pub("trade.list.sub_module_tradeContainer.change_page_size",e(i.target).val())}),this._init_sortList_event(this.$el.find(".order-status")),this._init_productCount_event(this.$el.find(".product-info")),this._init_printStatus_event(this.$el.find(".print-status-info"))},_event_unbind:function(){this.$el.find(".J_Select_All").off("ifClicked",this._fn_event_click_selectAll_proxy),this.$el.off("click",".J_TradeList_SortList .trade-hover-item"),this.$el.off("click",".J_TradeList_MemoList .trade-hover-item"),this.$el.find(".J_Trigger_Trade_Orders").off("ifClicked",this._fn_event_click_triggerTradeOrders),this.$el.find(".J_Pages").off("click.page_no"),this.$el.find(".J_Pages").off("submit.page_form"),this.$el.find(".J_Pages").off("change.select"),this.$el.find(".J_Pages").off("focusin.page_form"),this.$el.find(".J_Pages").off("focusout.page_form"),this.$el.find(".J_Pages").off("click.submit"),this.$el.find(".J_TradeStatus_List_Container").off("mouseenter"),this.$el.off("submit",".J_TradeStatus_List form"),this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").off("ifClicked"),this.$el.find(".J_TradeStatus_List").find(".J_Checkbox").off("ifClicked")},_fn_ctrl_set_statusHash:function(){},init:function(){},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Submit_Container").stop(),this._event_unbind(),this._status_hashs={},this.$el.empty().remove(),this.$el=null)}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-trade-taskbar-warp">','<div class="module-trade-taskbar">','<div class="module-trade-taskbar-inner J_Taskbar"></div>',"</div>","</div>"],a=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<a class="J_Click taskbar-operation-area" data-name="PutoutExcel">导出Excel表格</a>',"</div>"],s=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_logistics">批量填写物流</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<span class="taskbar-operation-send-wrap">','<a  class="J_Click taskbar-operation-send" data-name="logistics_offline_send">发货</a>','<span class="trade-hover mr_10 taskbar-operation-send-menu">','<span class="trade-hover-text pl_5"><span class="trade-hover trade-icon-more">','<ul class="trade-hover-bd trade-hover-menu" style="bottom:100%;top:auto;color:#336699;left:-38px;">','<li class="trade-hover-item J_Click" data-name="logistics_offline_send"><span class="default-check"></span>自己联系物流</li>','<li class="trade-hover-item J_Click" data-name="logistics_online_send">在线下单(支持货到付款)</li>','<li class="trade-hover-item J_Click" data-name="logistics_dummy_send">无需物流(虚拟)</li>',"</ul>","</span></span>","</span>","</span>",'<a class="J_Click taskbar-operation-area" data-name="scan_to_send_goods">扫描验单发货</a>','<a class="J_Click taskbar-operation-area" data-name="manual_merge_orders_by_wangwangNo">手工合单</a>','<span class="trade-hover mr_10 taskbar-operation-area">','<span class="trade-hover-text pl_5"><a style="margin-right:3px;">修改打印\\审核状态</a><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="bottom:100%;top:auto;color:#336699;">','<li class="trade-hover-item J_Click" data-name="print_express_undo" style="padding:4px 30px;">快递单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_express_end" style="padding:4px 30px;">快递单已打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_undo" style="padding:4px 30px;">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_end" style="padding:4px 30px;">发货单已打印</li>','<li class="trade-hover-item J_Click" data-name="trade_verify" style="padding:4px 30px;">订单已审核</li>','<li class="trade-hover-item J_Click" data-name="trade_verify_cancel" style="padding:4px 30px;">订单未审核</li>',"</ul>","</span>",'<span class="trade-hover mr_10 taskbar-operation-area">','<span class="trade-hover-text pl_5"><a style="margin-right:3px;">修改挂起状态</a><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="bottom:100%;top:auto;color:#336699;">','<li class="trade-hover-item J_Click" data-name="trade_batch_halt" style="padding:4px 30px;">订单挂起</li>','<li class="trade-hover-item J_Click" data-name="trade_batch_halt_cancel" style="padding:4px 30px;">取消挂起</li>',"</ul>","</span>",'<a class="J_Click taskbar-operation-area" data-name="PutoutExcel">导出Excel表格</a>','<a class="J_Click taskbar-operation-area" data-name="trade_fetch">拿货单打印</a>',"</div>"],n=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_logistics">批量填写物流</a>','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<span class="trade-hover mr_10 taskbar-operation-area">','<span class="trade-hover-text pl_5"><a style="margin-right:3px;">修改打印状态</a><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="bottom:100%;top:auto;color:#336699;">','<li class="trade-hover-item J_Click" data-name="print_express_undo" style="padding:4px 30px;">快递单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_express_end" style="padding:4px 30px;">快递单已打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_undo" style="padding:4px 30px;">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_end" style="padding:4px 30px;">发货单已打印</li>',"</ul>","</span>",'<a class="J_Click taskbar-operation-area" data-name="PutoutExcel">导出Excel表格</a>',"</div>"],l=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="resend_product">重新发货</a>','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<span class="trade-hover mr_10 taskbar-operation-area">','<span class="trade-hover-text pl_5"><a style="margin-right:3px;">修改打印状态</a><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="bottom:100%;top:auto;color:#336699;">','<li class="trade-hover-item J_Click" data-name="print_express_undo" style="padding:4px 30px;">快递单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_express_end" style="padding:4px 30px;">快递单已打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_undo" style="padding:4px 30px;">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_end" style="padding:4px 30px;">发货单已打印</li>',"</ul>","</span>",'<a class="J_Click taskbar-operation-area" data-name="PutoutExcel">导出Excel表格</a>',"</div>"],d=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<a class="J_Click taskbar-operation-area" data-name="PutoutExcel">导出Excel表格</a>',"</div>"],o=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<a class="J_Click taskbar-operation-area" data-name="PutoutExcel">导出Excel表格</a>',"</div>"];t.template.addTemp("template.trade.list.sub_module_taskbar",i),t.template.addTemp("template.trade.list.sub_module_taskbar_1",s),t.template.addTemp("template.trade.list.sub_module_taskbar_3",n),t.template.addTemp("template.trade.list.sub_module_taskbar_4",l),t.template.addTemp("template.trade.list.sub_module_taskbar_6",d),t.template.addTemp("template.trade.list.sub_module_taskbar_8",o),t.template.addTemp("template.trade.list.sub_module_taskbar_0",a)}(jQuery,RayCloud),function(e,t){var i={name:"trade.list.sub_module_taskbar",_template_name:"template.trade.list.sub_module_taskbar",renderTo:function(i){this.$el||(this.$el=e(t.template.get(this._template_name)).appendTo(i),this._event_bind())},_get_tpl_id:function(e){return"undefined"==typeof e?1:(e=parseInt(e),1!=e&&6!=e&&4!=e&&3!=e&&8!=e?0:e)},_update_taskbar:function(e){var i=this._get_tpl_id(e.queryId);this.$el.find(".J_Taskbar").empty().html(t.template.get(this._template_name+"_"+i))},_event_bind:function(){this.$el.on("click.task",".J_Click",function(i){i.preventDefault(),t.pub("trade.list.sub_module_taskbar."+e(i.target).attr("data-name"),i)})},_event_unbind:function(){this.$el.off("click.task")},update:function(e,t){e.queryId!=t.queryId&&this._update_taskbar(e)},init:function(){},getContainer:function(){},destroy:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-trade-wrap">','<div id="module-trade-top">','<div id="module-trade-topBar" class="J_module-trade-topBar">','<div class="module-trade-tab J_SubModule_Tab trade-handler-navs"></div>','<div class="module-trade-tab J_SubModule_Tab custom-filter-query"></div>','<div class="module-trade-searchBar-container J_SubModule_Query"></div>',"</div>",'<div style="position:relative;width:100%;border-top:1px solid #a3abb4;height:0px;font-size:0;"><div class="module-trade-searchBar-btn"><b></b></div></div>','<div class="J_SubModule_TradeContainer"></div>',"</div>",'<div class="module-trade-list J_TradeList_Body"></div>','<div class="J_SubModule_Taskbar"></div>',"</div>"],a=['<div class="module-trade-list-item module-list-item-inpage" uniqueid=@@uniqueid taobaoid="{{taobaoId}}">','<div class="J_Tbody">','<div class="module-trade-list-item-row1">','<div class="cell-box area-checkbox">','<span class="check"><input type="checkbox" data-name="check_select_item" name="" class="J_Checkbox"></span>','<div class="mr_5"><span class="trade-icon-close J_Trigger_Show_Orders J_Click" data-name="trigger_show_orders"></span></div>',"</div>",'<div class="cell-box trade-index-text">{{index}}</div>','<div class="cell-box order-time">',"<div>{{sid}}</div>",'<span class="trade-icon-d50000 J_Tip" title="{{shopName:htmlFilter}}" act-if="_show_shop_name == 1">{{shopFlag:htmlFilter}}</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 2">合</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 4">合</span>','<span class="trade-icon-a12525" act-if="mergeSplitType == 5">拆</span>','<span class="canmerged-order" act-if="status == SELLER_CONSIGNED_PART && mergeSplitType == 1">','<span class="trade-icon-1b6fd7 trade-icon-canmerged" data-name="trade-icon-canmerged">!</span>','<span class="canmerged-order-help-tip">此买家有{{checkManualMergeCount}}笔未合并的订单，<a class="J_Click" data-name="manual_merge_orders">手工合并</a><a class="canmerged-close-icon" data-name="canmerged-close-icon">&times;</a></span>',"</span>",'<span class="canmerged-order" act-if="status == WAIT_SELLER_SEND_GOODS && mergeSplitType == 1">','<span class="trade-icon-1b6fd7 trade-icon-canmerged" data-name="trade-icon-canmerged">!</span>','<span class="canmerged-order-help-tip">此买家有{{checkManualMergeCount}}笔未合并的订单，<a class="J_Click" data-name="manual_merge_orders">手工合并</a><a class="canmerged-close-icon" data-name="canmerged-close-icon">&times;</a></span>',"</span>",'<span class="trade-icon-ff6600" act-if="toShowTradeMessage == 1">{{tradeMessage}}</span>','<span class="trade-icon-627906 J_Tip" title="分销订单" act-if="type == fenxiao">分</span>','<span class="trade-icon-21877A J_Tip" title="预售订单" act-if="type == step">预</span>','<span class="trade-icon-653788 J_Tip" title="货到付款" act-if="type == cod">COD</span>',"</div>",'<div class="cell-box product-count">','<span class="product-total-count">{{itemCount}}</span>','<a class="J_Click" data-name="trigger_show_orders">({{itemKindCount}}种)</a>',"</div>",'<div class="cell-box buyer-info-wrapper">',"<div>{{receiverName}}</div>",'<span class="operate-menu-for-wangwang">','<a href="javascript:void(0);" class="user-nickname">',"{{buyerNick}}","</a>",'<a target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid={{_buyerWangwang}}&siteid=cntaobao&status=2&charset=utf-8">','<img border="0" width="16" src="http://amos.alicdn.com/online.aw?v=2&uid={{_buyerWangwang}}&site=cntaobao&s=2&charset=utf-8" alt=" " />',"</a>",'<span class="menu-for-wangwang">','<a class="J_Click" data-name="copy-wangwang-inmenu">复制旺旺</a>','<a class="J_Click" data-name="open-wangwang-inmenu" target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid={{_buyerWangwang}}&siteid=cntaobao&status=2&charset=utf-8">呼起旺旺</a>','<a class="J_Click" data-name="merge-order-inmenu" act-if="status == WAIT_SELLER_SEND_GOODS" wangwangNo="{{buyerNick}}">手工合单</a>',"</span>","</span>","</div>",'<div class="cell-box express-status">','<span class="J_expressStatus">','<span class="trade-icon-1b6fd7 J_Tip" act-if="expressStatus == 1" data-title="快递单已打印">快</span>','<span class="trade-icon-818181 J_Tip" act-if="expressStatus == 0" data-title="快递单未打印">快</span>',"</span>",'<span class="J_deliverStatus">','<span class="trade-icon-3d900a J_Tip" act-if="deliverStatus == 1" data-title="发货单已打印">发</span>','<span class="trade-icon-818181 J_Tip" act-if="deliverStatus == 0" data-title="发货单未打印">发</span>',"</span>",'<span class="J_isVerify">','<span class="trade-icon-dc398a J_Tip" act-if="isVerify == 1" data-title="订单已审核">审</span>','<span class="trade-icon-818181 J_Tip" act-if="isVerify == 0" data-title="订单未审核">审</span>',"</span>","<br>",'<span class="J_isExcep"><span class="trade-icon-22b7ae J_Tip" act-if="isExcep == 1" data-title="淘宝异常订单">异</span></span>','<span class="J_isHalt"><span class="trade-icon-7327db J_Tip" act-if="isHalt == 1" data-title="挂起订单">挂</span></span>','<span class="isRefund">','<span class="trade-icon-a1055d J_Tip" act-if="isRefund == 1" data-title="退款订单">退</span>',"</span>","</div>",'<div class="cell-box product-receiver-destination J_Tip" data-title="{{receiverState}}{{receiverCity}}{{receiverDistrict}}{{receiverAddress}}">','<span class="receiver-short-address J_Click" data-name="trigger_show_orders">{{receiverState}}{{receiverCity}}{{receiverDistrict}}</span>','<span class="trade-icon-ff9000 receiver-backlandkey J_Click" data-name="trigger_show_orders" act-if="backlandKey != ">{{backlandKey}}</span>',"</div>",'<div class="cell-box J_Express_Container">',"@@expressUI","</div>",'<div class="cell-box J_messageMemos">',"@@MemoUI","</div>",'<div class="cell-box J_Operater">',"@@operateUI","</div>","</div>",'<div class="module-trade-list-item-row3" style="display: none;">','<div class="module-trade-list-item-row2">','<span style="padding:0;">','<div class="cell-box buyer-info-wrapper">','<span class="J_Shipping_Address">@@addressUI</span>','<a class="ml_15 inline-block J_Click" data-name="edit_shipping_address" act-if="status == WAIT_SELLER_SEND_GOODS">修改</a>',"</div>","</span>","</div>",'<div class="module-trade-list-items-wrap">','<div class="module-trade-list-items">','<table class="J_Orders_List">',"@@orderUI","</table>","</div>","</div>","</div>","</div>","</div>"],s=['<div class="ft-center  pd_30">很抱歉！没有符合条件的订单，请尝试其他条件</div>'],n=['<div class="ft-center  pd_30">很抱歉！没有符合条件的订单，请尝试其他条件</div>'],l=['收件人：{{receiverName}}<b>|</b><span act-if="_has_receiverMobile == 1">手机：{{receiverMobile}}</span><span act-if="_has_receiverMobile == 0">固话：{{receiverPhone}}</span><b>|</b>','<span class="detailed-address">详细地址：{{receiverState}} {{receiverCity}} {{receiverDistrict}} {{receiverAddress}}，{{receiverZip}}</span>'],d=["<div>快递模板：",'<span act-if="status == WAIT_SELLER_SEND_GOODS">','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 0" data-name="change_express" data-value="{{expressTemplateId}}">{{expressTemplateName}}</a>','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 1" data-name="change_express" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</a>','<span class="">','<span data-name="address_reachable" style="cursor: pointer" class="ml_5 trade-icon-common trade-icon-doubt J_canDelivered J_Tip" act-if="canDelivered == 0 || canDelivered == 2" data-title="此物流可能无法送达"></span>','<span data-name="address_reachable" style="cursor: pointer" class="ml_5 trade-icon-common trade-icon-right J_canDelivered J_Tip" act-if="canDelivered == 1" data-title="此物流可达"></span>',"</span>","</span>",'<span act-if="status == SELLER_CONSIGNED_PART">','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 0" data-name="change_express" data-value="{{expressTemplateId}}">{{expressTemplateName}}</a>','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 1" data-name="change_express" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</a>','<span class="">','<span data-name="address_reachable" style="cursor: pointer" class="ml_5 trade-icon-common trade-icon-doubt J_canDelivered J_Tip" act-if="canDelivered == 0 || canDelivered == 2" data-title="此物流可能无法送达"></span>','<span data-name="address_reachable" style="cursor: pointer" class="ml_5 trade-icon-common trade-icon-right J_canDelivered J_Tip" act-if="canDelivered == 1" data-title="此物流可达"></span>',"</span>","</span>",'<span act-if="status == WAIT_BUYER_CONFIRM_GOODS" class="goods-express-name">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>",'<span act-if="status == WAIT_BUYER_PAY" class="goods-express-name">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>",'<span act-if="status == TRADE_FINISHED" class="goods-express-name">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>",'<span act-if="status == TRADE_CLOSED" class="goods-express-name">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>",'<span act-if="status == TRADE_CLOSED_BY_TAOBAO" class="goods-express-name">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>","</div>",'<div act-if="status == WAIT_SELLER_SEND_GOODS">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="{{outSid}}" data-value="{{outSid}}" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid" data-name="item-save-outid">保存</span></span>','<span act-if="_has_outSid == 0" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="" data-value="" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid" data-name="item-save-outid">保存</span></span>','<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_update_express_id" data-title="智能填写运单号"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small" value="{{outSid}}" data-value="{{outSid}}" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly><a class="m-outsid-callback-btn j-outsid-callback-btn J_Tip" href="javascript:;" data-title="回收单号"></a></span>','<span act-if="_has_outSid == 0" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small" value="点击获取单号" data-value="" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly></span>','<span class="btn btn-small btn-mini ml_5 J_Click" style="float: right;margin-right: -18px;" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>",'<div act-if="status == SELLER_CONSIGNED_PART">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="{{outSid}}" data-value="{{outSid}}" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid" data-name="item-save-outid">保存</span></span>','<span act-if="_has_outSid == 0" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="" data-value="" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid" data-name="item-save-outid">保存</span></span>','<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_update_express_id" data-title="智能填写运单号"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small" value="{{outSid}}" data-value="{{outSid}}" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly><a class="m-outsid-callback-btn j-outsid-callback-btn J_Tip" href="javascript:;" data-title="回收单号"></a></span>','<span act-if="_has_outSid == 0" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small" value="点击获取单号" data-value="" data-name="create_wlb_no" style="width:126px;font-size:12px;cursor:pointer;" readonly></span>','<span class="btn btn-small btn-mini ml_5 J_Click" style="float: right;margin-right: -18px;" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>",'<div act-if="status == WAIT_BUYER_CONFIRM_GOODS">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>",'<div act-if="status == WAIT_BUYER_PAY">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>",'<div act-if="status == TRADE_FINISHED">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>",'<div act-if="status == TRADE_CLOSED">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>",'<div act-if="status == TRADE_CLOSED_BY_TAOBAO">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>"],o=["<div>留言：",'<span act-loop="message in messageMemos">','<span act-if="message._has_buyerMessage == 1" class="ml_5 trade-icon-liuyan J_Tip J_Click" data-name="trigger_show_orders" data-title="{{message._buyerMessage}}"></span>',"</span>","</div>",'<div class="message-note"><span class="note-wording">备注：</span>','<span act-loop="message in messageMemos">','<span act-if="message._has_sellerFlag == 1" flag-data-tid="{{message.tid}}" class="ml_5 trade-icon-flag trade-icon-flag-{{message.sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="message._has_sellerFlag == 0" flag-data-tid="{{message.tid}}" class="ml_5 trade-icon-flag flag-place-holder"></span>','<span class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" data-name="trigger_show_orders" note-data-tid="{{message.tid}}" act-if="message._has_sellerMemo == 1" data-title="{{message._sellerMemo:htmlFilter}}"></span>','<span class="ml_5 message-memo memo-place-holder J_Tip J_Click" data-name="trigger_show_orders" note-data-tid="{{message.tid}}" act-if="message._has_sellerMemo == 0" data-title=""></span>',"</span>","</div>"],r=['<div act-if="status == WAIT_SELLER_SEND_GOODS">','<span class="operation-pre-print">','<a class="J_Click" data-name="print">预览\\打印</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 0 && type != cod" data-name="logistics_offline_send">自己联系物流发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 0" data-name="logistics_online_send">在线下单发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 1" data-name="logistics_online_confirm">确认在线发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 1" data-name="logistics_online_cancel">取消在线发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 0 && type != cod" data-name="logistics_dummy_send">无需物流发货</li>','<li class="trade-hover-item J_Click" act-if="isHalt == 0" data-name="trade_halt">订单挂起</li>','<li class="trade-hover-item J_Click" act-if="isHalt == 1" data-name="trade_halt_cancel">取消挂起</li>','<li class="trade-hover-item J_Click" act-if="expressStatus == 0" data-name="print_express_end">快递单已打印</li>','<li class="trade-hover-item J_Click" act-if="expressStatus == 1" data-name="print_express_undo">快递单未打印</li>','<li class="trade-hover-item J_Click" act-if="deliverStatus == 0" data-name="print_deliver_end">发货单已打印</li>','<li class="trade-hover-item J_Click" act-if="deliverStatus == 1" data-name="print_deliver_undo">发货单未打印</li>','<li class="trade-hover-item J_Click" act-if="isVerify == 0" data-name="trade_verify">订单已审核</li>','<li class="trade-hover-item J_Click" act-if="isVerify == 1" data-name="trade_verify_cancel">订单未审核</li>','<li class="trade-hover-item J_Click" data-name="trade_sync_single">同步此订单</li>',"</ul>","</span>","</span>",'<span act-if="canConfirmSend == 1" class="trade-icon-ff9000 trade-online-sending" style="width:auto;">在线发货</span>',"</div>",'<div act-if="status == SELLER_CONSIGNED_PART">','<span class="operation-pre-print">','<a class="J_Click" data-name="print">预览\\打印</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 0 && type != cod" data-name="logistics_offline_send">自己联系物流发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 0" data-name="logistics_online_send">在线下单发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 1" data-name="logistics_online_confirm">确认在线发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 1" data-name="logistics_online_cancel">取消在线发货</li>','<li class="trade-hover-item J_Click" act-if="canConfirmSend == 0 && type != cod" data-name="logistics_dummy_send">无需物流发货</li>','<li class="trade-hover-item J_Click" act-if="isHalt == 0" data-name="trade_halt">订单挂起</li>','<li class="trade-hover-item J_Click" act-if="isHalt == 1" data-name="trade_halt_cancel">取消挂起</li>','<li class="trade-hover-item J_Click" act-if="expressStatus == 0" data-name="print_express_end">快递单已打印</li>','<li class="trade-hover-item J_Click" act-if="expressStatus == 1" data-name="print_express_undo">快递单未打印</li>','<li class="trade-hover-item J_Click" act-if="deliverStatus == 0" data-name="print_deliver_end">发货单已打印</li>','<li class="trade-hover-item J_Click" act-if="deliverStatus == 1" data-name="print_deliver_undo">发货单未打印</li>','<li class="trade-hover-item J_Click" act-if="isVerify == 0" data-name="trade_verify">订单已审核</li>','<li class="trade-hover-item J_Click" act-if="isVerify == 1" data-name="trade_verify_cancel">订单未审核</li>','<li class="trade-hover-item J_Click" data-name="trade_sync_single">同步此订单</li>',"</ul>","</span>","</span>",'<span act-if="canConfirmSend == 1" class="trade-icon-ff9000 trade-online-sending" style="width:auto;">在线发货</span>',"</div>",'<div act-if="status == WAIT_BUYER_CONFIRM_GOODS">','<span class="operation-pre-print">','<a class="ml_10 J_Click" data-name="logistics_info">查看物流</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li class="trade-hover-item J_Click" data-name="print">预览\\打印</li>','<li class="trade-hover-item J_Click" data-name="resend_product">重新发货</li>','<li class="trade-hover-item J_Click" data-name="delay_confirm">延长收货时间</li>','<li class="trade-hover-item J_Click" act-if="expressStatus == 0" data-name="print_express_end">快递单已打印</li>','<li class="trade-hover-item J_Click" act-if="expressStatus == 1" data-name="print_express_undo">快递单未打印</li>','<li class="trade-hover-item J_Click" act-if="deliverStatus == 0" data-name="print_deliver_end">发货单已打印</li>','<li class="trade-hover-item J_Click" act-if="deliverStatus == 1" data-name="print_deliver_undo">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="trade_sync_single">同步此订单</li>',"</ul>","</span>","</span>",'<span act-if="canConfirmSend == 1" class="trade-icon-ff9000 trade-online-sending" style="width:auto;margin-left:10px;">在线发货</span>','<span act-if="canConfirmSend == 2" class="trade-icon-ff9000 trade-online-sending" style="width:auto;margin-left:10px;">无需物流</span>',"</div>",'<div act-if="status == WAIT_BUYER_PAY" class="operation-pre-print">','<a class="ml_10 J_Click" data-name="trade_close">关闭订单</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li class="trade-hover-item J_Click" data-name="trade_sync_single">同步此订单</li>','<li class="trade-hover-item J_Click" data-name="trade_postage_update">修改邮费</li>',"</ul>","</span>","</div>",'<div act-if="status == TRADE_FINISHED" class="operation-pre-print">','<a class="ml_10 J_Click" data-name="logistics_info">查看物流</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li class="trade-hover-item J_Click" data-name="print">预览\\打印</li>','<li class="trade-hover-item J_Click" data-name="trade_sync_single">同步此订单</li>',"</ul>","</span>","</div>"],p=['<tr class="order-temp" data-tid="{{tid}}">','<td class="order-colum">','<div class="cell-box ft-center">','<div class="fc_999">订单号：<a class="J_Trade_Detail" data-taobaoId="{{taobaoId}}" data-tid="{{tid}}">{{tid}}</a></div>','<div class="order-item-time">{{_sort_time}}</div>','<span act-if="status == WAIT_SELLER_SEND_GOODS"><br><a act-if="mergeSplitType == 2" class="J_Click" data-name="cancel_merge" data-tid="{{tid}}" data-taobaoId="{{taobaoId}}" style="color:#ff9000;">取消合并</a></span>','<span act-if="status == SELLER_CONSIGNED_PART"><br><a act-if="mergeSplitType == 2" class="J_Click" data-name="cancel_merge" data-tid="{{tid}}" data-taobaoId="{{taobaoId}}" style="color:#ff9000;">取消合并</a></span>','<span act-if="status == WAIT_SELLER_SEND_GOODS"><br><a act-if="mergeSplitType == 4" class="J_Click" data-name="cancel_merge" data-tid="{{tid}}" data-taobaoId="{{taobaoId}}" style="color:#ff9000;">取消合并</a></span>','<span act-if="status == SELLER_CONSIGNED_PART"><br><a act-if="mergeSplitType == 4" class="J_Click" data-name="cancel_merge" data-tid="{{tid}}" data-taobaoId="{{taobaoId}}" style="color:#ff9000;">取消合并</a></span>','<span act-if="status == WAIT_SELLER_SEND_GOODS"><br><a act-if="mergeSplitType == 5" class="J_Click" data-name="cancel_split" data-tid="{{tid}}" data-taobaoId="{{taobaoId}}" style="color:#a12525;">取消拆单</a></span>','<span act-if="status == SELLER_CONSIGNED_PART"><br><a act-if="mergeSplitType == 5" class="J_Click" data-name="cancel_split" data-tid="{{tid}}" data-taobaoId="{{taobaoId}}" style="color:#a12525;">取消拆单</a></span>',"</div>","</td>",'<td class="order-colum item-snapshot">','<div class="item-snapshot-itemname" act-loop="order in list">','<div class="cell-box-wrapper">','<div class="cell-box order-im">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank"><img src="{{order.picPath}}_80x80.jpg"></a>',"</div>",'<div class="cell-box product-name">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank">{{order.title}}</a>','<div act-if="order._has_sku == 1" class="prod-properties prod-properties-{{order.oid}}">{{order.skuPropertiesName}}</div>','<div act-if="order._has_outerId == 1" class="seller-code">商家编码：{{order._outerId}}</div>',"</div>",'<div class="cell-box module-trade-list-item-price">','<div class="list-order-num">{{order.num}}</div>','<span class="list-order-price">&#165;{{order.price}}</span>',"</div>","</div>",'<div class="cell-box item-order-status">',"{{order.status_name}}",'<div act-if="maybeShowChaiMessage == 1"><a act-if="{{order:length}}>=2 && mergeSplitType != 2 && mergeSplitType != 4" class="J_Click" data-name="split" data-nametype="sku" data-tid="{{tid}}" data-oid="{{order.oid}}"  data-sysTid="{{sysTid}}" data-taobaoId="{{taobaoId}}" style="color:#a12525;">按SKU拆单</a></div>','<div act-if="maybeShowChaiMessage == 1" act-if="order.isRefund == 0 && isExcep == 0 && isHalt == 0" act-if="order.status == WAIT_SELLER_SEND_GOODS"><a act-if="order.num >= 2 && mergeSplitType != 2 && mergeSplitType != 4" class="J_Click" data-name="split" data-nametype="num" data-tid="{{tid}}" data-oid="{{order.oid}}"  data-sysTid="{{sysTid}}" data-taobaoId="{{taobaoId}}" style="color:#a12525;">按数量拆单</a></div>','<div act-if="order.status == WAIT_BUYER_CONFIRM_GOODS"><a class="J_Click" data-name="logistics_info" data-tid="{{order.tid}}" data-taobaoId="{{order.taobaoId}}" data-oid="{{order.oid}}">查看物流</a></div>','<div act-if="order.isRefund == 1"><a target="_blank" href="http://refund.taobao.com/view_refund_detail.htm?bizOrderId={{order.oid}}">{{order._refundStatus}}</a></div>',"</div>","</div>","</td>",'<td class="order-colum order-note">','<div class="cell-box">','<div class="J_Trade_Amount" act-if="_has_paymentDisplay == 1">金额<span class="g_alert_information J_iTip" data-title="订单金额=商品总价+邮费-优惠总额" title=""></span>：{{paymentDisplay}}</div>','<div><span class="label-leavemessage">留言：</span>','<span act-if="_has_buyerMessage == 1" style="word-wrap: break-word;">{{buyerMessage}}</span>',"</div>",'<div><span class="note-wording">备注：</span>','<span act-if="_has_sellerFlag == 1" class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}}"></span>','<span act-if="_has_sellerMemo == 1" style="word-wrap: break-word;" class="msg-seller-memo">{{sellerMemo}}</span>','<span class="ml_5 trade-icon-edit J_Click" data-name="edit_messageMemos" data-tid="{{tid}}"></span>',"</div>","</div>","</td>","</tr>"];
t.template.addTemp("template.control.trade.view.shipping_address_list",l),t.template.addTemp("template.control.trade.view.express",d),t.template.addTemp("template.control.trade.view.messageMemos",o),t.template.addTemp("template.control.trade.view.operater",r),t.template.addTemp("template.control.trade.view.orders",p),t.template.addTemp("template.trade.list",i),t.template.addTemp("template.trade.list.list_item",a),t.template.addTemp("template.trade.list.trade_error",s),t.template.addTemp("template.trade.list.trade_no_result",n)}(jQuery,RayCloud),function(e,t){var i=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),a=t.modules.get("trade.list.sub_module_tab"),s=t.modules.get("trade.list.sub_module_query"),n=t.modules.get("trade.list.sub_module_tradeContainer"),l=t.modules.get("trade.list.sub_module_taskbar"),d=t.controls.get("control.trade.list_tab"),o=t.controls.get("control.trade"),r=t.controls.get("control.trade.collection");Reachable=t.controls.get("control.trade.module.reachable"),PrintPt=t.controls.get("control.print_pt");var p=t.controls.get("control.trade.module.common_express.select"),c=t.controls.get("control.trade.module.common_express.edit"),_=t.controls.get("control.trade.module.shipping_address.edit"),m=t.controls.get("control.trade.module.seller_memoflag.merge.edit"),u=t.controls.get("control.trade.module.express.edit"),h=t.controls.get("control.trade.module.print"),f=t.controls.get("control.trade.module.memoflag.edit"),v=t.controls.get("control.trade.module.logistics_info");Module_CLOSE_TRADE=t.controls.get("control.trade.module.trade.close"),Module_Trade_Sync_Single=t.controls.get("control.trade.module.trade.sync_single"),Module_Manual_Merge_Order=t.controls.get("control.trade.module.manual.merge.orders"),Module_Delay_Confirm=t.controls.get("control.trade.module.delay_confirm"),Module_Postage_Update=t.controls.get("control.trade.module.trade.postage_update"),Module_Scan_Send_Goods=t.controls.get("control.trade.module.scan.send.goods");var g=t.controls.get("control.DynamicList"),b=t.controls.get("control.trade.searchlist.customFilter"),y={name:"trade.list",depend:"trade",_elm_dom_root:"#main",_elm_template_name:"template.trade.list",_selected_item_ids:[],_TRADE_TYPE:{COD:"cod"},_fn_dom_render:function(i){if(!this._elm_dom_container){var d=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root);this._elm_dom_tradeList_container=d.find(".J_TradeList_Body");var o=d.find(".trade-handler-navs"),r=(d.find(".custom-filter-query"),d.find(".J_SubModule_Query")),p=d.find(".J_SubModule_TradeContainer"),c=d.find(".J_SubModule_Taskbar");a.renderTo(o),s.renderTo(r,i),n.renderTo(p),l.renderTo(c),e("#modlue_leftNav").scrollToFixed({marginTop:0,zIndex:101}),e("#module-trade-top").scrollToFixed({marginTop:41,zIndex:100}),this._fn_event_bind()}},_fn_dom_update_tradeList_error:function(){this._elm_dom_tradeList_container.empty().html(t.template.get("template.trade.list.trade_error"))},_fn_dom_update_tradeList_noResult:function(){this._elm_dom_tradeList_container.empty().html(t.template.get("template.trade.list.trade_no_result"))},_fn_event_bind:function(){var i=!0;this._elm_dom_container.on("click",".j-outsid-callback-btn",function(){var t=e(this);e.dialog.confirm("该操作会导致原电子面单号失效，您是否继续操作",function(){var i=t.parents(".module-trade-list-item"),a=i.attr("uniqueid"),s=o.getModel(a).toJSON(),n={sysTids:s.sysTid,tids:s.tid,taobaoIds:s.taobaoId};API.trade_logistics_wlb_waybill_cancel(n,function(i){var s=i.data;"success"===s.status?(t.siblings('[name="outSid"]').val("点击获取单号").attr("data-value",""),t.remove(),o.getModel(a).options.outSid=""):e.dialog.alert(s.errorResult[0].errorMsg)})})}),this._elm_dom_container.find(".module-trade-searchBar-btn").on("click",e.proxy(function(){this._elm_dom_container.find(".module-trade-searchBar-btn").toggleClass("module-trade-searchBar-btn-down"),e("#module-trade-topBar").stop().animate({height:i?0:137},{progress:function(){}}),e("#module-trade-topBar").toggleClass("module-trade-topBar-hidden"),i=!i},this)),this._elm_dom_container.find(".module-trade-tab-navs").on("click",function(){t.pages.setCurHash({timeStamp:+new Date})}),this._elm_dom_container.delegate(".operate-menu-for-wangwang","mouseenter",function(t){setTimeout(function(){var i=e(t.target);i=i.hasClass("operate-menu-for-wangwang")?i:i.parents(".operate-menu-for-wangwang");var a=i.find(".menu-for-wangwang");a.find('[id^="ZeroClipboardMovie"]').length||a.find('[data-name="copy-wangwang-inmenu"]').zclip({path:"resources/js/ZeroClipboard.swf",copy:function(){return i.find(".user-nickname").text()},afterCopy:function(){e.dialog.showSuccess('复制"'+i.find(".user-nickname").text()+'"成功',.5)}})},1)}),t.sub("trade.list.sub_module_query.submit",this._eventHandlerProxy_querySubmit=this._fn_event_handler("query_submit")),t.sub("trade.list.sub_module_tradeContainer.order_sort",this._eventHandlerProxy_OrderSort=this._fn_event_handler("order_sort")),t.sub("trade.list.sub_module_tradeContainer.status_search",this._eventHandlerProxy_StatusSearch=this._fn_event_handler("status_search")),t.sub("trade.list.sub_module_tradeContainer.select_all",this._eventHandlerProxy_SelectAll=this._fn_event_handler("select_all")),t.sub("trade.list.sub_module_tradeContainer.show_orders",this._eventHandlerProxy_ShowOrders=this._fn_event_handler("show_orders")),t.sub("trade.list.sub_module_tradeContainer.change_page_no",this._eventHandlerProxy_ChangePageNo=this._fn_event_handler("change_page_no")),t.sub("trade.list.sub_module_tradeContainer.change_page_size",this._eventHandlerProxy_ChangePageSize=this._fn_event_handler("change_page_size")),t.sub("trade.list.sub_module_tradeContainer.memo_sort",this._eventHandlerProxy_MemoSort=this._fn_event_handler("memo_sort")),t.sub("trade.list.sub_module_tradeContainer.product_count",this._eventHandlerProxy_ProductCount=this._fn_event_handler("product_count")),t.sub("trade.list.sub_module_tradeContainer.template_search",this._eventHandlerProxy_TemplateSearch=this._fn_event_handler("template_search")),t.sub("trade.list.sub_module_tradeContainer.receiver_area_search",this._eventHandlerProxy_TemplateSearch=this._fn_event_handler("receiver_area_search")),t.sub("trade.list.sub_module_taskbar.edit_logistics",this._eventHandlerProxy_EditLogistics=this._fn_event_handler("edit_logistics")),t.sub("trade.list.sub_module_taskbar.PutoutExcel",this._eventHandlerProxy_PutoutExcel=this._fn_event_handler("PutoutExcel")),t.sub("trade.list.sub_module_taskbar.print",this._eventHandlerProxy_Print=this._fn_event_handler("print")),t.sub("trade.list.sub_module_taskbar.edit_messageMemos",this._eventHandlerProxy_EditMessageMemos=this._fn_event_handler("edit_messageMemos")),t.sub("trade.list.sub_module_querybar.trade_sync",this._eventHandlerProxy_TradeSync=this._fn_event_handler("trade_sync")),t.sub("trade.list.sub_module_taskbar.logistics_offline_send",this._eventHandlerProxy_LogisticsOfflineSend=this._fn_event_handler("logistics_offline_send")),t.sub("trade.list.sub_module_taskbar.logistics_online_send",this._eventHandlerProxy_LogisticsOnlineSend=this._fn_event_handler("logistics_online_send")),t.sub("trade.list.sub_module_taskbar.logistics_dummy_send",this._eventHandlerProxy_LogisticsDumySend=this._fn_event_handler("logistics_dummy_send")),t.sub("trade.list.sub_module_taskbar.print_express_undo",this._eventHandlerProxy_PrintExpressUndo=this._fn_event_handler("print_express_undo")),t.sub("trade.list.sub_module_taskbar.print_express_end",this._eventHandlerProxy_PrintExpressEnd=this._fn_event_handler("print_express_end")),t.sub("trade.list.sub_module_taskbar.print_deliver_undo",this._eventHandlerProxy_PrintDeliverUndo=this._fn_event_handler("print_deliver_undo")),t.sub("trade.list.sub_module_taskbar.print_deliver_end",this._eventHandlerProxy_PrintDeliverEnd=this._fn_event_handler("print_deliver_end")),t.sub("trade.list.sub_module_taskbar.trade_verify",this._eventHandlerProxy_TradeVerify=this._fn_event_handler("trade_verify")),t.sub("trade.list.sub_module_taskbar.trade_verify_cancel",this._eventHandlerProxy_TradeVerifyCancel=this._fn_event_handler("trade_verify_cancel")),t.sub("trade.list.sub_module_taskbar.manual_merge_orders_by_wangwangNo",this._eventHandlerProxy_ManualMergeOrders=this._fn_event_handler("manual_merge_orders_by_wangwangNo")),t.sub("trade.list.sub_module_taskbar.scan_to_send_goods",this._eventHandlerProxy_ScanSendGoods=this._fn_event_handler("scan_to_send_goods")),t.sub("trade.list.sub_module_taskbar.trade_batch_halt",this._eventHandlerProxy_TradeBatchHalt=this._fn_event_handler("trade_batch_halt")),t.sub("trade.list.sub_module_taskbar.trade_batch_halt_cancel",this._eventHandlerProxy_TradeBatchHaltCancel=this._fn_event_handler("trade_batch_halt_cancel")),t.sub("trade.list.sub_module_taskbar.trade_fetch",this._eventHandlerProxy_TradeFetch=this._fn_event_handler("trade_fetch")),t.sub("trade.list.sub_module_taskbar.resend_product",this._eventHandlerProxy_resendProduct=this._fn_event_handler("resend_product")),t.sub("control.trade.module.common_express.select",this._eventHandlerProxy_tradeExpressSelect=this._fn_event_handler("module.common_express.select")),t.sub("control.trade.module.common_express.edit.done_4print",this._eventHandlerProxy_tradeExpressEditDone=this._fn_event_handler("module_common_express_edit_done_4print")),t.sub("control.trade.view.focusout.edit_logistics.done_4print",this._eventHandlerProxy_tradeLogisticsEditDone=this._fn_event_handler("module_trade_logistics_edit_done_4print")),t.sub("control.trade.view.click.batch_update_express_id.done_4print",this._eventHandlerProxy_batchUpdateExpressIdDone=this._fn_event_handler("module_trade_batch_update_expressId_done_4print")),t.sub("trade.list.sub_module_taskbar.edit_logistics.done",this._eventHandlerProxy_editLogisticsDone=this._fn_event_handler("module_trade_edit_Logistics_done")),t.sub("trade.list.sub_module_resend_product.edit_logistics.done",this._eventHandlerProxy_resendProeditLogisticsDone=this._fn_event_handler("module_trade_edit_Logistics_done_4resend")),t.sub("control.trade.module.logistics_offline_send.done_4print",this._eventHandlerProxy_logistics_offline_send_Done=this._fn_event_handler("module_trade_logistics_offline_send_done_4print")),t.sub("control.trade.view.click.logistics_dummy_send.done_4print",this._eventHandlerProxy_logistics_dummy_send_Done=this._fn_event_handler("module_trade_logistics_dummy_send_done_4print")),t.sub("control.trade.view.click.logistics_online_send.done_4print",this._eventHandlerProxy_logistics_online_send_Done_4print=this._fn_event_handler("module_trade_logistics_online_send_done_4print")),t.sub("control.trade.view.logistics.online_cancel.done_4print",this._eventHandlerProxy_logistics_online_cancel_Done_4print=this._fn_event_handler("module_trade_logistics_online_cancel_done_4print")),t.sub("control.trade.view.logistics_online_confirm.done_4print",this._eventHandlerProxy_logistics_online_confirm_Done_4print=this._fn_event_handler("module_trade_logistics_online_confirm_done_4print")),t.sub("control.trade.view.click.create_wlb_no_done_4print",this._eventHandlerProxy_create_wlb_no_done_4print=this._fn_event_handler("create_wlb_no_done_4print")),t.sub("control.trade.module.common_express.edit",this._eventHandlerProxy_tradeCommonExpressEdit=this._fn_event_handler("module.common_express.edit")),t.sub("control.trade.module.shipping_address.edit",this._eventHandlerProxy_tradeShippingAddressEdit=this._fn_event_handler("module.shipping_address.edit")),t.sub("control.trade.module.seller_memoflag.merge.edit",this._eventHandlerProxy_tradeSellerMemoflagMergeEdit=this._fn_event_handler("module.seller_memoflag.merge.edit")),t.sub("control.trade.module.express.edit",this._eventHandlerProxy_tradeExpressEdit=this._fn_event_handler("module.express.edit")),t.sub("control.trade.module.print",this._eventHandlerProxy_tradePrint=this._fn_event_handler("module.print")),t.sub("control.trade.module.message_memo.edit",this._eventHandlerProxy_tradeMessageMemoEdit=this._fn_event_handler("module.message_memo.edit")),t.sub("control.trade.module.logistics_info",this._eventHandlerProxy_tradeLogisticsInfo=this._fn_event_handler("module.logistics_info")),t.sub("control.trade.module.manual.merge.orders",this._eventHandlerProxy_tradeManualMerge=this._fn_event_handler("module.manual.merge.orders")),t.sub("trade.search.printlog",this._eventHandlerProxy_tradeSearchPrintLog=this._fn_event_handler("trade_printlog_search"))},_fn_event_unbind:function(){e("#header .header").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),e("#module-trade-top").trigger("detach.ScrollToFixed"),this._elm_dom_container.find(".module-trade-searchBar-btn").off("click"),this._elm_dom_tradeList_container.off("click"),t.removeSub("trade.list.sub_module_query.submit",this._eventHandlerProxy_querySubmit),t.removeSub("trade.list.sub_module_tradeContainer.order_sort",this._eventHandlerProxy_OrderSort),t.removeSub("trade.list.sub_module_tradeContainer.status_search",this._eventHandlerProxy_StatusSearch),t.removeSub("trade.list.sub_module_tradeContainer.select_all",this._eventHandlerProxy_SelectAll),t.removeSub("trade.list.sub_module_tradeContainer.show_orders",this._eventHandlerProxy_ShowOrders),t.removeSub("trade.list.sub_module_tradeContainer.change_page_no",this._eventHandlerProxy_ChangePageNo),t.removeSub("trade.list.sub_module_tradeContainer.change_page_size",this._eventHandlerProxy_ChangePageSize),t.removeSub("trade.list.sub_module_tradeContainer.memo_sort",this._eventHandlerProxy_MemoSort),t.removeSub("trade.list.sub_module_tradeContainer.product_count",this._eventHandlerProxy_ProductCount),t.removeSub("trade.list.sub_module_tradeContainer.template_search",this._eventHandlerProxy_TemplateSearch),t.removeSub("trade.list.sub_module_tradeContainer.receiver_area_search",this._eventHandlerProxy_TemplateSearch),t.removeSub("trade.list.sub_module_taskbar.edit_logistics",this._eventHandlerProxy_EditLogistics),t.removeSub("trade.list.sub_module_taskbar.PutoutExcel",this._eventHandlerProxy_PutoutExcel),t.removeSub("trade.list.sub_module_taskbar.print",this._eventHandlerProxy_Print),t.removeSub("trade.list.sub_module_taskbar.edit_messageMemos",this._eventHandlerProxy_EditMessageMemos),t.removeSub("trade.list.sub_module_querybar.trade_sync",this._eventHandlerProxy_TradeSync),t.removeSub("trade.list.sub_module_taskbar.logistics_offline_send",this._eventHandlerProxy_LogisticsOfflineSend),t.removeSub("trade.list.sub_module_taskbar.logistics_online_send",this._eventHandlerProxy_LogisticsOnlineSend),t.removeSub("trade.list.sub_module_taskbar.logistics_dummy_send",this._eventHandlerProxy_LogisticsDumySend),t.removeSub("trade.list.sub_module_taskbar.print_express_undo",this._eventHandlerProxy_PrintExpressUndo),t.removeSub("trade.list.sub_module_taskbar.print_express_end",this._eventHandlerProxy_PrintExpressEnd),t.removeSub("trade.list.sub_module_taskbar.print_deliver_undo",this._eventHandlerProxy_PrintDeliverUndo),t.removeSub("trade.list.sub_module_taskbar.print_deliver_end",this._eventHandlerProxy_PrintDeliverEnd),t.removeSub("trade.list.sub_module_taskbar.trade_verify",this._eventHandlerProxy_TradeVerify),t.removeSub("trade.list.sub_module_taskbar.trade_verify_cancel",this._eventHandlerProxy_TradeVerifyCancel),t.removeSub("trade.list.sub_module_taskbar.manual_merge_orders_by_wangwangNo",this._eventHandlerProxy_ManualMergeOrders),t.removeSub("trade.list.sub_module_taskbar.scan_to_send_goods",this._eventHandlerProxy_ScanSendGoods),t.removeSub("trade.list.sub_module_taskbar.trade_batch_halt",this._eventHandlerProxy_TradeBatchHalt),t.removeSub("trade.list.sub_module_taskbar.trade_batch_halt_cancel",this._eventHandlerProxy_TradeBatchHaltCancel),t.removeSub("trade.list.sub_module_taskbar.trade_fetch",this._eventHandlerProxy_TradeFetch),t.removeSub("trade.list.sub_module_taskbar.resend_product",this._eventHandlerProxy_resendProduct),t.removeSub("control.trade.collection.all_selected",this._eventHandlerProxy_AllSelected),t.removeSub("control.trade.collection.all_selected_cancel",this._eventHandlerProxy_AllSelectedCancel),t.removeSub("control.trade.module.common_express.select",this._eventHandlerProxy_tradeExpressSelect),t.removeSub("control.trade.module.common_express.edit.done_4print",this._eventHandlerProxy_tradeExpressEditDone),t.removeSub("control.trade.view.focusout.edit_logistics.done_4print",this._eventHandlerProxy_tradeLogisticsEditDone),t.removeSub("control.trade.view.click.batch_update_express_id.done_4print",this._eventHandlerProxy_batchUpdateExpressIdDone),t.removeSub("trade.list.sub_module_taskbar.edit_logistics.done",this._eventHandlerProxy_editLogisticsDone),t.removeSub("trade.list.sub_module_resend_product.edit_logistics.done",this._eventHandlerProxy_resendProeditLogisticsDone),t.removeSub("control.trade.module.logistics_offline_send.done_4print",this._eventHandlerProxy_logistics_offline_send_Done),t.removeSub("control.trade.view.click.logistics_dummy_send.done_4print",this._eventHandlerProxy_logistics_dummy_send_Done),t.removeSub("control.trade.view.click.logistics_online_send.done_4print",this._eventHandlerProxy_logistics_online_send_Done_4print),t.removeSub("control.trade.view.logistics.online_cancel.done_4print",this._eventHandlerProxy_logistics_online_cancel_Done_4print),t.removeSub("control.trade.view.logistics_online_confirm.done_4print",this._eventHandlerProxy_logistics_online_confirm_Done_4print),t.removeSub("control.trade.view.click.create_wlb_no_done_4print",this.__eventHandlerProxy_create_wlb_no_done_4print),t.removeSub("control.trade.module.common_express.edit",this._eventHandlerProxy_tradeCommonExpressEdit),t.removeSub("control.trade.module.shipping_address.edit",this._eventHandlerProxy_tradeShippingAddressEdit),t.removeSub("control.trade.module.seller_memoflag.merge.edit",this._eventHandlerProxy_tradeSellerMemoflagMergeEdit),t.removeSub("control.trade.module.express.edit",this._eventHandlerProxy_tradeExpressEdit),t.removeSub("control.trade.module.print",this._eventHandlerProxy_tradePrint),t.removeSub("control.trade.module.message_memo.edit",this._eventHandlerProxy_tradeMessageMemoEdit),t.removeSub("control.trade.module.logistics_info",this._eventHandlerProxy_tradeLogisticsInfo),t.removeSub("control.trade.module.manual.merge.orders",this._eventHandlerProxy_tradeManualMerge),t.removeSub("trade.search.printlog",this._eventHandlerProxy_tradeSearchPrintLog)},_fn_event_handler:function(t){if(!t)throw new Error("[module.trade.list:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[module.trade.list:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{query_submit:function(e){var i=t.pages._fn_act_get_hashs();i.customId&&(e.customId=i.customId),this._fn_ctrl_setCurHash(e,!0)},order_sort:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},status_search:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},product_count:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},template_search:function(e){""==e.templateFilter&&(this._elm_dom_container.find('input[name="canDelivered"]').iCheck("uncheck"),e.canDelivered=""),e.pageNo=1,this._fn_ctrl_setCurHash(e)},receiver_area_search:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},memo_sort:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},select_all:function(e){var t=this._elm_dom_tradeList_container.find(".module-trade-list-item");e?(t.addClass("module-trade-list-item-selected").find(".J_Checkbox").prop("checked",!0),this._selected_item_ids=this._tradeCollection.id_list):(t.removeClass("module-trade-list-item-selected").find(".J_Checkbox").prop("checked",!1),this._selectall_unchecked_by_item_checkbox=!1,this._selected_item_ids=[])},show_orders:function(e){e?(this._elm_dom_tradeList_container.find(".module-trade-list-item-row3").show(),this._elm_dom_tradeList_container.find(".J_Trigger_Show_Orders").addClass("trade-icon-open").removeClass("trade-icon-close")):(this._elm_dom_tradeList_container.find(".module-trade-list-item-row3").hide(),this._elm_dom_tradeList_container.find(".J_Trigger_Show_Orders").addClass("trade-icon-close").removeClass("trade-icon-open"))},module_common_express_edit_done_4print:function(e,t,i,a){this._fn_item_express_updated(e,t,i,a)},module_trade_logistics_edit_done_4print:function(e){this._fn_to_save_item_outid_done(e)},module_trade_batch_update_expressId_done_4print:function(e){this._fn_batch_update_express_id_done(e)},module_trade_edit_Logistics_done:function(e){this._fn_edit_logistics_done(e)},module_trade_edit_Logistics_done_4resend:function(e){this._fn_edit_logistics_done_4resend(e)},module_trade_logistics_offline_send_done_4print:function(e){this._fn_logistics_send_done(e)},module_trade_logistics_online_send_done_4print:function(e){this._fn_logistics_online_send_done(e)},module_trade_logistics_online_cancel_done_4print:function(e){this._fn_logistics_online_cancel_done(e)},module_trade_logistics_online_confirm_done_4print:function(e){this._fn_logistics_online_confirm_done(e)},module_trade_logistics_dummy_send_done_4print:function(e){this._fn_logistics_send_done(e)},create_wlb_no_done_4print:function(e,t){this._fn_create_wlb_no_done(e,t)},change_page_no:function(e){this._fn_ctrl_setCurHash({pageNo:e})},change_page_size:function(e){this._fn_ctrl_setCurHash({pageSize:e,pageNo:1})},edit_logistics:function(){var e=this;t.sub("trade.list.sub_module_taskbar.edit_logistics.done",e._event_tiggered_by_taskbar=function(i){e._fn_edit_logistics_done(i),t.removeSub("trade.list.sub_module_taskbar.edit_logistics.done",e._event_tiggered_by_taskbar)}),this._tradeCollection&&this._tradeCollection.command("edit_logistics",this.getSelectedItemIds())},PutoutExcel:function(i){var a=e("#main"),s=a.find(".module-trade-tab-navs").find(".current"),n=s.children("em").text();if(/\d+/g.exec(n)>2e3){e.dialog({title:"提示",content:'<p id="trueDo" style="line-height:30px; font-size:14px;">一共有<label class="number_trade" style="color:#f44239;"></label>条订单数据<label style="color:#f44239;"></label><br>最多只能导出2000条数据，请重新筛选订单！</p>',cancelVal:"取消",cancel:function(){}})}else e.dialog({title:"提示",content:'<p id="trueDo" style="line-height:30px; font-size:14px;">一共有<label class="number_trade" style="color:#f44239;"></label>条订单数据<label style="color:#f44239;">(最多导出2000条)</label><br>导出过程中请勿关闭浏览器，确定要导出么？</p>',okVal:"确定",ok:function(){var a=e(i.target),s=t.pages._fn_act_get_hashs(),n=a.parents("#main"),l=n.find(".module-trade-searchBar-container"),d=n.find(".module-trade-tab"),o=n.find(".J_SubModule_TradeContainer"),r=["timeType="+(s.timeType||d.find(".ui-select-timeType").find(".ui-select-txt").data("value")||""),"queryId="+(s.queryId||""),"customId="+(s.customId||""),"taobaoId="+(s.taobaoId||""),"startTime="+(s.startTime||""),"endTime="+(s.endTime||""),"text="+(s.text||""),"field="+(s.field||""),"order="+(s.order||""),"addressType="+(o.find(".header-receiver-addr-info").find(".trade-hover-item-selected").data("value")||""),"oneItem="+(s.oneItem||""),"expressStatus="+(s.expressStatus||""),"deliverStatus="+(s.deliverStatus||""),"isVerify="+(s.isVerify||""),"isRefund="+(s.isRefund||""),"isHalt="+(s.isHalt||""),"isExcep="+(s.isExcep||""),"canDelivered="+(s.canDelivered||""),"express="+(s.express||""),"sellerFlag="+(s.sellerFlag||""),"containMemo="+(s.containMemo||"")].join("&");url=3==s.queryId?"/trade/downExcel?"+r+"&"+["printLogType="+(l.find("select[name=printLogType]").val()||""),"printLogId="+l.find("select[name=printLogId]").val()||""].join("&"):"/trade/downExcel?"+r,window.open(url)},cancelVal:"取消",cancel:function(){}});e("#trueDo").find(".number_trade").text(/\d+/g.exec(n))},print:function(){this._tradeCollection&&this._tradeCollection.command("print",this.getSelectedItemIds())},edit_messageMemos:function(){var e=this,i="control.trade.module.message_memo.edit.done";t.sub(i,function(t){e._fn_edit_message_memo_done(t.ids.split(","),i,t)}),this._tradeCollection&&this._tradeCollection.command("edit_messageMemos",this.getSelectedItemIds())},logistics_offline_send:function(){var i=this,a="control.trade.module.logistics_offline_send.done",s=this._fn_check_ifExistCODs(this.getSelectedItemIds());if(s)return void e.dialog.alert('<div style="max-height: 240px;">货到付款订单只支持在线下单方式发货！</div>');var n=this._fn_check_exceptionData(this.getSelectedItemIds(),!0);n||(t.sub(a,function(e){i._fn_logistics_send_done(e),t.removeSub(a)}),this._tradeCollection&&this._tradeCollection.command("logistics_offline_send",this.getSelectedItemIds()))},logistics_online_send:function(){var e=this,i="control.trade.view.click.logistics_online_send.done",a=this._fn_check_exceptionData(this.getSelectedItemIds(),!1);a||(t.sub(i,function(a){e._fn_logistics_online_send_done(a),t.removeSub(i)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_send",this.getSelectedItemIds()))},logistics_dummy_send:function(){var i=this,a="control.trade.view.click.logistics_dummy_send.done",s=this._fn_check_ifExistCODs(this.getSelectedItemIds());return s?void e.dialog.alert('<div style="max-height: 240px;">货到付款订单只支持在线下单方式发货！</div>'):(t.sub(a,function(e){i._fn_logistics_send_done(e),t.removeSub(a)}),void(this._tradeCollection&&this._tradeCollection.command("logistics_dummy_send",this.getSelectedItemIds())))},print_express_undo:function(){var e=this,i="control.trade.view.click.print_express_undo.done";t.sub(i,function(t){e._fn_print_express_done(t,i,!0)}),this._tradeCollection&&this._tradeCollection.command("print_express_end",this.getSelectedItemIds(),!1)},print_express_end:function(){var e=this,i="control.trade.view.click.print_express_end.done";t.sub(i,function(t){e._fn_print_express_done(t,i,!1)}),this._tradeCollection&&this._tradeCollection.command("print_express_end",this.getSelectedItemIds(),!0)},print_deliver_undo:function(){var e=this,i="control.trade.view.click.print_deliver_undo.done";t.sub(i,function(t){e._fn_print_deliver_done(t,i,!0)}),this._tradeCollection&&this._tradeCollection.command("print_deliver_end",this.getSelectedItemIds(),!1)},print_deliver_end:function(){var e=this,i="control.trade.view.click.print_deliver_end.done";t.sub(i,function(t){e._fn_print_deliver_done(t,i,!1)}),this._tradeCollection&&this._tradeCollection.command("print_deliver_end",this.getSelectedItemIds(),!0)},trade_verify:function(){var e=this,i="control.trade.view.click.trade_verify.done";t.sub(i,function(t){e._fn_trade_verify_done(t,i,!1)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",this.getSelectedItemIds(),!0)},trade_verify_cancel:function(){var e=this,i="control.trade.view.click.trade_verify_cancel.done";t.sub(i,function(t){e._fn_trade_verify_done(t,i,!0)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",this.getSelectedItemIds(),!1)},trade_batch_halt:function(){var e=this,i="control.trade.view.click.trade_halt.done";t.sub(i,function(t){e._fn_trade_halt_done(t,i,!1)}),this._tradeCollection&&this._tradeCollection.command("trade_halt",this.getSelectedItemIds(),!0)},trade_fetch:function(){var t=this,i={queryId:"",taobaoId:"",warehouseId:""},a=this._tradeCollection?this._tradeCollection.id_list:[];if(0==a.length)return void e.dialog.alert("没有订单！");for(var s in i)t.searchParam.hasOwnProperty(s)?i[s]=t.searchParam[s]:delete i[s];API.trade_print_getter_data(t.searchParam,function(t){if(t.message)return void e.dialog.alert(t.message);var i=PrintPt.getPtFetchHtm(t.data.fieldValues,t.data.template).template;e.dialog({width:1100,title:"拿货单打印",content:i}).time(0,function(){var i=this.DOM;i.content.find(".fetch-printer").iSelect();var a=i.content.find(".fetch-printer"),s=t.data.template.printerName;pickOptions=a.find("option"),pickvalue="";for(var n=0;n<pickOptions.length;n++)if(s==e(pickOptions[n]).html()){pickvalue=e(pickOptions[n]).val();break}a.iSelect("select",pickvalue),i.content.find('.J_Click[data-name="fetch_print"]').click(function(){if(!e(this).hasClass("disabled")){var a=i.content.find(".fetch-printer").val();PrintPt.printPtFetchHtm(t,a,function(){}),e(this).addClass("disabled");var s=10,n=this,l=setInterval(function(){1>s?(e(n).removeClass("disabled"),e(n).text("打印"),clearInterval(l)):(e(n).text("打印中（"+s+"s）"),s--)},1e3)}})})})},trade_batch_halt_cancel:function(){var e=this,i="control.trade.view.click.trade_halt_cancel.done";t.sub(i,function(t){e._fn_trade_halt_done(t,i,!0)}),this._tradeCollection&&this._tradeCollection.command("trade_halt",this.getSelectedItemIds(),!1)},manual_merge_orders_by_wangwangNo:function(i,a){var s=this;t.sub("control.trade.manual_merge_done",function(i,a){var n=s._elm_dom_tradeList_container.find('[uniqueid="'+a[0]+'"]'),l=function(){s._elm_dom_container.find(".J_Select_All").prop("checked",!1);var t=s._elm_dom_tradeList_container.find(".J_Checkbox:checked");e.each(t,function(t,i){e(i).prop("checked",!1);var a=e(i).parents(".module-trade-list-item").attr("uniqueid");s.removeIdFromSelectedItemIds(a)});var i=a.slice(1);if(i.length)for(var n=0;n<i.length;n++){var l=i[n];s._elm_dom_tradeList_container.find('[uniqueid="'+l+'"]').remove(),s._tradeCollection&&s._tradeCollection.remove_id_from_id_list(l),s.removeIdFromSelectedItemIds(l)}};n=n.length?n:n.find("[uniqueid]:last"),s._re_render_item_list(i,n,l),t.removeSub("control.trade.manual_merge_done")}),Module_Manual_Merge_Order.queryByWWNo(a)},manual_merge_orders:function(i){var a=this;t.sub("control.trade.manual_merge_done",function(i,s){var n=a._elm_dom_tradeList_container.find('[uniqueid="'+s[0]+'"]'),l=function(){a._elm_dom_container.find(".J_Select_All").prop("checked",!1);var t=a._elm_dom_tradeList_container.find(".J_Checkbox:checked");e.each(t,function(t,i){e(i).prop("checked",!1);var s=e(i).parents(".module-trade-list-item").attr("uniqueid");a.removeIdFromSelectedItemIds(s)});var i=s.slice(1);if(i.length)for(var n=0;n<i.length;n++){var l=i[n];a._elm_dom_tradeList_container.find('[uniqueid="'+l+'"]').remove(),a._tradeCollection&&a._tradeCollection.remove_id_from_id_list(l),a.removeIdFromSelectedItemIds(l)}};n=n.length?n:n.find("[uniqueid]:last"),a._re_render_item_list(i,n,l),t.removeSub("control.trade.manual_merge_done")}),this._tradeCollection&&this._tradeCollection.command("manual_merge_orders",i)},trade_sync:function(){this.ctrl_guide||(this.ctrl_guide=RayCloud.controls.get("control.trade_sync_pop")),this.ctrl_guide.sync(e.proxy(function(){this.update(this._status_hashs,null,!0)},this))},trade_printlog_search:function(e){this._fn_load_printlog_list_data(e)},resend_product:function(){this._fn_start_to_resend_product(this.getSelectedItemIds())},"module.common_express.select":function(t,i,a){var s=e(a.target).parents("[uniqueid]").find('input[name="outSid"]').val(),n=!1;s&&/^\w*\d+\w*$/.test(s)&&(n=!0),p.show(t,i,a,n)},"module.common_express.edit":function(){c.show()},"module.shipping_address.edit":function(e){_.show(e)},"module.seller_memoflag.merge.edit":function(e,t){m.show(e,t)},"module.express.edit":function(e){u.show(e)},"module.print":function(e){h.show(e)},"module.message_memo.edit":function(e){f.show(e)},"module.logistics_info":function(e,t,i,a,s){v.show(e,t,i,a,s)},"module.close_trade":function(e,t,i){Module_CLOSE_TRADE.show(e,t,i,!0)},"module.trade_sync_single":function(i,a){var s=this;Module_Trade_Sync_Single.show(i,a,e.proxy(function(e){var a=t.template.get("template.trade.list.list_item",s._fn_prehandle_data(e)),n=i.parents(".module-trade-wrap"),l=i.find(".J_Checkbox").prop("checked"),d=i.find(".J_Trigger_Show_Orders").hasClass("trade-icon-open"),o=s._fn_createItemUI(e);for(var r in o)o.hasOwnProperty(r)&&(a=a.replace(r,o[r]));i.replaceWith(a);var p=n.find(".module-trade-list-item[uniqueid="+o["@@uniqueid"]+"]");l&&p.find(".J_Checkbox").prop("checked",!0),d&&(p.find(".J_Trigger_Show_Orders").removeClass("trade-icon-close").addClass("trade-icon-open"),p.find(".module-trade-list-item-row3").show());
for(var r in e.messageMemos)if(e.messageMemos.hasOwnProperty(r)){var c=e.messageMemos[r];p.find(".J_Tip[note-data-tid="+r+"]").iTip({skin:"blue",triggerType:"hover",content:c.sellerMemo})}},this))},"module.manual.merge.orders":function(e){Module_Manual_Merge_Order.show(e)},scan_to_send_goods:function(){Module_Scan_Send_Goods.show()},"module.delay_confirm":function(e,t,i){Module_Delay_Confirm.show(e,t,i)},"module.postage_update":function(e,t,i){Module_Postage_Update.show(e,t,i)},"module.address_reachable":function(t,i,a){var s=e(a.target).parents("[uniqueid]").find('input[name="outSid"]').val(),n=!1;s&&/^\w*\d+\w*$/.test(s)&&(n=!0),Reachable.show(i,a,n)}},_fn_logistics_send_done:function(e){if(e){e=e.slice(0);for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');i.length?i.fadeOut(2e3,function(){i.remove()}):this.dl.removeData(e[t]),this.removeIdFromSelectedItemIds(e[t]),this._tradeCollection&&this._tradeCollection.remove_id_from_id_list(e[t])}}},_fn_logistics_online_send_done:function(e){if(e){e=e.slice(0);for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');if(i.length){var a=i.find('input[name="outSid"]').val();if(a&&/^\w*\d+\w*$/.test(a))i.fadeOut(2e3,function(){i.remove()}),this.removeIdFromSelectedItemIds(e[t]),this._tradeCollection&&this._tradeCollection.remove_id_from_id_list(e[t]);else{var s=i.find(".trade-hover");if(s.find('[data-name="logistics_offline_send"]').remove(),s.find('[data-name="logistics_online_send"]').remove(),s.find('[data-name="logistics_dummy_send"]').remove(),s.next().length||s.after('<span style="width:auto;" class="trade-icon-ff9000 trade-online-sending">在线发货</span>'),!s.find('[data-name="logistics_online_confirm"]').length){var n='<li data-name="logistics_online_confirm" class="trade-hover-item J_Click">确认在线发货</li><li data-name="logistics_online_cancel" class="trade-hover-item J_Click">取消在线发货</li>';s.find(".trade-hover-bd").children().first().before(n)}}}else this.dl&&this.getData(e[t])&&(0==this.getData(e[t])._has_outSid?this.dl.updateData(e[t],"canConfirmSend",1):(this.dl.removeData(e[t]),this.removeIdFromSelectedItemIds(e[t])))}}},_fn_logistics_online_cancel_done:function(e){if(e)for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');if(i.length){var a=i.find(".trade-hover");a.find('[data-name="logistics_online_confirm"]').remove(),a.find('[data-name="logistics_online_cancel"]').remove(),a.next().remove();var s=o.getModel(e[t]).toJSON().type,n=s==this._TRADE_TYPE.COD?'<li data-name="logistics_online_send" class="trade-hover-item J_Click">在线下单发货</li>':'<li data-name="logistics_offline_send" class="trade-hover-item J_Click">自己联系物流发货</li><li data-name="logistics_online_send" class="trade-hover-item J_Click">在线下单发货</li><li data-name="logistics_dummy_send" class="trade-hover-item J_Click">无需物流发货</li>';a.find('[data-name="logistics_online_send"]').length||a.find(".trade-hover-bd").children().first().before(n)}}},_fn_logistics_online_confirm_done:function(e){if(e){e=e.slice(0);for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');i.length&&(i.fadeOut(2e3,function(){i.remove()}),this.removeIdFromSelectedItemIds(e[t]),this._tradeCollection&&this._tradeCollection.remove_id_from_id_list(e[t]))}}},_fn_print_express_done:function(e,i,a){if(e){for(var s=0;s<e.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+e[s]+'"]');if(n.length){var l=n.find(".J_expressStatus span"),d=n.find(".J_Operater"),o='<span class="trade-icon-818181 J_Tip" data-title="快递单未打印">快</span>',r='<span class="trade-icon-1b6fd7 J_Tip" data-title="快递单已打印">快</span>';a&&l.replaceWith(o)&&n.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a&&d.find('[data-name="print_express_undo"]').attr("data-name","print_express_end").html("快递单已打印"),!a&&l.replaceWith(r)&&n.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),!a&&d.find('[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}else a&&this.dl.updateData(e[s],"expressStatus",0),!a&&this.dl.updateData(e[s],"expressStatus",1)}t.removeSub(i)}},_fn_print_deliver_done:function(e,i,a){if(e){for(var s=0;s<e.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+e[s]+'"]');if(n.length){var l=n.find(".J_deliverStatus span"),d=n.find(".J_Operater"),o='<span class="trade-icon-818181 J_Tip" data-title="发货单未打印">发</span>',r='<span class="trade-icon-3d900a J_Tip" data-title="发货单已打印">发</span>';a&&l.replaceWith(o)&&n.find(".J_deliverStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a&&d.find('[data-name="print_deliver_undo"]').attr("data-name","print_deliver_end").html("发货单已打印"),!a&&l.replaceWith(r)&&n.find(".J_deliverStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),!a&&d.find('[data-name="print_deliver_end"]').attr("data-name","print_deliver_undo").html("发货单未打印")}else a&&this.dl.updateData(e[s],"deliverStatus",0),!a&&this.dl.updateData(e[s],"deliverStatus",1)}t.removeSub(i)}},_fn_trade_verify_done:function(e,i,a){if(e){for(var s=0;s<e.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+e[s]+'"]');if(n.length){var l=n.find(".J_isVerify"),d=n.find(".J_Operater"),o='<span class="trade-icon-818181 J_Tip" data-title="订单未审核">审</span>',r='<span class="trade-icon-dc398a J_Tip" data-title="订单已审核">审</span>';a&&l.empty().append(o)&&n.find(".J_isVerify .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a&&d.find('[data-name="trade_verify"]').remove(),a&&d.find('[data-name="trade_verify_cancel"]').attr("data-name","trade_verify").html("订单已审核"),!a&&l.empty().append(r)&&n.find(".J_isVerify .J_Tip").iTip({skin:"blue",triggerType:"hover"}),!a&&d.find('[data-name="trade_verify_cancel"]').remove(),!a&&d.find('[data-name="trade_verify"]').attr("data-name","trade_verify_cancel").html("订单未审核")}else a&&this.dl.updateData(e[s],"isVerify",0),!a&&this.dl.updateData(e[s],"isVerify",1)}t.removeSub(i)}},_fn_trade_halt_done:function(i,a,s){if(i){for(var n=0;n<i.length;n++){var l=this._elm_dom_tradeList_container.find('[uniqueid="'+i[n]+'"]');if(l.length)if(s)l.find(".J_isHalt").empty(),l.find('[data-name="trade_halt_cancel"]').attr("data-name","trade_halt").html("订单挂起");else{l.find(".J_isHalt").empty();var d=e('<span data-title="挂起订单" class="trade-icon-7327db J_Tip" title="">挂</span>').appendTo(l.find(".J_isHalt"));d.iTip({triggerType:"hover"}),l.find('[data-name="trade_halt"]').attr("data-name","trade_halt_cancel").html("取消挂起")}else s&&this.dl.updateData(i[n],"isHalt",0),!s&&this.dl.updateData(i[n],"isHalt",1)}t.removeSub(a)}},_fn_edit_message_memo_done:function(a,s,n){if(a){n.memo=i.escape(n.memo);for(var l=0;l<a.length;l++){var d=this._elm_dom_tradeList_container.find('[uniqueid="'+a[l]+'"]');if(d.length){var o="trade-icon-flag-0 trade-icon-flag-1 trade-icon-flag-2 trade-icon-flag-3 trade-icon-flag-4 trade-icon-flag-5 trade-icon-flag-6";""!==n.flag&&d.find(".trade-icon-flag").removeClass(o).addClass("trade-icon-flag-"+n.flag);{var r=d.find(".trade-icon-beizu");d.find(".msg-seller-memo")}if(r.length)"true"===n.reset?""===n.memo?r.attr("data-title","").hide():r.show().attr("data-title",n.memo).iTip({skin:"blue",triggerType:"hover",content:n.memo}):e.each(r,function(t,i){var a=e(i),s=a.attr("data-title")+n.memo;a.show().attr("data-title",s).iTip({skin:"blue",triggerType:"hover",content:s})});else{var p=d.find(".message-note"),c=p.find(".memo-place-holder"),_="";if(n.memo){for(var m=0;m<c.length;m++)_+='<span data-title="'+n.memo+'" data-name="trigger_show_orders" note-data-tid="'+e(c[m]).attr("note-data-tid")+'" class="ml_5 trade-icon-beizu J_Tip J_Click" title=""></span>';c.remove(),p.append(_).find(".J_Tip").iTip({skin:"blue",triggerType:"hover",content:n.memo})}}d.find(".msg-seller-memo").length?"true"===n.reset?d.find(".msg-seller-memo").html(n.memo):e.each(d.find(".msg-seller-memo"),function(t,i){var a=e(i);a.html(a.html()+n.memo)}):n.memo&&d.find(".trade-icon-edit").before('<span class="msg-seller-memo" style="word-wrap: break-word;">'+n.memo+"</span>")}else{var u=a[l].split("_")[0],h=n.memo?1:0;this.dl&&this.dl.updateJsonData(a[l],"_has_sellerMemo",h,"messageMemos",u),this.dl&&this.dl.updateJsonData(a[l],"sellerMemo",n.memo,"messageMemos",u),this.dl&&""!==n.flag&&this.dl.updateJsonData(a[l],"sellerFlag",1*n.flag,"messageMemos",u)}}t.removeSub(s)}},_fn_edit_single_message_memo_done:function(e,a,s,n,l){if(a){var d=s.attr("data-tid"),o=(e.find(".order-temp"),"trade-icon-flag-0 trade-icon-flag-1 trade-icon-flag-2 trade-icon-flag-3 trade-icon-flag-4 trade-icon-flag-5 trade-icon-flag-6"),r=s.parent().find(".trade-icon-flag"),p=s.parent().find(".msg-seller-memo");if(l.memo=i.escape(l.memo),r.length)r.removeClass(o).addClass("trade-icon-flag-"+1*l.flag);else{var c='<span data-name="trigger_show_orders" class="ml_5 trade-icon-flag '+1*l.flag+' J_Click"></span>';s.parent().find(".note-wording").after(c)}if(p.length)p.html(l.memo);else{var _='<span style="word-wrap: break-word;" class="msg-seller-memo">'+l.memo+"</span>";s.before(_)}var m=e.find(".message-note"),u=m.find('[flag-data-tid="'+d+'"]'),h=m.find('[note-data-tid="'+d+'"]');if(u.hasClass("flag-place-holder")){var c='<span data-name="trigger_show_orders" class="ml_5 trade-icon-flag-'+1*l.flag+' J_Click" flag-data-tid="'+d+'"></span>';u.replaceWith(c)}else u.removeClass(o).addClass("trade-icon-flag-"+1*l.flag);if(h.hasClass("memo-place-holder")){if(""!=l.memo){var f='<span data-title="'+l.memo+'" note-data-tid="'+d+'" data-name="trigger_show_orders" class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" title=""></span>';h.replaceWith(f),m.find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})}}else h.show().attr("data-title",l.memo).iTip({skin:"blue",triggerType:"hover",content:l.memo});t.removeSub(n)}},_fn_item_express_updated:function(e,t,i,a){if(e&&i){for(var s="",n="",l=0,d=0,r=0;r<i.length;r++)if(t==i[r].templateId){s=i[r].templateName,n=i[r].isWlb,l=i[r].expressId;break}a&&a.canDelivereds&&a.canDelivereds.length>0&&(d=a.canDelivereds[0],1!=d&&(d=0));var p=this._elm_dom_tradeList_container.find('[uniqueid="'+e+'"]'),c=o.getModel(e).toJSON().status;p.find(".J_Express_Container").html(this._fn_create_expressUI({status:c,expressTemplateName:s,expressTemplateId:String(t).replace(/w/,""),expressTemplateType:n,outSid:"",canDelivered:d})).find(".J_Tip").iTip({triggerType:"hover",skin:"blue"})}},_fn_edit_logistics_done:function(e){if(e)for(var t=this,i=e.ids,a=e.outSids,s=0;s<i.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+i[s]+'"]');if(a[s]=-1==a[s]?"":a[s],n.length){var l,d=n.find(".J_Express_Name");oldTemplateId=d.attr("data-value"),oldOutSid=n.find('input[name="outSid"]').val(),l=a[s]&&oldOutSid!=a[s]||oldTemplateId!=e.templateId?a[s]:oldOutSid;var r=o.getModel(i[s]).toJSON().status,p=o.getModel(i[s]).toJSON().canDelivered;e.canDelivereds&&e.canDelivereds.length>s&&(p=e.canDelivereds[s]),n.find(".J_Express_Container").html(this._fn_create_expressUI({status:r,expressTemplateName:e.templateName,expressTemplateId:e.templateId,expressTemplateType:e.templateType,outSid:l,canDelivered:p})).find(".J_Tip").iTip({triggerType:"hover",skin:"blue"})}else{var c=t.dl&&t.dl.getData(i[s]);t.dl&&t.dl.updateData(i[s],"expressTemplateId",e.templateId),t.dl&&t.dl.updateData(i[s],"expressTemplateName",e.templateName),t.dl&&t.dl.updateData(i[s],"expressTemplateType",e.templateType),(a[s]&&c.outSid!=a[s]||c.expressTemplateId!=e.templateId)&&t.dl&&t.dl.updateData(i[s],"outSid",a[s])}}},_fn_close_trade:function(e,t){var i=e.attr("taobaoid");this._fn_event_handler("module.close_trade")(e,t,i)},_fn_trade_sync_single:function(e,t){this._fn_event_handler("module.trade_sync_single")(e,t)},_fn_trade_delay_confirm:function(e,t){var i=e.attr("taobaoid");this._fn_event_handler("module.delay_confirm")(e,t,i)},_fn_trade_postage_update:function(e,t){var i=e.attr("taobaoid");this._fn_event_handler("module.postage_update")(e,t,i)},_fn_trade_address_reachable:function(e,t,i){e.attr("taobaoid");this._fn_event_handler("module.address_reachable")(e,t,i)},_fn_edit_logistics_done_4resend:function(t){if(t)for(var i=this,a=t.ids,s=t.outSids,n=0;n<a.length;n++){var l=this._elm_dom_tradeList_container.find('[uniqueid="'+a[n]+'"]');if(s[n]=-1==s[n]?"":s[n],l.length)l.find(".J_Express_Name").html(t.templateNames[n]),l.find(".goods-express-no").html(s[n]),0==t.expressTemplateType[t.ids[n]]?l.find('[name="express_wlb_info"]').remove():0==l.find('[name="express_wlb_info"]').length&&e(l.find(".J_Express_Container").find("div")[1]).append('<span class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>'),l.find(".J_Express_Name").attr("data-value",t.templateIds[n]);else{var d=i.dl&&i.dl.getData(a[n]);i.dl&&i.dl.updateData(a[n],"expressTemplateName",t.templateNames[n]),(s[n]&&d.outSid!=s[n]||d.expressTemplateId!=t.templateId)&&i.dl&&i.dl.updateData(a[n],"outSid",s[n])}}},_fn_to_save_item_outid_done:function(e){if(e){var t=e.ids,i=e.outSids,a=this._elm_dom_tradeList_container.find('[uniqueid="'+t+'"]');i="N/A"==i[0]?"":i[0],a.find('input[name="outSid"]').val(i).attr("data-value",i)}},_fn_batch_update_express_id_done:function(e){var t=this;if(e)for(var a=e.ids,s=e.outSids,n=e.templateId,l=i.escape(e.expressTemplateName),d=0;d<a.length;d++){var r=this._elm_dom_tradeList_container.find('[uniqueid="'+a[d]+'"]');if(r.length){var p=o.getModel(a[d]).toJSON().status,c=0;e.canDelivereds&&e.canDelivereds.length>d&&(c=e.canDelivereds[d]),r.find(".J_Express_Container").html(this._fn_create_expressUI({status:p,expressTemplateName:l,expressTemplateId:n,expressTemplateType:e.templateType,outSid:s[d],canDelivered:c})).find(".J_Tip").iTip({triggerType:"hover",skin:"blue"})}else t.dl&&t.dl.updateData(a[d],"outSid",s[d]),t.dl&&t.dl.updateData(a[d],"expressTemplateId",n),t.dl&&t.dl.updateData(a[d],"expressTemplateType",e.templateType),t.dl&&t.dl.updateData(a[d],"expressTemplateName",l)}},_fn_render_load_list_data:function(t,i){var s=i.list||[];if(!s.length)return t._tradeCollection&&t._tradeCollection.destroy(),t.dl&&t.dl.destroy(),t._fn_dom_update_tradeList_noResult(),void n.update_pages();if(t._selectall_unchecked_by_item_checkbox=!1,t._selected_item_ids=[],t._tradeCollection&&t._tradeCollection.destroy(),t._tradeCollection=new r(s),t.dl&&t.dl.destroy(),t._elm_dom_tradeList_container.off("click").empty(),t.dl=new g.DynamicList({target:".J_TradeList_Body",templateName:"template.trade.list.list_item",fnHandleData:t._fn_prehandle_data,offset:20,itemCount:20,itemHeight:58,onItemAdded:function(e){return t._fn_createItemUI(e)},onBatchAdded:function(e,i){if(i.length){var a=t._elm_dom_container?t._elm_dom_container.find(".J_Select_All").prop("checked"):!1,s=t._elm_dom_container?t._elm_dom_container.find(".J_Trigger_Trade_Orders").prop("checked"):!1;(a||t._selectall_unchecked_by_item_checkbox)&&(i.find(".J_Checkbox").prop("checked",!0),i.addClass("module-trade-list-item-selected")),s&&i.find(".J_Trigger_Show_Orders").addClass("trade-icon-open").removeClass("trade-icon-close"),s&&i.find(".module-trade-list-item-row3").show(),i.find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})}},onOnceItemAdded:function(e){e.on("click",function(e){p&&p.hide(),t._fn_actions_on_items(e)}),e.on("focus",".J_Focusout",function(e){t._fn_actions_focusin_item(e)}),e.on("blur",".J_Focusout",function(e){t._fn_actions_focusout_item(e)})}},s),a.update_search_total(i.total),n.update_pages(i),i.showMaxPageSize){var l=e(".pagination-page").find("select");l.find("option").each(function(){parseInt(this.value)>i.showMaxPageSize&&e(this).remove()}),l.iSelect("update")}},_tradeCollection:null,_fn_load_printlog_list_data:function(e){var t=this;return"undefined"==typeof e.printLogId||""==e.printLogId?(a.update_search_total(0),t._fn_dom_update_tradeList_noResult(),void n.update_pages()):void this._fn_load_list_data(e,function(e){t._fn_render_load_list_data(t,e)},function(){a.update_search_total(0),t._fn_dom_update_tradeList_error(),n.update_pages()})},_fn_ctrl_update_tradeList:function(e){var t=this;e.queryId&&"3"==e.queryId||this._fn_load_list_data(e,function(e){t._fn_render_load_list_data(t,e)},function(){a.update_search_total(0),t._fn_dom_update_tradeList_error(),n.update_pages()})},_fn_load_list_data:function(e,t,i){this.searchParam=e,API.trade_search(e,function(e){t&&t(e.data)},function(e){i&&i(e)})},_fn_prehandle_data:function(i){i._buyerWangwang=encodeURIComponent(i.buyerNick),i=e.extend({outSid:"",expressTemplateName:"",expressTemplateType:0,receiverAddress:"",receiverCity:"",receiverDistrict:"",receiverState:"",receiverName:"",receiverZip:"",receiverPhone:"",itemKindCount:"",itemCount:""},i);var a=t.pages._fn_act_get_hashs();if("true"==a.sys)if(8==a.queryId||3==a.queryId){var s={WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"待发货",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"};i.toShowTradeMessage=s[i.status]?1:0,i.tradeMessage=s[i.status]||""}else 1==a.queryId&&(i.maybeShowChaiMessage=1);var n=!0,l=!0,d=!0;if(i.highlights)for(var o in i.highlights)if("orders"===o){var r=i.highlights.orders;this._status_highlights_orders=i.highlights.orders,e.each(i.orders,function(e,t){var a=r[t.oid];if(a){var s=i.orders[e];for(var n in a)s[n]&&!s[n].match(/[<>]/g)&&(s[n]=a[n])}}),delete i.highlights.orders}else i[o]&&!i[o].match(/[<>]/g)&&(i[o]=i.highlights[o],"receiverAddress"===o&&(n=!1));return i.escapeSellerMemo=l,i.escapeBuyerMessage=d,i.escapeAddress=n,i._show_shop_name=0,this._userData||(this._userData=t.user._data),this._userData&&1==this._userData.userConf.mmb&&this._userData.bindShops.length>1&&(i._show_shop_name=1),i},_fn_createItemUI:function(e){var t=e.tid+"_"+e.sysTid;e=this._fn_prehandle_data(e);var i=this._fn_create_expressUI(e),a=this._fn_create_MemoUI(e),s=this._fn_create_operateUI(e),n=this._fn_create_addressUI(e),l=this._fn_create_orderUI(e);return{"@@uniqueid":t,"@@expressUI":i.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@MemoUI":a.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@operateUI":s.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@addressUI":n.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@orderUI":l.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script")}},_fn_create_expressUI:function(e){return e._has_outSid=e.outSid?1:0,t.template.get("template.control.trade.view.express",e)},_fn_create_MemoUI:function(a){var s,n=a.escapeSellerMemo,l=a.escapeBuyerMessage,d=(e.extend(!0,{},a),[]),o=null,r=a.orders;return e.each(r,function(e,t){o!==t.tid&&(s=a.messageMemos&&a.messageMemos[t.tid],s&&(s.buyerMessage&&(s.buyerMessage=l===!1?s.escapeBuyerMessage:i.escape(s.buyerMessage),s._buyerMessage=l===!1?s.escapeBuyerMessage:i.escape(s.buyerMessage),s._buyerMessage=s._buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),s.sellerMemo&&(s.sellerMemo=n===!1?s.buyerMessage:i.escape(s.sellerMemo),s._sellerMemo=n===!1?s.buyerMessage:i.escape(s.sellerMemo),s._sellerMemo=s._sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),s._has_buyerMessage=s.buyerMessage?1:0,s._has_sellerMemo=s.sellerMemo?1:0,s._has_sellerFlag=void 0!==s.sellerFlag?1:0,d.push(s)),o=t.tid)}),t.template.get("template.control.trade.view.messageMemos",{messageMemos:d})},_fn_create_operateUI:function(e){return t.template.get("template.control.trade.view.operater",e)},_fn_create_addressUI:function(e){var a=e.escapeAddress;return e._has_receiverMobile=e.receiverMobile?1:0,e.receiverPhone=e.receiverPhone||"",e.receiverAddress=e.receiverAddress||"",e.receiverAddress=a===!1?e.receiverAddress:i.escape(e.receiverAddress),t.template.get("template.control.trade.view.shipping_address_list",e)},_fn_create_orderUI:function(a){var s=this,n=!0,l=!0,d=[],o=0,r=null,p={WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"买家已付款",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"},c={WAIT_SELLER_AGREE:"买家申请退款",WAIT_BUYER_RETURN_GOODS:"卖家同意退款",WAIT_SELLER_CONFIRM_GOODS:"买家退货中",SELLER_REFUSE_BUYER:"卖家拒绝退款"};e.each(a.orders,function(e,t){t.status_name=p[t.status]||"",t._has_sku=t.skuPropertiesName?1:0,t._has_sku&&(t.skuPropertiesName=t.skuPropertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;">$1</span>')),t._outerId=t.outerSkuId||t.outerId||"",t._has_outerId=t._outerId?1:0,t._sort_time=s._fn_get_sort_time(t),1===t.isRefund&&(t._refundStatus=c[t.refundStatus]||"",t._refundStatus||(t.isRefund=-1)),r!==t.tid?(r&&t.tid&&o++,d[o]=d[o]||{list:[]},d[o].oid=t.oid,d[o].tid=t.tid,d[o].taobaoId=t.taobaoId,d[o].mergeSplitType=a.mergeSplitType,d[o].maybeShowChaiMessage=a.maybeShowChaiMessage||0,d[o]._sort_time=t._sort_time,d[o].list.push(t),r=t.tid):d[o].list.push(t)});var _,m=[];return e.each(d,function(s,d){_=a.messageMemos[d.tid]||{},e.extend(d,_),d.paymentDisplay=d.paymentDisplay||a.paymentDisplay||"",d._has_paymentDisplay=d.paymentDisplay?1:0,d._has_buyerMessage=d.buyerMessage?1:0,d._has_sellerMemo=d.sellerMemo?1:0,d._has_sellerFlag=void 0!==d.sellerFlag?1:0,d.buyerMessage&&(d.buyerMessage=l===!1?d.buyerMessage:i.escape(d.buyerMessage),d.buyerMessage=d.buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),d.sellerMemo&&(d.sellerMemo=n===!1?d.sellerMemo:i.escape(d.sellerMemo),d.sellerMemo=d.sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),d.sysTid=a.sysTid||"",d.status=a.status||"",d.isExcep=a.isExcep,d.isHalt=a.isHalt,m.push(t.template.get("template.control.trade.view.orders",d))}),m.join("")},_fn_get_sort_time:function(e,i){var a="",s="",n=t.pages._fn_act_get_hashs();if(n.timeType)a=n.timeType;else{var l={trade_list_1:"created",trade_list_4:"consign_time"};a=l[n.root+"_"+n.app+"_"+n.queryId]}switch(i=i||{timeType:a||"created"},i.timeType){case"consign_time":s="发货："+t.util.date.getdate(e.consignTime,"YY-MM-DD HH:MM:SS");break;case"pay_time":s="付款："+t.util.date.getdate(e.payTime,"YY-MM-DD HH:MM:SS");break;default:s="下单："+t.util.date.getdate(e.tradeCreated,"YY-MM-DD HH:MM:SS")}return s},_fn_actions_on_items:function(i){var a=this,s=e(i.target),n=s.attr("data-name");if(n){var l=s.parents(".module-trade-list-item"),d=l.attr("uniqueid");switch(n){case"check_select_item":a._fn_to_check_item(s,l);break;case"trigger_show_orders":a._fn_to_show_orders(l);break;case"item-save-outid":a._fn_to_save_item_outid(l,d);break;case"change_express":a._fn_to_change_express(l,d,i);break;case"batch_update_express_id":a._fn_to_update_batch_express_id(l,d,s);break;case"print":a._fn_to_print(d);break;case"cancel_merge":a._fn_to_cancel_merge(d,i);break;case"cancel_split":a._fn_to_cancel_split(d,i);break;case"split":a._fn_to_split(d,i);break;case"trade-icon-canmerged":s.next().css("display","inline");break;case"canmerged-close-icon":s.parent().hide();break;case"manual_merge_orders":var o=d.split("_")[0],r=l.attr("taobaoId");API.trade_merge_list({tid:o,taobaoId:r},function(e){var t=e.data.list;t&&a._fn_event_handler("manual_merge_orders")(t)},function(){},!1);break;case"logistics_online_confirm":var a=this,p="control.trade.view.click.logistics_online_confirm.done";t.sub(p,function(e){a._fn_logistics_online_confirm_done(e),t.removeSub(p)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_confirm",[d],l.find('input[name="outSid"]').val());break;case"logistics_online_cancel":var a=this,p="control.trade.view.click.logistics_online_cancel.done";t.sub(p,function(e){a._fn_logistics_online_cancel_done(e),t.removeSub(p)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_cancel",[d]);break;case"logistics_offline_send":var a=this,p="control.trade.module.logistics_offline_send.done",c=this._fn_check_exceptionData(d,!0,l);if(c)return;t.sub(p,function(e){a._fn_logistics_send_done(e),t.removeSub(p)}),this._tradeCollection&&this._tradeCollection.command("logistics_offline_send",[d]);break;case"logistics_online_send":var a=this,p="control.trade.view.click.logistics_online_send.done",c=this._fn_check_exceptionData(d,!1,l);if(c)return;t.sub(p,function(e){a._fn_logistics_online_send_done(e),t.removeSub(p)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_send",[d]);break;case"logistics_dummy_send":var a=this,p="control.trade.view.click.logistics_dummy_send.done";t.sub(p,function(e){a._fn_logistics_send_done(e),t.removeSub(p)}),this._tradeCollection&&this._tradeCollection.command("logistics_dummy_send",[d]);break;case"trade_halt":t.sub("control.trade.view.click.trade_halt.done",function(){t.showSuccess("操作成功！",.8);var i=e('<span data-title="挂起订单" class="trade-icon-7327db J_Tip" title="">挂</span>').appendTo(l.find(".J_isHalt"));i.iTip({triggerType:"hover"}),l.find('[data-name="trade_halt"]').attr("data-name","trade_halt_cancel").html("取消挂起"),t.removeSub("control.trade.view.click.trade_halt.done")}),t.pub("control.trade.view.click.trade_halt",d,!0);break;case"trade_halt_cancel":t.sub("control.trade.view.click.trade_halt_cancel.done",function(){t.showSuccess("操作成功！",.8),l.find(".J_isHalt").empty(),l.find('[data-name="trade_halt_cancel"]').attr("data-name","trade_halt").html("订单挂起"),t.removeSub("control.trade.view.click.trade_halt_cancel.done")}),t.pub("control.trade.view.click.trade_halt",d,!1);break;case"print_express_end":var a=this,p="control.trade.view.click.print_express_end.done";t.sub(p,function(e){a._fn_print_express_done(e,p,!1)}),this._tradeCollection&&this._tradeCollection.command("print_express_end",[d],!0);break;case"print_express_undo":var a=this,p="control.trade.view.click.print_express_undo.done";t.sub(p,function(e){a._fn_print_express_done(e,p,!0)}),this._tradeCollection&&this._tradeCollection.command("print_express_end",[d],!1);break;case"print_deliver_end":var a=this,p="control.trade.view.click.print_deliver_end.done";t.sub(p,function(e){a._fn_print_deliver_done(e,p,!1)}),this._tradeCollection&&this._tradeCollection.command("print_deliver_end",[d],!0);break;case"print_deliver_undo":var a=this,p="control.trade.view.click.print_deliver_undo.done";t.sub(p,function(e){a._fn_print_deliver_done(e,p,!0)}),this._tradeCollection&&this._tradeCollection.command("print_deliver_end",[d],!1);break;case"trade_verify":var a=this,p="control.trade.view.click.trade_verify.done";t.sub(p,function(e){a._fn_trade_verify_done(e,p,!1)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",[d],!0);break;case"trade_verify_cancel":var a=this,p="control.trade.view.click.trade_verify_cancel.done";t.sub(p,function(e){a._fn_trade_verify_done(e,p,!0)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",[d],!1);break;case"edit_shipping_address":a._fn_to_change_shipping_address(l,d);break;case"edit_messageMemos":a._fn_to_edit_messageMemos(l,d,s);break;case"logistics_info":var o=s.attr("data-tid"),r=s.attr("data-taobaoId"),_=s.attr("data-oid")||"";t.pub("control.trade.view.click.logistics_info",d,o,r,_,i);break;case"resend_product":this._fn_start_to_resend_product([d]);break;case"create_wlb_no":var m=l.find(".J_Express_Name").attr("data-value").replace(/w/,""),u=l.find('[data-name="create_wlb_no"]').attr("data-value");if(u)return;t.pub("control.trade.view.click.create_wlb_no",d,m);break;case"express_wlb_info":var m=l.find(".J_Express_Name").attr("data-value").replace(/w/,"");t.sub("control.trade.view.click.express_wlb_info.done",a._getWlbInfo=function(e){a._fn_get_wlb_info_done(l,e),t.removeSub("control.trade.view.click.express_wlb_info.done",a._getWlbInfo)}),t.pub("control.trade.view.click.express_wlb_info",d,m);break;case"trade_close":a._fn_close_trade(l,d);break;case"trade_sync_single":a._fn_trade_sync_single(l,d);break;case"delay_confirm":a._fn_trade_delay_confirm(l,d);break;case"trade_postage_update":a._fn_trade_postage_update(l,d);break;case"address_reachable":a._fn_trade_address_reachable(l,d,i);break;case"copy-wangwang-inmenu":break;case"open-wangwang-inmenu":break;case"merge-order-inmenu":a._fn_event_handler("manual_merge_orders_by_wangwangNo")(i,s.attr("wangwangNo"))}}},_fn_start_to_resend_product:function(i){if(!i.length)return void e.dialog.alert("您还未选择订单！");for(var a="",s="",n=[],l=0;l<i.length;l++){var d=o.getModel(i[l]).toJSON(),r=d.canConfirmSend,p=d.isRefund;if(1==p&&n.push(d.tid+"<br/>"),""!==a&&a!=r){s="请选择相同发货方式的订单，例如都是自己联系物流发货的订单.";break}a=r}if(s||(s=2==a?"无需物流发货不支持重新发货。":""),!s&&n.length&&(s="以下订单为退款订单，请先处理再重新发货！订单号："+n.join(",")),s)return void e.dialog.alert(s);var c=t.controls.get("control.trade.module.resend.product");c.show(i)},_fn_create_wlb_no_done:function(t,i){if(t){var a=this._elm_dom_tradeList_container.find('[uniqueid="'+t+'"]'),s=a.find('[data-name="create_wlb_no"]');if(i.successResult.length){var n=i.successResult[0].outSid;s.val(n).attr("data-value",n),e('<a class="m-outsid-callback-btn j-outsid-callback-btn" href="javascript:;" data-title="回收单号">×</a>').insertAfter(s).iTip({skin:"blue",triggerType:"hover",zIndex:2e4})}}},_fn_get_wlb_info_done:function(e,i){var a=t.controls.get("control.trade.module.wlb.info.dialog"),s=e.find(".J_Express_Name"),n=s.html(),l=s.attr("data-value");a.show(i,n,l,e)},_fn_to_check_item:function(t,i){var a=this,s=e(t).prop("checked"),n=i.attr("uniqueid"),l=this._elm_dom_container.find(".J_Select_All");s?(i.addClass("module-trade-list-item-selected"),this.addIdToSelectedItemIds(n),this.getSelectedItemIds().length===this._tradeCollection.id_list.length&&l.prop("checked",!0)):(i.removeClass("module-trade-list-item-selected"),this.removeIdFromSelectedItemIds(n),l.prop("checked")&&(a._selectall_unchecked_by_item_checkbox=!0,l.prop("checked",!1)))},_fn_to_show_orders:function(e){var t=e.find(".J_Trigger_Show_Orders");t.hasClass("trade-icon-close")?(e.find(".module-trade-list-item-row3").show(),e.find(".J_Trigger_Show_Orders").addClass("trade-icon-open").removeClass("trade-icon-close")):(e.find(".module-trade-list-item-row3").hide(),e.find(".J_Trigger_Show_Orders").addClass("trade-icon-close").removeClass("trade-icon-open")),e.find(".J_Trade_Amount").find(".g_alert_information").iTip({skin:"blue",triggerType:"hover",maxWidth:300})},_fn_to_save_item_outid:function(i,a){var s=this;this._timer_save&&(clearTimeout(this._timer),this._timer_save=null);var n=i.find('input[name="outSid"]');if(e.trim(n.val())===n.attr("data-value"))return this._timer_save=setTimeout(e.proxy(function(){i.find('input[name="outSid"]');i.find(".J_Save_OutSid").stop().animate({width:0}),i.find(".trade-icon-bottom").stop().animate({width:24})},this),200),!1;i.find(".J_Save_OutSid").stop().css("width",36),i.find(".trade-icon-bottom").stop().css("width",0);var l={errorCallBack:function(){i.find('input[name="outSid"]').focus()}};t.sub("control.trade.view.focusout.edit_logistics.done",function(e){s._fn_to_save_item_outid_done(e),t.removeSub("control.trade.view.focusout.edit_logistics.done")}),t.pub("control.trade.view.focusout.edit_logistics",a,i.find(".J_Express_Name").attr("data-value"),e.trim(n.val()),l)},_fn_to_change_express:function(i,a,s){t.pub("control.trade.view.click.change_express",a,e(s.target).attr("data-value"),s)},_fn_to_update_batch_express_id:function(i,a,s){{var n=this;s.parents(".J_TradeList_Body"),this._elm_dom_container.find("input.J_Select_All")}return i.find(".J_Checkbox").prop("checked")?""===e.trim(i.find('input[name="outSid"]').val())?void e.dialog.alert("您还未填写运单号！",e.proxy(function(){i.find('input[name="outSid"]').focus()},this)):(t.sub("control.trade.view.click.batch_update_express_id.done",function(e){n._fn_batch_update_express_id_done(e),t.removeSub("control.trade.view.click.batch_update_express_id.done")}),void t.pub("control.trade.view.click.batch_update_express_id",a,i.find(".J_Express_Name").attr("data-value"),e.trim(i.find('input[name="outSid"]').val()),n.getSelectedItemIds())):void e.dialog.alert("您还未选中当前订单！")},_fn_to_print:function(t){e.isArray(t)&&(t=t.join(",")),this._fn_event_handler("module.print")(t)
},_fn_to_split:function(i,a){{var s=e(a.target),n=s.parents(".module-trade-list-item"),l=(n.parent(),n.find(".J_Express_Name").attr("data-value")),d=!1,o=n.find('input[name="outSid"]').val();s.attr("data-tid")}l.indexOf("w")>-1&&o&&/^\w*\d+\w*$/.test(o)&&(d=!0),e.dialog({title:"提示",icon:"warn.png",content:'<div class="ft_14 pt_20 pb_20">您是否确定进行订单拆分？ '+(d?"该操作会导致原电子面单号失效，您是否继续操作":"")+"</div>",okVal:"确定",ok:e.proxy(function(){var e=this;t.sub("control.trade.view.click.split_done",function(i){e._re_render_item_list(i.result,n),t.removeSub("control.trade.view.click.split_done")}),t.pub("control.trade.view.click.split",i,s.attr("data-tid"),s.attr("data-oid"),s.attr("data-sysTid"),s.attr("data-taobaoId"),s.data("nametype"),s.parents(".item-snapshot-itemname").find(".list-order-num").text()),s=null},this),cancelVal:"取消",cancel:function(){}})},_fn_to_cancel_merge:function(i,a){var s=e(a.target),n=s.parents(".module-trade-list-item"),l=n.find(".J_Express_Name").attr("data-value"),d=n.find('input[name="outSid"]').val(),o=!1;l.indexOf("w")>-1&&d&&/^\w*\d+\w*$/.test(d)&&(o=!0),e.dialog({title:"提示",icon:"warn.png",content:'<div class="ft_14 pt_20 pb_20">您是否确定要取消合并？ '+(o?"该操作会导致原电子面单号失效，您是否继续操作":"")+"</div>",okVal:"确定",ok:e.proxy(function(){var e=this;t.sub("control.trade.view.click.cancel_merge_done",function(i){e._re_render_item_list(i,n),t.removeSub("control.trade.view.click.cancel_merge_done")}),t.pub("control.trade.view.click.cancel_merge",i,s.attr("data-tid"),s.attr("data-taobaoId")),s=null},this),cancelVal:"取消",cancel:function(){}})},_fn_to_cancel_split:function(i,a){{var s=e(a.target),n=s.parents(".module-trade-list-item"),l=n.parent(),d=n.find(".J_Express_Name").attr("data-value"),o=n.find('input[name="outSid"]').val(),r=!1;s.attr("data-tid")}d.indexOf("w")>-1&&o&&/^\w*\d+\w*$/.test(o)&&(r=!0),e.dialog({title:"提示",icon:"warn.png",content:'<div class="ft_14 pt_20 pb_20">您是否确定要取消拆单？ '+(r?"该操作会导致原电子面单号失效，您是否继续操作":"")+"</div>",okVal:"确定",ok:e.proxy(function(){var e=this;t.sub("control.trade.view.click.cancel_split_done",function(i){var a=function(){for(var t=0;t<i.clear.length;t++){var a=i.clear[t].tid+"_"+i.clear[t].sysTid;l.find('[uniqueid="'+a+'"]').remove(),e._tradeCollection&&e._tradeCollection.remove_id_from_id_list(a),e.removeIdFromSelectedItemIds(a)}};e._re_render_item_list(i.result,n,a),t.removeSub("control.trade.view.click.cancel_split_done")}),t.pub("control.trade.view.click.cancel_split",i,s.attr("data-tid"),s.attr("data-taobaoId")),s=null},this),cancelVal:"取消",cancel:function(){}})},_fn_to_change_shipping_address:function(a,s){var n=this;t.sub("control.trade.save_shipping_address_success",function(l,d){var o=['<span class="J_Shipping_Address">收件人：'+l.receiverName+"<b>|</b>",l.receiverMobile?"<span>手机："+l.receiverMobile+"</span><b>|</b>":"<span>固定电话："+l.receiverPhone+"</span><b>|</b>",'<span class="detailed-address">详细地址：'+l.receiverState+"&nbsp;"+l.receiverCity+"&nbsp;"+l.receiverDistrict+"&nbsp;",i.escape(l.receiverAddress)+"，"+l.receiverZip+"</span></span>"].join("");a.find(".J_Shipping_Address").replaceWith(o),a.find(".product-receiver-destination").iTip({triggerType:"hover",skin:"blue",content:l.receiverState+l.receiverCity+l.receiverDistrict+i.escape(l.receiverAddress)}).html('<span class="receiver-short-address J_Click" data-name="trigger_show_orders">'+l.receiverState+l.receiverCity+l.receiverDistrict+"</span>");var r=d.data.addressReachable,p=-1;r&&r.length>0&&(p=d.data.addressReachable[0].canDelivered);var c=n._elm_dom_tradeList_container.find('[uniqueid="'+s+'"]'),_=c.find(".J_canDelivered");if(-1!=p&&_){var m="";1==p?(e(_).attr("class","ml_5 trade-icon-common trade-icon-right J_canDelivered J_Tip"),m="此物流可达"):(e(_).attr("class","ml_5 trade-icon-common trade-icon-doubt J_canDelivered J_Tip"),m="此物流可能无法送达"),e(_).parent().find(".J_Tip").iTip({triggerType:"hover",skin:"blue",content:m})}t.removeSub("control.trade.save_shipping_address_success")}),t.pub("control.trade.view.click.edit_shipping_address",s)},_fn_to_edit_messageMemos:function(e,i,a){var s=this,n="control.trade.module.single_message_memo.edit.done";t.sub(n,function(t){s._fn_edit_single_message_memo_done(e,i,a,n,t)}),t.pub("control.trade.view.click.edit_messageMemos",i,a.attr("data-tid"))},_fn_actions_focusin_item:function(t){var i=e(t.target),a=i.attr("data-name");if(a){{var s=i.parents(".module-trade-list-item");s.attr("uniqueid")}this._timer&&(clearTimeout(this._timer),this._timer=null),s.find(".J_Save_OutSid").stop().animate({width:36}),s.find(".trade-icon-bottom").stop().animate({width:0})}},_fn_check_ifExistCODs:function(e){var t=!1;if(e.length){for(var i=0;i<e.length;i++)if(o.getModel(e[i]).toJSON().type==this._TRADE_TYPE.COD){t=!0;break}return t}},_fn_check_exceptionData:function(t,i,a){var s=[],n=[],l=[],d=!1;if(t.length||(e.dialog.alert("您还未选择订单！"),d=!0),a)this._fn_get_error_tids_from_item_UI(a,t,s,n,l);else if(t.length)for(var o=0;o<t.length;o++){var r=this._elm_dom_tradeList_container.find('[uniqueid="'+t[o]+'"]');r.length?this._fn_get_error_tids_from_item_UI(r,t[o],s,n,l):this._tradeCollection&&this._tradeCollection.command("check_error_tids_for_data",t[o],s,n,l)}if(s.length&&(e.dialog.alert('<div style="max-height: 240px;">以下订单为异常订单，请先处理再发货！订单号：<br/>'+s.join("<br/>")+"</div>"),d=!0),n.length&&(e.dialog.alert('<div style="max-height: 240px;">以下订单为在线发货（待确认），不能使用确认发货操作！订单号：<br/>'+n.join("<br/>")+"</div>"),d=!0),i&&l.length){var p=a?"您还未保存运单号！":'<div style="max-height: 240px;">以下订单还未保存运单号！订单号：<br/>'+l.join("<br/>")+"</div>";e.dialog.alert(p),d=!0}return d},_fn_get_error_tids_from_item_UI:function(e,t,i,a,s){var n=t.split("_")[0];(e.find(".J_isExcep").children().length||e.find(".J_isHalt").children().length||e.find(".isRefund").children().length)&&i.push(n),e.find(".trade-online-sending").length&&a.push(n),e.find('input[name="outSid"]').val()||s.push(n)},_fn_actions_focusout_item:function(t){var i=e(t.target),a=i.attr("data-name");if(a){{var s=i.parents(".module-trade-list-item");s.attr("uniqueid")}this._timer_f&&(clearTimeout(this._timer_f),this._timer_f=null),this._timer_f=setTimeout(e.proxy(function(){var e=s.find('input[name="outSid"]');e.val(e.attr("data-value")),s.find(".J_Save_OutSid").stop().animate({width:0}),s.find(".trade-icon-bottom").stop().animate({width:24})},this),200)}},_re_render_item_list:function(e,i,a){for(var s=[],n=[],l=[],d=[],o=0;o<e.length;o++)s.push(e[o].id),n.push(e[o].taobaoId),l.push(e[o].sysTid),d.push(e[o].tid);var r={tids:d.join(","),sysTids:l.join(","),taobaoIds:n.join(",")},p=this;API.trade_search_tids(r,function(e){var s=e.data.list,n={SELLER_CONSIGNED_PART:1,WAIT_SELLER_SEND_GOODS:1};if(s){for(var l="",d=[],o=i.parents(".module-trade-wrap"),r=o.find(".J_Select_All").prop("checked"),c=o.find(".J_Trigger_Trade_Orders").prop("checked"),_=0;_<s.length;_++){var m=s[_].status;if(n[m]){l=t.template.get("template.trade.list.list_item",p._fn_prehandle_data(s[_])),StringCollectionObj=p._fn_createItemUI(s[_]);for(var u in StringCollectionObj)StringCollectionObj.hasOwnProperty(u)&&(l=l.replace(u,StringCollectionObj[u]));if(l){var h=s[_].tid+"_"+s[_].sysTid;i.before(l),i.prev().css("border","1px solid #E19F33").attr("uniqueId",h).find(".J_Tip").iTip({skin:"blue",triggerType:"hover"}),d.push(h),p._tradeCollection&&p._tradeCollection._update_map_in_collection(h),p._tradeCollection&&p._tradeCollection._update_trade_model_in_collection(h,s[_]),r&&i.prev().find(".J_Checkbox").prop("checked",!0),c&&(i.prev().find(".J_Trigger_Show_Orders").removeClass("trade-icon-close").addClass("trade-icon-open"),i.prev().find(".module-trade-list-item-row3").show())}}}var f=i.attr("uniqueid");if(p._tradeCollection&&p._tradeCollection.id_list&&p._tradeCollection&&p._tradeCollection._update_id_list_in_collection(f,d),l){if(p._tradeCollection&&p._tradeCollection.remove_id_from_id_list(f),p.removeIdFromSelectedItemIds(f),r)for(var _=0;_<d.length;_++)p.addIdToSelectedItemIds(d[_]);i.remove(),l="",d=[]}a&&a()}},function(){})},_fn_ctrl_setCurHash:function(i,a){if(a===!0)return void t.pages.setCurHash(e.extend(i,{queryId:this._status_hashs.queryId,sys:this._status_hashs.sys}));var s=e.extend({},this._status_hashs);for(var n in i)void 0!==i[n]?s[n]=i[n]:delete s[n];t.pages.setCurHash(s)},_fn_show_guide_step1:function(t){if("true"!=localStorage.step1_showed){var i=e(".container");i.css("position","relative");var a='<img id="step1_show" class="step1_show"/>';cancelDom='<div id="cancel_guide" class="cancel_guide"></div>',$imgDom=e(a).appendTo(i).scrollToFixed({marginTop:-200,zIndex:101}),$cancelDom=e(cancelDom).appendTo(i).scrollToFixed({marginTop:133,marginLeft:80,zIndex:101}),e("#cancel_guide").on("click",function(){$imgDom.remove(),$cancelDom.remove(),$imgDom.trigger("detach.ScrollToFixed"),$cancelDom.trigger("detach.ScrollToFixed"),t&&t()}),localStorage.step1_showed="true"}else t&&t()},_status_hashs:{},_update:function(i,d){this._fn_dom_render(i);var o=e.extend({},this._status_hashs);t.removeSub("trade.searchlist.render.filter"),a.update(i,o),b.renderTo(e(".custom-filter-query"),i),s.update(i,o),n.update(i,o),l.update(i,o),this._fn_ctrl_update_tradeList(i,o),d&&d()},init:function(){},update:function(i,a,s){var n=e.proxy(function(){d.load(e.proxy(function(){var n,l,o=d.getData(),r=i.queryId||"",p=i.sys||"",c=[],_=!1,m=o.length;for(n=0;m>n;n++)if(l=o[n],!l.isHide&&(l.isSys&&c.push(l.id),r==l.id&&p==String(l.isSys))){_=!0;break}var u=function(){var t=null;return e.each([1,4,0,2,3,5,6,7,8,9],function(i,a){return-1!==e.inArray(a,c)?(t=a,!1):void 0}),t=t||c[0],"/trade/list/?queryId="+t+"&sys=true"};if(!_)return void t.pages.replacePage(u());var h=i.startTime,f=i.endTime,v=(new Date).getTime();if(h){if(!h.match(/^\d+$/))return void t.pages.replacePage(u());if(h=Number(h),!t.util.date.is_date(h))return void t.pages.replacePage(u());if(h>=v)return void t.pages.replacePage(u())}if(f){if(!f.match(/^\d+$/))return void t.pages.replacePage(u());if(f=Number(f),!t.util.date.is_date(f))return void t.pages.replacePage(u());if(f>v)return void t.pages.replacePage(u())}if(h&&f&&6e4>f-h)return void t.pages.replacePage(u());i.text&&(i.text=decodeURIComponent(i.text)),-1===e.inArray(i.timeType,["created","pay_time","consign_time"])&&(i.timeType=4==i.queryId?"consign_time":"created"),-1===e.inArray(i.field,["created","pay_time","payment","consign_time"])&&(i.field=i.field||(4==i.queryId?"consign_time":"created")),-1===e.inArray(i.order,["asc","desc"])&&(i.order=4==i.queryId||6==i.queryId||7==i.queryId||8==i.queryId?"desc":"asc"),i.pageNo&&i.pageNo.match(/^[1-9][0-9]*$/)||(i.pageNo="1"),i.pageSize&&i.pageSize.match(/^[1-9][0-9]*$/)||(i.pageSize=localStorage.trade_p_s||"20"),this._status_hashs.pageSize!=i.pageSize&&(localStorage.trade_p_s=i.pageSize),i.app&&delete i.app,i.root&&delete i.root;var g=e.extend({},i);this._update(i,a,s),this._status_hashs=g;var b=t.modules.get("trade.detail");b._initDialog(this.getContainer())},this))},this);this._fn_show_guide_step1(n)},disabled:function(){},getContainer:function(){return this._elm_dom_container},getSelectedItemIds:function(){return this._selected_item_ids||[]},addIdToSelectedItemIds:function(t){for(var i=[],a=0;a<this._tradeCollection.id_list.length;a++)i[a]="_f";for(var s=0;s<this._selected_item_ids.length;s++){var n=e.inArray(this._selected_item_ids[s],this._tradeCollection.id_list);i[n]=this._selected_item_ids[s]}if(e.inArray(t,this._selected_item_ids)<0){var l=e.inArray(t,this._tradeCollection.id_list)>-1&&e.inArray(t,this._tradeCollection.id_list);i[l]=t;var d=i.join("&")+"&";d=d.replace(/_f&/g,""),d=d.substring(0,d.length-1),this._selected_item_ids=d.split("&")}},removeIdFromSelectedItemIds:function(t){if(e.inArray(t,this._selected_item_ids)>-1){var i=this._selected_item_ids.join("&")+"&",a=new RegExp(t+"&"),s="";i=i.replace(a,""),s=i.substring(0,i.length-1),this._selected_item_ids=""!==s?s.split("&"):[]}},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),a.destroy(),s.destroy(),n.destroy(),l.destroy(),p.destroy(),c.destroy(),_.destroy(),m.destroy(),u.destroy(),h.destroy(),f.destroy(),v.destroy(),Module_CLOSE_TRADE.destroy(),Module_Trade_Sync_Single.destroy(),this.ctrl_guide&&this.ctrl_guide.destroy(),this._tradeCollection&&this._tradeCollection.destroy(),this._tradeCollection=null,this._status_hashs={},this._elm_dom_container.empty().remove(),this._elm_dom_container=null,this._selected_item_ids=[])}};t.modules.define(y.name,y)}(jQuery,RayCloud),function(e,t){var i=['<div class="trade-order-detail-container" data-uniqueId="{{tid}}_{{sysTid}}">','<div class="d-trade-status">','<span act-loop="OrderProcess in OrderProcesss" class="OrderProcess_{{OrderProcess.num}}">','<span act-if="OrderProcess.isEnd == false" class="d-stage {{OrderProcess.isFinished == true act-then d-status-finished}} d-status-inprogress" style="width:{{OrderProcess.progress}}%" >','<span class="d-stage-left">','<div class="d-step-time" act-if="OrderProcess.createdFormat != "><span class="d-time-point">{{OrderProcess.createdFormat}}</span><span class="d-arrow-down-out"></span><span class="d-arrow-down-in"></span></div>','<div class="d-steps d-step"><span class="d-step-index">{{OrderProcess.num}}</span></div>','<div class="d-step-note">{{OrderProcess.name}}</div>',"</span>",'<span class="d-steps d-stage-right-all">','<span class="d-steps d-stage-right-l"></span>','<span class="d-steps d-stage-right-m"></span>','<span class="d-steps d-stage-right-r"></span>',"</span>",'<span class="d-duration" {{durationStyleText}} ><span class="d-duration-span"><img style="vertical-align: middle;" src="/resources/css/build/images/icon_clock.png"/></span><span class="clockspan"><span class="day">0</span>天<span class="hour">0</span>小时<span class="minute">0</span>分<span class="second">0</span>秒</span></span>',"</span>",'<span act-if="OrderProcess.isEnd == true" class="d-stage {{OrderProcess.isFinished == true act-then d-status-finished}} d-last-stage">','<span class="d-stage-left">','<div class="d-step-time" act-if="OrderProcess.createdFormat != "><span class="d-time-point">{{OrderProcess.createdFormat}}</span><span class="d-arrow-down-out"></span><span class="d-arrow-down-in"></span></div>','<div class="d-steps d-step"><span class="d-step-index">{{OrderProcess.num}}</span></div>','<div class="d-step-note">{{OrderProcess.name}}</div>',"</span>","</span>","</span>","</div>",'<div class="d-trade-details">','<div class="d-tabs-container">','<span class="d-tabs d-order-info d-tab-selected">订单信息</span>','<span class="d-tabs d-order-prod">订单商品</span>','<span class="d-tabs d-shipping-info">地址信息</span>','<span class="d-tabs d-refund-info" act-if="refundsLen > 0">退款信息</span>','<span class="d-order-logs-container"><a class="d-order-logs">订单操作记录</a></span>',"</div>",'<div class="d-content-container">','<div class="d-content d-order-content-info">','<div class="d-order-left-i">','<div class="d-left-row">','<span class="d-left-title">系统单号：</span>','<span class="d-left-value">{{sid}}</span>','<span class="d-shop-name J_Tip" data-title="{{shopName}}">{{shopFlag}}</span>','<span act-if="mergeSplitType == 2 || mergeSplitType == 4" class="d-order-type1 J_Tip" data-title="合单">合</span>','<span act-if="mergeSplitType == 5" class="d-order-type J_Tip" data-title="拆单">拆</span>','<span act-if="tradeSource != undefined && tradeSource != \'\'" class="d-prod-type">{{tradeSource}}</span>','<span act-if="type == cod" class="d-order-cod J_Tip" data-title="货到付款">COD</span>',"</div>",'<div class="d-left-row"><span class="d-left-title">买家昵称：</span><span class="d-left-value"><a  target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&touid={{buyerNick}}&siteid=cntaobao&status=2&charset=utf-8">{{buyerNick}}<img border="0" width="16" src="http://amos.alicdn.com/online.aw?v=2&uid={{buyerNick}}&site=cntaobao&s=2&charset=utf-8" alt=" " /></a></span></div>','<div class="d-left-row"><span class="d-left-title">实付金额：</span><span class="d-left-value" act-if="paymentDisplay != undefined">¥{{paymentDisplay}}</span></div>','<div class="d-left-row">','<span class="d-left-title">赠品：</span>','<span class="d-left-value d-gift-name">{{giftName}}</span>',"</div>",'<div class="d-left-row">','<span class="d-left-title">买家留言：</span>','<span class="d-buyer-msg">{{buyerMessage}}</span>',"</div>","</div>",'<div class="d-order-right-i">','<div class="d-right-row">','<span class="d-right-label">淘宝单号：</span>','<span class="d-right-value">{{tid}}</span>',"</div>",'<div class="d-right-row">','<span class="d-right-label">打印/审核/异常状态：</span>','<span class="d-right-value"></span>','<span class="d-excep-kuai J_Tip" act-if="expressStatus == 1" data-title="快递单已打印">快</span>','<span class="d-excep-kuai-not J_Tip" act-if="expressStatus == 0" data-title="快递单未打印">快</span>','<span class="d-excep-fa J_Tip" act-if="deliverStatus == 1" title="发货单已打印">发</span>','<span class="d-excep-fa-not J_Tip" act-if="deliverStatus == 0" data-title="发货单未打印">发</span>','<span class="d-excep-verify J_Tip" act-if="isVerify == 1" data-title="订单已审核">审</span>','<span class="d-excep-verify-not J_Tip" act-if="isVerify == 0" data-title="订单未审核">审</span>','<span class="d-excep-excep J_Tip" act-if="isExcep == 1" data-title="淘宝异常订单">异</span>','<span class="d-excep-halt J_Tip" act-if="isHalt == 1" data-title="挂起订单">挂</span>','<span class="d-excep-refund J_Tip" act-if="isRefund == 1" data-title="退款订单">退</span>',"</div>",'<div class="d-right-row">','<span class="d-right-label">买家支付宝：</span>','<span class="d-right-value">{{alipayId}}</span>',"</div>",'<div class="d-right-row"><span class="d-right-label">发票：</span><span class="d-left-value">{{invoiceName}}</span></div>','<div class="d-right-row">','<span class="d-right-label">卖家备注：</span>','<span act-loop="sellerFlag in sellerFlags" class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}}"></span>','<div class="d-buyer-note">{{sellerMemos}}</div>',"</div>","</div>","</div>",'<div class="d-content d-order-content-prod">','<div class="d-order-list-title">','<span class="d-o-prod">商品</span>','<span class="d-o-placeholder">&nbsp;</span>','<span class="d-o-bianma">商家编码</span>','<span class="d-o-status">状态</span>','<span class="d-o-unit">单价（元）</span>','<span class="d-o-count">数量</span>','<span class="d-o-youhui">优惠金额（元）</span>',"</div>",'<div class="d-order-list-body">','<div class="d-order-list-item" act-loop="order in orders">','<span class="d-o-prod" style="padding-left: 60px;text-align: left;width:240px;">','<div class="d-0-img"><a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank"><img src="{{order.picPath}}_60x60.jpg"/></a></div>','<div style="margin-left: 8px">','<div><a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank">{{order.title}}</a></div>','<div act-if="order.hasSku == 1" class="prod-properties"><span style="display: inline;">规格：</span><span style="display: inline;" class="J_Sku_Prop_{{order.numIid}}">{{order.skuPropertiesNameColor}}</span>&nbsp;&nbsp;&nbsp;&nbsp;','<span act-if="order.statusIndex <= 2" class="detail-modify-sku"><a class="J_Edit_Sku" data-numIid="{{order.numIid}}" data-taobaoId="{{order.taobaoId}}">修改</a></span>',"</div>","</div>","</span>",'<span class="d-o-placeholder"><span act-if="order.isRefund == 1" class="d-o-prod-status J_Tip" data-title="退款订单">退</span></span>','<span class="d-o-bianma">{{order.outerId}}</span>','<span class="d-o-status">{{order.statusName}}','<div act-if="order.status == WAIT_BUYER_CONFIRM_GOODS"><a class="J_Click J_logistics_info" data-tid="{{order.tid}}" data-taobaoId="{{order.taobaoId}}" data-oid="{{order.oid}}">查看物流</a></div>','<div act-if="order.isRefund == 1"><a target="_blank" href="http://refund.taobao.com/view_refund_detail.htm?bizOrderId={{order.oid}}">{{order.refundStatusName}}</a></div>',"</span>",'<span class="d-o-unit">¥{{order.price}}</span>','<span class="d-o-count">{{order.num}}</span>','<span class="d-o-youhui">¥{{order.favorableFee}}</span>',"</div>","</div>","</div>",'<div class="d-content d-shipping-content-info">','<div class="d-shipping-info-item">','<span class="d-shipping-label">收货信息</span>','<span class="d-shipping-detail">','<div class="d-shipping-name-phone">','<span class="d-shipping-name-k">姓名：</span>','<span class="d-shipping-name-v">{{receiverName}}</span>','<span class="d-shipping-cell-k">手机：</span>','<span class="d-shipping-cell-v">{{receiverMobile}}</span>','<span class="d-shipping-cell-k">固话：</span>','<span class="d-shipping-cell-v">{{receiverPhone}}</span>','<span class="d-shipping-cell-k">邮编：</span>','<span class="d-shipping-cell-v">{{receiverZip}}</span>',"</div>",'<div class="d-shipping-addr">','<span class="d-shipping-addr-k">收件人地址：</span>','<span class="d-shipping-addr-v">{{receiverState}} {{receiverCity}} {{receiverDistrict}} {{receiverAddress}}</span>',"</div>","</span>","</div>",'<div class="d-shipping-info-item">','<span class="d-shipping-label">发货信息</span>','<span class="d-shipping-detail">','<div class="d-shipping-name-phone">','<span class="d-shipping-name-k">姓名：</span>','<span class="d-shipping-name-v">{{shop.sendContact}}</span>','<span class="d-shipping-cell-k">手机：</span>','<span class="d-shipping-cell-v">{{shop.sendMobile}}</span>','<span class="d-shipping-cell-k">固话：</span>','<span class="d-shipping-cell-v">{{shop.sendPhone}}</span>','<span class="d-shipping-cell-k">邮编：</span>','<span class="d-shipping-cell-v">{{shop.sendPost}}</span>',"</div>",'<div class="d-shipping-addr">','<span class="d-shipping-addr-k">发货地址：</span>','<span class="d-shipping-addr-v">{{shop.sendState}} {{shop.sendCity}} {{shop.sendDistrict}} {{shop.sendAddress}}</span>',"</div>","</span>","</div>",'<div class="d-shipping-info-item">','<span class="d-shipping-label">退货信息</span>','<span class="d-shipping-detail">','<div class="d-shipping-name-phone">','<span class="d-shipping-name-k">姓名：</span>','<span class="d-shipping-name-v">{{shop.refundContact}}</span>','<span class="d-shipping-cell-k">手机：</span>','<span class="d-shipping-cell-v">{{shop.refundMobile}}</span>','<span class="d-shipping-cell-k">固话：</span>','<span class="d-shipping-cell-v">{{shop.refundPhone}}</span>','<span class="d-shipping-cell-k">邮编：</span>','<span class="d-shipping-cell-v">{{shop.refundPost}}</span>',"</div>",'<div class="d-shipping-addr">','<span class="d-shipping-addr-k">退货地址：</span>','<span class="d-shipping-addr-v">{{shop.refundAddress}}</span>',"</div>","</span>","</div>","</div>",'<div act-if="refundsLen > 0" class="d-content d-refund-content-info">','<div class="d-refund-list-title">','<span class="d-r-num">退款编号</span>','<span class="d-r-prod" style="text-align: center">商品</span>','<span class="d-r-buyernick">买家昵称</span>','<span class="d-r-time">申请时间</span>','<span class="d-r-money">退款金额</span>','<span class="d-r-status">退款状态</span>',"</div>",'<div class="d-refund-list-body">','<div class="d-refund-list-item" act-loop="refund in refunds">','<span class="d-r-num">{{refund.tid}}</span>','<span class="d-r-prod"><a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank">{{refund.title}}</a></span>','<span class="d-r-buyernick">{{refund.buyerNick}}</span>','<span class="d-r-time">{{refund.createdDate}}</span>','<span class="d-r-money">{{refund.refundFee}}</span>','<span class="d-r-status"><a target="_blank" href="http://refund.taobao.com/view_refund_detail.htm?bizOrderId={{order.oid}}">{{refund.statusName}}</a></span>',"</div>","</div>","</div>","</div>","</div>",'<div class="d-trade-operations">','<div class="d-trade-btns">','<button class="btn btn-normal J_TD_Refresh">刷新</button>','<button class="btn btn-gray J_TD_Close">关闭</button>',"</div>","</div>","</div>"];t.template.addTemp("template.trade.order.detail.temp",i)}(jQuery,RayCloud),function(e){var t=e.controls.get("control.trade.module.logistics_info"),i=e.controls.get("control.trade.sku.edit"),a=e.controls.get("control.trade.module.order.detail"),s=e.controls.get("control.trade.module.traces_info"),n={name:"trade.detail",depend:"trade",_elm_dom_root:"#main",show:function(e){"undefined"!=typeof e&&(a.initItemData(e),this._show(e))},_show:function(e){this.data=e,this._render(e);var i=840;e.OrderProcesss&&e.OrderProcesss.length>5&&(i=900),this.$dialog=$.dialog({title:"订单详情",width:i,fixed:!1,content:this.$el.show(),close:function(){t.hide(),s.hide()}})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(t){t.OrderProcesss=a.getOrderProcess(t),t.durationStyleText="",t.OrderProcesss.length>5&&(t.durationStyleText='style="margin-left: -17px;"'),this.$el=$(e.template.get("template.trade.order.detail.temp",t)).appendTo("body"),this.$el.find(".J_Tip").iTip({skin:"blue",triggerType:"hover",zIndex:20020}),this._event_bind(t)},_event_bind:function(t){var n=this;this.$el.find(".d-tabs").on("click",function(e){var t=$(e.target);n.$el.find(".d-tabs").removeClass("d-tab-selected"),t.addClass("d-tab-selected"),n._switch_shown_content(t)}),this.$el.find(".J_TD_Refresh").on("click",function(){n.hide(),a.getTradeDetail(n.params,$.proxy(function(e){n.show(e)}))}),this.$el.find(".J_TD_Close").on("click",function(){n.hide()}),this.$el.find(".J_logistics_info").on("click",function(e){var t=$(e.currentTarget),i=t.attr("data-tid"),a=t.attr("data-taobaoId"),s=t.attr("data-oid")||"",l=$(".trade-order-detail-container").attr("data-uniqueId");n.logistics_info(l,i,a,s,e)}),this.$el.find(".d-order-logs").on("click",function(e){s.show(t,e)}),this.$el.find(".J_Edit_Sku").on("click",function(s){var l=$(s.currentTarget).attr("data-numIid"),d=$(s.currentTarget).attr("data-taobaoId"),o={taobaoId:d,numIid:l};a.getTradeItemInfo(o,$.proxy(function(s){if(null!=s.skus){var o=a.getOrderByNumIid(t,l);if(null!=o){var r={},p=Math.floor(1e3*Math.random()),c="trade_modify_order_properties_dialog_"+p;r.act_type="modify_order_properties",r.ran_id=c;var _=i.get_sku_data(s);r.num_iid=o.numIid,r.outerId=o.outerId,r.pic_url=o.picPath,r.created=t.created,r.createdFormat=e.util.date.getdate(t.created,"YY-MM-DD HH:mm:ss"),r.title=o.title,r.price=o.price,r.skus=_.a0,r.iid=o.numIid,r.oid=o.oid,r.tid=o.tid;var m=a.getQuantityBySkuId(s.skus,o.skuId),u=$(e.template.get("template.trade.sku.edit.temp",r));u.find(".item_quantity").text(m),i.init_sku_item_status(u,_,o.price,o.skuPropertiesName),$.dialog({title:"修改已购买宝贝SKU属性",width:500,fixed:!1,content:u,ok:function(){var e=i.before_save_data(u,_,o.price,o.oid);return e?void(1==e?console.log("选择没变化"):(e.taobaoId=d,a.updateSku(e,function(){var t=e.propertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;display: inline;">$1</span>');n.$el.find(".J_Sku_Prop_"+l).html(t),$(".prod-properties-"+o.oid).html(t),o.price=e.price,o.skuPropertiesName=e.propertiesName,o.skuPropertiesNameColor=t}))):!1},cancel:function(){$(".order_tid").text(""),$(".order_create_time").text(""),$(".order_pic").attr("src",""),$(".order_title").text(""),$(".order_price").text(""),$("#suk_tab").html(""),$(".order_title").removeAttr("iid",""),$("[name=oid]").val("")}})}}}))}),this._initCountDownView(t)},_initCountDownView:function(e){var t=this.$el;a.initCountDownView(t,e)},logistics_info:function(e,i,a,s,n){t.show(e,i,a,s,n)},_switch_shown_content:function(e){this.$el.find(".d-content").hide(),e.hasClass("d-order-info")?this.$el.find(".d-order-content-info").show():e.hasClass("d-order-prod")?this.$el.find(".d-order-content-prod").show():e.hasClass("d-shipping-info")?this.$el.find(".d-shipping-content-info").show():e.hasClass("d-refund-info")&&this.$el.find(".d-refund-content-info").show()},_event_unbind:function(){},getContainer:function(){return this.$el},clear:function(){this.$el&&(this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()},resetDialog:function(){this._elm_dom_container.undelegate(".J_Trade_Detail","click")},init:function(){},_initDialog:function(e){this._elm_dom_container=e,this.resetDialog();var t=this;this._elm_dom_container.delegate(".J_Trade_Detail","click",function(){var e=$(this).attr("data-taobaoId"),i=$(this).attr("data-tid"),s={taobaoId:e,tid:i};t.params=s,a.getTradeDetail(s,$.proxy(function(e){t.show(e)})),a.OrderProcessInit()})}};e.modules.define(n.name,n)}(window.RayCloud),function(e,t){var i=['<div act-if="act_type == modify_order_properties" class="popup_edit_attribute {{ran_id}}">','<div class="fc_666">订单编号：{{tid}}</div>','<div class="fc_666 mb_5">成交时间：{{createdFormat}}</div>','<div class="pt_10 pb_10 o-hide clearfix" style="border-top:1px solid #eaeaea; border-bottom:1px solid #eaeaea;">','<div class="item">','<div class="f-lt mr_5"><a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{oid}}" target="_blank" data-act-name="call_item_detail"><img src="{{pic_url}}_60x60.jpg"></a></div>',"<div>",'<div class="title"><a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{oid}}" target="_blank" data-act-name="call_item_detail">{{title}}</a></div>','<div class="ft-bold"><span class="fc_666">价格：</span>￥{{price}}</div>','<div class="fc_666">库存：<span class="item_quantity">0</span></div>','<div class="fc_666">商家编码：{{outerId}}</div>',"</div>","</div>","</div>",'<div class="mt_10 clearfix">','<div act-loop="sku in skus" class="clearfix {{sku:index != 0 act-then mt_5}}">','<div class="f-lt ft-right w65">{{sku.name}}：</div>','<div style="overflow: hidden;" data-sku_name="{{sku.name}}" data-sku_pid="{{sku.id}}">','<div class="tag-box-chose mini">','<label act-loop="cd in sku.cds" class="tag mb_5">','<input type="radio" name="radio-grade-{{sku.id}}" value="{{cd.id}}" data-sku_value="{{cd.name}}" data-sku_sid="{{cd.id}}">','<span class="tag-tit">{{cd.name}}</span>',"</label>","</div>","</div>","</div>","</div>","</div>"];t.template.addTemp("template.trade.sku.edit.temp",i)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_list">','<div class="pt_express_list">','<div class="express-tab">','<div class="express-hd clearfix">','<ul class="hd-title clearfix">','<li class="current">','<a href="#/pt/list/">普通面单</a>',"</li>","<li>",'<a href="#/pt/wlb_list/">菜鸟电子面单</a>',"</li>","</ul>",'<div class="hd-create">','<a href="#" data-name="user_add" data-id="0" class="btn btn-success btn-small J_Click">新建快递单模版</a>',"</div>","</div>",'<div class="express-bd">','<div class="express-panel pt-list-tab"></div>',"</div>",'<div class="clearfix">','<div class="pagination-pages f-rt mr_5">','<div class="pagination-page J_Page_Container"></div>',"</div>","</div>","</div>","</div>","</div>"],a=['<table class="express-table">',"<thead>","<tr>",'<th class="express-index">','<div class="cell-box ft-center">序号</div>',"</th>",'<th class="express-name">','<div class="cell-box">模板名称</div>',"</th>",'<th class="express-size">','<div class="cell-box">快递单尺寸设置（毫米）</div>',"</th>",'<th class="express-offset">','<div class="cell-box">整体偏移设置（毫米）</div>',"</th>",'<th class="express-operation">','<div class="cell-box">操作</div>',"</th>",'<th class="express-commonuse">','<div class="cell-box">常用快递</div>',"</th>",'<th class="express-sort">','<div class="cell-box">排序</div>',"</th>","</tr>","</thead>",'<tbody class="common-list-tr">','<tr act-loop="item in items" data-id={{item.id}} class="J_List_Item_{{item.id}}">',"<td>",'<div class="cell-box ft-center sortId">{{item.sortId}}</div>',"</td>","<td>",'<div class="cell-box"><span class="J_Express_Name">{{item.name}}</span><a class="edit-ex J_Click" data-name="edit_name" data-id={{item.id}}></a></div>',"</td>","<td>",'<div class="cell-box">','<span class="mr_10">宽：{{item.width}}</span>',"<span>高：{{item.height}}</span>","</div>","</td>","<td>",'<div class="cell-box">','<span class="mr_15">横向：{{item.horizontalOffset}}</span>',"<span>纵向：{{item.verticalOffset}}</span>","</div>","</td>","<td>",'<div class="cell-box opr-list-ex">',"{{item.isDefaultHtml}}","<span>|</span>",'<a class="J_Click" data-name="preview" data-id="{{item.id}}">预览</a>',"<span>|</span>",'<a href="#/pt/common/detail/?id={{item.id}}">设计</a>',"<span>|</span>",'<a class="J_Click" data-name="user_delete" data-id="{{item.id}}">删除</a>',"<span>|</span>","{{item.sltPrinter}}","</div>","</td>","<td>",'<div class="cell-box">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{item.commonUseClass}} J_Click" data-name="default_express" data-id="{{item.id}}">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>","</div>","</td>","<td>",'<div class="cell-box">','<a href="#" data-name="pt_common_user_sort" data-id="{{item.id}}" class="sort-up J_Click"></a>','<a href="#" data-name="pt_common_user_sort" data-id="{{item.id}}" class="sort-down J_Click"></a>','<a href="#" class="J_Click" data-name="pt_common_user_sort_top" data-id="{{item.id}}">置顶</a>',"</div>","</td>","</tr>","</tbody>","</table>"],s=['<div class="ft_14 pd_10" id="printer-list">','<div class="pb_20 ft-center">','<span class="mr_5">选择打印机：</span>','<select data-zindex="1000">','<option act-loop="item in printArr" value="{{item.value}}">{{item.name}}</option>',"</select>","</div>",'<div class="ft-center">','<span class="btn btn-success w80 J_printer">确 定</span>',"</div>","</div>"],n=['<div class="pt_express-new-create-wrapper">','<div class="pt_express-new-create-option">',"   快递单模版名称：",'   <select name="templateGroup" data-zIndex="999999">','       <option value="">--选择快递公司--</option>','       <option act-loop="express in expressList" value="{{express.groupId}}">{{express.name}}</option>',"   </select>",'    + <input type="text" name="name" value="" maxlength="3" id="name"/>（不超过3个字）',"</div>",'<div class="pt_express-new-create"></div>',"</div>"],l=['<div class="temp-container" act-loop="group in groupList">','<div act-if="group.doUse == 1" class="used"><img src="{{group.bgPath}}" style="width:300px;height: 160px;"/><div class="contaier-mask" style="width: 300px;height: 160px"></div><div class="icon-area"><span class="icon"></span></div></div>','<div act-if="group.doUse == 0" class="unselected" data-value="{{group.sysTemplateId}}"><img src="{{group.bgPath}}" style="width:300px;height: 160px;"/><div class="contaier-mask" style="width: 300px;height: 160px"></div><div class="icon-area"><span class="icon"></span><span class="icon-word">点击选中</span></div></div>','<div class="temp-note"><span>{{group.nameDesc}}</span><span class="view-big"><a href="{{group.bgPath}}" target="_blank">查看大图</a></span></div>',"</div>",'<div style="margin: 5px 0 5px 10px;">','   共<span style="color: red;font-size: 16px;"><strong>{{groupList.length}}</strong></span>个背景图',"</div>",'<div style="margin: 5px 0 5px 10px;">','   <span style="color: brown">温馨小贴士：快递单模板中已使用的背景图不能被重复使用。</span> ',"</div>"];
t.template.addTemp("template.pt.list.all",i),t.template.addTemp("template.common.list.tab",a),t.template.addTemp("template.lock.printer.list",s),t.template.addTemp("template.common.list.group.select",n),t.template.addTemp("template.common.list.group",l)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.pt.common_list"),a=t.controls.get("control.common_express"),s=t.controls.get("control.print_pt"),n=t.controls.get("control.form_util"),l=t.controls.get("control.widget.page"),d=['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="id" value="">','<input type="hidden" name="expressName" value="">','<div class="pd_10">','模板名称：<span class="J_Express_Name"></span> + ','<input type="text" name="suffix" value="" class="input-mini"> ',"(不超过3个字)","</div>",'<div class="pd_15 ft-center">','<button type="submit" class="btn btn-primary">保存</button>','<span class="btn btn-gray ml_15 J_Close">关闭</span>',"</div>","</form>","</div>"],o={show:function(t,i,a){this._render(),this._update_dom(t,i,a),this.$dialog=e.dialog({title:"修改快递模板名称",width:420,close:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(d.join("")).appendTo("body"),this._event_bind())},_update_dom:function(e,t,i){this.$el.find('input[name="id"]').val(e),this.$el.find('input[name="expressName"]').val(i),this.$el.find(".J_Express_Name").html(i);var a=t.slice(i.length);this.$el.find('input[name="suffix"]').val(a)},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this._fn_event_handler_click_close,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(i){i.preventDefault();var a=n.getData(i.target);return a.suffix.length>3?(e.dialog.alert("超出最长字数限制！"),!1):(t.pub("module.pt.list.submit.edit_name",{id:a.id,name:a.expressName+a.suffix}),!1)},_fn_event_handler_click_close:function(){this.hide()},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}},r={name:"pt.list",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.list.all",_fn_dom_render:function(){if(!this._elm_dom_container){var i=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root);this._elm_dom_ptListTab=i.find(".pt-list-tab"),this._elm_dom_pageContainer=i.find(".J_Page_Container"),this._fn_event_bind()}},_fn_dom_update:function(i){for(var a=s.findLocalPrinter(),n=0,d=i.list.length;d>n;n++)i.list[n].isDefaultHtml=1==i.list[n].isDefault?'<em class="fc_999 J_Default_Express" data-id="'+i.list[n].id+'">已默认</em>':'<a class="set-deafult J_Click J_User_Top" data-name="user_top" data-id="'+i.list[n].id+'">设为默认</a>',i.list[n].commonUseClass=1==i.list[n].commonUse?"ui-switch-on":"ui-switch-off",i.list[n].sortId=10*(i.page.pageNo-1)+n+1,i.list[n].sltPrinter=""==i.list[n].printerName||-1==e.inArray(i.list[n].printerName,a)?'<a class="J_Click" data-name="lock_print" data-id="'+i.list[n].id+'" data-status="0">锁定打印机</a>':'<em class="fc_999">'+i.list[n].printerName+'<a class="J_Click ml_5" data-name="lock_print" data-id="'+i.list[n].id+'" data-status="1" data-print="'+i.list[n].printerName+'">[取消锁定]</a></em>';var o={items:i.list},r=t.template.get("template.common.list.tab",o);this._elm_dom_ptListTab.html(r),this._elm_dom_pageContainer.html(l.get_html("",function(e){return"#/pt/list/?pageNo="+e},Math.ceil(i.total/i.page.pageSize),i.page.pageNo))},_fn_dom_update_userTop:function(t){var i=this._elm_dom_ptListTab.find(".J_Default_Express");e('<a class="set-deafult J_Click J_User_Top" data-name="user_top" data-id="'+i.attr("data-id")+'">设为默认</a>').insertAfter(i),i.remove();var a=this._elm_dom_ptListTab.find(".J_List_Item_"+t).find(".J_User_Top");a&&(e('<em class="fc_999 J_Default_Express" data-id="'+t+'">已默认</em>').insertAfter(a),a.remove())},_fn_show_guide_step2:function(){if("true"!=localStorage.step2_showed){var t=e(".container");t.css("position","relative");var i='<img id="step2_show" class="step2_show"/>',a='<div id="cancel2_guide" class="cancel2_guide"></div>',s=e(i).appendTo(t),n=e(a).appendTo(t);e("#cancel2_guide").on("click",function(){s.remove(),n.remove()}),localStorage.step2_showed="true"}},_fn_dom_update_defaultExpressStatus:function(e,t){var i=this._elm_dom_ptListTab.find(".J_List_Item_"+e).find(".ui-switch-statu");t?i.removeClass("ui-switch-off").addClass("ui-switch-on"):i.removeClass("ui-switch-on").addClass("ui-switch-off")},_fn_dom_update_expressName:function(e,t){this._elm_dom_ptListTab.find(".J_List_Item_"+e).find(".J_Express_Name").html(t)},_fn_event_bind:function(){this._elm_dom_container.on("click.J_Click",".J_Click",this._fn_event_handler("click")),t.sub("module.pt.list.submit.edit_name",this._fn_event_handler_submit_editName_proxy=e.proxy(this._fn_event_handler_submit_editName,this))},_fn_event_unbind:function(){this._elm_dom_container.off("click.J_Click"),t.removeSub("module.pt.list.submit.edit_name",this._fn_event_handler_submit_editName_proxy)},_fn_event_handler:function(t){if(!t)throw new Error("[module.pt.list:_fn_event_handler] 参数非法.");if(!this._event_handler_list[t])throw new Error("[module.pt.list:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(e){this._event_handler_list[t].call(this,e)},this)},_event_handler_list:{click:function(t){t.preventDefault();var i=e(t.currentTarget).attr("data-name"),a=e(t.currentTarget).attr("data-id");if(!i||!a)throw new Error("[module.pt.list:_event_handler_list::click] 参数非法.");var s=this._common_list[i];if(!s)throw new Error("[module.pt.list:_event_handler_list::click] "+i+" 参数异常.");s.call(this,a,t)}},_fn_event_handler_submit_editName:function(t){var s=t.id,n=t.name;i.name_edit({id:s,name:n},e.proxy(function(){this._update_express_data(s,{name:n}),o.hide(),this._fn_dom_update_expressName(s,n),a.update_name(s,n)},this))},_common_list:{default_express:function(t){var i=this._get_express_detail(t);return i.isDefault?void e.dialog.alert("默认快递必须为常用快递！"):void(i.commonUse?a.remove(t,e.proxy(function(){this._update_express_data(t,{commonUse:0}),this._fn_dom_update_defaultExpressStatus(t,!1)},this)):a.add({templateId:i.id,templateName:i.name,isWlb:0},e.proxy(function(){this._update_express_data(t,{commonUse:1}),this._fn_dom_update_defaultExpressStatus(t,!0)},this)))},edit_name:function(e){var t=this._get_express_detail(e);o.show(t.id,t.name,t.expressName)},user_top:function(t){i.user_top({id:t},e.proxy(function(){var e=this._get_default_express_id();null!==e&&this._update_express_data(e,{isDefault:0}),this._update_express_data(t,{isDefault:1}),this._fn_dom_update_userTop(t);var i=this._get_express_detail(t);i.commonUse||(this._update_express_data(t,{commonUse:1}),this._fn_dom_update_defaultExpressStatus(t,!0))},this))},preview:function(e){var i=this;t.sub("raycloud.pages.hashchange",function(){i._cacheCommonData=[]}),a.preview(e)},lock_print:function(e,t){s.lockPrinter(e,"common",t)},user_delete:function(t){return e(".J_List_Item_"+t).find(".J_Default_Express").length>0?(e.dialog.alert("默认模版不能删除!"),!1):void e.dialog.confirm("您是否要删除该模版?",function(){i.user_delete(t,e.proxy(function(){e(".J_List_Item_"+t).hide("fast",function(){this.remove()})},this))})},pt_common_user_sort_top:function(t){i.pt_common_user_sort_top({id:t},e.proxy(function(){window.location="#/pt/list/?fh="+t},this))},pt_common_user_sort:function(t,a){var s=e(a.currentTarget),n=!1;s.hasClass("sort-up")&&(n=!0);var l=this._status_hashs.pageNo;"undefined"==typeof l&&(l=1);var d=10,o=(l-1)*d+1,r=l*d,p=parseInt(e(".J_List_Item_"+t).find(".sortId").text());if(n&&1==p)return e.dialog.alert("该模版已经是处于最前面."),!1;var c=l;n&&o==p&&l>1?c--:n||r!=p||c++,i.pt_common_user_sort({id:t,isUp:n},e.proxy(function(){if(l==c){var i=e(".J_List_Item_"+t).prev(),a=e(".J_List_Item_"+t).next();n?(e(".J_List_Item_"+t).after(i),e(".J_List_Item_"+t).find(".sortId").html(p-1),i.find(".sortId").html(p)):(e(".J_List_Item_"+t).before(a),e(".J_List_Item_"+t).find(".sortId").html(p+1),a.find(".sortId").html(p)),e(".common-list-tr").find(".colored-border").removeClass("colored-border"),e(".J_List_Item_"+t).addClass("colored-border")}else window.location="#/pt/list/?pageNo="+c+"&fh="+t+"&h="+(new Date).getTime()},this))},user_add:function(){i.common_status({status:1},e.proxy(function(a){var s={expressList:a},n=e(t.template.get("template.common.list.group.select",s)).appendTo("body"),l=this;this.$dialog=e.dialog({title:"新建快递单模板",width:600,fixed:!1,content:n,cancelVal:"取消",okVal:"保存",ok:function(){var t=n.find("select option:selected").text(),a=n.find("input[id='name']").val();if(a.length>3)return e.dialog.alert("模版名称不能超过3个字符!"),!1;var s=t+a,d=n.find(".selected").attr("data-value");return"undefined"==typeof d?(e.dialog.alert("您还未选中要新增的快递模版!"),!1):(i.user_add({name:s,sysTemplateId:d},e.proxy(function(e){l.$dialog.close(),window.location="#/pt/list/?fh="+e},this)),!1)},cancel:function(){},close:function(){n.remove()}}),n.find("select").on("change",function(){""!=this.value?i.list_groupId({groupId:this.value},e.proxy(function(i){var a={groupList:i},s=t.template.get("template.common.list.group",a);n.find(".pt_express-new-create").html(s).show(),l.$dialog._reset(),n.delegate(".unselected","click",function(){n.find(".selected").attr("class","unselected"),e(this).attr("class","selected")}),n.delegate(".selected","click",function(){e(this).attr("class","unselected")})},this)):n.find(".pt_express-new-create").html("")}).iSelect()},this))}},_cacheCommonData:[],_status_hashs:{},_status_list:[],_update_express_data:function(t,i){var a=!1;if(e.each(this._status_list,function(s,n){return t==n.id?(a=!0,i=e.extend(n,i),!1):void 0}),!a)throw new Error("[module.pt.list:_get_detail] "+t+" 非法操作.")},_get_express_detail:function(t){var i=null;if(e.each(this._status_list,function(a,s){return t==s.id?(i=e.extend({},s),!1):void 0}),null===i)throw new Error("[module.pt.list:_get_detail] "+t+" 非法操作.");return i},_get_default_express_id:function(){var t=null;return e.each(this._status_list,function(e,i){return i.isDefault?(t=i.id,!1):void 0}),t},init:function(){},getContainer:function(){return this._elm_dom_container},update:function(t,a){this._fn_show_guide_step2(),this._status_hashs=e.extend({},t),this._fn_dom_render(),i.load({pageNo:t.pageNo||1,pageSize:t.pageSize||10},e.proxy(function(i){this._status_list=i.list.slice(0),this._fn_dom_update(i),t.fh&&t.fh>0&&e(".J_List_Item_"+t.fh).addClass("colored-border")},this),e.proxy(function(){this._status_list=[]},this)),a&&a()},destroy:function(){this._elm_dom_container&&(o.destroy(),this._fn_event_unbind(),this._status_hashs={},this._status_list=[],this._cacheCommonData=[],this._elm_dom_ptListTab=null,this._elm_dom_pageContainer=null,this._elm_dom_container.empty().remove(),this._elm_dom_container=null)}};t.modules.define(r.name,r)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_common">','<div class="pt_public pd_20"></div>',"</div>"],a=['<div class="ui-box ui-box-s1 noborder mb_10" style="overflow:hidden;">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">快递单设计</div>','<a href="http://bangpai.taobao.com/group/thread/548716-292103867.htm?spm=0.0.0.0.dRqPmR" target="_blank" class="ui-box-hd-remind">面单纸越打越偏怎么办？</a>','<input type="hidden" id="groupId" value="{{groupId}}"/>','<input type="hidden" id="templateName" value="{{name}}"/>','<input type="hidden" id="expressName" value="{{expressName}}"/>','<input type="hidden" id="sysTemplateId" value="{{sysTemplateId}}"/>',"</div>",'<div class="ui-box-bd">','<div class="ft_14 pb_10">','<span class="w400">',"<span>打印纸张尺寸设置（毫米）：</span>",'<span class="mr_15">宽 <input type="text" class="ft-center paper-width" style="width: 35px" value="{{width}}"></span>','<span>高 <input type="text" class="ft-center paper-height" style="width: 35px" value="{{height}}"></span>',"</span>",'<span class="w240" style="width: 193px">连打偏移调整：</span>','<span class="">','<span class="mr_5">每打印</span>','<select class="pub-offset-num">','<option value="3">3</option>','<option value="5">5</option>','<option value="10">10</option>','<option value="15">15</option>',"</select>",'<span class="mr_10 ml_5">单</span>','<select class="pub-offset-up">','<option value="0">向下</option>','<option value="1">向上</option>',"</select>",'<label><span class="ml_10">调整：</span><input type="text" class="offset-value ft-center" value="{{offsetValue}}" style="width: 30px" /> 毫米</label>',"</span>","</div>",'<div class="ft_14 pb_10">','<span class="w400">',"<span>将打印内容整体偏移（毫米）：</span>",'<span class="opr-con mr_20">','<a href="#" class="ct-down"><i></i></a>','<input type="text" style="width: 25px" class="ft-center mr_5 ml_5 vertical-offset"  value="{{verticalOffset}}" />','<a href="#" class="ct-up"><i></i></a>',"</span>",'<span class="opr-con">','<a href="#" class="ct-left"><i></i></a>','<input type="text" style="width: 25px" class="ft-center mr_5 ml_5 horizontal-offset"  value="{{horizontalOffset}}" />','<a href="#" class="ct-right"><i></i></a>',"</span>","</span>",'<span class="w240">全局打印字体设置：</span>','<span class="mr_15">','<span class="mr_5">大小</span>','<select class="pub-font-size">','<option value="8">8</option>','<option value="9">9</option>','<option value="10">10</option>','<option value="11">11</option>','<option value="12">12</option>','<option value="13">13</option>','<option value="14">14</option>','<option value="15">15</option>','<option value="16">16</option>','<option value="17">17</option>','<option value="18">18</option>','<option value="19">19</option>','<option value="20">20</option>','<option value="21">21</option>','<option value="22">22</option>','<option value="23">23</option>','<option value="24">24</option>','<option value="26">26</option>','<option value="28">28</option>','<option value="30">30</option>','<option value="32">32</option>','<option value="34">34</option>','<option value="36">36</option>','<option value="38">38</option>','<option value="40">40</option>','<option value="42">42</option>','<option value="44">44</option>','<option value="46">46</option>','<option value="48">48</option>','<option value="50">50</option>','<option value="52">52</option>','<option value="54">54</option>','<option value="56">56</option>','<option value="58">58</option>','<option value="60">60</option>','<option value="62">62</option>','<option value="64">64</option>','<option value="66">66</option>','<option value="68">68</option>','<option value="70">70</option>',"</select>","</span>",'<span class="mr_15">','<span class="mr_5">字体</span>','<select class="pub-font-style">','<option value="新宋体">新宋体</option>','<option value="宋体">宋体</option>','<option value="黑体">黑体</option>','<option value="微软雅黑">微软雅黑</option>',"</select>","</span>",'<label><span class="">加粗：</span><input type="checkbox" class="pub_bold" /></label>',"</div>",'<div class="ft_14 pb_15">','<span class="w400">',"<span>切换到其他快递模版：</span>",'<span class="mr_15">','<select class="common-list-slt">','<option act-loop="item in expressTemplates" value="{{item.templateId}}">{{item.templateName}}</option>',"</select>","</span>","<label>",'<input type="checkbox" class="show-grid" checked /> 显示标尺',"</label>","</span>",'<span class="single-field" data-field="" >','<span class="w240">单个字段打印字体设置：</span>','<span class="mr_15">','<span class="mr_5">大小</span>','<select class="single-font-size">','<option value="8">8</option>','<option value="9">9</option>','<option value="10">10</option>','<option value="11">11</option>','<option value="12">12</option>','<option value="13">13</option>','<option value="14">14</option>','<option value="15">15</option>','<option value="16" selected>16</option>','<option value="17">17</option>','<option value="18">18</option>','<option value="19">19</option>','<option value="20">20</option>','<option value="21">21</option>','<option value="22">22</option>','<option value="23">23</option>','<option value="24">24</option>','<option value="26">26</option>','<option value="28">28</option>','<option value="30">30</option>','<option value="32">32</option>','<option value="34">34</option>','<option value="36">36</option>','<option value="38">38</option>','<option value="40">40</option>','<option value="42">42</option>','<option value="44">44</option>','<option value="46">46</option>','<option value="48">48</option>','<option value="50">50</option>','<option value="52">52</option>','<option value="54">54</option>','<option value="56">56</option>','<option value="58">58</option>','<option value="60">60</option>','<option value="62">62</option>','<option value="64">64</option>','<option value="66">66</option>','<option value="68">68</option>','<option value="70">70</option>',"</select>","</span>",'<span class="mr_15">','<span class="mr_5">字体</span>','<select class="single-font-style">','<option value="新宋体">新宋体</option>','<option value="宋体">宋体</option>','<option value="黑体">黑体</option>','<option value="微软雅黑">微软雅黑</option>',"</select>","</span>",'<label><span class="">加粗：</span><input type="checkbox" class="single_bold" /></label>',"</span>","</div>",'<div class="ft-center pt_5 pb_5">','<span class="btn btn-success mr_10 save-common">保存当前设置</span>','<span class="btn mr_10 reset-default">恢复默认设置</span>','<span class="btn mr_10 preview-test">预览/打印测试页</span>','<span class="btn mr_10 replace-image">更换快递单图片</span>','<a href="javascript:history.back(-1)" class="btn btn-gray">返回</a>',"</div>",'<div class="ft_14 pb_10">','<div style="display:inline-block;vertical-align:top;">温馨小贴士：</div>','<div style="display:inline-block;">','<div>谷歌浏览器或360极速浏览器 <span class="fc-red">小于12号字体在预览上有偏差</span>，但不影响实际打印</div>',"</div>","</div>","</div>","</div>"],s=['<div class="ui-box ui-box-s1 noborder">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">打印内容设置<span class="fc-red">（请不要忘记保存哦~）</span></div>','<div class="ui-box-hd-tit right-hd-tit">快递单选项</div>',"</div>",'<div class="ui-box-bd nopadding">','<div class="clearfix">','<div class="pt-common-desgin">','<div class="pt-common-bgpic pt-common-bgpic-r" id="pt-common-moudle">','<div class="pt-common-bgpath" style="position: relative; width: {{width}}mm; height: {{height}}mm">','<img src="{{bgPath}}" alt="" style="width: {{width}}mm;" />',"</div>","</div>","</div>",'<div class="pt-common-list">','<div class="leaflet-design">','<div class="options noborder">','<dl class="current">',"<dt>收货人信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="buyer_nick" /> 买家昵称',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_name" /> 收件人姓名',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_mobile" /> 收货人手机',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_phone" /> 收货人电话',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_zip" /> 收货人邮编',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_state" /> 收货人-省',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_city" /> 收货人-市',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_district" /> 收货人-区县',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_city_district" /> 收货人-市、区县',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_state_city_district" /> 收货人-省、市、区县',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_address" /> 收货人地址(无省市区县)',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_detail_address" /> 收货人地址(含省市区县)',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_destination" /> 大头笔(目的地)',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_destination_accurate" /> 收货人目的地(市或县)',"</label>","</div>","</dd>","</dl>","<dl>","<dt>卖家信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="seller_nick" /> 卖家昵称',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_name" /> 发货人姓名',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_mobile" /> 发货人手机',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_phone" /> 发货人电话',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="shop_title" /> 店铺名称',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_zip" /> 发货人邮编',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_state" /> 发货人-省',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_city" /> 发货人-市',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_district" /> 发货人-区县',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_city_district" /> 发货人-市、区县',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_state_city_district" /> 发货人-省、市、区县',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_address" /> 发货人地址(无省市区县)',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_detail_address" /> 发货人地址',"</label>","</div>","</dd>","</dl>","<dl>","<dt>宝贝信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_title" /> 宝贝名称',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_short_title" /> 宝贝简称',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_properties" /> 宝贝属性',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_outer_id" /> 商家编码',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_price" /> 宝贝单价',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num" /> 宝贝总数',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_short_title-item_num" /> 宝贝简称+数量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_outer_id-item_num" /> 商家编码+数量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_short_title-item_properties-item_num" /> 宝贝简称+属性+数量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_outer_id-item_properties-item_num" /> 商家编码+属性+数量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_short_title-item_outer_id-item_num" /> 宝贝简称+商家编码+数量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_short_title-item_outer_id-item_properties-item_num" /> 宝贝简称+商家编码+属性+数量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num-item_short_title" /> 数量+宝贝简称',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num-item_outer_id" /> 数量+商家编码',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num-item_short_title-item_properties" /> 数量+宝贝简称+属性',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num-item_outer_id-item_properties" /> 数量+商家编码+属性',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num-item_short_title-item_outer_id" /> 数量+宝贝简称+商家编码',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num-item_short_title-item_outer_id-item_properties" /> 数量+宝贝简称+商家编码+属性',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_properties-item_num" /> 属性+数量',"</label>","</div>","</dd>","</dl>","<dl>","<dt>订单信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_id"> 订单编号',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_create_time"> 下单时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="create_time" checked value="second"> 精确到秒',"</label>","<label>",'<input type="radio" name="create_time" value="day"> 精确到日',"</label>","</div>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_pay_time"> 付款时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="pay_time" checked value="second"> 精确到秒',"</label>","<label>",'<input type="radio" name="pay_time" value="day"> 精确到日',"</label>","</div>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_print_time" /> 打印时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="print_time" checked  value="second"> 精确到秒',"</label>","<label>",'<input type="radio" name="print_time" value="day"> 精确到日',"</label>","</div>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_shop_promotion" /> 赠品',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_buyer_message" /> 买家留言',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_seller_memo" /> 卖家备注',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_payment" /> 实付总额',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_post_fee" /> 邮费',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_package_weight" /> 包裹重量',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_invoice_title" /> 发票抬头',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_print_num" /> 打印序号',"</label>","</div>","</dd>","</dl>","<dl>","<dt>自定义内容<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content1" data-num="1" data-custom="" /> 自定义内容1',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content2" data-num="2" data-custom="" /> 自定义内容2',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content3" data-num="3" data-custom="" /> 自定义内容3',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content4" data-num="4" data-custom="" /> 自定义内容4',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content5" data-num="5" data-custom="" /> 自定义内容5',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content6" data-num="6" data-custom="" /> 自定义内容6',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content7" data-num="7" data-custom="" /> 自定义内容7',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content8" data-num="8" data-custom="" /> 自定义内容8',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content9" data-num="9" data-custom="" /> 自定义内容9',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content10" data-num="10" data-custom="" /> 自定义内容10',"</label>",'<a href="#" class="J_update-custom ml_15" style="display: none">修改</a>',"</div>","</dd>","</dl>","</div>","</div>","</div>","</div>","</div>","</div>"],n=['<div class="pt-common-bgpath" style="position: relative; text-align: left; width: {{width}}mm; height: {{height}}mm; overflow:hidden;">','<img src="{{bgPath}}" alt=""  style="width: {{width}}mm; height: {{height}}mm; position: absolute; left: 0; top:0" />','<div class="" act-loop="item in fieldSettings" style="position: absolute; height: {{item.height}}px; width: {{item.width}}px; left: {{item.x}}px; top: {{item.y}}px;" data-field-name="{{item.field}}">','<span style="font-family: {{item.font}}; font-weight: {{item.boldString}}; font-size: {{item.fontSize}}px;">{{item.content}}</span>','<a class="close" href="javascript:void(0)"></a>',"</div>","</div>"],l=['<div class="pt-common-bgpath" style="background:transparent; position: relative; width: {{width}}mm; height: {{height}}mm">','<div class="" act-loop="item in fieldSettings" style="position: absolute; height: {{item.height}}px; width: {{item.width}}px; left: {{item.x}}px; top: {{item.y}}px;" data-field-name="{{item.field}}">','<span style="font-family: {{item.font}}; font-weight: {{item.boldString}}; font-size: {{item.fontSize}}px;">{{item.content}}</span>',"</div>","</div>"],d=['<div class="pt_express-new-create-wrapper">','<div class="pt_express-new-create-option">',"   快递单模版名称：{{expressName}}",'    + <input type="text" name="name" value="{{aliases}}" maxlength="3" id="name"/>（不超过3个字）',"</div>",'<div class="pt_express-new-create" style="display: block">','<div class="temp-container" act-loop="group in groupList">','<div act-if="group.doUse == 1" class="used"><img src="{{group.bgPath}}" style="width:300px;height: 160px;"/><div class="contaier-mask" style="width: 300px;height: 160px"></div><div class="icon-area"><span class="icon"></span></div></div>','<div act-if="group.doUse == 0" class="unselected" data-value="{{group.sysTemplateId}}"><img src="{{group.bgPath}}" style="width:300px;height: 160px;"/><div class="contaier-mask" style="width: 300px;height: 160px"></div><div class="icon-area"><span class="icon"></span><span class="icon-word">点击选中</span></div></div>','<div class="temp-note"><span>{{group.nameDesc}}</span><span class="view-big"><a href="{{group.bgPath}}" target="_blank">查看大图</a></span></div>',"</div>",'<div style="margin: 5px 0 5px 10px;">','   共<span style="color: red;font-size: 16px;"><strong>{{groupList.length}}</strong></span>个背景图',"</div>",'<div style="margin: 5px 0 5px 10px;">','   <span style="color: brown">温馨小贴士：快递单模板中已使用的背景图不能被重复使用。</span>',"</div>","</div>","</div>"];t.template.addTemp("template.pt.common",i),t.template.addTemp("template.pt.common.opt",a),t.template.addTemp("template.pt.common.desgin",s),t.template.addTemp("template.pt.common.field",n),t.template.addTemp("template.pt.common.print",l),t.template.addTemp("template.pt.common.group",d)}(jQuery,RayCloud),function(e,t){function i(e,t){"double"==t&&(e.val(e.val().replace(/[^\d.]/g,"")),e.val(e.val().replace(/^\./g,"")),e.val(e.val().replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")),e.val(e.val().replace(/\.{2,}/g,".")),e.val(e.val().replace(".","$#$").replace(/\./g,"").replace("$#$",".")),e.val(e.val().replace(/^$/,"0"))),"int"==t&&(e.val(e.val().replace(/[^\d]/g,"")),e.val(e.val().replace(/^$/,"0")))}var a=t.controls.get("control.pt.common_list"),s=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};
return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),n={name:"pt.common.detail",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.common",_fn_dom_render:function(){if(!this._elm_dom_container&&!this._elm_dom_container){this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root)}},_fn_ctrl_form_init:function(){e("select").iSelect(),e("input[type=checkbox]").iCheck(),e("input[type=radio]").iCheck()},_fn_ctrl_desgin_common:function(){},_fn_ctrl_desgin_common_toggle:function(t){var i=e(t.currentTarget),a=i.closest("dl");a.addClass("current"),a.siblings().removeClass("current")},_fn_ctrl_reset_default_common:function(t,i,a){API.pt_common_user_default(t,e.proxy(function(e){e.data&&location.reload()},this),a)},_fn_event_reset_default_click:function(){this._fn_ctrl_reset_default_common({id:this._common_id})},_fn_dom_update:function(e){this._data_common_list=e,this._data_common_list.customContent=s.escape(this._data_common_list.customContent),this._dom_pt_common.prepend(t.template.get("template.pt.common.opt",this._data_common_list)),this._fn_ctrl_get_common_tmpl(this._data_common_list.templatePath)},_fn_ctrl_get_common_tmpl:function(t){var i=this,a={url:t,type:"get",success:function(e){i._data_common_tmpl=e,i._fn_ctrl_get_common_tmpl_callback(e)}};""!=t&&e.ajax(a)},_fn_ctrl_get_common_tmpl_callback:function(){this._dom_pt_common.append(t.template.get("template.pt.common.desgin",this._data_common_list)),this._fn_ctrl_form_init(),this._fn_ctrl_dom_render()},_fn_ctrl_dom_render:function(){this._dom_paper_width=this._dom_pt_common.find(".paper-width"),this._dom_paper_height=this._dom_pt_common.find(".paper-height"),this._dom_vertical_offset=this._dom_pt_common.find(".vertical-offset"),this._dom_horizontal_offset=this._dom_pt_common.find(".horizontal-offset"),this._dom_pub_font_size=this._dom_pt_common.find(".pub-font-size"),this._dom_pub_font_style=this._dom_pt_common.find(".pub-font-style"),this._dom_pub_bold=this._dom_pt_common.find(".pub_bold"),this._dom_ct_up=this._dom_pt_common.find(".ct-up"),this._dom_ct_down=this._dom_pt_common.find(".ct-down"),this._dom_ct_left=this._dom_pt_common.find(".ct-left"),this._dom_ct_right=this._dom_pt_common.find(".ct-right"),this._dom_single_field=this._dom_pt_common.find(".single-field"),this._dom_single_font_size=this._dom_single_field.find(".single-font-size"),this._dom_single_font_style=this._dom_single_field.find(".single-font-style"),this._dom_single_bold=this._dom_single_field.find(".single_bold"),this._dom_pub_offset_num=this._dom_pt_common.find(".pub-offset-num"),this._dom_pub_offset_up=this._dom_pt_common.find(".pub-offset-up"),this._dom_pub_offset_value=this._dom_pt_common.find(".offset-value"),this._dom_common_list=this._dom_pt_common.find(".common-list-slt"),this._dom_show_grid=this._dom_pt_common.find(".show-grid"),this._dom_save_common=this._dom_pt_common.find(".save-common"),this._dom_reset_default=this._dom_pt_common.find(".reset-default"),this._dom_preview_test=this._dom_pt_common.find(".preview-test"),this._dom_replace_image=this._dom_pt_common.find(".replace-image"),this._dom_common_bgpic=this._dom_pt_common.find(".pt-common-bgpic"),this._dom_leaflet_design=this._dom_pt_common.find(".leaflet-design"),this._dom_leaflet_checkbox=this._dom_leaflet_design.find("input[type=checkbox]"),this._dom_J_update_custom=this._dom_leaflet_design.find(".J_update-custom"),this._fn_ctrl_select_checked(this._dom_common_list,this._common_id),this._fn_ctrl_select_checked(this._dom_pub_font_size,this._data_common_list.fontSize),this._fn_ctrl_select_checked(this._dom_pub_font_style,this._data_common_list.font),this._fn_ctrl_select_checked(this._dom_pub_offset_num,this._data_common_list.offsetNum),this._fn_ctrl_select_checked(this._dom_pub_offset_up,this._data_common_list.offsetUp),this._fn_event_bind()},_fn_ctrl_select_checked:function(e,t){"string"!=typeof t&&(t=t.toString()),e.iSelect("select",t)},clearNoNum:function(e){e.val(e.val().replace(/[^\d.]/g,"")),e.val(e.val().replace(/^\./g,"")),e.val(e.val().replace(/^(\-)*(\d+)\.(\d).*$/,"$1$2.$3")),e.val(e.val().replace(/\.{2,}/g,".")),e.val(e.val().replace(".","$#$").replace(/\./g,"").replace("$#$","."))},_fn_ctrl_limit_val:function(t){var i=e(t.currentTarget);this.clearNoNum(i)},_fn_ctrl_opt_checked:function(){var e=this._data_common_list.fieldSettings;this._dom_common_bgpic.find(".pt-common-bgpath").append(this._data_common_tmpl),this._dom_common_field_drsElement=this._dom_common_bgpic.find(".drsElement");for(var t=0,i=e.length;i>t;t++){var a=this._dom_leaflet_design.find("input[data-name="+e[t].field+"]");a.iCheck("check");var s=this._dom_common_bgpic.find("div[data-field-name="+e[t].field+"]");if(s.css({height:e[t].height,width:e[t].width,left:e[t].x,top:e[t].y}),s.find("span").css({"font-family":e[t].font,"font-weight":e[t].bold?"bold":"normal","font-size":e[t].fontSize}),s.show(),/^custom_content/.test(e[t].field)){a.attr("data-custom",e[t].content||"感谢您对我们的支持！");var n=a.closest(".item").find(".J_update-custom");n.show()}if("trade_create_time"==e[t].field||"trade_pay_time"==e[t].field||"trade_print_time"==e[t].field){var l=a.closest(".item").find(".change-time");l.show();var d=e[t].content||"second";l.find("input[value="+d+"]").iCheck("check")}}},_fn_event_bind:function(){this._fn_ctrl_opt_checked(),this._fn_ctrl_common_drag(),this._dom_reset_default.on("click",this._fn_event_reset_default_click_proxy=e.proxy(this._fn_event_reset_default_click,this)),this._dom_leaflet_design.on("click","dt",this._fn_ctrl_desgin_common_toggle_proxy=e.proxy(this._fn_ctrl_desgin_common_toggle,this)),this._dom_leaflet_checkbox.on("ifClicked",this._fn_event_field_toggle_proxy=e.proxy(this._fn_event_field_toggle,this)),this._dom_save_common.on("click",this._fn_event_save_common_proxy=e.proxy(this._fn_event_save_common,this)),this._dom_preview_test.on("click",this._fn_ctrl_print_common_proxy=e.proxy(this._fn_ctrl_print_common,this)),this._dom_replace_image.on("click",this._fn_ctrl_replace_image_proxy=e.proxy(this._fn_ctrl_replace_image_common,this)),this._dom_show_grid.on("ifClicked",this._fn_event_grid_toggle_proxy=e.proxy(this._fn_event_grid_toggle,this)),this._dom_common_list.on("change",this._fn_event_change_common_proxy=e.proxy(this._fn_event_change_common,this)),this._dom_common_field_drsElement.on("click",this._fn_event_single_set_proxy=e.proxy(this._fn_event_single_set,this)),this._dom_common_field_drsElement.on("click",".close",this._fn_event_close_field_proxy=e.proxy(this._fn_event_close_field,this)),this._dom_pub_font_size.on("change",this._fn_event_pubset_fontsize_proxy=e.proxy(this._fn_event_pubset_fontsize,this)),this._dom_pub_font_style.on("change",this._fn_event_pubset_fontstyle_proxy=e.proxy(this._fn_event_pubset_fontstyle,this)),this._dom_pub_bold.on("ifClicked",this._fn_event_pubset_fontbold_proxy=e.proxy(this._fn_event_pubset_fontbold,this)),this._dom_single_bold.on("ifClicked",this._fn_event_singleset_fontbold_proxy=e.proxy(this._fn_event_singleset_fontbold,this)),this._dom_single_font_size.on("change",this._fn_event_singleset_fontsize_proxy=e.proxy(this._fn_event_singleset_fontsize,this)),this._dom_single_font_style.on("change",this._fn_event_singleset_fontstyle_proxy=e.proxy(this._fn_event_singleset_fontstyle,this)),this._dom_ct_up.on("click",this._fn_ctrl_offset_up_proxy=e.proxy(this._fn_ctrl_offset_up,this)),this._dom_ct_down.on("click",this._fn_ctrl_offset_down_proxy=e.proxy(this._fn_ctrl_offset_down,this)),this._dom_ct_left.on("click",this._fn_ctrl_offset_left_proxy=e.proxy(this._fn_ctrl_offset_left,this)),this._dom_ct_right.on("click",this._fn_ctrl_offset_right_proxy=e.proxy(this._fn_ctrl_offset_right,this)),this._dom_pub_offset_value.on("keyup",this._fn_ctrl_limit_val_proxy=e.proxy(this._fn_ctrl_limit_val,this)),this._dom_J_update_custom.on("click",e.proxy(function(t){t.preventDefault();var i=e(t.currentTarget),a=i.closest(".item").find("input[data-name^=custom_content]"),s=a.data("custom"),n=a.data("num");this._fn_ctrl_custom_content_dialog(s,n)},this)),this._data_common_list.bold&&(this._dom_pub_bold.trigger("ifClicked"),this._dom_pub_bold.iCheck("check")),this._dom_paper_width.on("keyup",function(){i(e(this),"double")}),this._dom_paper_height.on("keyup",function(){i(e(this),"double")}),this._dom_vertical_offset.on("keyup",function(){i(e(this),"int")}),this._dom_horizontal_offset.on("keyup",function(){i(e(this),"int")})},_fn_event_unbind:function(){this._dom_reset_default.off("click",this._fn_event_reset_default_click_proxy),this._dom_leaflet_design.off("click","dt",this._fn_ctrl_desgin_common_toggle_proxy),this._dom_leaflet_checkbox.off("ifClicked",this._fn_event_field_toggle_proxy),this._dom_save_common.off("click",this._fn_event_save_common_proxy),this._dom_preview_test.off("click",this._fn_ctrl_print_common_proxy),this._dom_replace_image.off("click",this._fn_ctrl_replace_image_proxy),this._dom_show_grid.off("ifClicked",this._fn_event_grid_toggle_proxy),this._dom_common_list.off("change",this._fn_event_change_common_proxy),this._dom_common_field_drsElement.off("click",this._fn_event_single_set_proxy),this._dom_common_field_drsElement.off("click",".close",this._fn_event_close_field_proxy),this._dom_pub_font_size.off("change",this._fn_event_pubset_fontsize_proxy),this._dom_pub_font_style.off("change",this._fn_event_pubset_fontstyle_proxy),this._dom_pub_bold.off("ifClicked",this._fn_event_pubset_fontbold_proxy),this._dom_single_bold.off("ifClicked",this._fn_event_singleset_fontbold_proxy),this._dom_single_font_size.off("change",this._fn_event_singleset_fontsize_proxy),this._dom_single_font_style.off("change",this._fn_event_singleset_fontstyle_proxy),this._dom_ct_up.off("click",this._fn_ctrl_offset_up_proxy),this._dom_ct_down.off("click",this._fn_ctrl_offset_down_proxy),this._dom_ct_left.off("click",this._fn_ctrl_offset_left_proxy),this._dom_ct_right.off("click",this._fn_ctrl_offset_right_proxy),this._dom_pub_offset_value.off("keyup",this._fn_ctrl_limit_val_proxy)},_fn_event_save_common:function(){this._fn_ctrl_common_user_update(this._fn_ctrl_get_common_data(),e.proxy(this._fn_common_user_updata_backfn,this))},_fn_common_user_updata_backfn:function(t){t.status&&e.dialog({title:"提示",icon:"ok.png",content:"保存成功！",ok:!0})},_fn_ctrl_common_user_update:function(t,i,a){API.pt_common_user_update(t,e.proxy(function(e){i(e.data)},this),a)},_fn_ctrl_get_common_data:function(){return this._data_common={},this._data_common.id=this._common_id,this._data_common.name=this._dom_common_list.find("option:selected").text(),this._data_common.width=this._dom_paper_width.val(),this._data_common.height=this._dom_paper_height.val(),this._data_common.fontSize=this._dom_pub_font_size.val(),this._data_common.font=this._dom_pub_font_style.val(),this._data_common.bold=this._dom_pub_bold.is(":checked")?!0:!1,this._data_common.horizontalOffset=this._dom_horizontal_offset.val(),this._data_common.verticalOffset=this._dom_vertical_offset.val(),this._data_common.offsetNum=this._dom_pub_offset_num.val(),this._data_common.offsetUp=this._dom_pub_offset_up.val(),this._data_common.offsetValue=this._dom_pub_offset_value.val(),this._data_common.fieldSettingsStr=JSON.stringify(this._fn_ctrl_get_common_fields()),this._data_common},_fn_ctrl_get_common_fields:function(){var t=[],i=this;return i._dom_leaflet_checkbox.each(function(){var a=e(this),s={};if(a.is(":checked")){s.field=a.attr("data-name");var n=i._dom_common_bgpic.find("div[data-field-name="+s.field+"]");if(s.font=n.find("span").css("font-family"),s.fontSize=parseInt(n.find("span")[0].style.fontSize,10),s.boldString=n.find("span")[0].style.fontWeight,s.bold="bold"==n.find("span")[0].style.fontWeight?!0:!1,s.x=parseInt(n.css("left"),10),s.y=parseInt(n.css("top"),10),s.width=parseInt(n.css("width"),10),s.height=parseInt(n.css("height"),10),"trade_create_time"==s.field||"trade_pay_time"==s.field||"trade_print_time"==s.field){var l=a.closest(".item").find(".change-time");s.content=l.find("input[type=radio]:checked").val()}/^custom_content/.test(s.field)&&(s.content=a.data("custom")),t.push(s)}}),t},_fn_ctrl_get_common_sample:function(t,i,a){API.pt_common_fields_sample(t,e.proxy(function(e){i(e.data)},this),a)},_fn_common_fields_sample_backfn:function(e){var t={},i=[];t.bgPath=this._data_common_list.bgPath,t.font=this._dom_pub_font_style.val(),t.fontSize=this._dom_pub_font_size.val(),t.bold=this._dom_pub_bold.is(":checked")?1:0,t.width=this._dom_paper_width.val(),t.height=this._dom_paper_height.val(),t.y=parseInt(this._dom_vertical_offset.val(),10)+this._data_common_list.verticalOffsetDefault,t.x=parseInt(this._dom_horizontal_offset.val(),10),i=this._fn_ctrl_get_common_fields();for(var a=0,s=i.length;s>a;a++)i[a].content=e[i[a].field],i[a].width_x=i[a].x+3.78*t.x,i[a].height_y=i[a].y-3.78*t.y,/^custom_content/.test(i[a].field)&&(i[a].content=this._dom_leaflet_design.find('input[data-name="'+i[a].field+'"]').data("custom"));return t.fieldSettings=i,void this._fn_common_fields_text_print(t)},_fn_common_fields_text_print:function(e){try{var t=getLodop();if(null!=t&&"undefined"!=typeof t.VERSION){t.PRINT_INIT("普通快递单设计"),t.ADD_PRINT_SETUP_BKIMG("<img border='0' src='"+e.bgPath+"' />"),t.SET_SHOW_MODE("BKIMG_WIDTH",e.width+"mm"),t.SET_SHOW_MODE("BKIMG_IN_PREVIEW",1),t.SET_PRINT_MODE("POS_BASEON_PAPER",!0),t.SET_PRINT_STYLE("FontSize",3*e.fontSize/4),t.SET_PRINT_STYLE("FontName",e.font),t.SET_PRINT_STYLE("Bold",e.bold);for(var i=e.fieldSettings,a=0,s=i.length;s>a;a++)i[a].content=i[a].content.replace(/&#44;/g,","),t.ADD_PRINT_TEXT(i[a].height_y,i[a].width_x,i[a].width,i[a].height,i[a].content),t.SET_PRINT_STYLEA(a+1,"FontName",i[a].font),t.SET_PRINT_STYLEA(a+1,"FontSize",3*i[a].fontSize/4),t.SET_PRINT_STYLEA(a+1,"Bold",i[a].bold?1:0);t.SET_PRINTER_INDEXA(t.GET_PRINTER_NAME(-1)),t.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),t.PREVIEW()}}catch(n){console.log(n)}},_fn_ctrl_print_common:function(){this._fn_ctrl_get_common_sample({},e.proxy(this._fn_common_fields_sample_backfn,this))},_fn_ctrl_replace_image_common:function(){{var i=this._elm_dom_container,s=this._common_id,n=i.find("input[id='groupId']").val(),l=i.find("input[id='expressName']").val()||"",d=i.find("input[id='templateName']").val()||"",o=d.replace(l,"");i.find("input[id='sysTemplateId']").val()}a.list_groupId({groupId:n},e.proxy(function(i){var n={groupList:i,expressName:l,aliases:o},d=e(t.template.get("template.pt.common.group",n)).appendTo("body"),r=this;this.$dialog=e.dialog({title:"更换快递单图片",width:1038,fixed:!1,content:d,cancelVal:"取消",okVal:"保存",ok:function(){var t=d.find("input[id='name']").val();if(t.length>3)return e.dialog.alert("模版名称不能超过3个字符!"),!1;var i=l+t,n=d.find(".selected").attr("data-value");return"undefined"==typeof n?(e.dialog.alert("您还未选中要更换的快递模版!"),!1):(a.user_switch({name:i,sysTemplateId:n,templateId:s},e.proxy(function(){r.$dialog.close(),location.reload()},this)),!1)},cancel:function(){},close:function(){d.remove()}}),d.delegate(".unselected","click",function(){d.find(".selected").attr("class","unselected"),e(this).attr("class","selected")}),d.delegate(".selected","click",function(){e(this).attr("class","unselected")})},this))},_fn_ctrl_offset_up:function(e){e.preventDefault(),this._fn_ctrl_offset_set("plus",this._dom_vertical_offset)},_fn_ctrl_offset_down:function(e){e.preventDefault(),this._fn_ctrl_offset_set("lower",this._dom_vertical_offset)},_fn_ctrl_offset_left:function(e){e.preventDefault(),this._fn_ctrl_offset_set("lower",this._dom_horizontal_offset)},_fn_ctrl_offset_right:function(e){e.preventDefault(),this._fn_ctrl_offset_set("plus",this._dom_horizontal_offset)},_fn_ctrl_offset_set:function(e,t){var i=parseInt(t.val(),10);"plus"==e?i+=1:i-=1,t.val(i)},_fn_event_pubset_fontbold:function(t){var i=e(t.currentTarget),a=this._dom_common_field_drsElement.find("span");i.is(":checked")?(a.css("font-weight","normal"),this._dom_single_bold.is(":checked")&&this._dom_single_bold.iCheck("uncheck")):(a.css("font-weight","bold"),this._dom_single_bold.is(":checked")||this._dom_single_bold.iCheck("check"))},_fn_event_singleset_fontbold:function(t){var i=e(t.currentTarget),a=i.closest(".single-field").attr("data-field");i.is(":checked")?this._dom_common_bgpic.find("div[data-field-name="+a+"]").find("span").css("font-weight","normal"):this._dom_common_bgpic.find("div[data-field-name="+a+"]").find("span").css("font-weight","bold")},_fn_event_pubset_fontsize:function(t){var i=e(t.currentTarget),a=i.val();this._dom_common_field_drsElement.find("span").css("font-size",a+"px"),this._fn_ctrl_select_checked(this._dom_single_font_size,a)},_fn_event_singleset_fontsize:function(t){var i=e(t.currentTarget),a=i.val(),s=i.closest(".single-field").attr("data-field");this._dom_common_bgpic.find("div[data-field-name="+s+"]").find("span").css("font-size",a+"px")},_fn_event_pubset_fontstyle:function(t){var i=e(t.currentTarget),a=i.val();this._dom_common_field_drsElement.find("span").css("font-family",a),this._fn_ctrl_select_checked(this._dom_single_font_style,a)},_fn_event_singleset_fontstyle:function(t){var i=e(t.currentTarget),a=i.val(),s=i.closest(".single-field").attr("data-field");this._dom_common_bgpic.find("div[data-field-name="+s+"]").find("span").css("font-family",a)},_fn_event_single_set:function(t){this._dom_single_field.is(":hidden")&&this._dom_single_field.show();var i=e(t.currentTarget),a=i.find("span"),s=a.css("font-family"),n=parseInt(a[0].style.fontSize),l=a[0].style.fontWeight,d=/^custom_content/.test(i.data("field-name"))?"自定义内容":a.text();this._dom_single_field.find(".w240").text(d+"打印字体设置："),this._dom_single_field.attr("data-field",i.attr("data-field-name")),this._fn_ctrl_select_checked(this._dom_single_font_size,n),this._fn_ctrl_select_checked(this._dom_single_font_style,s),this._dom_single_bold.iCheck("bold"==l?"check":"uncheck")},_fn_event_close_field:function(t){t.preventDefault,t.stopPropagation;var i=e(t.currentTarget),a=i.closest(".drsElement"),s=a.attr("data-field-name");a.hide(),this._dom_leaflet_design.find("input[data-name="+s+"]").iCheck("uncheck"),"custom_content"==s&&this._dom_J_update_custom.hide()},_fn_event_change_common:function(t){var i=e(t.currentTarget),a=i.val();location.href="#/pt/common/detail/?id="+a},_fn_event_grid_toggle:function(t){var i=e(t.currentTarget);i.is(":checked")?this._dom_common_bgpic.removeClass("pt-common-bgpic-r"):this._dom_common_bgpic.addClass("pt-common-bgpic-r")},_fn_ctrl_common_drag:function(){var e=new DragResize("dragresize",{minWidth:50,minHeight:20,minLeft:0,minTop:0,maxLeft:793,maxTop:480});e.isElement=function(e){return e.className&&e.className.indexOf("drsElement")>-1?!0:void 0},e.isHandle=function(e){return e.className&&e.className.indexOf("drsMoveHandle")>-1?!0:void 0},e.ondragfocus=function(){},e.ondragstart=function(){},e.ondragmove=function(){},e.ondragend=function(){},e.ondragblur=function(){},e.apply(document)},_fn_event_field_toggle:function(t){var i=e(t.currentTarget);this._dom_common_bgpic.find("div[data-field-name="+i.data("name")+"]").toggle();var a=i.data("name");if(/^custom_content/.test(a)&&!i.is(":checked")){var s=i.data("custom"),n=i.data("num");this._fn_ctrl_custom_content_dialog(s,n),i.closest(".item").find(".J_update-custom").show()}/^custom_content/.test(a)&&i.is(":checked")&&i.closest(".item").find(".J_update-custom").hide(),("trade_create_time"==a||"trade_pay_time"==a||"trade_print_time"==a)&&i.closest(".item").find(".change-time").toggle()},_fn_ctrl_custom_content_dialog:function(t,i){var t=""==t?"感谢您对我们的支持！":t,a='<div id="custom-dialog"><div class="pd_10 ft-center"><textarea style="width: 520px; height: 80px;">'+t+'</textarea></div><div class="pd_15 ft-center"><span class="btn btn-primary J_save">保存</span></div></div>',s=e.dialog({title:"自定义内容"+i,content:a,zIndex:999,padding:0}),n=e("#custom-dialog");n.on("click",".J_save",function(){var t=e.trim(n.find("textarea").val());e("div[data-field-name='custom_content"+i+"']").find("span").text(t),e("input[data-name='custom_content"+i+"']").data("custom",t),s.close()})},_fn_ctrl_query_common:function(t,i,a){API.pt_common_user_query(t,e.proxy(function(e){i(e.data)},this),a)},init:function(){},getContainer:function(){return this._elm_dom_container},_data_common_list:null,_common_id:null,update:function(t,i){return"undefined"==typeof t.id?void(location.href="#/pt/list/"):(this._common_id=t.id,this._fn_dom_render(),this._dom_pt_common=this._elm_dom_container.find(".pt_public"),this._dom_pt_common.empty(),this._fn_ctrl_query_common({id:this._common_id,templateList:!0},e.proxy(this._fn_dom_update,this)),void(i&&i()))},destroy:function(){this._elm_dom_container&&(this._elm_dom_container.empty().remove(),this._elm_dom_container=null,this._data_common_list=null,this._common_id=null,this._fn_event_unbind())}};t.modules.define(n.name,n)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_deliver">','<div class="pt_public pd_20"></div>',"</div>"],a=['<div class="ui-box ui-box-s1 noborder mb_10" style="overflow: hidden">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">发货单设计</div>',"</div>",'<div class="ui-box-bd">','<div class="ft_14 pb_10">','<span class="w400">',"<span>打印纸尺寸设置（毫米）：</span>",'<span class="mr_10">宽 <input type="text" class="ft-center paper-width" style="width: 35px" value="{{width}}" /></span>','<span class="mr_5">高 <input type="text" class="ft-center paper-height" style="width: 35px" value="{{height}}" /></span>',"</span>",'<span class="w240">全局打印字体设置：</span>','<span class="mr_15">','<span class="mr_5">大小</span>','<select class="pub-font-size">','<option value="8">8</option>','<option value="9">9</option>','<option value="11">11</option>','<option value="12">12</option>','<option value="13">13</option>','<option value="14">14</option>','<option value="15">15</option>','<option value="16">16</option>','<option value="17">17</option>','<option value="18">18</option>','<option value="19">19</option>','<option value="20">20</option>','<option value="21">21</option>','<option value="22">22</option>','<option value="23">23</option>','<option value="24">24</option>','<option value="26">26</option>','<option value="28">28</option>','<option value="30">30</option>','<option value="32">32</option>','<option value="34">34</option>','<option value="36">36</option>','<option value="38">38</option>','<option value="40">40</option>',"</select>","</span>",'<span class="mr_15">','<span class="mr_5">字体</span>','<select class="pub-font-style">','<option value="新宋体">新宋体</option>','<option value="宋体">宋体</option>','<option value="黑体">黑体</option>','<option value="微软雅黑">微软雅黑</option>',"</select>","</span>",'<label><span class="">加粗：</span><input type="checkbox" class="pub_bold" /></label>',"</div>",'<div class="ft_14 pb_10">','<span class="w400">',"<span>将打印内容整体偏移（毫米）：</span>",'<span class="opr-con mr_20">','<a href="#" class="ct-down"><i></i></a>','<input type="text" style="width: 25px" class="ft-center mr_5 ml_5 vertical-offset" value="{{verticalOffset}}" />','<a href="#" class="ct-up"><i></i></a>',"</span>",'<span class="opr-con">','<a href="#" class="ct-left"><i></i></a>','<input type="text" style="width: 25px" class="ft-center mr_5 ml_5 horizontal-offset" value="{{horizontalOffset}}" />','<a href="#" class="ct-right"><i></i></a>',"</span>","</span>","</div>",'<div class="ft_14 pb_10">','<span class="w400">',"<span>切换发货单模板：</span>","<span>",'<select class="deliver-change-list" style="max-width:200px">','<option act-loop="item in expressTemplates" value="{{item.templateId}}">{{item.templateName}}</option>',"</select>","</span>","</span>","</div>",'<div class="ft-center pt_5 pb_5">','<span class="btn btn-success mr_10 save-deliver">保存当前设置</span>','<span class="btn mr_10 reset-deliver">恢复默认设置</span>','<span class="btn mr_10 preview-test-deliver">预览/打印测试页</span>','<a href="javascript:history.back(-1)" class="btn btn-gray">返回</a>',"</div>",'<div class="ft_14 pb_10">','<div style="display:inline-block;vertical-align:top;">温馨小贴士：</div>','<div style="display:inline-block;">','<div>谷歌浏览器或360极速浏览器 <span class="fc-red">小于12号字体在预览上有偏差</span>，但不影响实际打印</div>',"</div>","</div>","</div>","</div>"],s=['<div class="ui-box ui-box-s1 noborder">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">打印内容设置<span class="fc-red">（请不要忘记保存哦~）</span></div>','<div class="ui-box-hd-tit right-hd-tit">发货单选项</div>',"</div>",'<div class="ui-box-bd nopadding">','<div class="clearfix">','<div class="pt-deliver-desgin" style="font-size: {{fontSize}}px; font-family:{{font}}">',"</div>",'<div class="pt-common-list">','<div class="leaflet-design">','<div class="options noborder">','<dl class="current">',"<dt>发货单抬头<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="title" /> 发货单抬头',"</label>","</div>","</dd>","</dl>",'<dl class="current">',"<dt>收货人信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="buyer_nick" /> 买家旺旺',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_name" /> 买家姓名',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_mobile" /> 买家手机',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_phone" /> 买家固话',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_zip" /> 买家邮编',"</label>","</div>",'<div class="item">',"<label>",'<input type="checkbox" data-name="receiver_address" /> 收货地址',"</label>","</div>","</dd>","</dl>","<dl>","<dt>卖家信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="seller_nick" /> 卖家旺旺',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_name" /> 卖家姓名',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_mobile" /> 卖家手机',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_phone" /> 卖家电话',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="shop_title" /> 店铺名称',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_zip" /> 卖家邮编',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="send_address" /> 发货地址',"</label>","</div>","</dd>","</dl>","<dl>","<dt>表格信息<span>ˇ</span></dt>",'<dd style="display: none">','<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_id" /> 序号',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_pic" /> 宝贝图片',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_title" /> 商品名称',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_short_title" /> 宝贝简称',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_properties" /> 规格',"</label>","</div>","</dd>",'<dd act-if="templateType == 2">','<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_storehouse"/> 货位',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_outer_id" /> 商家编码',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_num" /> 宝贝数量',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_price" /> 宝贝单价',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_payment" /> 实付金额',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="table_item_discount" /> 优惠金额',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_num_total" /> 宝贝总数',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_payment_total" /> 实付总额',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="item_discount_total" /> 优惠总额',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="package_weight" /> 宝贝重量',"</label>","</div>","</dd>","</dl>","<dl>","<dt>订单信息<span>ˇ</span></dt>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_id" /> 订单编号',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_create_time" /> 下单时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="create_time" checked  value="second"> 精确到分',"</label>","<label>",'<input type="radio" name="create_time" value="day"> 精确到日',"</label>","</div>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_pay_time" /> 付款时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="pay_time" checked  value="second"> 精确到分',"</label>","<label>",'<input type="radio" name="pay_time" value="day"> 精确到日',"</label>","</div>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_print_time" /> 打印时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="print_time" checked  value="second"> 精确到分',"</label>","<label>",'<input type="radio" name="print_time" value="day"> 精确到日',"</label>","</div>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_deliver_time" /> 发货时间',"</label>",'<div class="change-time pt_5" style="display:none">','<label class="mr_5">','<input type="radio" name="deliver_time" checked  value="second"> 精确到分',"</label>","<label>",'<input type="radio" name="deliver_time" value="day"> 精确到日',"</label>","</div>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_shop_promotion" /> 赠品',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_buyer_message" /> 买家留言',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_seller_memo" /> 卖家备注',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_express_info" /> 物流信息',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_invoice_title" /> 发票抬头',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="custom_content" /> 自定义内容',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_barcode" /> 系统订单条形码',"</label>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="qrcode" /> 二维码',"</label>",'<div class="mt_10 qrcode-status-1" style="display: none">','<span class="qrcode-text">{{qrcode}}</span>','<a href="#" class="v-middle qrcode-update" data-type="update">修改</a>',"</div>",'<div class="mt_10 qrcode-status-2" style="display: none">','<input type="text" name="qrcode-ipt" class="mr_5 v-middle ipt-small" style="width: 95px" />','<span class="btn btn-mini btn-primary qrcode-update" data-type="save">确定</span>',"</div>","</div>","</dd>","<dd>",'<div class="item">',"<label>",'<input type="checkbox" data-name="trade_print_num" /> 打印序号',"</label>","</div>","</dd>","</dl>","</div>","</div>","</div>","</div>","</div>","</div>"],n=['<div id="deliver-header" style="position: relative">','<h2 class="shop-order-header"><span data-field-name="title" act-if="_title == 1">{{title}}</span></h2>','<div act-if="currPageNo != undefined" style="display: inline-block;position: absolute; top: 0;right: 0;font-weight: bold;width: 32px;border-bottom: 2px solid #000;">','<div style="font-size: 20px;padding: 2px;width: 32px;text-align: center;">{{currPageNo}}</div>',"</div>",'<div class="info-list" style="margin-top:8px;">',"<ul>",'<li data-field-name="buyer_nick" act-if="_buyer_nick == 1">买家旺旺：{{buyer_nick}}</li>','<li data-field-name="receiver_name" act-if="_receiver_name == 1">买家姓名：{{receiver_name}}</li>','<li data-field-name="receiver_mobile" act-if="_receiver_mobile == 1">买家手机：{{receiver_mobile}}</li>','<li data-field-name="receiver_phone" act-if="_receiver_phone == 1">买家电话：{{receiver_phone}}</li>','<li data-field-name="trade_create_time" act-if="_trade_create_time == 1">下单时间：{{trade_create_time}}</li>','<li data-field-name="trade_pay_time" act-if="_trade_pay_time == 1">付款时间：{{trade_pay_time}}</li>','<li data-field-name="trade_print_time" act-if="_trade_print_time == 1">打印时间：{{trade_print_time}}</li>','<li data-field-name="trade_deliver_time" act-if="_trade_deliver_time == 1">发货时间：{{trade_deliver_time}}</li>','<li data-field-name="receiver_zip" act-if="_receiver_zip == 1">买家邮编：{{receiver_zip}}</li>','<li data-field-name="receiver_address" style="width: 100%" act-if="_receiver_address == 1">收货地址：{{receiver_address}}</li>','<li data-field-name="trade_id" style="width: 100%" act-if="_trade_id == 1">订单编号：{{trade_id}}</li>',"</ul>","</div>","</div>"],l=['<div id="deliver-footer">','<div class="info-list">',"<ul>",'<li style="width: 80%;" data-field-name="trade_shop_promotion" act-if="_trade_shop_promotion == 1">赠品：{{trade_shop_promotion}}</li>','<li style="width: 80%; " data-field-name="trade_buyer_message" act-if="_trade_buyer_message == 1">买家留言：{{trade_buyer_message}}</li>','<li style="width: 80%; padding-bottom: 10px; word-break:break-all;" data-field-name="trade_seller_memo" act-if="_trade_seller_memo == 1">卖家备注：{{trade_seller_memo}}</li>','<li data-field-name="seller_nick" act-if="_seller_nick == 1">卖家旺旺：{{seller_nick}}</li>','<li data-field-name="send_name" act-if="_send_name == 1">卖家姓名：{{send_name}}</li>','<li data-field-name="send_mobile" act-if="_send_mobile == 1">卖家手机：{{send_mobile}}</li>','<li data-field-name="send_phone" act-if="_send_phone == 1">卖家电话：{{send_phone}}</li>','<li data-field-name="shop_title" act-if="_shop_title == 1">店铺名称：{{shop_title}}</li>','<li data-field-name="send_zip" act-if="_send_zip == 1">卖家邮编：{{send_zip}}</li>','<li style="width: 100%;" data-field-name="send_address" act-if="_send_address == 1">发货地址：{{send_address}}</li>','<li style="width: 100%;" data-field-name="trade_invoice_title" act-if="_trade_invoice_title == 1">发票抬头：{{trade_invoice_title}}</li>','<li style="width: 100%;" data-field-name="trade_express_info" act-if="_trade_express_info == 1">物流信息：{{trade_express_info}}</li>','<li style="width: 75%;" data-field-name="custom_content" act-if="_custom_content == 1">{{custom_content}}</li>',"</ul>","</div>","</div>"],d=['<div id="deliver-header" style="position: relative">','<h2 class="shop-order-header" style="text-align: left;"><span style="width: 90px;" data-field-name="title" act-if="_title == 1">{{title}}</span></h2>','<div act-if="currPageNo != undefined" style="display: inline-block;position: absolute; top: 0;right: 0;font-weight: bold;width: 32px;border-bottom: 2px solid #000;">','<div style="font-size: 30px;padding: 2px;width: 32px;text-align: center;">{{currPageNo}}</div>',"</div>",'<div class="info-list" style="margin-top:8px;">',"<ul>",'<li data-field-name="buyer_nick" act-if="_buyer_nick == 1" style="width: 48%;">买家旺旺：{{buyer_nick}}</li>','<li data-field-name="receiver_name" act-if="_receiver_name == 1" style="width: 48%;">买家姓名：{{receiver_name}}</li>','<li data-field-name="receiver_mobile" act-if="_receiver_mobile == 1" style="width: 48%;">买家手机：{{receiver_mobile}}</li>','<li data-field-name="receiver_phone" act-if="_receiver_phone == 1" style="width: 48%;">买家电话：{{receiver_phone}}</li>','<li data-field-name="trade_create_time" act-if="_trade_create_time == 1" style="width: 48%;">下单时间：{{trade_create_time}}</li>','<li data-field-name="trade_pay_time" act-if="_trade_pay_time == 1" style="width: 48%;">付款时间：{{trade_pay_time}}</li>','<li data-field-name="trade_print_time" act-if="_trade_print_time == 1" style="width: 48%;">打印时间：{{trade_print_time}}</li>','<li data-field-name="trade_deliver_time" act-if="_trade_deliver_time == 1" style="width: 48%;">发货时间：{{trade_deliver_time}}</li>','<li data-field-name="receiver_zip" act-if="_receiver_zip == 1" style="width: 48%;">买家邮编：{{receiver_zip}}</li>','<li data-field-name="receiver_address" style="width: 100%" act-if="_receiver_address == 1">收货地址：{{receiver_address}}</li>','<li data-field-name="trade_id" style="width: 100%" act-if="_trade_id == 1">订单编号：{{trade_id}}</li>',"</ul>","</div>","</div>"],o=['<div id="deliver-footer">','<div class="info-list">',"<ul>",'<li style="width: 80%;" data-field-name="trade_shop_promotion" act-if="_trade_shop_promotion == 1">赠品：{{trade_shop_promotion}}</li>','<li style="width: 80%; " data-field-name="trade_buyer_message" act-if="_trade_buyer_message == 1">买家留言：{{trade_buyer_message}}</li>','<li style="width: 80%; padding-bottom: 10px; word-break:break-all;" data-field-name="trade_seller_memo" act-if="_trade_seller_memo == 1">卖家备注：{{trade_seller_memo}}</li>','<li data-field-name="seller_nick" act-if="_seller_nick == 1" style="width: 48%;">卖家旺旺：{{seller_nick}}</li>','<li data-field-name="send_name" act-if="_send_name == 1" style="width: 48%;">卖家姓名：{{send_name}}</li>','<li data-field-name="send_mobile" act-if="_send_mobile == 1" style="width: 48%;">卖家手机：{{send_mobile}}</li>','<li data-field-name="send_phone" act-if="_send_phone == 1" style="width: 48%;">卖家电话：{{send_phone}}</li>','<li data-field-name="shop_title" act-if="_shop_title == 1" style="width: 48%;">店铺名称：{{shop_title}}</li>','<li data-field-name="send_zip" act-if="_send_zip == 1" style="width: 48%;">卖家邮编：{{send_zip}}</li>','<li style="width: 100%;" data-field-name="send_address" act-if="_send_address == 1">发货地址：{{send_address}}</li>','<li style="width: 100%;" data-field-name="trade_invoice_title" act-if="_trade_invoice_title == 1">发票抬头：{{trade_invoice_title}}</li>','<li style="width: 100%;" data-field-name="trade_express_info" act-if="_trade_express_info == 1">物流信息：{{trade_express_info}}</li>','<li style="width: 75%;" data-field-name="custom_content" act-if="_custom_content == 1">{{custom_content}}</li>',"</ul>","</div>","</div>"],r=['<div id="deliver-header" style="position: relative">','<h2 class="shop-order-header" style="padding-top: 0;">','<span style="font-size: 16px;padding: 5px 0;width:auto;font-weight:bold;" data-field-name="shop_title" act-if="_shop_title == 1">{{shop_title}}&nbsp;&nbsp;</span>','<span style="font-size: 16px;padding: 5px 0;width:auto;font-weight:bold;" data-field-name="title" act-if="_title == 1">{{title}}</span>',"</h2>",'<hr style="border:1px solid #fff;"/>','<div act-if="currPageNo != undefined" style="display: inline-block;position: absolute; top: 0;right: 0;font-weight: bold;width: 32px;">','<div style="font-size: 30px;padding: 2px;width: 32px;text-align: center;">{{currPageNo}}</div>',"</div>",'<div class="info-list" style="padding-top: 0;">','<ul style="width: 50%;">','<li data-field-name="receiver_name" act-if="_receiver_name == 1" style="width: 100%;">买家姓名：{{receiver_name}}</li>','<li data-field-name="receiver_mobile" act-if="_receiver_mobile == 1" style="width: 100%;">买家手机：{{receiver_mobile}}</li>','<li act-if="_trade_id == 1" data-field-name="trade_id" style="width: 100%;">订单编号：{{trade_id}}</li>','<li act-if="_trade_create_time == 1" data-field-name="trade_create_time" style="width: 100%;">下单时间：{{trade_create_time}}</li>',"</ul>","</div>",'<div class="info-list">',"<ul>",'<li data-field-name="buyer_nick" act-if="_buyer_nick == 1" style="width: 48%;">买家旺旺：{{buyer_nick}}</li>','<li data-field-name="receiver_phone" act-if="_receiver_phone == 1" style="width: 48%;">买家电话：{{receiver_phone}}</li>','<li data-field-name="trade_pay_time" act-if="_trade_pay_time == 1" style="width: 48%;">付款时间：{{trade_pay_time}}</li>','<li data-field-name="trade_print_time" act-if="_trade_print_time == 1" style="width: 48%;">打印时间：{{trade_print_time}}</li>','<li data-field-name="trade_deliver_time" act-if="_trade_deliver_time == 1" style="width: 48%;">发货时间：{{trade_deliver_time}}</li>','<li data-field-name="receiver_zip" act-if="_receiver_zip == 1" style="width: 48%;">买家邮编：{{receiver_zip}}</li>','<li data-field-name="receiver_address" style="width: 98%" act-if="_receiver_address == 1">收货地址：{{receiver_address}}</li>','<li style="width: 98%; " data-field-name="trade_buyer_message" act-if="_trade_buyer_message == 1">买家留言：{{trade_buyer_message}}</li>','<li style="width: 98%; padding-bottom: 10px; word-break:break-all;" data-field-name="trade_seller_memo" act-if="_trade_seller_memo == 1">卖家备注：{{trade_seller_memo}}</li>',"</ul>","</div>","</div>"],p=['<div id="deliver-footer">','<div class="info-list">',"<ul>",'<li style="width: 80%;" data-field-name="trade_shop_promotion" act-if="_trade_shop_promotion == 1">赠品：{{trade_shop_promotion}}</li>','<li data-field-name="seller_nick" act-if="_seller_nick == 1" style="width: 48%;">卖家旺旺：{{seller_nick}}</li>','<li data-field-name="send_name" act-if="_send_name == 1" style="width: 48%;">卖家姓名：{{send_name}}</li>','<li data-field-name="send_mobile" act-if="_send_mobile == 1" style="width: 48%;">卖家手机：{{send_mobile}}</li>','<li data-field-name="send_phone" act-if="_send_phone == 1" style="width: 48%;">卖家电话：{{send_phone}}</li>','<li data-field-name="send_zip" act-if="_send_zip == 1" style="width: 48%;">卖家邮编：{{send_zip}}</li>','<li style="width: 98%;" data-field-name="send_address" act-if="_send_address == 1">发货地址：{{send_address}}</li>','<li style="width: 98%;" data-field-name="trade_invoice_title" act-if="_trade_invoice_title == 1">发票抬头：{{trade_invoice_title}}</li>','<li style="width: 98%;" data-field-name="trade_express_info" act-if="_trade_express_info == 1">物流信息：{{trade_express_info}}</li>','<li style="width: 75%;" data-field-name="custom_content" act-if="_custom_content == 1">{{custom_content}}</li>',"</ul>","</div>","</div>"];
t.template.addTemp("template.pt.deliver",i),t.template.addTemp("template.pt.deliver.opt",a),t.template.addTemp("template.pt.deliver.desgin",s),t.template.addTemp("template.pt.deliver.header",n),t.template.addTemp("template.pt.deliver.header_4wlb",d),t.template.addTemp("template.pt.deliver.footer",l),t.template.addTemp("template.pt.deliver.footer_4wlb",o),t.template.addTemp("template.pt.deliver.header_4km",r),t.template.addTemp("template.pt.deliver.footer_4km",p)}(jQuery,RayCloud),function(e,t){function i(e,t){"double"==t&&(e.val(e.val().replace(/[^\d.]/g,"")),e.val(e.val().replace(/^\./g,"")),e.val(e.val().replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")),e.val(e.val().replace(/\.{2,}/g,".")),e.val(e.val().replace(".","$#$").replace(/\./g,"").replace("$#$",".")),e.val(e.val().replace(/^$/,"0"))),"int"==t&&(e.val(e.val().replace(/[^\d]/g,"")),e.val(e.val().replace(/^$/,"0")))}var a="<style> html,body, h2, p, dl, dt, dd, ul, ol, li, pre, strong, fieldset, button, input, textarea {margin: 0;padding: 0}body, button, input, select, textarea {font: normal 12px/1.5 '宋体', microsoft yahei, 'lucida grande', tahoma, verdana, arial, STHeiTi, simsun, sans-serif;}ul, ol {list-style: none} table,td,th {}.shop-order-templ{font-size: 12px; font-family:'宋体';background: #fff;}.shop-order-templ textarea{height:22px;resize:none}.shop-order-templ .shop-order-header{margin:0 auto 20px;text-align:center}.shop-order-templ .shop-order-header textarea, .shop-order-templ .shop-order-header input{width:300px;height:30px;line-height:30px;text-align:center;font-size:18px;border:1px solid #cdcdcd;overflow:hidden;color:#000}.shop-order-templ .shop-order-footer{margin:15px 0;text-align:center}.shop-order-templ .shop-order-footer textarea{width:96%;text-align:left}.shop-order-templ .shop-order-badging{margin:15px 0;text-align:center}.shop-order-templ .shop-order-badging textarea{width:96%;text-align:right}.shop-order-templ .order-pro-list{font-size:12px}.shop-order-templ .order-pro-list table{width:100%;table-layout:fixed;text-align:center;border-collapse:collapse;border-spacing:0}.shop-order-templ .order-pro-list thead td{font-weight:700;border:1px solid #bdbdbd;font-size:12px}.shop-order-templ .order-pro-list tbody td{border:1px solid #bdbdbd;font-size:12px}.shop-order-templ .order-pro-list td{padding:5px}.shop-order-templ .order-pro-list-noborder tbody td{border:0 none}.shop-order-templ .info-list{padding:10px}.shop-order-templ .info-list ul{zoom:1;overflow:hidden}.shop-order-templ .info-list li{float:left;display:inline;width:33%;margin:2px 0}.shop-order-templ .info-list li .info-label{float:left;display:inline;}.shop-order-templ .info-list li .info-con{margin-right:10px;zoom:1;overflow:hidden}.shop-order-templ .other-info li{width:100%}.ft-left {text-align: left;}.ft-center {text-align: center;}.pd_10 {padding: 10px;}.mr_40 {margin-right: 40px;}.shop-order-templ .shop-order-footer {margin: 15px 0;position: relative;height: 170px;}.shop-order-templ .shop-order-footer textarea {width: 75%;text-align: left;height: 120px; float:left; padding: 5px;}.shop-order-templ .shop-order-footer .footer-qrcode {width: 148px;height: 153px;position: absolute;top: -10px;right:10px;}</style>",s=(t.controls.get("control.print_pt"),{name:"pt.deliver.detail",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.deliver",_fn_dom_render:function(){if(!this._elm_dom_container){this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root)}this._dom_pt_deliver=this._elm_dom_container.find(".pt_public"),this._dom_pt_deliver.empty(),this._fn_ctrl_query_deliver({id:this._deliver_id},e.proxy(this._fn_dom_update,this))},_fn_dom_update:function(e){this._data_deliver_list=e,this._dom_pt_deliver.prepend(t.template.get("template.pt.deliver.opt",this._data_deliver_list)),this._fn_ctrl_get_deliver_tmpl(this._data_deliver_list.templateContent)},_fn_ctrl_get_deliver_tmpl:function(t){var i=this,a={url:t,type:"get",success:function(e){i._data_deliver_tmpl=e,i._fn_ctrl_get_deliver_tmpl_callback(e)}};e.ajax(a)},_fn_ctrl_get_deliver_tmpl_callback:function(){this._dom_pt_deliver.append(t.template.get("template.pt.deliver.desgin",this._data_deliver_list)),this._fn_ctrl_form_init(),this._fn_ctrl_dom_render()},_fn_ctrl_desgin_common_toggle:function(t){var i=e(t.currentTarget),a=i.closest("dl");a.addClass("current"),a.siblings().removeClass("current")},_fn_ctrl_form_init:function(){e("select").iSelect(),e("input[type=checkbox]").iCheck(),e("input[type=radio]").iCheck()},_fn_ctrl_opt_checked:function(){var t=this._data_deliver_list.fields.split(",");this._dom_deliver_design.append(this._data_deliver_tmpl),this._data_deliver_list.fields&&-1==this._data_deliver_list.fields.indexOf("trade_print_num")&&e("div[data-field-name=trade_print_num]").hide(),e(".shop-order-header input").val(this._data_deliver_list.title),this._dom_custom_content=this._dom_deliver_design.find("textarea[data-field-name=custom_content]");for(var i=this._data_deliver_list.fieldValues||[],a={},s=0,n=i.length;n>s;s++)a[i[s].name]=i[s].value;for(var l=0,d=t.length;d>l;l++){var o=this._dom_leaflet_design.find("input[data-name="+t[l]+"]");if(o.iCheck("check"),this._dom_deliver_design.find("[data-field-name="+t[l]+"]").show(),"qrcode"===t[l]&&(""!==this._data_deliver_list.qrcode?this._dom_qrcode_status_o.show():(this._dom_deliver_design.find("[data-field-name=qrcode]").hide(),this._dom_qrcode_status_t.show())),"custom_content"===t[l]){var r=this._data_deliver_list.customContent;""!==r&&this._dom_custom_content.val(r)}if("trade_create_time"==t[l]||"trade_pay_time"==t[l]||"trade_print_time"==t[l]||"trade_deliver_time"==t[l]){var p=o.closest(".item").find(".change-time");p.show();var r=a[t[l]]||"second";p.find("input[value="+r+"]").iCheck("check")}}},_fn_preview_deliver:function(){var t=this._dom_deliver_design.find("textarea[data-field-name=custom_content]");t.is(":visible")&&t.text(t.val());var i=this._dom_deliver_design.find("input[data-field-name=title]");i.is(":visible")&&i[0].setAttribute("value",i.val());var s=this._dom_deliver_design.clone();s.find("li").filter(function(t,i){"none"==i.style.display&&e(i).remove()});var n=a+'<div class="shop-order-templ pd_15">'+s.find("#deliver-header")[0].outerHTML+s.find(".order-pro-list")[0].outerHTML+s.find("#deliver-footer")[0].outerHTML+"</div>",l=this._dom_paper_width.val(),d=this._dom_paper_height.val(),o=0==this._dom_vertical_offset.val()?"2%":-this._dom_vertical_offset.val()+"mm",r=0==this._dom_horizontal_offset.val()?"2%":this._dom_horizontal_offset.val()+"mm";try{var p=getLodop(document.getElementById("LODOP_OB"),document.getElementById("LODOP_EM"));null!=p&&"undefined"!=typeof p.VERSION?(p.PRINT_INIT("发货单设计"),p.SET_PRINT_PAGESIZE(1,10*l,10*d,""),p.ADD_PRINT_HTM(o,r,"100%",d+"mm",n),p.SET_PRINT_STYLEA(0,"TableRowThickNess",25),p.SET_PRINTER_INDEXA(p.GET_PRINTER_NAME(-1)),p.PREVIEW()):alert("Error:本机未安装或需要升级!")}catch(c){}},_fn_event_bind:function(){this._fn_ctrl_opt_checked(),this._dom_leaflet_design.on("click","dt",this._fn_ctrl_desgin_common_toggle_proxy=e.proxy(this._fn_ctrl_desgin_common_toggle,this)),this._dom_pub_font_size.on("change",this._fn_event_pubset_fontsize_proxy=e.proxy(this._fn_event_pubset_fontsize,this)),this._dom_pub_font_style.on("change",this._fn_event_pubset_fontstyle_proxy=e.proxy(this._fn_event_pubset_fontstyle,this)),this._dom_pub_bold.on("ifClicked",this._fn_event_pubset_fontbold_proxy=e.proxy(this._fn_event_pubset_fontbold,this)),this._dom_leaflet_checkbox.on("ifClicked",this._fn_event_field_toggle_proxy=e.proxy(this._fn_event_field_toggle,this)),this._dom_pub_bold.on("ifClicked",this._fn_event_pubset_fontbold_proxy=e.proxy(this._fn_event_pubset_fontbold,this)),this._dom_event_save_deliver.on("click",this._fn_ctrl_post_deliver_data_proxy=e.proxy(this._fn_ctrl_post_deliver_data,this)),this._dom_event_reset_deliver.on("click",this._fn_ctrl_post_delivr_default_proxy=e.proxy(this._fn_ctrl_post_delivr_default,this)),this._dom_ct_up.on("click",this._fn_ctrl_offset_up_proxy=e.proxy(this._fn_ctrl_offset_up,this)),this._dom_ct_down.on("click",this._fn_ctrl_offset_down_proxy=e.proxy(this._fn_ctrl_offset_down,this)),this._dom_ct_left.on("click",this._fn_ctrl_offset_left_proxy=e.proxy(this._fn_ctrl_offset_left,this)),this._dom_ct_right.on("click",this._fn_ctrl_offset_right_proxy=e.proxy(this._fn_ctrl_offset_right,this)),this._dom_event_preview_deliver.on("click",this._fn_preview_deliver_proxy=e.proxy(this._fn_preview_deliver,this)),this._dom_qrcode_update.on("click",this._fn_qrcode_update_proxy=e.proxy(this._fn_qrcode_update,this)),this._dom_pub_offset_value.on("keyup",this._fn_ctrl_limit_val_proxy=e.proxy(this._fn_ctrl_limit_val,this)),this._dom_change_list.on("change",e.proxy(function(t){var i=e(t.currentTarget),a=i.val();location.href="#/pt/deliver/detail/?id="+a},this)),this._data_deliver_list.bold&&(this._dom_pub_bold.trigger("ifClicked"),this._dom_pub_bold.iCheck("check")),this._dom_paper_width.on("keyup",function(){i(e(this),"double")}),this._dom_paper_height.on("keyup",function(){i(e(this),"double")}),this._dom_vertical_offset.on("keyup",function(){i(e(this),"int")}),this._dom_horizontal_offset.on("keyup",function(){i(e(this),"int")})},_fn_event_unbind:function(){this._dom_leaflet_design.off("click","dt",this._fn_ctrl_desgin_common_toggle_proxy),this._dom_pub_font_size.off("change",this._fn_event_pubset_fontsize_proxy),this._dom_pub_font_style.off("change",this._fn_event_pubset_fontstyle_proxy),this._dom_pub_bold.off("ifClicked",this._fn_event_pubset_fontbold_proxy),this._dom_leaflet_checkbox.off("ifClicked",this._fn_event_field_toggle_proxy),this._dom_pub_bold.off("ifClicked",this._fn_event_pubset_fontbold_proxy),this._dom_event_save_deliver.off("click",this._fn_ctrl_post_deliver_data_proxy),this._dom_event_reset_deliver.off("click",this._fn_ctrl_post_delivr_default_proxy),this._dom_ct_up.off("click",this._fn_ctrl_offset_up_proxy),this._dom_ct_down.off("click",this._fn_ctrl_offset_down_proxy),this._dom_ct_left.off("click",this._fn_ctrl_offset_left_proxy),this._dom_ct_right.off("click",this._fn_ctrl_offset_right_proxy),this._dom_event_preview_deliver.off("click",this._fn_preview_deliver_proxy),this._dom_qrcode_update.off("click",this._fn_qrcode_update_proxy),this._dom_pub_offset_value.off("keyup",this._fn_ctrl_limit_val_proxy)},_fn_ctrl_offset_up:function(e){e.preventDefault(),this._fn_ctrl_offset_set("plus",this._dom_vertical_offset)},_fn_ctrl_offset_down:function(e){e.preventDefault(),this._fn_ctrl_offset_set("lower",this._dom_vertical_offset)},_fn_ctrl_offset_left:function(e){e.preventDefault(),this._fn_ctrl_offset_set("lower",this._dom_horizontal_offset)},_fn_ctrl_offset_right:function(e){e.preventDefault(),this._fn_ctrl_offset_set("plus",this._dom_horizontal_offset)},_fn_ctrl_offset_set:function(e,t){var i=parseInt(t.val(),10);"plus"==e?i+=1:i-=1,t.val(i)},_fn_ctrl_limit_val:function(t){var a=e(t.currentTarget);i(a,"int")},_fn_qrcode_update:function(t){t.preventDefault();var i=e(t.currentTarget);if("update"==i.attr("data-type")&&(this._dom_qrcode_status_o.hide(),this._dom_qrcode_status_t.show(),this._dom_qrcode_ipt.val(e.trim(this._dom_qrcode_text.text()))),"save"==i.attr("data-type")){if(""==e.trim(this._dom_qrcode_ipt.val()))return this._dom_leaflet_design.find("[data-name=qrcode]").iCheck("uncheck"),this._dom_deliver_design.find("[data-field-name=qrcode]").hide(),void this._dom_qrcode_status_t.hide();this._dom_qrcode_status_o.show(),this._dom_deliver_design.find("[data-field-name=qrcode]").show(),this._dom_qrcode_status_t.hide(),this._dom_qrcode_text.text(e.trim(this._dom_qrcode_ipt.val()))}},_fn_ctrl_delivr_default:function(t,i,a){API.pt_deliver_user_default(t,e.proxy(function(e){e.data&&location.reload()},this),a)},_fn_ctrl_post_delivr_default:function(){this._fn_ctrl_delivr_default({id:this._deliver_id})},_fn_ctrl_select_checked:function(e,t){"string"!=typeof t&&(t=t.toString()),e.iSelect("select",t)},_fn_ctrl_post_deliver_data:function(){this._fn_ctrl_deliver_user_update(this._fn_ctrl_get_deliver_data(),e.proxy(this._fn_deliver_user_updata_backfn,this))},_fn_deliver_user_updata_backfn:function(t){t.status&&e.dialog({title:"提示",icon:"ok.png",content:"保存成功！",ok:!0})},_fn_ctrl_deliver_user_update:function(t,i,a){API.pt_deliver_user_update(t,e.proxy(function(e){i(e.data)},this),a)},_fn_ctrl_get_deliver_data:function(){return this._data_deliver={},this._data_deliver.id=this._dom_change_list.val(),this._data_deliver.title=this._dom_leaflet_design.find("input[data-name=title]").is(":checked")?e.trim(this._dom_deliver_design.find("input[data-field-name=title]").val()):"",this._data_deliver.paperSize=this._dom_pub_paper_size.val(),this._data_deliver.width=this._dom_paper_width.val(),this._data_deliver.height=this._dom_paper_height.val(),this._data_deliver.fontSize=this._dom_pub_font_size.val(),this._data_deliver.font=this._dom_pub_font_style.val(),this._data_deliver.bold=this._dom_pub_bold.is(":checked")?!0:!1,this._data_deliver.verticalOffset=this._dom_vertical_offset.val(),this._data_deliver.horizontalOffset=this._dom_horizontal_offset.val(),this._data_deliver.fields=this._fn_ctrl_get_deliver_fields(),this._data_deliver.fieldValuesStr=JSON.stringify(this._fn_ctrl_get_time_fields()),this._data_deliver.qrcode=this._dom_leaflet_design.find("input[data-name=qrcode]").is(":checked")?e.trim(this._dom_qrcode_text.text()):"",this._data_deliver.customContent=this._dom_leaflet_design.find("input[data-name=custom_content]").is(":checked")?this._dom_custom_content.val():"",this._data_deliver.offsetNum=this._dom_pub_offset_num.val(),this._data_deliver.offsetUp=this._dom_pub_offset_up.val(),this._data_deliver.offsetValue=this._dom_pub_offset_value.val(),this._data_deliver},_fn_ctrl_get_time_fields:function(){for(var e=["trade_create_time","trade_pay_time","trade_print_time","trade_deliver_time"],t=[],i=0,a=e.length;a>i;i++){var s=this._dom_leaflet_design.find("input[data-name="+e[i]+"]"),n=s.closest(".item").find(".change-time"),l={};l.name=e[i],l.value=s.is(":checked")?n.find("input[type=radio]:checked").val():"second",t.push(l)}return t},_fn_ctrl_get_deliver_fields:function(){var t=[];return this._dom_leaflet_design.find("input").each(function(){var i=e(this),a=i.is(":checked");a&&t.push(i.attr("data-name"))}),t.join(",")},_fn_event_pubset_fontbold:function(t){var i=e(t.currentTarget),a=this._dom_deliver_design.find("[data-field-name]");i.is(":checked")?a.css("font-weight","normal"):a.css("font-weight","bold")},_fn_event_pubset_fontsize:function(t){var i=e(t.currentTarget),a=i.val();this._dom_deliver_design.find("[data-field-name]").css("font-size",a+"px")},_fn_event_pubset_fontstyle:function(t){var i=e(t.currentTarget),a=i.val();this._dom_deliver_design.find("[data-field-name]").css("font-family",a)},_fn_event_field_toggle:function(t){var i=e(t.currentTarget),a=i.data("name");return this._dom_deliver_design.find("[data-field-name = "+a+"]").toggle(),"qrcode"===a&&i.is(":checked")?(this._dom_qrcode_status_o.hide(),this._dom_qrcode_status_t.hide(),void this._dom_deliver_design.find("[data-field-name=qrcode]").hide()):("qrcode"===a&&(""==e.trim(this._dom_qrcode_text.text())?(this._dom_deliver_design.find("[data-field-name=qrcode]").hide(),this._dom_qrcode_status_t.show()):this._dom_qrcode_status_o.show()),void(("trade_create_time"==a||"trade_pay_time"==a||"trade_print_time"==a||"trade_deliver_time"==a)&&i.closest(".item").find(".change-time").toggle()))},_fn_ctrl_dom_render:function(){this._dom_paper_width=this._dom_pt_deliver.find(".paper-width"),this._dom_paper_height=this._dom_pt_deliver.find(".paper-height"),this._dom_pub_paper_size=this._dom_pt_deliver.find(".pub-paper-size"),this._dom_vertical_offset=this._dom_pt_deliver.find(".vertical-offset"),this._dom_horizontal_offset=this._dom_pt_deliver.find(".horizontal-offset"),this._dom_pub_font_size=this._dom_pt_deliver.find(".pub-font-size"),this._dom_pub_font_style=this._dom_pt_deliver.find(".pub-font-style"),this._dom_pub_bold=this._dom_pt_deliver.find(".pub_bold"),this._dom_deliver_design=this._dom_pt_deliver.find(".pt-deliver-desgin"),this._dom_leaflet_design=this._dom_pt_deliver.find(".leaflet-design"),this._dom_leaflet_checkbox=this._dom_leaflet_design.find("input"),this._dom_event_save_deliver=this._dom_pt_deliver.find(".save-deliver"),this._dom_event_reset_deliver=this._dom_pt_deliver.find(".reset-deliver"),this._dom_event_preview_deliver=this._dom_pt_deliver.find(".preview-test-deliver"),this._dom_ct_up=this._dom_pt_deliver.find(".ct-up"),this._dom_change_list=this._dom_pt_deliver.find(".deliver-change-list"),this._dom_ct_down=this._dom_pt_deliver.find(".ct-down"),this._dom_ct_left=this._dom_pt_deliver.find(".ct-left"),this._dom_ct_right=this._dom_pt_deliver.find(".ct-right"),this._dom_qrcode_status_o=this._dom_leaflet_design.find(".qrcode-status-1"),this._dom_qrcode_status_t=this._dom_leaflet_design.find(".qrcode-status-2"),this._dom_qrcode_update=this._dom_leaflet_design.find(".qrcode-update"),this._dom_qrcode_text=this._dom_leaflet_design.find(".qrcode-text"),this._dom_qrcode_ipt=this._dom_leaflet_design.find("input[name=qrcode-ipt]"),this._dom_pub_offset_num=this._dom_pt_deliver.find(".pub-offset-num"),this._dom_pub_offset_up=this._dom_pt_deliver.find(".pub-offset-up"),this._dom_pub_offset_value=this._dom_pt_deliver.find(".offset-value"),this._fn_ctrl_select_checked(this._dom_pub_font_size,this._data_deliver_list.fontSize),this._fn_ctrl_select_checked(this._dom_pub_font_style,this._data_deliver_list.font),this._fn_ctrl_select_checked(this._dom_change_list,this._data_deliver_list.id),this._fn_ctrl_select_checked(this._dom_pub_offset_num,this._data_deliver_list.offsetNum),this._fn_ctrl_select_checked(this._dom_pub_offset_up,this._data_deliver_list.offsetUp),this._fn_event_bind()},_fn_ctrl_query_deliver:function(t,i,a){API.pt_deliver_user_query(t,e.proxy(function(e){i(e.data)},this),a)},init:function(){},getContainer:function(){return this._elm_dom_container},_data_deliver_list:null,_deliver_id:null,update:function(e,t){return"undefined"==typeof e.id?void(location.href="#/pt/deliver_list/"):(this._deliver_id=e.id,this._fn_dom_render(),void(t&&t()))},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.empty().remove(),this._elm_dom_container=null)}});t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_deliver_list">','<div class="pt_express_list">','<div class="express-tab">','<div class="express-hd clearfix">','<ul class="hd-title clearfix">','<li class="current">','<a href="#/pt/list/">发货单</a>',"</li>","</ul>","</div>",'<div class="express-bd">','<div class="express-panel pt-list-tab">',"</div>","</div>",'<div class="clearfix">','<div class="pagination-pages f-rt mr_5">','<div class="pagination-page J_Page_Container"></div>',"</div>","</div>","</div>","</div>","</div>"],a=['<table class="express-table">',"<thead>","<tr>",'<th width="70">','<div class="cell-box ft-center">序号</div>',"</th>",'<th width="150">','<div class="cell-box">模板名称</div>',"</th>",'<th width="160">','<div class="cell-box">发货单尺寸设置（毫米）</div>',"</th>",'<th width="160">','<div class="cell-box">整体偏移设置（毫米）</div>',"</th>",'<th width="150">','<div class="cell-box">操作</div>',"</th>","<th>",'<div class="cell-box">锁定打印机</div>',"</th>","</tr>","</thead>",'<tbody class="common-list-tr">','<tr act-loop="item in list" data-id="{{item.id}}" class="J_List_Item_{{item.id}}">',"<td>",'<div class="cell-box ft-center">{{item.sortId}}</div>',"</td>","<td>",'<div class="cell-box"><span class="J_Express_Name">{{item.name}}</span><a class="edit-ex J_Click" data-name="edit_name" data-id={{item.id}}></a></div>',"</td>","<td>",'<div class="cell-box">','<span class="mr_10">宽：{{item.width}}</span>',"<span>高：{{item.height}}</span>","</div>","</td>","<td>",'<div class="cell-box">','<span class="mr_15">横向：{{item.horizontalOffset}}</span>',"<span>纵向：{{item.verticalOffset}}</span>","</div>","</td>","<td>",'<div class="cell-box opr-list-ex">',"{{item.isDefaultHtml}}","<span>|</span>",'<a class="J_Click" data-name="preview" data-tempurl="{{item.templateContent}}" data-id="{{item.id}}">预览</a>',"<span>|</span>",'<a href="#/pt/deliver/detail/?id={{item.id}}">设计</a>',"</div>","</td>","<td>",'<div class="cell-box">',"{{item.sltPrinter}}","</div>","</td>","</tr>","</tbody>","</table>"];t.template.addTemp("template.pt.deliver_list",i),t.template.addTemp("template.deliver.list.tab",a)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.print_pt"),a=(t.controls.get("control.form_util"),['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="id" value="">','<div class="pd_10 ft-center ft_14">',"模板名称：",'<input maxlength="10" type="text" name="templateName" value="" style="width: 180px" />',"</div>",'<div class="pd_15 ft-center">','<button type="submit" class="btn btn-primary">保存</button>','<span class="btn btn-gray ml_15 J_Close">关闭</span>',"</div>","</form>","</div>"]),s={show:function(t,i,a){this._elemName=a,this._render(),this._update_dom(t,i),this.$dialog=e.dialog({title:"修改发货单模板名称",close:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e(a.join("")).appendTo("body"),this._elm_id=this.$el.find('input[name="id"]'),this._elm_templateName=this.$el.find('input[name="templateName"]'),this._event_bind())},_update_dom:function(e,t){this._elm_id.val(e),this._elm_templateName.val(t)},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this._fn_event_handler_click_close,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(t){t.preventDefault();var i=this._elm_id.val(),a=e.trim(this._elm_templateName.val());if(a.length<1)return e.dialog.alert("模版名称不能为空！"),!1;var s=this;API.pt_deliver_user_name_edit({id:i,name:a},function(e){e.data.status&&(s.hide(),s._elemName.siblings(".J_Express_Name").text(a))})},_fn_event_handler_click_close:function(){this.hide()},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}},n={_deliver_temp_list:{},show:function(e,t){this._update_dom(e,t)},_update_dom:function(t,i){var a=this;e.when(API.pt_deliver_user_query({id:t}),e.ajax({url:i,type:"get"})).done(function(t,i){var s=t[0].data.fontSize+"px",n=t[0].data.font,l=t[0].data.bold?"bold":"normal",d=t[0].data.title,o=t[0].data.customContent;a.$el=e('<div class="pt_public" style="font-size:'+s+";font-family:"+n+"; font-weight:"+l+';display:none;">'+i[0]+"</div>").appendTo("body");for(var r=t[0].data.fields.split(","),p=0,c=r.length;c>p;p++)"custom_content"!==r[p]&&(a.$el.find("[data-field-name=custom_content]").attr("disabled","disabled"),a.$el.find("[data-field-name=custom_content]").val(o)),"title"!==r[p]&&(a.$el.find("[data-field-name=title]").attr("disabled","disabled"),a.$el.find("[data-field-name=title]").val(d)),a.$el.find("[data-field-name="+r[p]+"]").show();this.$dialog=e.dialog({title:"发货单模板预览",fixed:!1,width:810,content:a.$el.show()})})},destroy:function(){this.$el&&(this.$el.empty().remove(),this.$el=null,this.$dialog=null)}},l={name:"pt.deliver_list",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.deliver_list",_fn_dom_render:function(){if(!this._elm_dom_container){this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root)}this._elm_dom_ptListTab=this._elm_dom_container.find(".pt-list-tab"),this._elm_dom_ptListTab.empty(),this._elm_dom_ptListTab.off("click"),this._fn_ctrl_load_deliver_list({},e.proxy(this._fn_dom_update,this))},_fn_ctrl_load_deliver_list:function(t,i,a){API.pt_deliver_user_list(t,e.proxy(function(e){i(e.data)},this),a)},_fn_deliver_event_bind:function(){this._elm_dom_ptListTab.on("click",".J_Click",this._fn_deliver_list_event_proxy=e.proxy(this._fn_deliver_list_event,this))},_fn_deliver_event_off:function(){this._elm_dom_ptListTab.off("click")},_fn_deliver_list_event:function(t){t.preventDefault();var i=e(t.currentTarget),a=i.data("name"),s=i.closest("tr").data("id");this._deliver_handler_list[a].call(this,s,t)},_deliver_handler_list:{edit_name:function(t){var i=this._elm_dom_ptListTab.find("a[data-name=edit_name][data-id="+t+"]"),a=e.trim(i.siblings(".J_Express_Name").text());s.show(t,a,i)},preview:function(e){var t=this._elm_dom_ptListTab.find("a[data-name=preview][data-id="+e+"]"),i=t.data("tempurl");n.show(e,i)},lock_print:function(e,t){i.lockPrinter(e,"deliver",t)},setdefault:function(t,i){var a=e(i.currentTarget);API.pt_deliver_user_top({id:t},e.proxy(function(e){if(e.data.status){var t=a.closest(".express-table").find(".J_Default_Deliver");t.replaceWith('<a href="#" class="J_Click" data-name="setdefault">设为默认</a>'),a.replaceWith('<em class="fc_999 J_Default_Deliver">已默认</em>')}},this))}},_fn_dom_update:function(a){this._status_list=a.list.slice(0),this._var_deliver_list=a;for(var s=i.findLocalPrinter(),n=0,l=a.list.length;l>n;n++)a.list[n].sortId=10*(a.page.pageNo-1)+n+1,a.list[n].sltPrinter=""==a.list[n].printerName||-1==e.inArray(a.list[n].printerName,s)?'<a class="J_Click" data-name="lock_print" data-id="'+a.list[n].id+'" data-status="0">锁定打印机</a>':'<em class="fc_999">'+a.list[n].printerName+'<a class="J_Click ml_5" data-name="lock_print" data-id="'+a.list[n].id+'" data-status="1" data-print="'+a.list[n].printerName+'">[取消锁定]</a></em>',a.list[n].isDefaultHtml=0==a.list[n].isDefault?'<a href="#" class="J_Click" data-name="setdefault">设为默认</a>':'<em class="fc_999 J_Default_Deliver">已默认</em>';var d=t.template.get("template.deliver.list.tab",a);this._elm_dom_ptListTab.html(d),this._fn_deliver_event_bind()},init:function(){},_var_deliver_list:null,_deliver_temp_list:[],getContainer:function(){return this._elm_dom_container},update:function(e,t){this._fn_dom_render(),t&&t()},destroy:function(){this._elm_dom_container&&(this._elm_dom_container.empty().remove(),this._elm_dom_container=null,this._fn_deliver_event_off(),this._var_deliver_list=null,s.destroy(),n._deliver_temp_list=null)}};t.modules.define(l.name,l)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.pt.product_list"),a=(t.controls.get("control.widget.page"),{name:"pt.product_short",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.product_short",_fn_dom_render:function(){if(!this._elm_dom_container){var i=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root);this._elm_dom_tabs=i.find(".module-product-tab-navs"),this._elm_dom_listBody=i.find(".list-main"),this._elm_search_input=i.find("#search_input"),this._elm_j_trigger=i.find(".J_Trigger_Show_Orders"),this._elm_btn_query=i.find("#btn-query"),this._elm_checkbox_statistic=i.find("#check_statistic"),this._elm_list_table=i.find(".J_TableList"),this._elm_bat_remove=i.find("#bat-remove"),this._elm_save_modified=i.find("#save-modified"),this._elm_item_sync=i.find("#item_sync"),this._elm_check_all=i.find("#pt_check_all"),this._elm_check_list_all=i.find(".check-list-all"),this._elm_check_pt_code=i.find("#pt_code"),this._elm_filter_shorttitle=i.find(".trade-hover-item"),i.find('input[type="checkbox"]').iCheck(),this._fn_event_bind(),this._init_savable_inputs(e(".pt-product")),this._get_shopId(),this._fn_change_shortTitle(this._elm_list_table);this._elm_dom_listBody.on("keyup","input[type=text]",function(t){var i=e(t.target);i.val().length>32&&i.val(i.val().substring(0,32))})}},_fn_event_bind:function(){this._elm_dom_tabs.find("a").on("click",e.proxy(function(e){this._fn_change_tabUI(e)},this)),this._elm_btn_query.on("click",e.proxy(function(){this._fn_query_product()},this)),this._elm_search_input.on("keydown",e.proxy(function(e){this._fn_input_searchValChanged(e)},this)),this._elm_list_table.on("click",e.proxy(function(e){this._fn_handle_table_events(e)},this)),this._elm_bat_remove.on("click",e.proxy(function(){this._fn_batch_delete()},this)),this._elm_save_modified.on("click",e.proxy(function(){this._fn_batch_edit()},this)),this._elm_item_sync.on("click",e.proxy(function(){this._fn_item_sync()},this)),this._elm_filter_shorttitle.on("click",e.proxy(function(e){this._fn_filter_shorttitle(e)},this)),this._elm_check_all.on("ifClicked",e.proxy(function(t){var i=!t.target.checked;setTimeout(e.proxy(function(){this._elm_dom_container&&this._fn_check_all(i),this._elm_dom_container&&this._elm_check_list_all.iCheck(i?"check":"uncheck")},this),1)},this)),this._elm_check_list_all.on("ifClicked",e.proxy(function(t){var i=!t.target.checked;setTimeout(e.proxy(function(){this._elm_dom_container&&this._fn_check_all(i),this._elm_dom_container&&this._elm_check_all.iCheck(i?"check":"uncheck")},this),1)},this));this._elm_dom_listBody.find(".J_Focusout");this._elm_dom_listBody.on("focus",".J_Focusout",function(t){var i=e(t.target),a=i.siblings("span .j_save_list");a.stop().animate({width:36})}),this._elm_dom_listBody.on("blur",".J_Focusout",function(t){var i=e(t.target),a=i.siblings("span .j_save_list");a.stop().animate({width:0})}),this._elm_dom_listBody.on("focus",".pt-shorttitle",function(t){var i=e(t.target),a=i.siblings(".J_save_sku");a.stop().animate({width:36})}),this._elm_dom_listBody.on("blur",".pt-shorttitle",function(t){var i=e(t.target),a=i.siblings(".J_save_sku");a.stop().animate({width:0})})},_init_savable_inputs:function(i){var a=this;i.undelegate(".input-savable","focusin"),i.undelegate(".input-savable","focusout"),i.delegate(".input-savable","focusin",function(t){var i=e(t.target),a=i.parent(),s='<span class="save-btn-wrapper"><button class="J_Save">保存</button></span>';a.find(".save-btn-wrapper").length||a.css("position","relative").append(s),a.find(".save-btn-wrapper").stop().animate({width:"44px"})}).delegate(".input-savable","focusout",function(i){var s=e(i.target),n=s.parent(),l=e(this).val(),d=n.find(".J_Save"),o=!1;d.on("click",function(i){o=!0;var s=e(i.target),r=s.parent().prev(),p=r.parents(".skus_J").data("id"),c=l||"N/A",_=r.parents(".skus_J").attr("taobaoid"),m=r.parents(".skus_J").data("skuid"),u=r.parents(".J_prod_list_skus").data("id"),h=r.parents(".skus_J").data("id");outerid=l||"N/A",taobaoid=r.parents(".J_prod_list_skus").attr("taobaoid"),r.hasClass("input_list_outid")&&API.item_edit({numIid:u,outerId:outerid,taobaoId:taobaoid},function(i){var s=i.data;if(a.new_data[u].outerId=outerid,1==s.status)t.showSuccess("保存成功！",.5,function(){r.val(l),r.attr("value",l)});else if(2==s.status){var n=s.msg,d="";if(r.val(r.attr("value")),n)return e.each(n,function(e,t){for(var i=0;i<t.length;i++)d+=1==t.length?'<tr class="error-row"><td class="J_iTip" data-title="'+t[i].title+'" title="" style="cursor:pointer;max-width:240px; border-right:1px solid #eaeaea;">'+t[i].title+'</td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>":'<tr class="error-row"><td style="white-space:nowrap;text-overflow:ellipsis"></td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>"}),e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper" style="width:720px;"><h3 style="line-height:30px;">成功保存商品<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.success+'</span>条,失败<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.error+'</span>条,失败原因如下：</h3><table class="error-table" style="width:660px;"><tr class="error-row error-head"><td style="border-right:1px solid #eaeaea;">宝贝名称</td><td class="error-details" style="border-left:none;">失败原因</td></tr>'+d+"</table></div>",okVal:"确定",ok:function(){}}),e(".error-row").find(".J_iTip").trigger("mouseout"),void e(".error-row").find(".J_iTip").iTip({skin:"blue",triggerType:"hover",zIndex:99999})}else 3==s.status&&e.dialog({title:"警告",content:"天猫店铺宝贝商家编码暂不支持更新！",okVal:"确定",cancelVal:"取消",ok:function(){},cancel:function(){},width:373,lock:!0,resize:!1,fixed:!0})}),r.hasClass("input_list_shortTitle")&&API.item_edit({numIid:u,shortTitle:outerid,taobaoId:taobaoid},function(i){var s=i.data;
if(a.new_data[u].shortTitle=outerid,1==s.status)t.showSuccess("保存成功！",.5),r.val(l),r.attr("value",l);else if(2==s.status){var n=s.msg,d="";if(r.val(r.attr("value")),n)return e.each(n,function(e,t){for(var i=0;i<t.length;i++)d+=1==t.length?'<tr class="error-row"><td class="J_iTip" data-title="'+t[i].title+'" title="" style="cursor:pointer;max-width:240px; border-right:1px solid #eaeaea;">'+t[i].title+'</td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>":'<tr class="error-row"><td style="white-space:nowrap;text-overflow:ellipsis"></td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>"}),e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper" style="width:720px;"><h3 style="line-height:30px;">成功保存商品<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.success+'</span>条,失败<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.error+'</span>条,失败原因如下：</h3><table class="error-table" style="width:660px;"><tr class="error-row error-head"><td style="border-right:1px solid #eaeaea;">宝贝名称</td><td class="error-details" style="border-left:none;">失败原因</td></tr>'+d+"</table></div>",okVal:"确定",ok:function(){}}),e(".error-row").find(".J_iTip").trigger("mouseout"),void e(".error-row").find(".J_iTip").iTip({skin:"blue",triggerType:"hover",zIndex:99999})}else 3==s.status&&e.dialog({title:"警告",content:"天猫店铺宝贝商家编码暂不支持更新！",okVal:"确定",cancelVal:"取消",ok:function(){},cancel:function(){},width:373,lock:!0,resize:!1,fixed:!0})}),r.hasClass("input_skus_outid")&&API.sku_edit({numIid:p,outerId:c,taobaoId:_,skuId:m},function(i){for(var s=i.data,n=0;n<a.new_data[h].skus.length;n++)a.new_data[h].skus[n].outerId=outerid;if(1==s.status)t.showSuccess("保存成功！",.5),r.val(l),r.attr("value",l);else if(2==s.status){var d=s.msg,o="";if(r.val(r.attr("value")),d)return e.each(d,function(e,t){for(var i=0;i<t.length;i++)o+=1==t.length?'<tr class="error-row"><td class="J_iTip" data-title="'+t[i].title+'" title="" style="cursor:pointer;max-width:240px; border-right:1px solid #eaeaea;">'+t[i].title+'</td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>":'<tr class="error-row"><td style="white-space:nowrap;text-overflow:ellipsis"></td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>"}),e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper" style="width:720px;"><h3 style="line-height:30px;">成功保存商品<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.success+'</span>条,失败<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.error+'</span>条,失败原因如下：</h3><table class="error-table" style="width:660px;"><tr class="error-row error-head"><td style="border-right:1px solid #eaeaea;">宝贝名称</td><td class="error-details" style="border-left:none;">失败原因</td></tr>'+o+"</table></div>",okVal:"确定",ok:function(){}}),e(".error-row").find(".J_iTip").trigger("mouseout"),void e(".error-row").find(".J_iTip").iTip({skin:"blue",triggerType:"hover",zIndex:99999})}else 3==s.status&&e.dialog({title:"警告",content:"天猫店铺宝贝商家编码暂不支持更新！",okVal:"确定",cancelVal:"取消",ok:function(){},cancel:function(){},width:373,lock:!0,resize:!1,fixed:!0})}),r.hasClass("input_skus_shortTitle")&&API.sku_edit({numIid:p,shortTitle:c,taobaoId:_,skuId:m},function(i){for(var s=i.data,n=0;n<a.new_data[h].skus.length;n++)a.new_data[h].skus[n].shortTitle=outerid;if(1==s.status)t.showSuccess("保存成功！",.5),r.val(l),r.attr("value",l);else if(2==s.status){var d=s.msg,o="";if(r.val(r.attr("value")),d)return e.each(d,function(e,t){for(var i=0;i<t.length;i++)o+=1==t.length?'<tr class="error-row"><td class="J_iTip" data-title="'+t[i].title+'" title="" style="cursor:pointer;max-width:240px; border-right:1px solid #eaeaea;">'+t[i].title+'</td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>":'<tr class="error-row"><td style="white-space:nowrap;text-overflow:ellipsis"></td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>"}),e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper" style="width:720px;"><h3 style="line-height:30px;">成功保存商品<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.success+'</span>条,失败<span style="color:#f44239;font-weight:bold;font-size:14px;">'+s.error+'</span>条,失败原因如下：</h3><table class="error-table" style="width:660px;"><tr class="error-row error-head"><td style="border-right:1px solid #eaeaea;">宝贝名称</td><td class="error-details" style="border-left:none;">失败原因</td></tr>'+o+"</table></div>",okVal:"确定",ok:function(){}}),e(".error-row").find(".J_iTip").trigger("mouseout"),void e(".error-row").find(".J_iTip").iTip({skin:"blue",triggerType:"hover",zIndex:99999})}else 3==s.status&&e.dialog({title:"警告",content:"天猫店铺宝贝商家编码暂不支持更新！",okVal:"确定",cancelVal:"取消",ok:function(){},cancel:function(){},width:373,lock:!0,resize:!1,fixed:!0})}),n.find(".save-btn-wrapper").stop().animate({width:0}),d.off("click")}),s.val(s.attr("value")),setTimeout(function(){o||(n.find(".save-btn-wrapper").stop().animate({width:0}),d.off("click"))},200)})},_left_accordion:function(t,i){function a(t){e(i).find("."+n).removeClass(n),o.each(function(i){i!=t&&i!=c&&e(this).hide()}),d.eq(t).addClass(n).prevAll().add(d.eq(t)),c=t}var s=this,n="active",l=e(this),d=e(".shipping-info-c"),o=l.find(".left-tree").hide(),r=d.eq(t-1),p=d.eq(t-1).nextAll(),c=t-1;r.addClass(n);var _=e(i.find(".left-tree"));s._get_tree(_.prev().data("taobaoid"),_),d.on("click",function(t){var l=e(t.target),d=l.hasClass("shipping-info-c")?l:l.parents(".shipping-info-c"),r=l.hasClass("shop-list-content")?l:l.parents(".shop-list-content"),c=l.parents("#main");if(c.find(".trade-hover-item").removeClass("trade-hover-item-selected"),e(i).hasClass(n))return!1;r.length&&s._get_tree(d.find(".shop-list-content").data("taobaoid"),d.find(".left-tree"));var _=e(this).index();p=e(this).nextAll(),a(_),o.eq(_-1).show()}),s._event_bind_shop()},_get_tree:function(){},_get_shopId:function(){var t=this,i=RayCloud.user._data.taobaoId;API.item_cat_shop({taobaoId:i},function(i){for(var a=i.data,s=a,n="",l=0;l<s.length;l++)n+=['<div class="shipping-info-c"><div class="shop-list-content shops_list" data-taobaoid="'+s[l].taobaoId+'"><span class="shop-title shops_list">'+s[l].title+'</span><span class="icon-menu-arrow"></span></div><div class="left-tree module-catagory-wrap clearfix" style="max-height:500px; overflow-y:auto; display:none;"><ul class="subfolder"></ul></div></div>'].join("");e(".module-correspondence-wrap").append(n),t._left_accordion(1,e(".module-correspondence-wrap"))})},_event_bind_shop:function(){var i=this;e(".module-trade-list").find(".image-code").iTip({skin:"blue",triggerType:"hover"}),e(".shops_list").on("click",function(){t.pages.setCurHash({t:Math.random()})}),e(".module-correspondence-wrap").on("click",".cata-level",function(a){var s=e(a.target);if(s.hasClass("folder-name")){s.parents(".module-correspondence-wrap").find(".folder-name").removeClass("curr_cid"),s.addClass("curr_cid");var n=t.pages._fn_act_get_hashs();delete n.app,delete n.root;var l={cId:s.parents(".cata-name-wrapper").parent("li").attr("cid"),specialField:"shortTitle",specialFieldStatus:n.type||0,pageNo:n.pageNo,pageSize:n.pageSize,onSale:n.onSale,text:n.text?decodeURIComponent(n.text):e("#search_input").val(),timeStamp:+new Date};l=e.extend(n,l),i._fn_ctrl_setHash(l)}})},_fn_event_bind_iCheckList:function(){this._elm_list_table.find(".item-checkbox").on("ifClicked",e.proxy(function(){setTimeout(e.proxy(function(){this._elm_dom_container&&this._fn_item_checkbox_clicked()},this),1)},this))},_fn_event_unbind_iCheckList:function(){this._elm_list_table.find(".item-checkbox").off("ifClicked")},_status_event_scrollFixed:!1,_fn_event_bind_scrollFixed:function(){this._status_event_scrollFixed!==!0&&(e(".left-side").scrollToFixed({marginTop:41,zIndex:101}),e("#modlue_leftNav").scrollToFixed({marginTop:0,zIndex:101}),e("#pt_product_top").scrollToFixed({marginTop:41,zIndex:100}),this._status_event_scrollFixed=!0)},_fn_event_unbind_scrollFixed:function(){this._status_event_scrollFixed!==!1&&(e(".left-side").trigger("detach.ScrollToFixed"),e("#header .header").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),e("#pt_product_top").trigger("detach.ScrollToFixed"),this._status_event_scrollFixed=!1)},_fn_show_guide_step3:function(){if("true"!=localStorage.step3_showed){var t=e(".container");t.css("position","relative");var i='<img id="step3_show" class="step3_show"/>',a='<div id="cancel3_guide" class="cancel3_guide"></div>',s=e(i).appendTo(t).scrollToFixed({marginTop:-200,zIndex:101}),n=e(a).appendTo(t).scrollToFixed({marginTop:133,marginLeft:80,zIndex:101});e("#cancel3_guide").on("click",function(){s.trigger("detach.ScrollToFixed"),n.trigger("detach.ScrollToFixed"),s.remove(),n.remove()}),localStorage.step3_showed="true"}},_fn_change_tabUI:function(i){i.preventDefault();var a=e(i.target);a.parent().find(".current").removeClass("current"),a.addClass("current");var s=a.parents("#main");s.find(".trade-hover-item").removeClass("trade-hover-item-selected");var n={timeStamp:+new Date};"undefined"!=typeof a.attr("data-type")?n.type=a.attr("data-type"):"undefined"!=typeof a.attr("onsale-type")&&(n.onSale=a.attr("onsale-type")),t.pages.setCurHash(n),this._elm_search_input.val("")},_fn_query_product:function(){var e={specialField:"shortTitle",specialFieldStatus:this._elm_dom_tabs.find("a.current").attr("data-type"),text:encodeURIComponent(this._elm_dom_container.find("#search_input").val()||""),pageNo:1,timeStamp:+new Date};this._fn_ctrl_setHash(e)},_fn_input_searchValChanged:function(e){13===e.keyCode&&this._elm_btn_query.trigger("click")},_fn_stastic_product:function(){},_fn_handle_table_events:function(t){var i=e(t.target),a=i.attr("class");switch(a){case"check-all":break;case"pt-code":break;case"save-item":this._fn_save_item(i);break;case"remove-item":this._fn_remove_item(i);break;case"item-checkbox":this._fn_item_checkbox_clicked(i)}},_fn_handle_img_mouseover:function(t){var i=e(t.target);this._fn_create_img_preview_tip(i)},_fn_handle_img_mouseout:function(t){var i=e(t.target);i.parents("div.cell-box").find(".img-help-tip").remove()},_fn_create_img_preview_tip:function(t){var i=t.attr("src").replace(/40/g,"130");e('<div class="img-help-tip"><span class="arrow-wraper"></span><span class="left-arrow"></span><img src="'+i+'"/></div>').appendTo(t.parents("div.cell-box"))},_fn_check_all:function(e){this._elm_list_table.find(".item-checkbox").iCheck(e?"check":"uncheck")},_fn_change_shortTitle:function(i){var a=this;e(".image-code").on("click",function(){var s=i.find("div.checked").parents(".J_prod_list_skus");i.find("div.checked").length?e.dialog({title:"警告",content:"<span style='padding:20px 10px; font-size:14px; display:inline-block;'>您是否确定要复制商家编码作为简称？</span>",okVal:"确定",cancelVal:"取消",ok:function(){e.each(s,function(t,i){var s=e(i),n=s.find("div.checked"),l=s.find(".J_copy_outid"),d=l.find("input").val(),o=s.find(".input_list_shortTitle"),r=s.data("id");if(n.length){var p=n.parents(".J_prod_list_skus").next("#skus_list"),c=p.find(".skus_J");if(1==p.length)for(var _=0;_<c.length;_++){var m=e(c[_]).find(".short-name").find(".pt-shorttitle");m.val(e(c[_]).find(".J_Focusout").val())}else if(a.new_data[r].skus)for(var u=0;u<a.new_data[r].skus.length;u++)a.new_data[r].skus[u].shortTitle=a.new_data[r].skus[u].outerId;n.addClass("marked-as-code-added"),o.val(d)}});var i=[];e.each(s,function(t,s){var n=e(s),l=e(s).next("#skus_list"),d=l.find(".skus_J"),o=[];if(prod_params={numIid:e(s).data("id"),shortTitle:e(s).find(".input_list_shortTitle").val(),taobaoId:e(s).attr("taobaoid"),skus:o},1==l.length)for(var r=0,p=d.length;p>r;r++){var c=(e(d[r]).find(".input_skus_outid"),e(d[r]).find(".input_skus_shortTitle")),_={numIid:e(d[r]).data("id"),shortTitle:c.val(),skuId:e(d[r]).data("skuid"),taobaoId:e(d[r]).attr("taobaoid")};o.push(_)}else if(a.new_data[n.data("id")].skus)for(var m=0;m<a.new_data[n.data("id")].skus.length;m++)_={numIid:a.new_data[n.data("id")].skus[m].numIid,shortTitle:a.new_data[n.data("id")].skus[m].shortTitle,skuId:a.new_data[n.data("id")].skus[m].skuId,taobaoId:a.new_data[n.data("id")].skus[m].taobaoId},o.push(_);i.push(prod_params)}),API.item_batchEdit(JSON.stringify(i),function(i){var a=i.data;if(1==a.status)t.showSuccess("保存成功！",.5);else if(2==a.status){var s=a.msg,n="";if(s)return e.each(s,function(e,t){for(var i=0;i<t.length;i++)n+=1==t.length?'<tr class="error-row"><td class="J_iTip" data-title="'+t[i].title+'" title="" style="cursor:pointer;max-width:240px; border-right:1px solid #eaeaea;">'+t[i].title+'</td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>":'<tr class="error-row"><td style="white-space:nowrap;text-overflow:ellipsis"></td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>"}),e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper" style="width:720px;"><h3 style="line-height:30px;">成功保存商品<span style="color:#f44239;font-weight:bold;font-size:14px;">'+a.success+'</span>条,失败<span style="color:#f44239;font-weight:bold;font-size:14px;">'+a.error+'</span>条,失败原因如下：</h3><table class="error-table" style="width:660px;"><tr class="error-row error-head"><td style="border-right:1px solid #eaeaea;">宝贝名称</td><td class="error-details" style="border-left:none;">失败原因</td></tr>'+n+"</table></div>",okVal:"确定",ok:function(){var i=t.pages._fn_act_get_hashs();t.pages.setCurHash(e.extend(i,{t:Math.random()}))}}),e(".error-row").find(".J_iTip").trigger("mouseout"),void e(".error-row").find(".J_iTip").iTip({skin:"blue",triggerType:"hover",zIndex:99999})}else 3==a.status&&(t.pages.setCurHash({t:Math.random()}),e.dialog({title:"警告",content:"天猫店铺宝贝商家编码暂不支持更新！",okVal:"确定",cancelVal:"取消",ok:function(){var i=t.pages._fn_act_get_hashs();t.pages.setCurHash(e.extend(i,{t:Math.random()}))},cancel:function(){var i=t.pages._fn_act_get_hashs();t.pages.setCurHash(e.extend(i,{t:Math.random()}))},width:373,lock:!0,resize:!1,fixed:!0}))})},cancel:function(){},width:373,lock:!0,resize:!1,fixed:!0}):e.dialog.alert("当前未选中任何商品，请选择")})},_fn_dom_update_userTrade:function(){},_fn_save_item:function(i){var a=this,s=i.parents("tr"),n=s.find(".pt-shorttitle"),l=n.attr("originalval"),d=e.trim(n.val()),o=s.attr("taobaoid");params={numIids:i.attr("data-id"),taobaoIds:o,shortTitles:""===d?"N/A":l===d?"-1":d},this._fn_call_edit_items(params,function(){var e=n.parents("tr").find("div.checked");e.removeClass("marked-as-code-added"),a._elm_dom_listBody.find("div.marked-as-code-added").length||a._fn_change_ptcode_checkbox_status(),t.showSuccess("保存成功！",.5)})},_fn_item_sync:function(){API.item_sync({},e.proxy(function(){t.pub("global.click.item_sync",e.proxy(function(){this.reload()},this))},this),e.proxy(function(){},this),!1,!1,!0)},_fn_filter_shorttitle:function(i){var a=e(i.target);a.addClass("trade-hover-item-selected").siblings().removeClass("trade-hover-item-selected");var s=t.pages._fn_act_get_hashs(),n={type:e(i.target).attr("data-type")};"undefined"!=typeof s.onSale&&(n.onSale=s.onSale),t.pages.setCurHash(n)},_fn_remove_item:function(i){e.dialog.confirm("您确定要删除吗？",e.proxy(function(){var e=i.attr("data-id"),a=i.parents("tr").attr("taobaoid"),s=function(){t.showSuccess("删除成功！",.5),i.parents("tr").remove()};this._fn_call_delete_items({numIids:e,taobaoIds:a},s)},this))},_fn_item_checkbox_clicked:function(){var e=this._elm_dom_listBody.find("tr").length,t=this._elm_list_table.find(".item-checkbox:checked").length;e==t?(this._elm_check_all.iCheck("check"),this._elm_check_list_all.iCheck("check")):(this._elm_check_all.iCheck("uncheck"),this._elm_check_list_all.iCheck("uncheck"))},_fn_batch_delete:function(){var i=this._elm_list_table.find(".item-checkbox"),a=[],s=[];e.each(i,function(t,i){e(i).prop("checked")&&(a.push(e(i).attr("data-id")),s.push(e(i).parents("tr").attr("taobaoid")))}),a.length?e.dialog.confirm("您确定要删除吗？",e.proxy(function(){var e=this,i=function(){t.showSuccess("删除成功！",.5);for(var i=0;i<a.length;i++)e._elm_list_table.find("tr[data-id = "+a[i]+"]").remove()};this._fn_call_delete_items({numIids:a.join(","),taobaoIds:s.join(",")},i)},this)):e.dialog.alert("请先选择宝贝！")},_fn_batch_edit:function(){var i=this._elm_list_table.find(".J_prod_list_skus"),a=[];e.each(i,function(t,i){var s=e(i).next("#skus_list"),n=s.find(".skus_J"),l=[];if(prod_params={numIid:e(i).data("id"),outerId:e(i).find(".input_list_outid").val(),shortTitle:e(i).find(".input_list_shortTitle").val(),taobaoId:e(i).attr("taobaoid"),skus:l},s)for(var d=0,o=n.length;o>d;d++){var r=e(n[d]).find(".input_skus_outid"),p=e(n[d]).find(".input_skus_shortTitle"),c={numIid:e(n[d]).data("id"),shortTitle:p.val(),skuId:e(n[d]).data("skuid"),outerId:r.val(),taobaoId:e(n[d]).attr("taobaoid")};l.push(c)}else delete prod_params.skus;a.push(prod_params)}),API.item_batchEdit(JSON.stringify(a),function(i){var a=i.data;if(1==a.status)t.showSuccess("保存成功！",.5);else if(2==a.status){var s=a.msg,n="";if(s)return e.each(s,function(e,t){for(var i=0;i<t.length;i++)n+=1==t.length?'<tr class="error-row"><td class="J_iTip" data-title="'+t[i].title+'" title="" style="cursor:pointer;max-width:240px; border-right:1px solid #eaeaea;">'+t[i].title+'</td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>":'<tr class="error-row"><td style="white-space:nowrap;text-overflow:ellipsis"></td><td class="error-details" style="border-left:none;">'+t[i].subMsg+"</td></tr>"}),e.dialog({title:"警告",icon:"warn.png",content:'<div class="errormsg-table-wrapper" style="width:720px;"><h3 style="line-height:30px;">成功保存商品<span style="color:#f44239;font-weight:bold;font-size:14px;">'+a.success+'</span>条,失败<span style="color:#f44239;font-weight:bold;font-size:14px;">'+a.error+'</span>条,失败原因如下：</h3><table class="error-table" style="width:660px;"><tr class="error-row error-head"><td style="border-right:1px solid #eaeaea;">宝贝名称</td><td class="error-details" style="border-left:none;">失败原因</td></tr>'+n+"</table></div>",okVal:"确定",ok:function(){}}),e(".error-row").find(".J_iTip").trigger("mouseout"),void e(".error-row").find(".J_iTip").iTip({skin:"blue",triggerType:"hover",zIndex:99999})}else 3==a.status&&e.dialog({title:"警告",content:"天猫店铺宝贝商家编码暂不支持更新！",okVal:"确定",cancelVal:"取消",ok:function(){},cancel:function(){},width:373,lock:!0,resize:!1,fixed:!0})})},_fn_change_ptcode_checkbox_status:function(){this._elm_check_pt_code[0].checked=!1,this._elm_check_pt_code.parent().removeClass("checked")},_fn_event_unbind:function(){e(".module-trade-list").undelegate(),e(".J_Trigger_Show_Orders").undelegate(),this._elm_j_trigger.off("click"),this._elm_dom_tabs.off("click"),this._elm_btn_query.off("click"),this._elm_list_table.off("click"),this._elm_bat_remove.off("click"),this._elm_save_modified.off("click"),this._elm_item_sync.off("click"),this._elm_check_all.off("ifClicked"),this._elm_check_list_all.off("ifClicked"),this._elm_check_pt_code.off("ifClicked"),this._elm_search_input.off("keydown"),this._fn_event_unbind_iCheckList()},_fn_dom_addList:function(){},_fn_dom_update:function(i){this._fn_event_unbind_iCheckList(),this._elm_check_all.iCheck("uncheck"),this._elm_check_list_all.iCheck("uncheck"),this._elm_check_pt_code.iCheck("uncheck"),this._elm_dom_tabs.find("a em").hide();var a=this._elm_dom_tabs.find("a.current");if(a.find("em").html("("+i.total+")").show(),!i.list.length)return this._elm_dom_listBody.html('<tr><td colspan="6"><div class="pd_30">暂无数据</div></td></tr>'),void this._update_pages();e(window).scrollTop(1);var s={items:i.list};this._elm_dom_listBody.html(t.template.get("template.pt.product_list_temp",s)),this._update_pages(i),this._elm_list_table.find(".item-checkbox").iCheck(),this._fn_event_bind_iCheckList(),this._fn_event_bind_scrollFixed()},_update_pages:function(i){for(var a=e(".J_tr_prod").find(".list-main").find("tr.J_hover_box"),s=0,n=a.length;n>s;s++)e(a[s]).addClass(s%2==1?"tr_j":"tr_f");e(".J_tr_prod").find(".list-main").find("tr.J_prod_list_skus");var l=this._elm_dom_container.find(".J_Pages"),d=l.find("select");if(d&&d.iSelect("destroy"),i){var o=Math.ceil(i.total/i.page.pageSize),r={total:i.total,pageNo:i.page.pageNo,pageSize:i.page.pageSize,prevPage:i.page.pageNo-1,nextPage:i.page.pageNo+1,pageTotal:o,isLastPage:i.page.pageNo==o};l.html(t.template.get("template.trade.list.sub_module_product.pages",r)),this._bind_event_4_page_changed(l),l.find("select").iSelect()}else l.html("")},_fn_call_update:function(t){var a=this;i.loadList(t,e.proxy(function(e){this._fn_dom_update(e),this._bind_event_skus(e),a.new_data={};for(var t=0;t<e.list.length;t++)a.new_data[e.list[t].numIid]=e.list[t]},this),e.proxy(function(){this._status_list=[]},this))},_fn_call_delete_items:function(t,a){i.removeItems(t,e.proxy(function(){a&&a()},this),e.proxy(function(){},this))},_fn_call_edit_items:function(t,a){i.batchEdit(t,e.proxy(function(){a&&a()},this),e.proxy(function(){},this))},_bind_event_skus:function(){var i=this;e(".module-trade-list").on("click",".J_prod_list_skus",function(a){for(var s=i.new_data,n=e(a.target),l=["product-thumb","J_Focusout","pt-shorttitle","J_Save"],d=!1,o=0;o<l.length;o++)if(n.hasClass(l[o])){d=!0;break}if(!d){var r=n.hasClass("J_prod_list_skus")?n:n.parents(".J_prod_list_skus"),p=r.next(),c=r.find(".J_Trigger_Show_Orders"),_=r.next("tr#skus_list");if(e(_).is(":hidden")?e(_).find(".skus_J").addClass("J_hover_box"):e(_).find(".skus_J").removeClass("J_hover_box"),c.hasClass("trade-icon-close"))if(p.hasClass("J_skus_list_c"))r.next("#skus_list").show(),c.addClass("trade-icon-open").removeClass("trade-icon-close");else{c.addClass("trade-icon-open").removeClass("trade-icon-close");for(var m=0;m<s[r.data("id")].skus.length;m++)s[r.data("id")].skus[m].propertiesName=s[r.data("id")].skus[m].propertiesName.replace(/\:([^,]+)/g,':<span style="color:brown;">$1</span>');r.after(t.template.get("template.pt.prodListSkusTemp",{list:s[r.data("id")].skus}))}else c.addClass("trade-icon-close").removeClass("trade-icon-open"),r.next("#skus_list").hide();e(".J_tr_prod").find(".list-main").find("tr").removeClass("tr_f");for(var u=e(".J_tr_prod").find(".list-main").find("tr.J_hover_box"),o=0,h=u.length;h>o;o++)e(u[o]).addClass(o%2==1?"tr_j":"tr_f")}})},_bind_event_4_page_changed:function(t){var i=this;t.find("select").on("change",function(){i._fn_ctrl_setHash({pageNo:1,pageSize:e(this).val()})}),t.find("a.module-trade-pages-pageNo").on("click",function(){var t=e(this).attr("data-page");t&&i._fn_ctrl_setHash({pageNo:t})}),t.find(".input-small").on("focusin",function(){t.find(".J_Submit_Container").stop().animate({width:"44px"})}).on("focusout",function(){var a=e(this).val(),s=e(this).attr("data-max"),n=!1;t.find(".J_Submit").on("click",function(t){return t.preventDefault(),a-0>s-0?void e.dialog.alert("超出最大页数！"):(n=!0,void(/^\d*$/.test(a)&&i._fn_ctrl_setHash({pageNo:a})))}),setTimeout(function(){n||t.find(".J_Submit_Container").stop().animate({width:0})},500)}),this._elm_list_table.delegate(".product-thumb img","mouseover",e.proxy(function(e){this._fn_handle_img_mouseover(e)},this)),this._elm_list_table.delegate(".product-thumb img","mouseout",e.proxy(function(e){this._fn_handle_img_mouseout(e)},this))},init:function(){},_status_hashs:{},_fn_ctrl_setHash:function(i){t.pages.setCurHash(e.extend({},this._status_hashs,i))},update:function(t,i){e(".module-trade-list").off("click",".J_prod_list_skus"),this._fn_show_guide_step3(),this._fn_dom_render(t),e(this._elm_dom_root).children().hide(),this._elm_dom_container.show(),this._elm_dom_tabs.find("a.current").removeClass("current"),"undefined"==typeof t.onSale?this._elm_dom_tabs.find('a[data-type="0"]').addClass("current"):this._elm_dom_tabs.find('a[onsale-type="'+t.onSale+'"]').addClass("current"),t.pageNo&&t.pageNo.match(/^[1-9][0-9]*$/)||(t.pageNo="1"),t.pageSize&&t.pageSize.match(/^[1-9][0-9]*$/)||(t.pageSize=localStorage.pt_short_p_s||"20"),this._status_hashs.pageSize!=t.pageSize&&(localStorage.pt_short_p_s=t.pageSize);var a={specialField:"shortTitle",specialFieldStatus:t.type||0,pageNo:t.pageNo,pageSize:t.pageSize,onSale:t.onSale,text:t.text?decodeURIComponent(t.text):e("#search_input").val(),timeStamp:+new Date,taobaoId:e(".module-correspondence-wrap").find(".active").find(".shop-list-content").data("taobaoid")||RayCloud.user._data.taobaoId,cId:e(".module-correspondence-wrap").find(".curr_cid").parents(".cata-name-wrapper").parent("li").attr("cid")};this._status_hashs=e.extend({},t),this._status_hashs.root&&delete this._status_hashs.root,this._status_hashs.app&&delete this._status_hashs.app,this._fn_event_unbind_scrollFixed(),this._fn_call_update(a),i&&i()},reload:function(){this.update(this._status_hashs,null,!0)},disabled:function(){this._fn_event_unbind_scrollFixed()},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._fn_event_unbind_scrollFixed(),this._elm_dom_container.empty().remove(),this._elm_dom_tabs=null,this._elm_dom_container=null,this._elm_dom_listBody=null,this._elm_btn_query=null,this._elm_search_input=null,this._elm_checkbox_statistic=null,this._elm_list_table=null,this._elm_bat_remove=null,this._elm_save_modified=null,this._status_hashs={})}});t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=['<div class="left-side J_left_side" style="float:left;"><div class="module-correspondence-wrap" style="width: 200px;"></div></div>','<div class="pt-product J_tr_prod" style="margin-bottom:100px; margin-left:200px;">','<div id="pt_product_top" style="background:#ffffff;">','<div class="pt-header">','<div class="module-product-tab clearfix">','<div class="clearfix module-product-tab-navs">','<a data-type="0" data-sale="" href="#/pt/product_short/?type=0" class="module-pt-tab-nav current">店铺所有宝贝&nbsp;&nbsp;<em></em></a>','<a onsale-type="1" data-sale="1"  href="#/pt/product_short/?onSale=1" class="module-pt-tab-nav">出售中宝贝&nbsp;&nbsp;<em></em></a>','<a onsale-type="0" data-sale="0"  href="#/pt/product_short/?onSale=0" class="module-pt-tab-nav">已下架宝贝&nbsp;&nbsp;<em></em></a>',"</div>",'<div class="search-area mr_20">','<input id="search_input" placeholder="宝贝标题\\宝贝简称\\商家编码"/>','<button id="btn-query" class="btn btn-primary">查询</button>','<button id="item_sync" class="btn btn-primary btn-sync">同步商品</button>',"</div>","</div>","</div>",'<div class="module-trade-list">','<table class="module-trade-list-header tablefixed" width="100%">','<thead><tr class="check-all">','<td width="46" style="padding:0;"><div class="cell-box ft-center"><input id="pt_check_all" type="checkbox" class="check-all"/></div></td>','<td class="list-cell" width="100" style="padding:0;"><div class="cell-box"><span class="pl_10">宝贝图片</span></div></td>','<td class="list-cell" style="padding:0;"><div class="cell-box">宝贝名称/规格</div></td>','<td class="list-cell" width="300" style="padding:0;"><div class="cell-box">宝贝/规格 商家编码</div></td>','<td class="short-name list-cell"  width="300" style="padding:0;">','<div class="cell-box" style="display:inline-block;*zoom:1;*display:inline;">',"<span>宝贝简称/规格别名</span>",'<span class="ml_10 image-code J_iTip" data-title="复制商家编码作为简称" title=""></span>','<label for="pt_code" style="padding-left:41px;"></label>',"</div>",'<span class="trade-hover" style="margin-left:15px;*top:-7px;">','<span class="trade-hover-text"><span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd">','<li class="trade-hover-item" data-type="0">全部宝贝</li>','<li class="trade-hover-item" data-type="1">已设置宝贝简称</li>','<li class="trade-hover-item" data-type="2">未设置宝贝简称</li>',"</ul>","</span>","</td>","</tr></thead>","</table>","</div>","</div>",'<div class="module-trade-list">','<table class="J_TableList ui-table ui-table-striped ui-table-inbox tablefixed" width="100%" style="border-collapse:collapse;border-top:1px solid #eaeaea;border-bottom:1px solid #eaeaea;border-left:1px solid #ffffff;">','<tbody class="list-main">',"</tbody>","</table>","</div>",'<div class="pt-pages clearfix" style="background:#ffffff;">','<div class="foot-check-all ml_25"><input id="check_list_all" class="check-list-all" type="checkbox"/><label for="check_list_all">全选</label></div>','<div class="J_Pages"></div>',"</div>",'<div class="module-pt-taskbar-inner bat-opt">','<div class="f-lt">','<a id="save-modified" class="btn btn-primary taskbar-operation-area">批量保存当前页面修改</a>',"</div>","</div>","</div>"],a=['<tr act-loop="item in items" data-id="{{item.numIid}}" taobaoid="{{item.taobaoId}}" class="J_prod_list_skus J_hover_box">','<td width="46">','<div class="ft-center"><input data-id="{{item.numIid}}" class="item-checkbox" type="checkbox" style="display:block;"/></div>','<div class="mr_5 ft-center" act-if="item.skus !=undefined"><span class="trade-icon-close J_Trigger_Show_Orders J_Click" data-name="trigger_show_orders"></span></div>',"</td>",'<td class="list-cell" width="100">','<div class="cell-box ft-center pt-img-container"><a target="_blank" href="http://item.taobao.com/item.html?id={{item.numIid}}" class="inline-block ft-center product-thumb" style="width:40px;height:40px;"><img  src="{{item.picPath}}_40x40.jpg"/></a></div>',"</td>",'<td class="list-cell" valign="top">','<div class="cell-box"><a target="_blank" href="http://item.taobao.com/item.html?id={{item.numIid}}"><span class="inline-block pr_10">{{item.title}}</span></a></div>','<span act-if="item.skus.length !=undefined">规格种类：{{item.skus.length}}</span>','<span act-if="item.skus.length ==undefined">规格种类：0</span>',"</td>",'<td class="list-cell J_copy_outid" width="300">','<span class="m-outsid-callback">',"<span>",'<span class="m-outsid-callback"><input type="text" name="outSid" class="J_Focusout input-savable input_list_outid " value="{{item.outerId}}" data-value="" data-name="edit_logistics" style="width:110px; border-radius:0px;"></span>',"</span>","</span>","</td>",'<td class="short-name list-cell" data-name="pt-short-name" width="300">','<div class="cell-box" class="short-name-area">','<input data-id="{{item.numIid}}" type="text" outerid="{{item.outerId}}" originalval="{{item.shortTitle}}" class="pt-shorttitle input-savable input_list_shortTitle " style="width:150px;border-radius:0px;" value="{{item.shortTitle}}">',"</div>","</td>","</tr>"],s=['<tr id="skus_list" class="J_skus_list_c">','<td colspan="5" style="padding:0px;">','<table width="100%">','<tr act-loop="item in list" data-id="{{item.numIid}}" data-skuid="{{item.skuId}}" taobaoid="{{item.taobaoId}}" class="skus_J J_hover_box" >','<td width="46">',"</td>",'<td class="list-cell" width="100">',"</td>",'<td class="list-cell" style=" vertical-align: middle;" valign="top">','<span id="color_l">{{item.propertiesName}}</span>',"</td>",'<td class="list-cell J_copy_outid" width="300">','<span class="m-outsid-callback">',"<span>",'<span class="m-outsid-callback"><input type="text" name="outSid" class="J_Focusout input-savable input_skus_outid " value="{{item.outerId}}" data-value="" data-name="edit_logistics" style="width:110px; border-radius:0px;"></span>',"</span>","</span>","</td>",'<td class="short-name list-cell" data-name="pt-short-name" width="300">','<div class="cell-box" class="short-name-area">','<input data-id="{{item.numIid}}" outerid="{{item.outerId}}" originalval="{{item.shortTitle}}" class="pt-shorttitle input-savable input_skus_shortTitle " style="width:150px;border-radius:0px;" value="{{item.shortTitle}}">',"</div>","</td>","</tr>","</table>","</td>","</tr>"],n=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option act-if="pageSize == 10" value="10" selected>10</option>','<option act-if="pageSize != 10" value="10">10</option>','<option act-if="pageSize == 20" value="20" selected>20</option>','<option act-if="pageSize != 20" value="20">20</option>','<option act-if="pageSize == 50" value="50" selected>50</option>','<option act-if="pageSize != 50" value="50">50</option>','<option act-if="pageSize == 100" value="100" selected>100</option>','<option act-if="pageSize != 100" value="100">100</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"],l=['<div class="errormsg-table-wrapper">',"<h3>保存成功商品条,失败条,失败原因如下：</h3>",'<table class="error-table">','<tr class="error-row error-head">','<td>订单号</td><td class="error-details">错误原因</td>',"</tr>",'<tr class="error-row" act-loop="item in list">',"<td></td>",'<td class="error-details"></td>',"</tr>","</table>","</div>"];
t.template.addTemp("template.pt.product_short",i),t.template.addTemp("template.pt.product_list_temp",a),t.template.addTemp("template.pt.prodListSkusTemp",s),t.template.addTemp("template.trade.list.sub_module_product.pages",n),t.template.addTemp("template.pt.save_all",l)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.trade.list_tab"),a={name:"pt.custom.sub_module_tab",renderTo:function(t){if(!this.$el){var a=(i.getData(),['<div class="clearfix f-lt module-trade-tab-navs">']),s=['<a data-id="1" href="#/pt/custom/?queryId=1&sys=true" class="module-trade-tab-nav current">待发货<em></em></a>','<a data-id="4" href="#/pt/custom/?queryId=4&sys=true" class="module-trade-tab-nav">已发货<em></em></a>'].join("");a.push(s),a.push("</div>"),this.$el=e(a.join("")).appendTo(t)}},_update_tab:function(t){if(this.$el){this.$el.find(".module-trade-tab-nav").filter(".current").find("em").html("");var i=this.$el.find(".module-trade-tab-nav").removeClass("current").filter(function(i,a){return e(a).attr("data-id")==t}).addClass("current"),a=i.attr("href");a&&(a=a.indexOf("&_t")<0?i.attr("href")+"&_t="+ +new Date:a.replace(/(_t=\d*)/g,function(){return"_t="+ +new Date})),i.attr("href",a)}},update:function(e){this._update_tab(e.queryId)},update_search_total:function(e){this.$el&&this.$el.find(".module-trade-tab-nav").filter(".current").find("em").html(" ("+e+")")},init:function(){},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this.$el.empty().remove(),this.$el=null)}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-trade-searchBar J_SearchBar">','<form action="#/pt/custom/" method="get">','<input type="hidden" name="pageNo" value="1">','<span class="mr_10 mr_printLogType"></span>','<span class="mr_10"></span>','<select name="dateStatus" style="width:7em;">','<option value="">&nbsp;</option>',"</select>",'<span class="J_Time_Range">','<input type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startDate" class="w100 date-picker ml_10" > &mdash; <input type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="endDate" class="w100 date-picker" >',"</span>",'<input type="text" name="word" placeholder="搜订单号\\姓名\\手机号\\运单号\\收货信息\\留言备注" class="ml_10 search-content">','<button type="submit" class="btn btn-primary ml_10">查询</button>',"</form>",'<a href="javascript:;" class="ml_10 btn btn-primary J_add_infor_dio">添加</a>','<a href="javascript:;" class="ml_20 btn btn-primary J_batch_get_in">批量导入</a>',"</div>"];t.template.addTemp("template.pt.custom.sub_module_query",i)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.form_util"),a={name:"pt.custom.sub_module_query",_template_name:"template.pt.custom.sub_module_query",_log_template_name:this._template_name+".log",renderTo:function(i){this.$el||(this.$el=e(t.template.get(this._template_name)).appendTo(i),this._event_bind(),this.$el.find("select").iSelect(),this.$el.find('input[name="text"]').placeholder(),this.$el.find(".ui-select").hide(),this.$el.find(".J_Time_Range").hide())},_update_print_log:function(i,a){a.queryId&&"3"!=a.queryId&&(this.$el.find(".ui-select-dateStatus").hide(),this.$el.find(".J_Time_Range").hide());var s=this.$el.find("select[name=printLogType]").val();"undefined"!=typeof i.printLogType&&(s=i.printLogType),API.trade_printlog_time({type:s},e.proxy(function(a){var s=a.data;if(s&&s.length>0){var n=[];e.each(s,function(e,i){var a=t.util.date.getdate(Number(i.printTime),"YY-MM-DD HH:MM:SS");n.push('<option value="{id}">{printTime}</option>'.replace("{id}",i.id).replace("{printTime}",a))}),this.$el.find("select[name=printLogId]").html("").html(n.join("")).iSelect("update")}else this.$el.find("select[name=printLogId]").html("").html('<option value="">&nbsp;</option>').iSelect("update");i.printLogType&&this.$el.find('select[name="printLogType"]').iSelect("select",i.printLogType),i.printLogId&&this.$el.find('select[name="printLogId"]').iSelect("select",i.printLogId),this.$el.find(".ui-select-printLogType").show(),this.$el.find(".mr_printLogType").show(),this.$el.find(".ui-select-printLogId").show(),i.printLogType=this.$el.find("select[name=printLogType]").val(),i.printLogId=this.$el.find("select[name=printLogId]").val(),null==i.printLogId&&(i.printLogId=""),t.pub("trade.search.printlog",i)},this)),this._update_text(i.word||"")},update:function(e,i){var a=t.user.get();if(a.userConf&&1==a.userConf.mmb&&a.masterUser&&1==a.masterUser?this._update_bind_shop_query(a,e):(this.$el.find(".ui-select-taobaoId").hide(),this.$el.find(".search-content").css("width","400px")),e.queryId&&"3"==e.queryId)return void this._update_print_log(e,i);this.$el.find(".ui-select-printLogType").hide(),this.$el.find(".mr_printLogType").hide(),this.$el.find(".ui-select-printLogId").hide(),this.$el.find(".ui-select-dateStatus").show(),this.$el.find(".J_Time_Range").show();var s=[];s.push({text:"交易时间",value:"1"}),4==e.queryId&&s.push({text:"发货时间",value:"2"}),e.queryId!=i.queryId&&this._render_select(s),this._update_select(t.pages._fn_act_get_hashs().dateStatus||(4==e.queryId?"2":"1"));var n=e.startTime&&t.util.date.getdate(Number(e.startTime),"YY-MM-DD HH:MM"),l=e.endTime&&t.util.date.getdate(Number(e.endTime),"YY-MM-DD HH:MM");this._update_time(n,l),this._update_text(e.word||"")},init:function(){},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null)},_update_bind_shop_query:function(){},_event_bind:function(){this.$el.find("form").on("submit.query",this._event_handler("_onsubmit")),this.$el.find("select[name=printLogType]").on("change",this._event_handler("_onprinttype_change")),this.$el.find(".btn-sync").on("click",function(e){t.pub("trade.list.sub_module_querybar.trade_sync",e)})},_event_unbind:function(){this.$el.find("form").off("submit.query"),this.$el.find("select[name=printLogType]").off("change")},_event_handler:function(t){return e.proxy(this[t],this)},_onprinttype_change:function(){var e=this.$el.find("select[name=printLogType]").val();window.location="#/trade/list/?queryId=3&sys=true&printLogType="+e},_onsubmit:function(a){a.preventDefault();var s=i.getData(a.currentTarget),n=e.trim(s.startDate),l=e.trim(s.endDate),d=(new Date).getTime();if(n){if(n+=-1===n.indexOf(":")?" 00:00:00":":00",!t.util.date.is_date(n))return void e.dialog.alert("开始时间格式不正确！",e.proxy(function(){this.$el.find("form")[0].elements.startDate.focus()},this));if(n=t.util.date.tojsdate(n).getTime(),n>=d)return void e.dialog.alert("开始时间必须小于当前时间！",e.proxy(function(){this.$el.find("form")[0].elements.startDate.focus()},this));s.startDate=n}if(l){if(l+=-1===l.indexOf(":")?" 00:00:00":":00",!t.util.date.is_date(l))return void e.dialog.alert("结束时间格式不正确！",e.proxy(function(){this.$el.find("form")[0].elements.endDate.focus()},this));if(l=t.util.date.tojsdate(l).getTime(),l>d)return void e.dialog.alert("结束时间必须小于当前时间！",e.proxy(function(){this.$el.find("form")[0].elements.endDate.focus()},this));s.endDate=l}if(n&&l&&n>=l)return void e.dialog.alert("开始时间必须小于结束时间！",e.proxy(function(){this.$el.find("form")[0].elements.startDate.focus()},this));s.word=encodeURIComponent(e.trim(s.word)),s._t=(new Date).getTime();var o=t.pages._fn_act_get_hashs();delete o.root,delete o.app,t.pub("trade.list.sub_module_query.submit",e.extend(o,s))},_update_time:function(e,t){this.$el.find("form").find('input[name="startTime"]').val(e),this.$el.find("form").find('input[name="endTime"]').val(t)},_update_text:function(e){this.$el.find("form").find('input[name="text"]').val(e)},_render_select:function(t){var i=[];e.each(t,function(e,t){i.push('<option value="{value}">{text}</option>'.replace("{value}",t.value).replace("{text}",t.text))}),this.$el.find('select[name="dateStatus"]').html("").html(i.join("")).iSelect("update")},_update_select:function(e){this.$el.find('select[name="dateStatus"]').iSelect("select",e)}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=["<div>",'<div class="module-trade-list">','<div class="module-trade-list-header J_TradeList_Head module-trade-list-header-inpage" id="module-trade-list-header">','<span class="header-checkall">','<div class="cell-box ft-center">','<span class="check"><input type="checkbox" class="J_Select_All"></span>',"</div>","</span>",'<span class="filter-header header-index-info"><div class="cell-box trade-hover-text">序号</div></span>','<span class="filter-header header-order-info">','<div class="cell-box order-info-head">','<span class="trade-hover ">','<span class="trade-hover-text">系统订单号<span class="ml_5 trade-icon-down"></span></span>','<ul class="trade-hover-bd J_TradeList_SortList"></ul>',"</span>","</div>","</span>",'<span class="filter-header header-prod-info">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">商品<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd product-info">','<li class="trade-hover-item">全部订单</li>','<li class="trade-product-item" data-value="product.all" name="for_productInfo">商品种类</li>','<div class="sub-item"><input type="checkbox" id="onekind" class="J_Checkbox"><label for="onekind">1种商品</label></div>','<div class="sub-item"><input type="checkbox" id="morethanonekind" class="J_Checkbox"><label for="morethanonekind">2种及以上</label></div>','<div class="pt_5"><button id="product-kind-query-btn" class="btn btn-primary">筛选</button></div>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-buyer-info">','<div class="cell-box trade-hover-text">买家信息</div>',"</span>",'<span class="filter-header header-print-info">','<div class="cell-box">','<span class="trade-hover J_TradeStatus_List_Container">','<span class="trade-hover-text">系统状态<span class="ml_5 trade-icon-t"></span></span>','<form action="#/trade/list/" method="get" class="trade-hover-bd print-status-info">','<li class="trade-hover-item">全部订单</li>','<li class="trade-print-item" name="for_expressStatus">快递单打印状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="expToPrint" name="expressStatus" value="0" class="J_Checkbox"><label for="expToPrint">未打印</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="expPrinted" name="expressStatus" value="1" class="J_Checkbox"><label for="expPrinted">已打印</label></span>',"</div>",'<li class="trade-print-item" name="for_senderStatus">发货单打印状态</li>','<div class="sub-item">','<span class="checkbox-wrapper"><input type="checkbox" id="senderToPrint" name="sendGoodsPrint" value="0" class="J_Checkbox"><label for="senderToPrint">未打印</label></span>','<span class="checkbox-wrapper"><input type="checkbox" id="senderPrinted" name="sendGoodsPrint" value="1" class="J_Checkbox"><label for="senderPrinted">已打印</label></span>',"</div>",'<div class="pt_5"><button id="print-query-btn" type="submit" class="btn btn-primary">筛选</button></div>',"</form>","</span>","</div>","</span>",'<span class="filter-header header-receiver-addr-info">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">收货地区<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd J-TradeList-receive-area">','<li data-value="" class="trade-hover-item">全部地区</li>','<li data-value="0" class="trade-hover-item">城区</li>','<li data-value="1" class="trade-hover-item">非城区</li>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-shipping-info">','<div class="cell-box">','<span class="trade-hover ">','<span class="trade-hover-text">物流信息<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd shipping-info">','<li class="trade-hover-item">全部订单</li>','<li class="trade-product-item" name="for_shippingInfo">快递模板</li>','<div class="often-used-temp">',"</div>",'<div class="sub-item"><input type="checkbox" id="0" templateid="0" class="J_Checkbox"><label for="0">其他快递模板</label></div>','<div class="pt_5"><button id="shipping-query-btn" class="btn btn-primary">筛选</button></div>',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-note-info">','<div class="cell-box">','<span class="trade-hover">','<span class="trade-hover-text">留言备注<span class="ml_5 trade-icon-t"></span></span>','<ul class="trade-hover-bd J_TradeList_MemoList">',"</ul>","</span>","</div>","</span>",'<span class="filter-header header-operation-info">','<div class="cell-box trade-hover-text">操作</div>',"</span>","</div>","</div>",'<div class="module-trade-footer-container">','<div class="module-trade-footer-wrap">','<div class="clearfix module-trade-footer">','<label class="f-lt ml_10"><span class="check"><input type="checkbox"  class="J_Select_All"></span>全选</label>','<div class="f-lt ml_10 J_Pages"></div>','<div class="f-rt">','<label class="ml_10"><span class="check"><input type="checkbox" name="" class="J_Trigger_Trade_Orders"></span>显示订单商品</label>',"</div>","</div>","</div>","</div>","</div>"],a=['<div class="clearfix module-trade-pages">','<span class="f-lt">共有{{total}}条记录</span>','<span class="module-trade-pages-pageNo" act-if="pageNo == 1">|&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="1" title="首页">|&lt;</a>','<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<form action="" method="get"><input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;"></form>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;|</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{pageTotal}}"  title="末页">&gt;|</a>','<span class="pagination-page">','<select data-position="top">','<option value="10">10</option>','<option value="20">20</option>','<option value="50">50</option>','<option value="100">100</option>',"</select>","</span>","</div>"],a=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option value="10">10</option>','<option value="20">20</option>','<option value="50">50</option>','<option value="100">100</option>','<option value="200">200</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"],s=['<div class="checkbox-wrapper flag-checkbox-area"><div class="sub-item">','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="0"><span class="trade-icon-flag-0"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="1"><span class="trade-icon-flag-1"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="2"><span class="trade-icon-flag-2"></span></label>',"<br/>",'<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="3"><span class="trade-icon-flag-3"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="4"><span class="trade-icon-flag-4"></span></label>','<label class="flag-label"><input type="checkbox" class="J_Checkbox" value="5"><span class="trade-icon-flag-5"></span></label>',"</div></div>"];t.template.addTemp("template.pt.custom.sub_module_tradeContainer.pages",a),t.template.addTemp("template.pt.custom.sub_module_tradeContainer",i),t.template.addTemp("template.pt.custom.sub_module_tradeContainer_flag_search_temp",s)}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.widget.page"),t.controls.get("control.form_util")),a={name:"pt.custom.sub_module_tradeContainer",_template_name:"template.pt.custom.sub_module_tradeContainer",renderTo:function(i){this.$el||(this.$el=e(t.template.get(this._template_name)).appendTo(i),this.$el.find('.filter-header input[type="checkbox"]').iCheck(),this._event_bind())},_checkAll:function(e){this.$el.find(".J_Select_All").prop("checked",e)},_render_expressTempList_menu:function(){var t=this.$el.find(".shipping-info"),i=t.find(".often-used-temp");API.pt_custom_user_simple_list({isMix:1,isCommonUse:1},e.proxy(function(e){var a=e.data;if(a&&a.length)for(var s="",n=0;n<a.length;n++)s+='<div class="sub-item"><input type="checkbox" templateid="'+a[n].templateId+'" id="'+a[n].templateId+'" class="J_Checkbox"><label for="'+a[n].templateId+'">'+a[n].templateName+"</label></div>";i.children().length||i.append(s),i.find('input[type="checkbox"]').iCheck(),this._init_events_for_template(t)},this),null,!1,!1,!0)},_init_events_for_template:function(i){i.find(".J_Checkbox").on("ifClicked",function(){setTimeout(function(){var t=!1;e.each(i.find(".J_Checkbox"),function(i,a){e(a).prop("checked")&&(t=!0)}),t?i.find(".trade-product-item").addClass("trade-hover-item-selected"):i.find(".trade-product-item").removeClass("trade-hover-item-selected")},10)}),i.find("button").on("click",function(){var a=[];e.each(i.find(".J_Checkbox"),function(t,i){if(e(i).prop("checked")){var s=e(i).attr("templateid");s=s.indexOf("w")>-1?s.replace(/w/,"")+"_1":1*s,a.push(s)}}),t.pub("trade.list.sub_module_tradeContainer.template_search",{templateIds:a,templateFilter:1,timeStamp:+new Date})})},_render_sortList:function(t){var i=[];e.each(t,function(e,t){i.push('<li class="trade-hover-item" data-value="{value}">{text}</li>'.replace("{value}",t.value).replace("{text}",t.text))}),this.$el.find(".J_TradeList_SortList").empty().html(i.join(""))},_init_sortList_event:function(e){var i=function(e,t){e&&t.addClass("trade-hover-item-selected"),!e&&t.removeClass("trade-hover-item-selected")},a=e.find("#mergedOrder"),s=e.find("#unMergedOrder"),n=e.find("[name=for_hebing]"),l=e.find("#chaiStatus"),d=e.find("#unChaiStatus"),o=e.find("[name=for_chai_dan]");a.on("ifClicked",function(e){!e.target.checked||s.prop("checked")?i(!0,n):i(!1,n)}),s.on("ifClicked",function(e){!e.target.checked||a.prop("checked")?i(!0,n):i(!1,n)}),l.on("ifClicked",function(e){!e.target.checked||d.prop("checked")?i(!0,o):i(!1,o)}),d.on("ifClicked",function(e){!e.target.checked||l.prop("checked")?i(!0,o):i(!1,o)}),e.find("button").on("click",function(){var e=[];a.prop("checked")&&e.push(1*a.val()),s.prop("checked")&&e.push(1*s.val()),l.prop("checked")&&e.push(1*l.val()),d.prop("checked")&&e.push(1*d.val()),e=e.length?e:void 0,t.pub("trade.list.sub_module_tradeContainer.order_sort",{others:e,order:"desc",timeStamp:+new Date})})},_init_productCount_event:function(e){var i=this,a=function(e,t){e&&t.addClass("trade-hover-item-selected"),!e&&t.removeClass("trade-hover-item-selected")},s=e.find("#onekind"),n=e.find("#morethanonekind"),l=e.find("[name=for_productInfo]");s.on("ifClicked",function(e){!e.target.checked||n.prop("checked")?a(!0,l):a(!1,l)}),n.on("ifClicked",function(e){!e.target.checked||s.prop("checked")?a(!0,l):a(!1,l)}),i._bothOneMoreProductChecked=!1,e.find("button").on("click",function(){var e={timeStamp:+new Date,itemKind:void 0};s.prop("checked")&&(e.itemKind=1),n.prop("checked")&&(e.itemKind=0),s.prop("checked")&&n.prop("checked")&&(e.itemKind="",i._bothOneMoreProductChecked=!0),t.pub("trade.list.sub_module_tradeContainer.product_count",e)})},_init_printStatus_event:function(e){var t=function(e,t){e&&t.addClass("trade-hover-item-selected"),!e&&t.removeClass("trade-hover-item-selected")},i=e.find("#expToPrint"),a=e.find("#expPrinted"),s=e.find("[name=for_expressStatus]"),n=e.find("#senderToPrint"),l=e.find("#senderPrinted"),d=e.find("[name=for_senderStatus]"),o=e.find("#orderToCheck"),r=e.find("#orderChecked"),p=e.find("[name=for_orderCheckStatus]"),c=e.find("#orderToDrawback"),_=e.find("#orderDrawbacked"),m=e.find("[name=for_drawBackStatus]"),u=e.find("#orderToHungup"),h=e.find("#orderHungupped"),f=e.find("[name=for_hungupStatus]"),v=e.find("#exceptionPrint"),g=e.find("#exceptionPrinted"),b=e.find("[name=for_exceptionStatus]");i.on("ifClicked",function(e){!e.target.checked||a.prop("checked")?t(!0,s):t(!1,s)}),a.on("ifClicked",function(e){!e.target.checked||i.prop("checked")?t(!0,s):t(!1,s)}),n.on("ifClicked",function(e){!e.target.checked||l.prop("checked")?t(!0,d):t(!1,d)}),l.on("ifClicked",function(e){!e.target.checked||n.prop("checked")?t(!0,d):t(!1,d)}),o.on("ifClicked",function(e){!e.target.checked||r.prop("checked")?t(!0,p):t(!1,p)}),r.on("ifClicked",function(e){!e.target.checked||o.prop("checked")?t(!0,p):t(!1,p)}),c.on("ifClicked",function(e){!e.target.checked||_.prop("checked")?t(!0,m):t(!1,m)}),_.on("ifClicked",function(e){!e.target.checked||c.prop("checked")?t(!0,m):t(!1,m)}),u.on("ifClicked",function(e){!e.target.checked||h.prop("checked")?t(!0,f):t(!1,f)}),h.on("ifClicked",function(e){!e.target.checked||u.prop("checked")?t(!0,f):t(!1,f)}),v.on("ifClicked",function(e){!e.target.checked||g.prop("checked")?t(!0,b):t(!1,b)}),g.on("ifClicked",function(e){!e.target.checked||v.prop("checked")?t(!0,b):t(!1,b)})},_remember_memostatus_from_hash:function(e,t){var i=t.containMemo,a=t.flags,s="undefined"!=typeof i&&"undefined"==typeof a,n="undefined"!=typeof a,l="undefined"!=typeof a&&""!==a;if(s)e.find(".trade-hover-item").addClass("trade-hover-item-selected");else if(n){var d=e.find(".memo-checkbox-area");i&&(e.find("[data-value=memo]").addClass("trade-hover-item-selected"),d.find(".J_Checkbox").iCheck("check"))}if(l&&(e.find("[data-value=flag]").addClass("trade-hover-item-selected"),a=a.split(","),a.length))for(var o=e.find(".flag-checkbox-area"),r=0;r<a.length;r++)o.find(".J_Checkbox[value="+a[r]+"]").iCheck("check");this._change_filter_status(e.parent())},_init_events_for_memo:function(i){var a=this;i.find(".J_Checkbox").on("ifClicked",function(t){setTimeout(function(){var i=e(t.target),a=i.parents(".checkbox-wrapper");a.find("div.checked").length?a.prev().addClass("trade-hover-item-selected"):a.prev().removeClass("trade-hover-item-selected")},10)}),a._noMemoWithMemoMarked=!1,i.find("button").on("click",function(){var s=i.find(".flag-label .J_Checkbox"),n="",l=[];e.each(s,function(t,i){e(i).prop("checked")&&l.push(1*e(i).val())}),i.find("#noMemoNote").prop("checked")&&i.find("#withMemoNote").prop("checked")?(n=!1,a._noMemoWithMemoMarked=!0):i.find("#withMemoNote").prop("checked")&&(n=!0),t.pub("trade.list.sub_module_tradeContainer.memo_sort",{containMemo:n,flags:l,_t:+new Date})})},_update_sortList:function(t){var i=[t.field||t.timeType||"trade_time",t.order||"asc"].join(".");this.$el.find(".J_TradeList_SortList").find(".trade-hover-item").removeClass("trade-hover-item-selected").filter(function(t,a){return e(a).attr("data-value")==i}).addClass("trade-hover-item-selected");var a=this.$el.find(".order-status-container"),s=this.$el.find(".order-status");if("undefined"==typeof t.others)s.find(".trade-hover-item").removeClass("trade-hover-item-selected"),this.$el.find(".trade-order-item").removeClass("trade-hover-item-selected"),this.$el.find(".J_Checkbox").iCheck("uncheck");else if(""===t.others)s.find(".trade-hover-item").addClass("trade-hover-item-selected"),this.$el.find(".trade-order-item").removeClass("trade-hover-item-selected"),this.$el.find(".J_Checkbox").iCheck("uncheck");else{var n=t.others.split(",");if(n.length){s.find(".trade-hover-item").removeClass("trade-hover-item-selected");for(var l=0;l<n.length;l++)(0==n[l]||3==n[l])&&this.$el.find('.trade-order-item[name="for_hebing"]').addClass("trade-hover-item-selected"),s.find(".J_Checkbox[value="+n[l]+"]").iCheck("check")}}this._change_filter_status(a)},_udpate_product_search_menu:function(e){var t=this.$el.find(".product-info");"undefined"==typeof e.itemKind?(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck")):""===e.itemKind?this._bothOneMoreProductChecked?(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-item").addClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("check")):(t.find(".trade-hover-item").addClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck")):(t.find(".trade-product-item").addClass("trade-hover-item-selected"),1==e.itemKind&&t.find("#onekind").iCheck("check"),0==e.itemKind&&t.find("#morethanonekind").iCheck("check"),t.find(".trade-hover-item").removeClass("trade-hover-item-selected")),this._change_filter_status(t.parent())},_udpate_receiver_area_search_menu:function(e){var t=this.$el.find(".J-TradeList-receive-area");t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),""===e.addressType?t.find('[data-value=""]').addClass("trade-hover-item-selected"):"0"===e.addressType?t.find('[data-value="0"]').addClass("trade-hover-item-selected"):"1"===e.addressType&&t.find('[data-value="1"]').addClass("trade-hover-item-selected"),this._change_filter_status(t.parent())},_udpate_print_status_menu:function(e){var t=this.$el.find(".print-status-info");if("undefined"==typeof e.printFilter)t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-print-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else if(""===e.printFilter)t.find(".trade-hover-item").addClass("trade-hover-item-selected"),t.find(".trade-print-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else{var i=[{hashValue:e.expressStatus,toCheckBox:t.find("#expToPrint"),doneCheckBox:t.find("#expPrinted"),affectedEle:t.find('[name="for_expressStatus"]')},{hashValue:e.sendGoodsPrint,toCheckBox:t.find("#senderToPrint"),doneCheckBox:t.find("#senderPrinted"),affectedEle:t.find('[name="for_senderStatus"]')},{hashValue:e.isVerify,toCheckBox:t.find("#orderToCheck"),doneCheckBox:t.find("#orderChecked"),affectedEle:t.find('[name="for_orderCheckStatus"]')},{hashValue:e.isRefund,toCheckBox:t.find("#orderToDrawback"),doneCheckBox:t.find("#orderDrawbacked"),affectedEle:t.find('[name="for_drawBackStatus"]')},{hashValue:e.isHalt,toCheckBox:t.find("#orderToHungup"),doneCheckBox:t.find("#orderHungupped"),affectedEle:t.find('[name="for_hungupStatus"]')},{hashValue:e.isExcep,toCheckBox:t.find("#exceptionPrint"),doneCheckBox:t.find("#exceptionPrinted"),affectedEle:t.find('[name="for_exceptionStatus"]')}];this._updatePrintCheckBox_status(i),t.find(".trade-hover-item").removeClass("trade-hover-item-selected")}this._change_filter_status(t.parent())},_updatePrintCheckBox_status:function(e){if(e.length)for(var t=0;t<e.length;t++)"undefined"!=typeof e[t].hashValue&&(e[t].affectedEle.addClass("trade-hover-item-selected"),""===e[t].hashValue&&e[t].toCheckBox.iCheck("check")&&e[t].doneCheckBox.iCheck("check"),0==e[t].hashValue&&e[t].toCheckBox.iCheck("check"),1==e[t].hashValue&&e[t].doneCheckBox.iCheck("check"))},_udpate_template_search_menu:function(e){var t=this.$el.find(".shipping-info");if("undefined"==typeof e.templateFilter)t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else if(""===e.templateFilter)t.find(".trade-hover-item").addClass("trade-hover-item-selected"),t.find(".trade-product-item").removeClass("trade-hover-item-selected"),t.find(".J_Checkbox").iCheck("uncheck");else if(t.find(".trade-hover-item").removeClass("trade-hover-item-selected"),e.templateIds){t.find(".trade-product-item").addClass("trade-hover-item-selected");for(var i=e.templateIds.split(","),a=0;a<i.length;a++)i[a].indexOf("_1")>-1&&(i[a]="w"+i[a].replace(/_1/,"")),t.find("#"+i[a]).iCheck("check")}this._change_filter_status(t.parent())},_change_filter_status:function(e){e.find(".trade-hover-item-selected").length?e.find(".trade-icon-t").addClass("filter-selected"):e.find(".trade-icon-t").removeClass("filter-selected")},_update_showOrder:function(e){this.$el.find(".J_Trigger_Trade_Orders").prop("checked",1==e?!0:!1)},_update_memoList:function(i){var a=(i.containMemo,'<li class="{classname}" data-value="{value}">{text}</li>'),s=[{value:"",text:"全部"},{value:"flag",text:"旗帜"},{value:"memo",text:"留言备注"}],n=[];e.each(s,function(e,i){var s=""===i.value?"trade-hover-item":"trade-memo-item";if(n.push(a.replace("{classname}",s).replace("{value}",i.value).replace("{text}",i.text)),1===e){var l=t.template.get("template.trade.list.sub_module_tradeContainer_flag_search_temp");n.push(l)}else if(2===e){var d=['<div class="sub-item checkbox-wrapper memo-checkbox-area">','<span class="checkbox-wrapper"><input type="checkbox" id="withMemoNote" value="3" class="J_Checkbox"><label for="withMemoNote">有留言或备注</label></span>',"</div>"].join("");n.push(d)}}),n=n.join("")+'<div class="pt_5"><button id="memo-query-btn" class="btn btn-primary">筛选</button></div>';var l=this.$el.find(".J_TradeList_MemoList");l.html(n),l.find(".J_Checkbox").iCheck(),this._remember_memostatus_from_hash(l,i),this._init_events_for_memo(l)},_update_sortStatus:function(t){t=t||this._status_hashs;var i=this.$el.find(".J_TradeStatus_Form"),a=0;i.find('input[type="checkbox"]').iCheck("uncheck"),e.each(["expressStatus","sendGoodsPrint","isVerify","isRefund","isHalt","isExcep"],function(e,s){void 0===t[s]||(""===t[s]?(a+=2,i.find('input[name="'+s+'"]').iCheck("check")):(a+=1,i.find('input[name="'+s+'"]').filter(function(e,i){return i.value==t[s]}).iCheck("check")))}),a===i.find(".J_Checkbox").length&&i.find(".J_TradeStatus_Form_SelectAll").iCheck("check")},update:function(t,i){if(this._status_hashs=e.extend({},t),this._checkAll(!1),t.queryId!==i.queryId||t.field!==i.field||t.dateStatus!==i.dateStatus){var a=[];!t.dateStatus&&4==t.queryId||2==t.dateStatus?(a=[{text:"按发货时间升序",value:"send_goods_time.asc"},{text:"按发货时间降序",value:"send_goods_time.desc"}],"trade_time"===t.field&&(t.field="send_goods_time")):(a=[{text:"按交易时间升序",value:"trade_time.asc"},{text:"按交易时间降序",value:"trade_time.desc"}],"send_goods_time"===t.field&&(t.field="trade_time")),a.push({text:"按订单金额升序",value:"pay_money.asc"}),a.push({text:"按订单金额降序",value:"pay_money.desc"}),this._render_sortList(a)}this._update_sortList(t),this._update_sortStatus(t),this._update_memoList(t),this._udpate_product_search_menu(t),this._udpate_receiver_area_search_menu(t),this._udpate_print_status_menu(t),this._udpate_template_search_menu(t),this._update_showOrder(t._open),this._render_expressTempList_menu()},update_pages:function(e){if(this.$el&&this.$el.find(".J_Pages").find("select").iSelect("destroy"),e){var i=Math.ceil(e.total/e.page.pageSize),a={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:i,isLastPage:e.page.pageNo==i};this.$el&&this.$el.find(".J_Pages").html(t.template.get("template.trade.list.sub_module_tradeContainer.pages",a)),this.$el.find(".J_Pages").find("select").val(e.page.pageSize+"").iSelect("update")
}else this.$el.find(".J_Pages").html("")},update_checked:function(e){this.$el.find(".J_Select_All").prop("checked",e)},get_trade_container:function(){return this.$el.find(".J_TradeList_Body")},_event_bind:function(){var a=this;this.$el.find(".J_Select_All").on("click",this._fn_event_click_selectAll_proxy=e.proxy(function(i){var a=e(i.target).prop("checked");this.$el.find(".J_Select_All").filter(function(e,t){return t!==i.target}).prop("checked",a),t.pub("trade.list.sub_module_tradeContainer.select_all",a)},this)),this.$el.on("click",".J_TradeList_SortList .trade-hover-item, .order-status .trade-hover-item ",function(i){if(!e(i.target).hasClass("trade-hover-item-selected")){var a=e(i.target).attr("data-value").split(".");if("others"==a[0]){var s={};if("all"==a[1])s={others:[],order:"desc"};else{var n=1*e(i.target).attr("data-type"),l=[];l[0]=n,s={others:l,order:"desc"}}t.pub("trade.list.sub_module_tradeContainer.order_sort",s)}else t.pub("trade.list.sub_module_tradeContainer.order_sort",{field:a[0],order:a[1],others:void 0})}}),this.$el.on("click",".product-info .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||(a._bothOneMoreProductChecked=!1,t.pub("trade.list.sub_module_tradeContainer.product_count",{itemKind:"",_t:+new Date}))}),this.$el.on("click",".print-status-info .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.status_search",{printFilter:"",expressStatus:"",sendGoods:"",sendGoodsPrint:"",_t:+new Date})}),this.$el.on("click",".shipping-info .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.template_search",{templateFilter:"",templateIds:void 0,_t:+new Date})}),this.$el.on("click",".J-TradeList-receive-area .trade-hover-item ",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.receiver_area_search",{addressType:e(i.target).data("value"),_t:+new Date})}),this.$el.find(".J_TradeStatus_List_Container").on("mouseenter",e.proxy(function(){this._update_sortStatus()},this)),this.$el.on("submit",".J_TradeStatus_List_Container form",e.proxy(function(a){a.preventDefault();var s=i.getData(a.currentTarget);for(var n in s)e.isArray(s[n])&&(s[n]="");s._t=(new Date).getTime();var l=e.extend({printFilter:1,expressStatus:void 0,sendGoodsPrint:void 0,isVerify:void 0,isRefund:void 0,isHalt:void 0,isExcep:void 0},s);t.pub("trade.list.sub_module_tradeContainer.status_search",l)},this)),this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").on("ifClicked",e.proxy(function(t){var i=!t.currentTarget.checked;setTimeout(e.proxy(function(){this.$el&&this.$el.find(".J_TradeStatus_List").find(".J_Checkbox").iCheck(i?"check":"uncheck")},this),1)},this)),this.$el.find(".J_TradeStatus_List").find(".J_Checkbox").on("ifClicked",e.proxy(function(t){var i=!t.currentTarget.checked;setTimeout(e.proxy(function(){if(this.$el)if(i){var e=this.$el.find(".J_TradeStatus_List").find(".J_Checkbox");e.length===e.filter(function(e,t){return t.checked===!0}).length&&this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").iCheck("check")}else this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").iCheck("uncheck")},this),1)},this)),this.$el.on("click",".J_TradeList_MemoList .trade-hover-item",function(i){e(i.target).hasClass("trade-hover-item-selected")||t.pub("trade.list.sub_module_tradeContainer.memo_sort",{containMemo:void 0,flags:void 0,_t:+new Date})}),this.$el.find(".J_Trigger_Trade_Orders").on("click",this._fn_event_click_triggerTradeOrders=function(i){e("#main").find(".J_Trigger_Show_Orders").click();var a=e(i.target).prop("checked");t.pub("trade.list.sub_module_tradeContainer.show_orders",a)}),this.$el.find(".J_Pages").on("click.page_no","a.module-trade-pages-pageNo",e.proxy(function(i){t.pub("trade.list.sub_module_tradeContainer.change_page_no",e(i.target).attr("data-page"))},this)),this.$el.find(".J_Pages").on("focusin.page_form",".input-small",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Submit_Container").stop().animate({width:44})},this)),this.$el.find(".J_Pages").on("focusout.page_form",".input-small",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(e.proxy(function(){this.$el.find(".J_Submit_Container").stop().animate({width:0})},this),200)},this)),this.$el.find(".J_Pages").on("click.submit",".J_Submit",e.proxy(function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Submit_Container").stop()},this)),this.$el.find(".J_Pages").on("submit.page_form","form",e.proxy(function(i){i.preventDefault();var a=e(i.target).find("input"),s=e.trim(a.val()),n=a.attr("data-max")-0;return""===s?!1:s.match(/^\d+$/)?s-0>n?(e.dialog.alert("超出最大页数！"),!1):(t.pub("trade.list.sub_module_tradeContainer.change_page_no",s-0),!1):!1},this)),this.$el.find(".J_Pages").on("change.select","select",function(i){t.pub("trade.list.sub_module_tradeContainer.change_page_size",e(i.target).val())}),this._init_sortList_event(this.$el.find(".order-status")),this._init_productCount_event(this.$el.find(".product-info")),this._init_printStatus_event(this.$el.find(".print-status-info"))},_event_unbind:function(){this.$el.find(".J_Select_All").off("ifClicked",this._fn_event_click_selectAll_proxy),this.$el.off("click",".J_TradeList_SortList .trade-hover-item"),this.$el.off("click",".J_TradeList_MemoList .trade-hover-item"),this.$el.find(".J_Trigger_Trade_Orders").off("ifClicked",this._fn_event_click_triggerTradeOrders),this.$el.find(".J_Pages").off("click.page_no"),this.$el.find(".J_Pages").off("submit.page_form"),this.$el.find(".J_Pages").off("change.select"),this.$el.find(".J_Pages").off("focusin.page_form"),this.$el.find(".J_Pages").off("focusout.page_form"),this.$el.find(".J_Pages").off("click.submit"),this.$el.find(".J_TradeStatus_List_Container").off("mouseenter"),this.$el.off("submit",".J_TradeStatus_List form"),this.$el.find(".J_TradeStatus_List").find(".J_TradeStatus_Form_SelectAll").off("ifClicked"),this.$el.find(".J_TradeStatus_List").find(".J_Checkbox").off("ifClicked")},_fn_ctrl_set_statusHash:function(){},init:function(){},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._timer&&(clearTimeout(this._timer),this._timer=null),this.$el.find(".J_Submit_Container").stop(),this._event_unbind(),this._status_hashs={},this.$el.empty().remove(),this.$el=null)}};t.modules.define(a.name,a)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-trade-taskbar-warp">','<div class="module-trade-taskbar">','<div class="module-trade-taskbar-inner J_Taskbar"></div>',"</div>","</div>"],a=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_logistics">批量填写物流</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<a class="J_Click taskbar-operation-area" data-name="logistics_offline_send">发货</a>','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<span class="trade-hover mr_10 taskbar-operation-area">','<span class="trade-hover-text pl_5"><a style="margin-right:3px;">修改系统状态</a><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="bottom:100%;top:auto;color:#336699;">','<li class="trade-hover-item J_Click" data-name="print_express_undo" style="padding:4px 30px;">快递单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_express_end" style="padding:4px 30px;">快递单已打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_undo" style="padding:4px 30px;">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_end" style="padding:4px 30px;">发货单已打印</li>',"</ul>","</span>",'<a class="J_Click taskbar-operation-area" data-name="batch_delate">批量删除</a>',"</div>"],s=['<div class="f-lt">','<a class="J_Click taskbar-operation-area" data-name="edit_messageMemos">修改备注</a>','<a class="J_Click taskbar-operation-area" data-name="print">预览\\打印</a>','<span class="trade-hover mr_10 taskbar-operation-area">','<span class="trade-hover-text pl_5"><a style="margin-right:3px;">修改打印状态</a><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="bottom:100%;top:auto;color:#336699;">','<li class="trade-hover-item J_Click" data-name="print_express_undo" style="padding:4px 30px;">快递单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_express_end" style="padding:4px 30px;">快递单已打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_undo" style="padding:4px 30px;">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="print_deliver_end" style="padding:4px 30px;">发货单已打印</li>',"</ul>","</span>","</div>"];t.template.addTemp("template.pt.custom.sub_module_taskbar",i),t.template.addTemp("template.pt.custom.sub_module_taskbar_1",a),t.template.addTemp("template.pt.custom.sub_module_taskbar_4",s)}(jQuery,RayCloud),function(e,t){var i={name:"pt.custom.sub_module_taskbar",_template_name:"template.pt.custom.sub_module_taskbar",renderTo:function(i){this.$el||(this.$el=e(t.template.get(this._template_name)).appendTo(i),this._event_bind())},_get_tpl_id:function(e){return"undefined"==typeof e?1:(e=parseInt(e),1!=e&&6!=e&&4!=e&&3!=e?0:e)},_update_taskbar:function(e){var i=this._get_tpl_id(e.queryId);this.$el.find(".J_Taskbar").empty().html(t.template.get(this._template_name+"_"+i))},_event_bind:function(){this.$el.on("click.task",".J_Click",function(i){i.preventDefault(),t.pub("trade.list.sub_module_taskbar."+e(i.target).attr("data-name"),i)})},_event_unbind:function(){this.$el.off("click.task")},update:function(e,t){e.queryId!=t.queryId&&this._update_taskbar(e)},init:function(){},getContainer:function(){},destroy:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-trade-wrap">','<div id="module-trade-top">','<div id="module-trade-topBar" class="J_module-trade-topBar">','<div class="module-trade-tab J_SubModule_Tab"><span style="line-height: 36px;float:right;margin-right: 15px;color:red;">整合模式下只显示主店铺自定义订单</span></div>','<div class="module-trade-searchBar-container J_SubModule_Query"></div>',"</div>",'<div style="position:relative;width:100%;border-top:1px solid #a3abb4;height:0px;font-size:0;"><div class="module-trade-searchBar-btn"><b></b></div></div>','<div class="J_SubModule_TradeContainer"></div>',"</div>",'<div class="module-trade-list J_TradeList_Body"></div>','<div class="J_SubModule_Taskbar"></div>',"</div>"],a=['<div class="module-trade-list-item module-list-item-inpage" data-consignTime="{{consignTime}}" data-sellerFlag="{{sellerFlag}}" uniqueid=@@uniqueid data-id="{{id}}" data-sellerMemo="{{sellerMemo}}" data-payment="{{payment}}" data-paytime="{{payTime}}" taobaoid="{{taobaoId}}" uniqueid="{{tid}}_{{sysTid}}">','<div class="J_Tbody">','<div class="module-trade-list-item-row1">','<div class="cell-box area-checkbox">','<span class="check"><input type="checkbox" data-name="check_select_item" name="" class="J_Checkbox"></span>','<div class="mr_5"><span class="trade-icon-close J_Trigger_Show_Orders J_Click" data-name="trigger_show_orders"></span></div>',"</div>",'<div class="cell-box trade-index-text">{{index}}</div>','<div class="cell-box order-time">',"<div>{{id}}</div>",'<span class="trade-icon-ff9000" act-if="mergeSplitType == 2">合</span>','<span class="trade-icon-ff9000" act-if="mergeSplitType == 4">合</span>','<span class="trade-icon-a12525" act-if="mergeSplitType == 5">拆</span>','<span class="canmerged-order" act-if="status == SELLER_CONSIGNED_PART && mergeSplitType == 1">',"</span>",'<span class="canmerged-order" act-if="status == WAIT_SELLER_SEND_GOODS && mergeSplitType == 1">',"</span>",'<span class="trade-icon-ff6600" act-if="toShowTradeMessage == 1">{{tradeMessage}}</span>','<span class="trade-icon-627906 J_Tip" title="分销订单" act-if="type == fenxiao">分</span>','<span class="trade-icon-21877A J_Tip" title="预售订单" act-if="type == step">预</span>','<span class="trade-icon-653788 J_Tip" title="货到付款" act-if="type == cod">COD</span>',"</div>",'<div class="cell-box product-count">','<span class="product-total-count">{{itemCount}}</span>','<a class="J_Click" data-name="trigger_show_orders">({{itemCount}}种)</a>',"</div>",'<div class="cell-box buyer-info-wrapper">',"<div>{{receiverName}}</div>","</div>",'<div class="cell-box express-status">','<span class="J_expressStatus">','<span class="trade-icon-1b6fd7 J_Tip" act-if="status == 1" data-title="快递单已打印">快</span>','<span class="trade-icon-818181 J_Tip" act-if="status == 0" data-title="快递单未打印">快</span>',"</span>",'<span class="J_deliverStatus">','<span class="trade-icon-3d900a J_Tip" act-if="deliverStatus == 1" data-title="发货单已打印">发</span>','<span class="trade-icon-818181 J_Tip" act-if="deliverStatus == 0" data-title="发货单未打印">发</span>',"</span>","</div>",'<div class="cell-box product-receiver-destination J_Tip" data-title="{{receiverState}}{{receiverCity}}{{receiverDistrict}}{{receiverAddress}}">','<span class="receiver-short-address J_Click" data-name="trigger_show_orders">{{receiverState}}{{receiverCity}}{{receiverDistrict}}</span>','<span style="padding:0 2px;width:auto;" act-if="backlandKey != undefined" act-if="backlandKey != " class="trade-icon-ff9000">{{backlandKey}}</span>','<span class=" receiver-backlandkey J_Click" data-name="trigger_show_orders" act-if="backlandKey != "></span>',"</div>",'<div class="cell-box J_Express_Container">',"@@expressUI","</div>",'<div class="cell-box J_messageMemos">','<div class="message-note"><span class="note-wording">备注：</span>',"<span>",'<span act-if="sellerFlag == 0"  class="ml_5 trade-icon-flag flag-place-holder trade-icon-flag-0"></span>','<span act-if="sellerFlag == 1"  class="ml_5 trade-icon-flag flag-place-holder trade-icon-flag-1"></span>','<span act-if="sellerFlag == 2"  class="ml_5 trade-icon-flag flag-place-holder trade-icon-flag-2"></span>','<span act-if="sellerFlag == 3"  class="ml_5 trade-icon-flag flag-place-holder trade-icon-flag-3"></span>','<span act-if="sellerFlag == 4"  class="ml_5 trade-icon-flag flag-place-holder trade-icon-flag-4"></span>','<span act-if="sellerFlag == 5"  class="ml_5 trade-icon-flag flag-place-holder trade-icon-flag-5"></span>','<span class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" data-name="trigger_show_orders"  data-title="{{sellerMemo}}"></span>',"</span>","</div>","</div>",'<div class="cell-box J_Operater">',"@@operateUI","</div>","</div>",'<div class="module-trade-list-item-row3" style="display: none;">','<div class="module-trade-list-item-row2">','<span style="padding:0;">','<div class="cell-box buyer-info-wrapper">','<span class="J_Shipping_Address">@@addressUI</span>','<a class="ml_15 inline-block J_Click" data-name="edit_shipping_address" act-if="status == WAIT_SELLER_SEND_GOODS">修改</a>',"</div>","</span>","</div>",'<div class="module-trade-list-items-wrap">','<div class="module-trade-list-items">','<table class="J_Orders_List">',"</table>","</div>","</div>","</div>","</div>","</div>"],s=['<div class="ft-center  pd_30">很抱歉！没有符合条件的订单，请尝试其他条件</div>'],n=['<div class="ft-center  pd_30">很抱歉！没有符合条件的订单，请尝试其他条件</div>'],l=['收件人：{{receiverName}}<b>|</b><span act-if="_has_receiverMobile == 1">手机：{{receiverMobile}}</span><span act-if="_has_receiverMobile == 0">固话：{{receiverPhone}}</span><b>|</b>','<span class="detailed-address">详细地址：{{receiverState}} {{receiverCity}} {{receiverDistrict}} {{receiverAddress}}，{{receiverZip}}</span>'],d=["<div>快递模板：",'<span act-if="sendGoods == 0">','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 0" data-name="change_express" data-id="{{id}}" data-value="{{expressTemplateId}}">{{expressTemplateName}}</a>','<a class="J_Click J_Express_Name" act-if="expressTemplateType == 1" data-name="change_express" data-id="{{id}}" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</a>',"</span>",'<span act-if="sendGoods == 1" class="goods-express-name">','<span class="J_Express_Name" act-if="expressTemplateType == 0" data-id="{{id}}" data-value="{{expressTemplateId}}">{{expressTemplateName}}</span>','<span class="J_Express_Name" act-if="expressTemplateType == 1" data-id="{{id}}" data-value="w{{expressTemplateId}}">{{expressTemplateName}}</span>',"</span>","</div>",'<div act-if="sendGoods == 0">运单号：','<span class="m-outsid-callback">','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="{{outSid}}" data-value="{{outSid}}" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid" data-name="item-save-outid">保存</span></span>','<span act-if="_has_outSid == 0" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small J_Focusout" value="" data-value="" data-name="edit_logistics" style="width:110px;"><span class="J_Save_OutSid trade-item-save-outsid" data-name="item-save-outid">保存</span></span>','<span class="ml_5 trade-icon-bottom J_Click J_Tip" data-name="batch_update_express_id" data-title="智能填写运单号"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small" value="{{outSid}}" data-value="{{outSid}}" data-name="create_wlb_no" style="width:110px;font-size:12px;cursor:pointer;" readonly><a class="m-outsid-callback-btn j-outsid-callback-btn J_Tip" href="javascript:;" data-title="回收单号"></a></span>','<span act-if="_has_outSid == 0" class="m-outsid-callback"><input type="text" name="outSid" class="ipt-small input-small" value="点击获取单号" data-value="" data-name="create_wlb_no" style="width:110px;font-size:12px;cursor:pointer;" readonly></span>','<span class="btn btn-small btn-mini ml_5 J_Click" style="float: right;margin-right: -18px;" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</span>","</div>",'<div act-if="sendGoods == 1">运单号：','<span act-if="expressTemplateType == 0">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>',"</span>",'<span act-if="expressTemplateType == 1">','<span act-if="_has_outSid == 1" class="goods-express-no">{{outSid}}</span>','<span act-if="_has_outSid == 0" class="goods-express-no"></span>','<span act-if="_has_outSid == 1" class="btn btn-small btn-mini ml_5 J_Click showreadonlyaddress" name="express_wlb_info" data-name="express_wlb_info">网点</span>',"</span>","</div>"],o=['<div class="message-note"><span class="note-wording">备注ccccc：</span>',"<span>",'<span act-if="sellerFlag == 0"  class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="sellerFlag == 1"  class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="sellerFlag == 2"  class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="sellerFlag == 3"  class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="sellerFlag == 4"  class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span act-if="sellerFlag == 5"  class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}} J_Click" data-name="trigger_show_orders" ></span>','<span class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" data-name="trigger_show_orders"  act-if="sellerMemo == 1" data-title="{{sellerMemo:htmlFilter}}">{{sellerFlag}}</span>','<span class="ml_5 message-memo memo-place-holder J_Tip J_Click" data-name="trigger_show_orders" act-if="sellerMemo == 0" data-title=""></span>',"</span>",'<span style="display: inline-block;line-height: 18px;max-height: 40px;overflow: hidden;padding-top: 10px;position: relative;top: 5px;vertical-align: middle;width: 55px; margin-left:35px; word-wrap: break-word;">{{sellerMemo}}</span>',"</div>"],r=['<div act-if="sendGoods == 0">','<span class="operation-pre-print">','<a class="J_Click" data-name="print">预览\\打印</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li data-name="logistics_offline_send" class="trade-hover-item J_Click">发货</li>','<li class="trade-hover-item J_Click J_Status" act-if="status == 0" data-name="print_express_end" data-status="1" data-type="single">快递单已打印</li>','<li class="trade-hover-item J_Click J_Status" act-if="status == 1" data-name="print_express_undo" data-status="0" data-type="single">快递单未打印</li>','<li class="trade-hover-item J_Click J_Status" act-if="deliverStatus == 0" data-name="print_deliver_end" data-status="1" data-type="single">发货单已打印</li>','<li class="trade-hover-item J_Click J_Status" act-if="deliverStatus == 1" data-name="print_deliver_undo" data-status="0" data-type="single">发货单未打印</li>','<li class="trade-hover-item J_Click" data-name="reset_edit">重新编辑</li>','<li class="trade-hover-item J_Click" data-name="del_list">删除</li>',"</ul>","</span>","</span>",'<span act-if="canConfirmSend == 1" class="trade-icon-ff9000 trade-online-sending" style="width:auto;">在线发货</span>',"</div>",'<div act-if="sendGoods == 1">','<span class="operation-pre-print">','<a class="J_Click" data-name="print">预览\\打印</a>','<span class="trade-hover">','<span class="trade-hover-text pl_5 pr_5"><span class="trade-icon-more"></span></span>','<ul class="trade-hover-bd" style="left:-200%;">','<li class="trade-hover-item J_Click" data-name="resend_product">重新发货</li>','<li class="trade-hover-item J_Click J_Status" act-if="status == 0" data-name="print_express_end" data-status="1" data-type="single">快递单已打印</li>','<li class="trade-hover-item J_Click J_Status" act-if="status == 1" data-name="print_express_undo" data-status="0" data-type="single">快递单未打印</li>','<li class="trade-hover-item J_Click J_Status" act-if="deliverStatus == 0" data-name="print_deliver_end" data-status="1" data-type="single">发货单已打印</li>','<li class="trade-hover-item J_Click J_Status" act-if="deliverStatus == 1" data-name="print_deliver_undo" data-status="0" data-type="single">发货单未打印</li>',"</ul>","</span>","</span>",'<span act-if="canConfirmSend == 1" class="trade-icon-ff9000 trade-online-sending" style="width:auto;margin-left:10px;">在线发货</span>','<span act-if="canConfirmSend == 2" class="trade-icon-ff9000 trade-online-sending" style="width:auto;margin-left:10px;">无需物流</span>',"</div>"],p=['<tr class="order-temp" data-tid="{{tid}}">','<td width="15%" class="order-colum" style="text-align:center;">','<div class="order-item-time">{{_sort_time}}</div>','<div class="order-item-time">{{consigntime}}</div>',"</td>",'<td style="width:55%;" class="order-colum item-snapshot">','<div style="display:inline-block; width:100%;">','<div class="item-snapshot-itemname" act-loop="order in orders" style="width:100%;display: inline-block; border-bottom:none;">','<div class="cell-box-wrapper" style="width:100%; border-right:none;">','<div style="width:72%; display:inline-block; border-right:1px solid #eaeaea;">','<div class="cell-box order-im">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank">','<img act-if="order.picPath == " src="/resources/css/build/images/no_pic_80x80.png" width="80" height="80" alt="">','<img act-if="order.picPath != " src="{{order.picPath}}_80x80.jpg" width="80" height="80" alt="">',"</a>","</div>",'<div class="cell-box product-name">','<a href="http://trade.taobao.com/trade/detail/trade_snap.htm?tradeID={{order.oid}}" target="_blank" style="max-width:430px; word-wrap:break-word;display:inline-block;line-height:14px; max-height:30px; overflow:hidden; ">{{order.title}}</a>','<div class="prod-properties prod-properties-{{order.oid}}">{{order.skuPropertiesName}}</div>','<div class="seller-code">商家编码：{{order.outerId}}</div>',"</div>","</div>",'<div style="border-right: 1px solid #eaeaea; font-size:20px; display: inline-block;height: 94px; color:#666;line-height: 94px; text-align: center;vertical-align: middle;width: 10%;">¥{{order.price}}</div>','<div style="display: inline-block;text-align: center; width: 17%;"><em style="background: none;font-size: 40px;">{{order.num}}</em>(数量)</div>',"</div>","</div>","</div>","</td>",'<td style="width:8%;text-align:center;border-right: 1px solid #eaeaea;">',"实付金额<br>{{payment}}元","</td>",'<td class="order-colum order-note" style="width:22%;word-break: break-all;word-wrap: break-word;">','<div class="cell-box">','<span class="note-wording">备注：</span>','<span class="ml_5 trade-icon-flag trade-icon-flag-{{sellerFlag}}" data-flag="{{sellerFlag}}"></span>','<span style="word-wrap: break-word; display:inline-block; width:auto; max-width:300px; vertical-align:top;" class="msg-seller-memo">{{sellerMemo}}</span>','<span class="ml_5 trade-icon-edit J_Click" data-name="edit_messageMemos" data-tid="{{tid}}"></span>',"</div>","</td>","</tr>"],c=['<div class="c_add_stamp_information J_getShopDetail">',"<table>",'<tbody class="into_box_main">',"<tr>","<td>","<div>",'<div class="into_header_top">','<span class="in_infor_btn col_into">收件信息</span>','<span class="to_infor_btn ">发货信息</span>','<a href="javascript:;" class="m-split-info btn btn-primary ml_30" data-title="复制淘宝后台的买家收货地址，系统将自动匹配录入">自动地址匹配</a>',"</div>",'<div class="in_box_main in_information">','<ul class="in_main_list">','<li class="height_nub name_phone">','<div class="infor_home">',"<label>店铺：</label>",'<span class="infor_home_text" act-if="shoplistCount == 1" act-loop="info in shoplist" shopId="{{info.id}}" taobaoId="{{info.taobaoId}}">{{info.title}}</span>','<select act-if="shoplistCount >= 2" data-zIndex="99999" class="infor_home_text" value="{{list.id}}">','<option act-loop="info in shoplist" value="{{info.id}}" shopId="{{info.id}}" taobaoId="{{info.taobaoId}}">{{info.title}}</option>',"</select>","</div>",'<div class="infor_name">','<label><span class="must_red">*</span>客户姓名：</label>','<input type="text" class="infor_name_text" value="">',"</div>",'<div class="info_phone">','<label><span class="must_blue">*</span>手机：</label>','<input type="text" class="info_phone_text" value="" maxlength="11">',"</div>",'<div class="info_mobiel">','<label><span class="must_blue">*</span>固话：</label>','<input type="text" class="info_mobiel_text" value="" maxlength="13">',"</div>","</li>",'<li class="height_nub hang_addres">','<label><span class="must_red">*</span>所在地区：</label>','<div class="area_select">',"</div>","<div>",'<label><span class="must_red">*</span>详细地址：</label>','<input type="text" style="width:335px;" class="info_address_detailed">',"</div>","</li>",'<li class="remark_box_infor">','<div class="remark_box_infor_lf" style="float:none;">','<div style="display:inline-block;">',"<label>邮编：</label>",'<input type="text" maxlength="6" class="info_zip" style="width:144px;">',"</div>",'<div class="lf_top" style="display:inline-block;">','<label class="flag_box">备注旗帜：</label>','<div style="display:inline-block">','<label style="padding-left:0px;"><input type="radio" checked name="flag" value="0" class="iradio flagRadio"><span class="trade-icon-flag-0"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio" value="1"><span class="trade-icon-flag-1"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio" value="2"><span class="trade-icon-flag-2"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio" value="3"><span class="trade-icon-flag-3"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio" value="4"><span class="trade-icon-flag-4"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio" value="5"><span class="trade-icon-flag-5"></span></label>',"</div>","</div>",'<div class="lf_btn" style="display:inline-block;">','<label style="padding-left:10px;">交易时间:</label>','<input class="date-picker ml_10 tradeTime" style="width:160px;" data-zIndex="99999" value="{{today}}" type="text" name="startTime" data-max-date="today" data-date-format="yyyy-mm-dd HH:MM">',"</div>","</div>",'<div class="remark_box_infor_rt">',"<label>备注内容：</label>",'<input style="width:760px;" class="sellerMemo" maxlength="200" value="">',"</div>","</li>","</ul>","</div>",'<div class="in_box_main to_information" style="display:none;">','<ul class="in_main_list">','<li class="height_nub name_phone">','<div class="infor_name infor_name_delivery">','<label><span class="must_red">*</span>客户姓名：</label>','<input type="text" class="infor_name_text" value="{{list.sendContact}}">',"</div>",'<div class="info_phone info_phone_delivery">','<label><span class="must_blue">*</span>手机：</label>','<input type="text" class="info_phone_text" value="{{list.sendMobile}}" maxlength="11">',"</div>",'<div class="info_mobiel info_mobiel_delivery">','<label><span class="must_blue">*</span>固话：</label>','<input type="text" class="info_mobiel_text" value="{{list.sendPhone}}" maxlength="13">',"</div>","</li>",'<li class="height_nub hang_addres hang_addres_delivery">','<label><span class="must_red">*</span>所在地区：</label>','<div class="area_select1">',"</div>","</li>",'<li class="height_nub">',"<div>",'<label><span class="must_red">*</span>详细地址：</label>','<input class="info_address_detailed" style="width:387px;" value="{{list.sendAddress}}">',"</div>",'<div style="margin-left:65px;">',"<label>邮编：</label>",'<input type="text" maxlength="6" value="{{list.sendPost}}" class="info_zip info_zip_delivery">',"</div>","</li>","</ul>","</div>",'<div class="order_information">','<div class="order_header">',"订购信息",'<a href="javascript:;" id="add_prod_dio" style="font-size:12px; margin-left:10px; cursor:pointer; display:inline-block;">添加商品</a>',"</div>",'<div class="order_list">','<ul class="list_header">','<li class="order_code_number all_list">序号</li>','<li class="order_image all_list">图片</li>','<li class="order_name all_list">商品名称</li>','<li class="order_code all_list">商家编码</li>','<li class="order_price all_list">价格</li>','<li class="order_number all_list">商品数量</li>','<li class="order_delete all_list">删除</li>',"</ul>",'<div class="J_list_prod list_prod" style="height:130px; overflow-y:auto;"></div>',"</div>","</div>",'<div class="trade_information">','<div class="trade_list_main">',"<table>","<tbody>",'<tr class="trade_list_top">','<td class="list_top_stencil">','<label><span class="must_red">*</span>快递模版：</label>','<span class="j_express_templet">','<a data-name="change_express" class="J_Click J_Express_Name">请选择快递模版</a>',"</span>","</td>",'<td class="list_top_allNumber">','<label>商品总数：<em class="prod_all_num">0</em>件</label>',"</td>",'<td class="list_top_allMoney">','<label>商品总价：¥<span class="prod_money_box">0</span></label>',"</td>","</tr>",'<tr class="trade_list_btn">','<td class="list_btn_freight">',"<label>运费：</label>",'<input class="freight_money price_prod_yh_J J_number_list" type="text" maxlength="9" placeholder="0" value="0">元',"</td>",'<td class="list_btn_money">',"<label><strong>实付金额(含运费)</strong>：</label>",'<input class="money_pay price_prod_yh_J J_number_list" maxlength="9" type="text" placeholder="0" value="0">元',"</td>",'<td class="list_btn_favourable">','<label>	优惠：¥<span class="favourable_money">0</span></label>',"</td>","</tr>","</tbody>","</table>","</div>","</div>","</div>","</td>","</tr>","</tbody>","</table>","</div>"],_=['<div class="select_add_prod">','<div class="select_add_header" style="height:32px; line-height:32px;">','<div class="text_prod" style="display:inline-block; width:350px;"><input type="text" placeholder="商品信息" class="prod_information_text"></div><span class="btn btn-primary ml_10 J_infor_search">查询</span><span class="prod_true_box">已选商品<span class="prod_checked_num"></span><span class="prod_box_all">{{info.total}}</span></span>',"</div>",'<div class="prod_list" style="position:relative;height:402px;margin-left:20px;">','<div class="scroll_icon_box j_icon_box_click">品类 >></div>','<div class="tree-box J_scroll_select">','<select data-zindex="20000" class="m-shoplist-select" act-if="shop != undefined"><option act-loop="shop in shop" value="{{shop.taobaoId}}">{{shop.title}}</option></select>','<div class="tree-content module-catagory-wrap" style="padding:0px;"><ul class="subfolder"></ul></div>',"</div>",'<table style="border-collapse:collapse; width:100%;">',"<thead>",'<tr class="header_list_prod">','<th class="in_or_out list_prod_inout"></th>','<th class="prod_image list_prod_image">图</th>','<th class="prod_cord list_prod_cord">商家编码</th>','<th class="prod_name_or_spec_name list_prod_name">商品名称/规格名称</th>','<th class="select_check list_prod_select">选择</th>',"</tr>","</thead>",'<tbody class="select_prod_box">',"<tr>",'<td colspan="5">','<div style="width:100%;height:360px; overflow-y:auto;">','<table class="add_information_list" style="width:100%;"></table>',"</div>","</td>","</tr>","</tbody>","</table>",'<div class="prod_list_pages"></div>',"</div>",'<div class="add_prod_box" style="height:442px;">','<table style="border-collapse:collapse">',"<table>",'<tr class="add_box_header">','<td class="add_prod_cord prod_add_box_cord" style="text-align:left;">商家编码</td>','<td class="add_prod_name prod_add_box_name">商品名称</td>','<td class="add_spec_cord prod_add_box_spec_cord" style="text-align:left">规格名称</td>','<td class="delate_addList prod_add_box_delate">删除</td>',"</tr>","</table>",'<div style="margin-top:-1px;height:400px;overflow-y: auto; border:1px solid #eaeaea;">','<table id="J_add_box" style="border: 0;"></table>',"</div>","</table>","</div>","</div>"],m=['<tr class="add_box_body add_box_body_{{numIid}} add_box_body_{{skuId}}" data-skuid="{{skuId}}" data-numiid="{{numIid}}" data-priceOutput="{{priceOutput}}" data-picPath="{{picPath}}" data-num="{{num}}" data-outerid="{{outerId}}" data-shotTitle="{{info.shotTitle}}" data-taobaoid="{{taobaoId}}">','<td class="add_body_prod_cord prod_add_box_cord">{{outerId}}</td>','<td class="add_body_prod_name prod_add_box_name">{{title}}</td>','<td class="add_body_spec_cord prod_add_box_spec_cord">{{propesNames}}</td>','<td class="delate_body_addList prod_add_box_delate"><a href="javascript:;" class="delete-prod">删除</a></td>',"</tr>"],u=['<tr act-if="skus != undefined" class="add_box_body add_box_body_{{info.numIid}} add_box_body_{{info.skuId}}" data-skuid="{{info.skuId}}" data-numiid="{{info.numIid}}" act-loop="info in skus" data-num="{{info.num}}" data-picpath="{{picPath}}" data-priceOutput="{{info.costPrice}}" data-outerid="{{info.outerId}}" data-shotTitle="{{info.shotTitle}}" data-taobaoid="{{taobaoId}}">','<td act-if="info.outerId!=" class="add_body_prod_cord prod_add_box_cord">{{info.outerId}}</td>','<td act-if="info.outerId==" class="add_body_prod_cord prod_add_box_cord">{{outerId}}</td>','<td class="add_body_prod_name prod_add_box_name">{{title}}</td>','<td class="add_body_spec_cord prod_add_box_spec_cord"><span act-loop="sku in info.propsNames" data-skuText="{{sku.name}}:{{sku.value}}">{{sku.value}}</span></td>','<td class="delate_body_addList prod_add_box_delate"><a href="javascript:;" class="delete-prod">删除</a></td>',"</tr>",'<tr act-if="skus == undefined" class="add_box_body add_box_body_{{numIid}}" data-numiid="{{numIid}}" data-num="{{num}}" data-picpath="{{picPath}}" data-priceOutput="{{costPrice}}" data-outerid="{{outerId}}" data-shotTitle="{{shotTitle}}" data-taobaoid="{{taobaoId}}">','<td class="add_body_prod_cord prod_add_box_cord">{{outerId}}</td>','<td class="add_body_prod_name prod_add_box_name">{{title}}</td>','<td class="add_body_spec_cord prod_add_box_spec_cord"></td>','<td class="delate_body_addList prod_add_box_delate"><a href="javascript:;" class="delete-prod">删除</a></td>',"</tr>"],h=['<tr class="prod_list_main prod_list_main_{{info.numIid}}" act-loop="info in list" data-numiid="{{info.numIid}}" data-priceOutput="{{info.priceOutput}}" data-picPath="{{info.picPath}}" data-taobaoid="{{info.taobaoId}}">','<td class="datailed_in_out datailed_in_out_{{info.numIid}} list_prod_inout" style="cursor:pointer; position:relative;">','<label act-if="info.skus != undefined" class="trade-icon-close icon_all expand"></label>',"</td>",'<td class="datailed_image list_prod_image" style="padding:5px 0px;">','<img data-picpath="{{info.picPath}}" act-if="info.picPath == " width="40" height="40" src="/resources/css/build/images/no_pic.png">','<img data-picpath="{{info.picPath}}" act-if="info.picPath != " width="40" height="40" src="{{info.picPath}}_40x40.jpg">',"</td>",'<td class="datailed_prod_cord list_prod_cord">{{info.outerId}}</td>','<td class="datailed_prod_spec list_prod_name">{{info.title}}</td>','<td class="datailed_select_check list_prod_select"><span class="check" style="height:15px; line-height:15px;"><input type="checkbox" class="check_box_prod J_check_box_prod" name=""></span></td>',"</tr>"],f=['<tr class="select_prod_separate J_prod_separate J_prod_separate_{{info.numIid}} J_prod_separate_{{info.skuId}}" style="display:none;" act-loop="info in list" data-num="{{info.num}}" data-skuid="{{info.skuId}}" data-shotTitle="{{info.shotTitle}}">','<td colspan="5">',"<div>",'<span class="datailed_list_in_out list_prod_inout"></span>','<span class="datailed_list_image list_prod_image"></span>','<span class="datailed_list_prod_cord list_prod_cord">{{info.outerId}}</span>','<span class="datailed_list_prod_spec list_prod_name"><span class="J_value_sku" style="margin-right:5px;" act-loop="sku in info.propsNames" data-skuval="{{sku.value}}">{{sku.name}}:<em style="color:brown">{{sku.value}}</em></span></span>','<span class="datailed_select_check list_prod_select J_select_add"><span class="check" style="height:15px; line-height:15px;"><input class="j-checkbox-{{info.skuId}} J_checkbox_{{info.numIid}} choose-prod" type="checkbox" data-numiid="{{info.numIid}}"></span></span>',"</div>","</td>","</tr>"],v=['<div class="c_add_stamp_information_document">','<form action="/pt/custom/user/upload" method="post" enctype="multipart/form-data" target="multipartFrame">','<div class="shop-logo-list"><ul>','<li class="crt" style="text-align:center;font-size:24px;line-height:80px;"><label><input class="file-type" type="radio" name="type" value="common" checked>通用格式</label></li>','<li><label><input type="radio" name="type" class="file-type" value="alibaba"><img src="/resources/css/build/images/shop_logo/alibaba.png" alt="阿里巴巴" width="200" height="80"></label></li>',"</ul></div>",'<iframe name="multipartFrame" style="width:0;height:0;overflow:hidden;border:0;"></iframe>','<div class="stamp_browse_document">','<span class="select_file">选择文件：</span>','<span style="height:34px; position:relative; width:263px; display:inline-block;vertical-align: middle;overflow:hidden;" class="file_box"><input class="file_src" type="text" style="padding:0px 0px 0px 3px; margin-top:-2px;"><span class="browse" class="file_browse">导入</span><input name="file" type="file" class="file_browse_brows" style="position:absolute;left:0px;top:0px; width:235px; opacity:0; height:30px; filter:alpha(opacity=0);" /></span><span class=""><a class="form_download" href="/xlsx/download/通用表格.xlsx">通用模板下载</a></span>',"</div>",'<p style="text-align:left;margin-left:242px;width:auto;">注：文件大小不能超过1M，仅支持 excel 和 csv 格式</p>','<div class="ui_buttons" style="margin: -10px;"><input type="submit" value="上传" class="ui_state_highlight importFile-upload"><input type="button" value="取消" class="btn importFile-cancel"></div>',"</form>","</div>"],g=['<div class="J_template_container" style="z-index: 9999999; max-height:500px; overflow-y:auto; width: 370px; background:#fff; padding: 10px; ">','<a data-name="set_default" class="ml_5 J_Click J_express_templet">设置常用快递模板</a>',"</div>"],b=['<span style="margin-left:0" class="ui-tag-group ui-tag-group-s1 mb_10 J_Express">','<span style="width:140px;margin:2px 5px;" data-name="change_express" templateId="{{list.templateId}}" isWlb="{{list.isWlb}}" act-loop="list in list" class="tag J_Click tag_{{list.templateId}}" data-taobaoid="{{list.taobaoId}}">{{list.templateName}}</span>',"</span><br>"],y=['<div style="min-height:56px;" class="clearfix pd_10 J_Express J_icheck">','<label style="width:170px;margin:5px 0;" templateId="{{list.templateId}}"  taobaoId="{{list.taobaoId}}"   class="f-lt" act-loop="list in list" isWlb="{{list.isWlb}}">','<input act-if="list.commonUse == 1" type="checkbox" name="id" checked/>','<input act-if="list.commonUse == 0" type="checkbox" name="id"/>',"<span>{{list.templateName}}</span>","</label>","</div>"],x=['<div style="" class="J_remark_diolag">','<input type="hidden" name="tid">','<input type="hidden" name="reset" value="true">','<dl class="dl-horizontal">','<dt class="pt_5 pb_5">旗帜：</dt>','<dd class="pt_5 pb_5">','<label class="mr_20"><input class="radio-flag-0" type="radio" name="flag" value="0"><span class="trade-icon-flag-0"></span></label>','<label class="mr_20"><input class="radio-flag-1" type="radio" name="flag" value="1"><span class="trade-icon-flag-1"></span></label>','<label class="mr_20"><input class="radio-flag-2" type="radio" name="flag" value="2"><span class="trade-icon-flag-2"></span></label>','<label class="mr_20"><input class="radio-flag-3" type="radio" name="flag" value="3"><span class="trade-icon-flag-3"></span></label>','<label class="mr_20"><input class="radio-flag-4" type="radio" name="flag" value="4"><span class="trade-icon-flag-4"></span></label>','<label class="mr_20"><input class="radio-flag-5" type="radio" name="flag" value="5"><span class="trade-icon-flag-5"></span></label>',"</dd>",'<dt class="pt_5 pb_5">卖家备注：</dt>','<dd class="pt_5 pb_5">','<textarea name="memo" id="j_remark_dia" maxlength="200" style="width:400px;  height:200px;"></textarea>','<span id="chackTextarea-num" style="display: block; padding: 5px; color: #f00; text-align: right; width: 390px"><em class="comment-nums-detail">0</em>/200</span>',"</dd>","</dl>","</div>"],w=['<div class="c_add_stamp_information editor_prod_box" data-id="{{list.id}}">',"<table>",'<tbody class="into_box_main">',"<tr><td>","<div>",'<div class="into_header_top">','<span class="in_infor_btn col_into">收件信息</span>','<span class="to_infor_btn " data-id="{{list.id}}">发货信息</span>','<a href="javascript:;" class="m-split-info btn btn-primary ml_30" data-title="复制淘宝后台的买家收货地址，系统将自动拆分录入">地址拆分</a>',"</div>",'<div class="in_box_main in_information">','<ul class="in_main_list">','<li class="height_nub name_phone">','<div class="infor_home">',"<label>店铺：</label>",'<span class="infor_home_text" shopId="{{list.shop.id}}" taobaoId="{{list.shop.taobaoId}}">{{list.shop.title}}</span>',"</div>",'<div class="infor_name">','<label><span class="must_red">*</span>客户姓名：</label>','<input type="text" class="infor_name_text" value="{{list.receiverName}}">',"</div>",'<div class="info_phone">','<label><span class="must_blue">*</span>手机：</label>','<input type="text" class="info_phone_text" value="{{list.receiverMobile}}" maxlength="11">',"</div>",'<div class="info_mobiel">','<label><span class="must_blue">*</span>固话：</label>','<input type="text" class="info_mobiel_text" value="{{list.receiverPhone}}" maxlength="13">',"</div>","</li>",'<li class="height_nub hang_addres">','<label><span class="must_red">*</span>所在地区：</label>','<div class="area_select">',"</div>","<div>",'<label><span class="must_red">*</span>详细地址：</label>','<input type="text" style="width:335px;" class="info_address_detailed" value="{{list.receiverAddress}}">',"</div>","</li>",'<li class="remark_box_infor">','<div class="remark_box_infor_lf" style="float:none;">','<div style="display:inline-block;">',"<label>邮编：</label>",'<input type="text" maxlength="6" class="info_zip" value="{{list.receiverZip}}" style="width:144px;">',"</div>",'<div class="lf_top" style="display:inline-block;">','<label class="flag_box">备注旗帜：</label>','<label style="padding-left:0px;"><input type="radio" name="flag" value="0" class="iradio flagRadio flagRadio_0"><span class="trade-icon-flag-0"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio flagRadio_1" value="1"><span class="trade-icon-flag-1"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio flagRadio_2" value="2"><span class="trade-icon-flag-2"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio flagRadio_3" value="3"><span class="trade-icon-flag-3"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio flagRadio_4" value="4"><span class="trade-icon-flag-4"></span></label>','<label style="padding-left:0px;"><input type="radio" name="flag" class="flagRadio flagRadio_5" value="5"><span class="trade-icon-flag-5"></span></label>',"</div>",'<div class="lf_btn" style="display:inline-block;">','<label style="padding-left:10px;">交易时间:</label>','<input class="date-picker ml_10 tradeTime" data-zIndex="99999" value="{{list.payTime}}" type="text" name="startTime" data-max-date="today" data-date-format="yyyy-mm-dd HH:MM" style="width:160px;">',"</div>","</div>",'<div class="remark_box_infor_rt">',"<label>备注内容：</label>",'<input class="sellerMemo" maxlength="200" value="{{list.sellerMemo}}" style="width:760px">',"</div>","</li>","</ul>","</div>",'<div class="in_box_main to_information" style="display:none;"></div>','<div class="order_information">','<div class="order_header">订购信息<a href="javascript:;" id="add_prod_dio" style="font-size:12px; margin-left:10px; cursor:pointer; display:inline-block;">添加商品</a></div>','<div class="order_list">','<ul class="list_header">','<li class="order_code_number all_list">序号</li>','<li class="order_image all_list">图片</li>','<li class="order_name all_list">商品名称</li>','<li class="order_code all_list">商家编码</li>','<li class="order_price all_list">价格</li>','<li class="order_number all_list">商品数量</li>','<li class="order_delete all_list"></li>',"</ul>",'<div class="J_list_prod" style="height:130px; overflow-y:auto;"></div>',"</div>","</div>",'<div class="trade_information">','<div class="trade_list_main">',"<table>","<tbody>",'<tr class="trade_list_top">','<td class="list_top_stencil">','<label><span class="must_red">*</span>快递模版：</label>','<span class="j_express_templet">','<a data-name="change_express" class="J_Click J_Express_Name" id="{{list.expressTemplateId}}" isWlb="{{list.expressTemplateType}}" taobaoId="{{list.taobaoId}}" codeNumber="{{list.codeNumber}}">{{list.expressTemplateName}}</a>',"</span>","</td>",'<td class="list_top_allNumber">','<label>商品总数：<em class="prod_all_num">{{list.prodNum}}</em>件</label>',"</td>",'<td class="list_top_allMoney">','<label>商品总价：¥<span class="prod_money_box">{{list.totalPrice}}</span></label>',"</td>","</tr>",'<tr class="trade_list_btn">','<td class="list_btn_freight">',"<label>运费：</label>",'<input class="freight_money price_prod_yh_J J_number_list" maxlength="9" type="text" placeholder="0" value="{{list.postFee}}">元',"</td>",'<td class="list_btn_money">',"<label><strong>实付金额(含运费)</strong>：</label>",'<input class="money_pay price_prod_yh_J J_number_list" maxlength="9" type="text" placeholder="0" value="{{list.payment}}">元',"</td>",'<td class="list_btn_favourable">','<label>	优惠：¥<span class="favourable_money"></span></label>',"</td>","</tr>","</tbody>","</table>","</div>","</div>","</div>","</td></tr>","</tbody>","</table>","</div>"],k=['<ul act-loop="info in list" class="list_main list_main_{{info.numIid}} list_main_{{info.skuId}}" data-skuId="{{info.skuId}}" data-numIid="{{info.numIid}}" data-shotTitle="{{info.shotTitle}}" data-propertiesShortName="{{info.propertiesShortName}}" data-userCustomPrintId="{{info.userCustomPrintId}}">','<li class="order_main_code_number order_code_number"  data-skuId="{{info.skuId}}">{{info.index}}</li>','<li class="order_main_image order_image">','<img data-picpath="{{info.itemPic}}" act-if="info.itemPic == " width="40" height="40" src="/resources/css/build/images/no_pic.png">','<img data-picpath="{{info.itemPic}}" act-if="info.itemPic != " width="40" height="40" src="{{info.itemPic}}_40x40.jpg">',"</li>",'<li class="order_main_name order_name">','<label class="l_itemName">{{info.itemName}}</label>','<span class="propertiesName_color">{{info.propertiesName}}</span>',"</li>",'<li class="order_main_code order_code">{{info.outerId}}</li>','<li class="order_main_price order_price"><input class="price_prod_J J_number_list" maxlength="9" style="width:50px" type="text" value="{{info.priceOutput}}"/></li>','<li class="order_main_number order_number">','<div class="order_main_number_box">','<span class="delete_prod_num">-</span>','<label class="J_number_prod">{{info.num}}</label>','<span class="add_prod_num">+</span>',"</div>","</li>",'<li class="order_main_delete order_delete">','<span class="del_prod">×</span>',"</li>","</ul>"],T=['<ul class="in_main_list">','<li class="height_nub name_phone">','<div class="infor_name infor_name_delivery">','<label><span class="must_red">*</span>客户姓名：</label>','<input type="text" class="infor_name_text" value="{{sendName}}">',"</div>",'<div class="info_phone info_phone_delivery">','<label><span class="must_blue">*</span>手机：</label>','<input type="text" class="info_phone_text" value="{{sendMobilePhone}}" maxlength="11">',"</div>",'<div class="info_mobiel info_mobiel_delivery">','<label><span class="must_blue">*</span>固话：</label>','<input type="text" class="info_mobiel_text" value="{{sendPhone}}" maxlength="13">',"</div>","</li>",'<li class="height_nub hang_addres hang_addres_delivery">','<label><span class="must_red">*</span>所在地区：</label>','<div class="area_select1">',"</div>","</li>",'<li class="height_nub">',"<div>",'<label><span class="must_red">*</span>详细地址：</label>','<input class="info_address_detailed" name="" id="" style="width:387px;" value="{{sendDetailAddress}}">',"</div>",'<div style="margin-left:65px;">',"<label>邮编：</label>",'<input type="text" maxlength="6" value="{{sendPostCode}}" class="info_zip info_zip_delivery">',"</div>","</li>","</ul>"],S=["<div>",'<form action="" method="post">','<input type="hidden" name="ids">','<dl class="dl-horizontal">','<dt class="pt_5 pb_5">旗帜：</dt>','<dd class="pt_5 pb_5 j_check_flag">','<label class="mr_20"><input type="radio" name="flag" value="-1" checked>保留现有旗帜</label>','<label class="mr_20"><input type="radio" name="flag" value="0"><span class="trade-icon-flag-0"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="1"><span class="trade-icon-flag-1"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="2"><span class="trade-icon-flag-2"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="3"><span class="trade-icon-flag-3"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="4"><span class="trade-icon-flag-4"></span></label>','<label class="mr_20"><input type="radio" name="flag" value="5"><span class="trade-icon-flag-5"></span></label>',"</dd>",'<dt class="pt_5 pb_5">修改方式：</dt>','<dd class="pt_5 pb_5 j_check_remark">','<label class="mr_50"><input type="radio" name="reset" value="false" checked>在现有备注后追加</label>','<label><input type="radio" name="reset" value="true">覆盖现有备注</label>',"</dd>",'<dt class="pt_5 pb_5">卖家备注：</dt>','<dd class="pt_5 pb_5">','<textarea name="memo" id="j_text_remark" style="width:400px;height:200px;" maxlength="200" ></textarea>','<span id="chackTextarea-num" style="display: block; padding: 5px; color: #f00; text-align: right; width: 390px"><em class="comment-nums-detail">0</em>/200</span>',"</dd>","</dl>","</form>","</div>"];
t.template.addTemp("template.pt.custom.batch_get_in",v),t.template.addTemp("template.pt.custom.add_information_prod_select_all",u),t.template.addTemp("template.pt.custom.prod_skus",f),t.template.addTemp("template.pt.custom.add_information_prod_select",m),t.template.addTemp("template.pt.custom.add_prod_infor",_),t.template.addTemp("template.pt.custom.dia_add_inf",c),t.template.addTemp("template.pt.custom.shipping_address_list",l),t.template.addTemp("template.pt.custom.express",d),t.template.addTemp("template.pt.custom.messageMemos",o),t.template.addTemp("template.pt.custom.operater",r),t.template.addTemp("template.pt.custom.orders",p),t.template.addTemp("template.pt.custom",i),t.template.addTemp("template.pt.custom.list_item",a),t.template.addTemp("template.pt.custom.trade_error",s),t.template.addTemp("template.pt.custom.trade_no_result",n),t.template.addTemp("template.pt.custom.query_prod_list",h),t.template.addTemp("template.pt.custom.express_templet",g),t.template.addTemp("template.pt.custom.express_templet_item",b),t.template.addTemp("template.pt.custom.all_express_template",y),t.template.addTemp("template.pt.custom.remark_flag",x),t.template.addTemp("template.pt.custom.remark_flag_all",S),t.template.addTemp("template.pt.custom.editor_prod",w),t.template.addTemp("template.pt.custom.editor_prod_item",k),t.template.addTemp("template.pt.custom.send_prod_information",T)}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.pt.custom.module.user.edit"),t.controls.get("control.pt.custom.memo.edit"),t.controls.get("control.pt.custom.print.preview"),t.controls.get("control.form_util"),t.controls.get("control.pt.custom.express"),t.controls.get("control.pt.custom.module.change_express"),t.controls.get("control.trade.module.common_express.edit"),t.controls.get("control.trade.module.common_express.checkone"),t.controls.get("control.trade.util.create_express_no"),t.controls.get("control.pt.custom.module.edit_express"),t.controls.get("control.pt.custom.base")),a=function(){};a.user_list=function(e,t,i,a,s,n){API.pt_custom_user_list(e,function(e){t&&t(e.data)},i,a,s,n)},a.user_delete=function(e,t,i,a,s,n){API.pt_custom_user_delete(e,function(e){t&&t(e.data)},i,a,s,n)},a.user_update_printStatus=function(e,t,i,a,s,n){API.pt_custom_user_update_printStatus(e,function(e){t&&t(e.data)},i,a,s,n)},a.user_save_logistics=function(e,t,i,a,s,n){API.pt_custom_user_express_fill_logistics(e,function(e){t&&t(e.data)},i,a,s,n)},a.prototype={constructor:a,readerTo:function(){},destroy:function(){},delay_destroy:function(){},update:function(){}};var s=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),n=t.modules.get("pt.custom.sub_module_tab"),l=t.modules.get("pt.custom.sub_module_query"),d=t.modules.get("pt.custom.sub_module_tradeContainer"),o=t.modules.get("pt.custom.sub_module_taskbar"),r=(t.controls.get("control.trade.list_tab"),t.controls.get("control.trade")),p=t.controls.get("control.trade.collection"),c=t.controls.get("control.trade.module.reachable"),_=t.controls.get("control.trade.module.common_express.select"),m=t.controls.get("control.trade.module.common_express.edit"),u=t.controls.get("control.trade.module.shipping_address.edit"),h=t.controls.get("control.trade.module.seller_memoflag.merge.edit"),f=t.controls.get("control.trade.module.express.edit"),v=t.controls.get("control.trade.module.print"),g=t.controls.get("control.trade.module.memoflag.edit"),b=t.controls.get("control.trade.module.logistics_info"),y=t.controls.get("control.trade.module.trade.close"),x=t.controls.get("control.trade.module.trade.sync_single"),w=t.controls.get("control.trade.module.manual.merge.orders"),k=t.controls.get("control.trade.module.delay_confirm"),T=t.controls.get("control.trade.module.trade.postage_update"),S=t.controls.get("control.trade.module.scan.send.goods"),C=t.controls.get("control.DynamicList"),I={name:"pt.custom",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.custom",_selected_item_ids:[],_skus_prod:{},_TRADE_TYPE:{COD:"cod"},_fn_dom_render:function(){if(!this._elm_dom_container){var i=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(this._elm_dom_root);this._elm_dom_tradeList_container=i.find(".J_TradeList_Body");var a=i.find(".J_SubModule_Tab"),s=i.find(".J_SubModule_Query"),r=i.find(".J_SubModule_TradeContainer"),p=i.find(".J_SubModule_Taskbar");n.renderTo(a),l.renderTo(s),d.renderTo(r),o.renderTo(p),e("#header .header").scrollToFixed({zIndex:101}),e("#modlue_leftNav").scrollToFixed({marginTop:41,zIndex:101}),e("#module-trade-top").scrollToFixed({marginTop:41,zIndex:100}),this._fn_event_bind()}},_fn_dom_update_tradeList_error:function(){this._elm_dom_tradeList_container.empty().html(t.template.get("template.pt.custom.trade_error"))},_fn_dom_update_tradeList_noResult:function(){this._elm_dom_tradeList_container.empty().html(t.template.get("template.pt.custom.trade_no_result"))},_fn_event_bind:function(){var i=!0,a=this;e(".dl-horizontal").on("keyup","textarea",function(){var t=e(this).val();t.length>=200&&e(this).val(t.substring(0,200))}),this._elm_dom_container.on("click",".j-outsid-callback-btn",function(){var t=e(this);e.dialog.confirm("该操作会导致原电子面单号失效，您是否继续操作",function(){var i=t.parents(".module-trade-list-item"),a=i.attr("uniqueid"),s=r.getModel(a).toJSON(),n={sysTids:s.sysTid,tids:s.tid,taobaoIds:s.taobaoId};API.pt_custom_user_wlb_waybill_cancel(n,function(i){var s=i.data;"success"===s.status?(t.siblings('[name="outSid"]').val("点击获取单号").attr("data-value",""),t.remove(),r.getModel(a).options.outSid=""):e.dialog.alert(s.errorResult[0].errorMsg)})})}),this._elm_dom_container.on("click",".J_batch_get_in",function(){a.importFile=e.dialog({title:"批量导入",content:t.template.get("template.pt.custom.batch_get_in"),width:950,lock:!0,resize:!1,fixed:!0,close:function(){var t=e(".c_add_stamp_information_document");t.off("click"),t.off("change",".file_browse_brows"),e(".shop-logo-list").find("li").off("click"),e(".general_format").off("click")}}).time(0,function(){var i=e(".c_add_stamp_information_document"),s=i.find(".file_src");i.on("click",function(i){var s=e(i.target),n="";if(s.hasClass("importFile-upload")){if(s.blur(),!e(".file_browse_brows").val())return e.dialog.alert("请选择文件"),!1;var l=setInterval(function(){var i=e('iframe[name="multipartFrame"]')[0].contentWindow;i.message&&n?(clearInterval(l),n.close(),e.dialog.alert(i.message,function(){i.message.indexOf("成功")>=0&&(a.importFile.close(),t.pages.setCurHash({t:Math.random()})),i.status="",i.message=""})):n||(n=e.dialog({title:"提示",content:'<div style="padding:15px;"><img class="ui_icon_bg" src="/resources/js/skins/icons/loading.gif"><div style="display:inline-block;margin-left:15px;" class="ft_20 fm-yahei loading-tips">请稍等, 正在上传...</div></div>',width:300,lock:!0,resize:!1,fixed:!0,close:function(){clearInterval(l)}}))},200)}s.hasClass("importFile-cancel")&&a.importFile.close()}).on("change",".file_browse_brows",function(){s.val(e(this).val())}),e(".shop-logo-list").find("li").on("click",function(){e(this).addClass("crt").siblings("li").removeClass("crt"),e(".general_format").removeClass("general_format_crt")}),e(".general_format").on("click",function(){e(".shop-logo-list").find("li").removeClass("crt"),e(".general_format").addClass("general_format_crt")})})}),this._elm_dom_container.on("click",".J_add_infor_dio",function(){API.pt_custom_user_getShopDetail({},function(i){var s=i.data,n=t.util.date.getdate((new Date).getTime(),"YY-MM-DD HH:MM"),l=t.user.get().userConf;if(!a.shopList.length)if(0==l.mmb)a.shopList.push({id:s.id,title:s.title,taobaoId:s.taobaoId});else if(1==l.mmb)for(var d=a.shopListInfo,o=0;o<d.length;o++)a.shopList.push({id:d[o].id,title:d[o].title,taobaoId:d[o].taobaoId});a.dia_add_inf=e.dialog({title:"添加打印信息",content:t.template.get("template.pt.custom.dia_add_inf",{list:s,shoplist:a.shopList,shoplistCount:a.shopList.length,today:n}),okVal:"保存",cancelVal:"取消",ok:function(){return a._fn_print_info_ok("pt_custom_user_add"),!1},cancel:function(){},close:function(){a._fn_price_unbind_event(),a._unbind_events(e(".c_add_stamp_information"))},width:950,lock:!0,fixed:!1,resize:!1}),e(".c_add_stamp_information").find(".m-split-info").iTip({skin:"blue",triggerType:"hover",zIndex:2e4}),a._bind_events(e(".c_add_stamp_information")),a._fn_price_bind_event(),e("[type=radio]").iCheck(),e("body").find("select").iSelect("select",s.id.toString()),a._fn_address(e(".J_getShopDetail").find(".area_select")),a._fn_address(e(".J_getShopDetail").find(".area_select1"),{sendState:i.data.sendState,sendCity:i.data.sendCity,sendDistrict:i.data.sendDistrict})})}),this._elm_dom_container.find(".module-trade-searchBar-btn").on("click",e.proxy(function(){this._elm_dom_container.find(".module-trade-searchBar-btn").toggleClass("module-trade-searchBar-btn-down"),e("#module-trade-topBar").stop().animate({height:i?0:95},{progress:function(){}}),i=!i},this)),this._elm_dom_container.find(".module-trade-tab-navs").on("click",function(){e(".date-picker,.search-content").val("")}),t.sub("trade.list.sub_module_query.submit",this._eventHandlerProxy_querySubmit=this._fn_event_handler("query_submit")),t.sub("trade.list.sub_module_tradeContainer.order_sort",this._eventHandlerProxy_OrderSort=this._fn_event_handler("order_sort")),t.sub("trade.list.sub_module_tradeContainer.status_search",this._eventHandlerProxy_StatusSearch=this._fn_event_handler("status_search")),t.sub("trade.list.sub_module_tradeContainer.select_all",this._eventHandlerProxy_SelectAll=this._fn_event_handler("select_all")),t.sub("trade.list.sub_module_tradeContainer.show_orders",this._eventHandlerProxy_ShowOrders=this._fn_event_handler("show_orders")),t.sub("trade.list.sub_module_tradeContainer.change_page_no",this._eventHandlerProxy_ChangePageNo=this._fn_event_handler("change_page_no")),t.sub("trade.list.sub_module_tradeContainer.change_page_size",this._eventHandlerProxy_ChangePageSize=this._fn_event_handler("change_page_size")),t.sub("trade.list.sub_module_tradeContainer.memo_sort",this._eventHandlerProxy_MemoSort=this._fn_event_handler("memo_sort")),t.sub("trade.list.sub_module_tradeContainer.product_count",this._eventHandlerProxy_ProductCount=this._fn_event_handler("product_count")),t.sub("trade.list.sub_module_tradeContainer.template_search",this._eventHandlerProxy_TemplateSearch=this._fn_event_handler("template_search")),t.sub("trade.list.sub_module_tradeContainer.receiver_area_search",this._eventHandlerProxy_TemplateSearch=this._fn_event_handler("receiver_area_search")),t.sub("trade.list.sub_module_taskbar.edit_logistics",this._eventHandlerProxy_EditLogistics=this._fn_event_handler("edit_logistics")),t.sub("trade.list.sub_module_taskbar.print",this._eventHandlerProxy_Print=this._fn_event_handler("print")),t.sub("trade.list.sub_module_taskbar.edit_messageMemos",this._eventHandlerProxy_EditMessageMemos=this._fn_event_handler("edit_messageMemos")),t.sub("trade.list.sub_module_taskbar.batch_delate",this._eventHandlerProxy_Batch_Delate=this._fn_event_handler("batch_delate")),t.sub("trade.list.sub_module_querybar.trade_sync",this._eventHandlerProxy_TradeSync=this._fn_event_handler("trade_sync")),t.sub("trade.list.sub_module_taskbar.logistics_offline_send",this._eventHandlerProxy_LogisticsOfflineSend=this._fn_event_handler("logistics_offline_send")),t.sub("trade.list.sub_module_taskbar.logistics_online_send",this._eventHandlerProxy_LogisticsOnlineSend=this._fn_event_handler("logistics_online_send")),t.sub("trade.list.sub_module_taskbar.logistics_dummy_send",this._eventHandlerProxy_LogisticsDumySend=this._fn_event_handler("logistics_dummy_send")),t.sub("trade.list.sub_module_taskbar.print_express_undo",this._eventHandlerProxy_PrintExpressUndo=this._fn_event_handler("print_express_undo")),t.sub("trade.list.sub_module_taskbar.print_express_end",this._eventHandlerProxy_PrintExpressEnd=this._fn_event_handler("print_express_end")),t.sub("trade.list.sub_module_taskbar.print_deliver_undo",this._eventHandlerProxy_PrintDeliverUndo=this._fn_event_handler("print_deliver_undo")),t.sub("trade.list.sub_module_taskbar.print_deliver_end",this._eventHandlerProxy_PrintDeliverEnd=this._fn_event_handler("print_deliver_end")),t.sub("trade.list.sub_module_taskbar.trade_verify",this._eventHandlerProxy_TradeVerify=this._fn_event_handler("trade_verify")),t.sub("trade.list.sub_module_taskbar.trade_verify_cancel",this._eventHandlerProxy_TradeVerifyCancel=this._fn_event_handler("trade_verify_cancel")),t.sub("trade.list.sub_module_taskbar.manual_merge_orders_by_wangwangNo",this._eventHandlerProxy_ManualMergeOrders=this._fn_event_handler("manual_merge_orders_by_wangwangNo")),t.sub("trade.list.sub_module_taskbar.scan_to_send_goods",this._eventHandlerProxy_ScanSendGoods=this._fn_event_handler("scan_to_send_goods")),t.sub("trade.list.sub_module_taskbar.trade_batch_halt",this._eventHandlerProxy_TradeBatchHalt=this._fn_event_handler("trade_batch_halt")),t.sub("trade.list.sub_module_taskbar.trade_batch_halt_cancel",this._eventHandlerProxy_TradeBatchHaltCancel=this._fn_event_handler("trade_batch_halt_cancel")),t.sub("trade.list.sub_module_taskbar.resend_product",this._eventHandlerProxy_resendProduct=this._fn_event_handler("resend_product")),t.sub("control.trade.module.common_express.select",this._eventHandlerProxy_tradeExpressSelect=this._fn_event_handler("module.common_express.select")),t.sub("control.trade.module.common_express.edit.done_4print",this._eventHandlerProxy_tradeExpressEditDone=this._fn_event_handler("module_common_express_edit_done_4print")),t.sub("control.trade.view.focusout.edit_logistics.done_4print",this._eventHandlerProxy_tradeLogisticsEditDone=this._fn_event_handler("module_trade_logistics_edit_done_4print")),t.sub("control.trade.view.click.batch_update_express_id.done_4print",this._eventHandlerProxy_batchUpdateExpressIdDone=this._fn_event_handler("module_trade_batch_update_expressId_done_4print")),t.sub("trade.list.sub_module_taskbar.edit_logistics.done",this._eventHandlerProxy_editLogisticsDone=this._fn_event_handler("module_trade_edit_Logistics_done")),t.sub("trade.list.sub_module_resend_product.edit_logistics.done",this._eventHandlerProxy_resendProeditLogisticsDone=this._fn_event_handler("module_trade_edit_Logistics_done_4resend")),t.sub("control.trade.module.logistics_offline_send.done_4print",this._eventHandlerProxy_logistics_offline_send_Done=this._fn_event_handler("module_trade_logistics_offline_send_done_4print")),t.sub("control.trade.view.click.logistics_dummy_send.done_4print",this._eventHandlerProxy_logistics_dummy_send_Done=this._fn_event_handler("module_trade_logistics_dummy_send_done_4print")),t.sub("control.trade.view.click.logistics_online_send.done_4print",this._eventHandlerProxy_logistics_online_send_Done_4print=this._fn_event_handler("module_trade_logistics_online_send_done_4print")),t.sub("control.trade.view.logistics.online_cancel.done_4print",this._eventHandlerProxy_logistics_online_cancel_Done_4print=this._fn_event_handler("module_trade_logistics_online_cancel_done_4print")),t.sub("control.trade.view.logistics_online_confirm.done_4print",this._eventHandlerProxy_logistics_online_confirm_Done_4print=this._fn_event_handler("module_trade_logistics_online_confirm_done_4print")),t.sub("control.trade.view.click.create_wlb_no_done_4print",this._eventHandlerProxy_create_wlb_no_done_4print=this._fn_event_handler("create_wlb_no_done_4print")),t.sub("control.trade.module.common_express.edit",this._eventHandlerProxy_tradeCommonExpressEdit=this._fn_event_handler("module.common_express.edit")),t.sub("control.trade.module.shipping_address.edit",this._eventHandlerProxy_tradeShippingAddressEdit=this._fn_event_handler("module.shipping_address.edit")),t.sub("control.trade.module.seller_memoflag.merge.edit",this._eventHandlerProxy_tradeSellerMemoflagMergeEdit=this._fn_event_handler("module.seller_memoflag.merge.edit")),t.sub("control.trade.module.express.edit",this._eventHandlerProxy_tradeExpressEdit=this._fn_event_handler("module.express.edit")),t.sub("control.trade.module.print",this._eventHandlerProxy_tradePrint=this._fn_event_handler("module.print")),t.sub("control.trade.module.message_memo.edit",this._eventHandlerProxy_tradeMessageMemoEdit=this._fn_event_handler("module.message_memo.edit")),t.sub("control.trade.module.logistics_info",this._eventHandlerProxy_tradeLogisticsInfo=this._fn_event_handler("module.logistics_info")),t.sub("control.trade.module.manual.merge.orders",this._eventHandlerProxy_tradeManualMerge=this._fn_event_handler("module.manual.merge.orders")),t.sub("trade.search.printlog",this._eventHandlerProxy_tradeSearchPrintLog=this._fn_event_handler("trade_printlog_search"))},prodPages:"",_bind_events:function(i){var a=this;i.on("click",function(t){var i=e(t.target),s=e(i.siblings(".J_number_prod"));i.hasClass("delete_prod_num")&&s.text()>1&&(s.text(s.text()-1),e(".prod_all_num").text(parseInt(e(".prod_all_num").text())-1),a._fn_price()),i.hasClass("add_prod_num")&&s.text()>0&&(s.text(s.text()-0+1),e(".prod_all_num").text(parseInt(e(".prod_all_num").text())+1),a._fn_price()),i.hasClass("m-split-info")&&e.dialog({title:"快递模版",content:'<div class="m-split-text"><label style="float:left;margin: 10px 10px 0 0; font-size: 14px;">收件人信息：</label><textarea style="width:450px;height:100px;" placeholder="格式：张三，18627823907，浙江省 杭州市 滨江区 江南大道 恒鑫大厦 ，000000"></textarea></div>',okVal:"保存",cancelVal:"取消",width:600,lock:!0,resize:!1,fixed:!0,ok:function(){a._fn_split_info()},cancel:function(){}})}),i.on("change",".infor_home_text",function(){for(var i=e(this).val(),s={},n=a.shopListInfo,l=0;l<n.length;l++)n[l].id==i&&(s=n[l]);var d=a.shopListInfo[e(this).find("option:selected").index()];d.sendName=d.sendContact,d.sendMobilePhone=d.sendMobile,d.sendDetailAddress=d.sendAddress,d.sendPostCode=d.sendPost,e(".to_information").html(t.template.get("template.pt.custom.send_prod_information",d)),a._fn_address(e(".J_getShopDetail").find(".area_select1"),{sendState:d.sendState,sendCity:d.sendCity,sendDistrict:d.sendDistrict}),e(".j_express_templet").html('<a class="J_Click J_Express_Name" data-name="change_express">请选择快递模版</a>')}),i.on("click",".del_prod",function(t){var i=e(t.target),s=i.parents(".list_main"),n=i.parents(".order_main_delete").siblings(".order_main_number").find(".J_number_prod").text();e(".prod_all_num").text(parseFloat(e(".prod_all_num").text())-parseFloat(n)),e(s).remove(),e(".J_list_prod").height()>207?(e(".J_list_prod").addClass("one_y_box"),e(".J_list_prod").removeClass("over_y_small")):(e(".J_list_prod").removeClass("one_y_box"),e(".J_list_prod").addClass("over_y_small"));for(var l=e(".J_list_prod").find(".list_main"),d=0;d<l.length;d++)e(l[d]).find(".order_main_code_number").text(d+1);a._fn_price()}),i.on("click",".in_infor_btn",function(){var t=e(this);t.hasClass("col_into")||(t.addClass("col_into").siblings().removeClass("col_into"),t.parents(".into_header_top").siblings(".in_information").show().siblings(".to_information").hide())}),i.on("click",".to_infor_btn",function(){var t=e(this);t.hasClass("col_into")||(t.addClass("col_into").siblings().removeClass("col_into"),t.parents(".into_header_top").siblings(".to_information").show().siblings(".in_information").hide())}),i.on("click",".trade_list_main .J_Express_Name",function(i){if(!a.normal_express_template){var s=e(i.target);a.normal_express_template=e.dialog({title:"快递模版",content:t.template.get("template.pt.custom.express_templet"),close:function(){a.normal_express_template=!1}}).time(0,function(){var i=e(".in_information").find(".infor_home_text").attr("taobaoid")||e(".in_information").find(".infor_home_text option:selected").attr("taobaoId");API.pt_custom_user_simple_list({isMix:1,isCommonUse:1,taobaoId:i},function(n){var l=n.data;e(".J_template_container").prepend(t.template.get("template.pt.custom.express_templet_item",{list:l}));var d=s.attr("id");d&&e(".tag_"+d).addClass("current");var o=e(".J_template_container");o.on("click",function(n){var l=e(n.target);l.hasClass("J_express_templet")&&API.pt_custom_user_express_all({isMix:1,taobaoId:i},function(i){var s=i.data;a.choose_one_express=e.dialog({title:"快递模版",content:t.template.get("template.pt.custom.all_express_template",{list:s}),okVal:"保存",cancelVal:"取消",width:950,lock:!0,resize:!1,fixed:!0,ok:function(){for(var t=[],i=[],s=[],n="",l=e(".J_Express").find(":checked"),d=0;d<l.length;d++)n=l.eq(d).parents("label"),t.push({templateId:n.attr("templateId"),iswlb:n.attr("iswlb"),taobaoId:n.attr("taobaoId"),templateName:l.eq(d).next().text()}),i.push(n.attr("templateId")),s.push(n.attr("taobaoId"));API.pt_common_tag_batch({ids:i.join(","),taobaoIds:s.join(",")},function(){a.normal_express_template.close()})},cancel:function(){}}),e(".J_icheck").find("input").iCheck()}),l.hasClass("tag")&&(l.addClass("current").siblings().removeClass("current"),a.normal_express_template.close(),s.text(l.text()),s.attr({id:l.attr("templateid"),isWlb:l.attr("isWlb"),taobaoId:l.data("taobaoid")}))})})})}}),i.on("click","#add_prod_dio",function(){var i=e(this);i.hasClass("crt")||(i.addClass("crt"),a.choose_prod_dialog=e.dialog({title:"选择商品",content:t.template.get("template.pt.custom.add_prod_infor",{shop:a.shopList}),width:950,lock:!0,resize:!1,fixed:!0,ok:function(){for(var t=[],i=e(".add_box_body"),s=0;s<i.length;s++){var n=i.eq(s);if(!(n.data("skuid")&&e(".J_list_prod").find(".list_main_"+n.data("skuid")).length||!n.data("skuid")&&n.data("numiid")&&e(".J_list_prod").find(".list_main_"+n.data("numiid")).length)){var l="",d="",o=n.find(".prod_add_box_spec_cord").find("span").eq(0).data("skutext")||"",r=n.find(".prod_add_box_spec_cord").find("span").eq(0).text()||"",p=n.find(".prod_add_box_spec_cord").find("span").eq(1).data("skutext")||"",c=n.find(".prod_add_box_spec_cord").find("span").eq(1).text()||"";o&&p?(l=o+";"+p,d=r+";"+c):(l=o+p,d=r+c),t.push({skuId:n.data("skuid")||"",numIid:n.data("numiid")||"",picpath:n.attr("data-picpath"),num:n.data("num"),outerId:n.data("outerid")||n.find(".add_body_prod_cord").text(),itemName:n.find(".add_body_prod_name").text(),propertiesName:l.replace(/\:([^;]+)/g,':<span style="color:brown;">$1</span>'),propertiesShortName:d,priceOutput:n.attr("data-priceOutput")||0,shotTitle:n.data("shottitle")})}}for(var _=0;_<t.length;_++){var m=t[_].picpath?t[_].picpath+"_40x40.jpg":"/resources/css/build/images/no_pic.png",u=['<ul class="list_main list_main_'+t[_].skuId+" list_main_"+t[_].numIid+'" data-skuId="'+t[_].skuId+'" data-numIid="'+t[_].numIid+'" data-num="'+t[_].num+'" data-shotTitle="'+t[_].shotTitle+'" data-propertiesShortName="'+t[_].propertiesShortName+'">','<li class="order_main_code_number order_code_number">1</li>','<li class="order_main_image order_image">','<img data-picpath="'+t[_].picpath+'" src="'+m+'" alt="" width="40" height="40">',"</li>",'<li class="order_main_name order_name">','<label class="l_itemName">'+t[_].itemName+"</label>",'<span class="propertiesName_color">'+t[_].propertiesName+"</span>","</li>",'<li class="order_main_code order_code">'+t[_].outerId+"</li>",'<li class="order_main_price order_price"><input class="price_prod_J J_number_list" maxlength="12" style="width:50px" type="text" value="'+t[_].priceOutput+'"/></li>','<li class="order_main_number order_number">','<div class="order_main_number_box">','<span class="delete_prod_num">-</span>','<label for="" class="J_number_prod">1</label>','<span class="add_prod_num">+</span>',"</div>","</li>",'<li class="order_main_delete order_delete">','<span class="del_prod">×</span>',"</li>","</ul>"].join("");e(u).appendTo(".J_list_prod")}for(var h=e("body").find(".J_list_prod").find(".list_main"),f=0,s=0;s<h.length;s++)h.eq(s).find(".order_main_code_number").text(s+1),f+=parseInt(h.eq(s).find(".J_number_prod").text());e(".c_add_stamp_information").find(".prod_all_num").text(f),a._fn_price()},cancel:!0,close:function(){a.prod_check_all_list={},i.removeClass("crt")}}).time(0,function(){a._fn_load_prod_all(),e(".tree-box").find("select").iSelect()}))})},_unbind_events:function(e){e.off("click"),e.off("change","select.infor_home_text"),e.off("click",".del_prod"),e.off("click",".in_infor_btn"),e.off("click",".to_infor_btn"),e.off("click",".trade_list_main .J_Express_Name"),e.off("click","#add_prod_dio")},_fn_load_prod_all:function(i){var i=i||{},a=this,s=e("body").find(".select_add_prod"),n=e(".c_add_stamp_information");a._prod_list_event_unbind(s),i=e.extend({pageNo:1},i),API.pt_custom_user_allItem(i,function(i){for(var l=i.data.itemList,d=0;d<l.length;d++)a._skus_prod[l[d].numIid]=l[d];var o=t.template.get("template.pt.custom.query_prod_list",{list:l})||"<tr><td><br><br>暂无数据！</td></tr>";e(".add_information_list").html(o),a.prodPages=e(".prod_list_pages").html(a._fn_prod_pages(i.data)),a._prod_list_event(s,n);for(var r in a.prod_check_all_list)e(".prod_list_main_"+r).length&&e(".prod_list_main_"+r).find(".check").addClass("checked").find(".J_check_box_prod").prop("checked",!0)})},_fn_prod_pages:function(e){if(!e.total)return!1;var t=this.page_data(e),i="",a="";return i=1==t.pageNo?'<span class="m-pages-prev" title="前一页">前一页</span>':'<a class="m-pages-prev" href="javascript:;" title="前一页" data-page="'+t.prevPage+'">前一页</a>',a=t.isLastPage?'<span class="m-pages-next" title="后一页">后一页</span>':'<a class="m-pages-next" href="javascript:;" title="后一页" data-page="'+t.nextPage+'">后一页</a>',['<div class="m-pages m-pages-small">','<span class="m-pages-total">共<strong>'+t.total+"</strong>条记录</span>",i,'<span class="m-pages-num">'+t.pageNo+"</span>",a,"</div>"].join("")},page_data:function(e){var t=Math.ceil(e.total/20);return{total:e.total,pageNo:e.pageNo,pageSize:20,prevPage:e.pageNo-1,nextPage:e.pageNo+1,pageTotal:t,isLastPage:e.pageNo==t}},_fn_load_tree_data:function(e,t){var i=this;API.pt_custom_user_itemCatList({showHide:!0,taobaoId:t},function(t){i._fn_init_folderTree(e,t)},function(){},!1)},_fn_init_folderTree:function(e,i){var a=t.controls.get("control.prod.folder.tree"),s={showIcon:!1,showCheckBox:!1,itemCanHide:!1,showShopLevel:!0};a.show(e,i,s)},_fn_price_bind_event:function(){var t=this,i="";e(".c_add_stamp_information").on("blur",".price_prod_J",function(){e(this).val()||e(this).val(0),t._fn_price()}).on("blur",".price_prod_yh_J",function(){e(this).val()||e(this).val(0),t._fn_youhui()}).on("focus",".J_number_list",function(){var t=e(this);i=t.val(),setTimeout(function(){t.select()},10)}).on("keyup",".J_number_list, .info_phone_text, .info_zip",function(t){var a=e(t.target),s=a.val();/^[0-9]([0-9]*([.]([0-9]?)([0-9]?))?)?$/.test(s)?i=s?s:"":a.val(""==a.val()?"":i||"")})},_fn_split_info:function(){var t=[],i=e(".m-split-text").find("textarea").val();if(i.indexOf("，")>=0)t=i.split("，");else if(i.indexOf(",")>=0&&i.indexOf("，")<0)t=i.split(",");else if(i.indexOf("，")<0&&i.indexOf(",")<0)return;for(var a=0;a<t.length;a++)t[a]=e.trim(t[a]);var s=this,n=e(e(".in_information").is(":visible")?".in_information":".to_information"),l=n.find(n.hasClass("in_information")?".area_select":".area_select1"),d="";if(t[0]&&t[1]){n.find(".infor_name_text").val(t[0]),n.find(".info_phone_text").val(t[1]);var o=function(e){if(e)d=e.split(/\s+/g);else var e=[];s._fn_address(l.empty(),{sendState:d[0]||"请选择...",sendCity:d[1]||"请选择...",sendDistrict:d[2]||"请选择..."});var t=d.length>3?d.splice(3,d.length).join(""):"";n.find(".info_address_detailed").val(t)};/^[0-9]/.test(t[2])?(n.find(".info_mobiel_text").val(t[2]),o(t[3]),n.find(".info_zip").val(t[4]||"")):(n.find(".info_mobiel_text").val(""),o(t[2]),n.find(".info_zip").val(t[3]||""))}},_fn_price_unbind_event:function(){e(".c_add_stamp_information").off("blur",".price_prod_J"),e(".c_add_stamp_information").off("blur",".price_prod_yh_J"),e(".c_add_stamp_information").off("focus",".price_prod_yh_J"),e(".c_add_stamp_information").off("keyup",".J_number_list")},_fn_price:function(){var t=0;e(".J_list_prod").find(".list_main").each(function(){t+=parseFloat(100*e(this).find(".price_prod_J").val())*parseFloat(e(this).find(".J_number_prod").text())});var i=parseFloat(t/100).toFixed(2);e(".prod_money_box").text(i),this._fn_youhui()},_fn_youhui:function(){var t=parseFloat(100*e(".freight_money").val()),i=parseFloat(100*e(".money_pay").val()),a=parseFloat(100*e(".prod_money_box").text()),s=parseFloat((t+a-i)/100).toFixed(2);e(".favourable_money").text(s)},_prod_list_event:function(i){{var a=this;i.find(".datailed_in_out"),i.find(".J_prod_separate"),i.find(".J_select_add").children("input")}i.on("click",".tree-box .folder-name",function(){var t=e(this),i=t.parents(".cata-item"),s={};a._fn_load_prod_all_params={},s=t.hasClass("shop-name")?{taobaoId:e(".m-shoplist-select").val(),specialField:"seller_cid",specialFieldStatus:""}:{taobaoId:e(".m-shoplist-select").val(),specialField:"seller_cid",specialFieldStatus:i.attr("cid")},a._fn_load_prod_all_params=s,e(".tree-box").find(".cata-level").removeClass("item-selected"),t.parents(".cata-level").eq(0).addClass("item-selected"),s.text=e(".prod_information_text").val(),a._fn_load_prod_all(s)}),i.on("click",function(i){var s=e(i.target),n=s.parents(".prod_list_main").attr("data-numiid");if(s.hasClass("j_icon_box_click")&&(e(".J_scroll_select").toggle(),e(".J_scroll_select").is(":visible")&&!e(".J_scroll_select").find(".subfolder").children().length&&a._fn_load_tree_data(e(".tree-content"),a.shopListInfo[0].taobaoId)),s.hasClass("expand")){var l=s.parents(".prod_list_main").find(".J_check_box_prod").prop("checked");if(s.parents(".prod_list_main").next().hasClass("J_prod_separate"))s.parents(".prod_list_main").siblings(".J_prod_separate_"+n).toggle(),s.toggleClass("trade-icon-close trade-icon-open");else{s.closest("tr").after(t.template.get("template.pt.custom.prod_skus",{list:a._skus_prod[s.parents(".prod_list_main").data("numiid")].skus}));var d=s.parents(".prod_list_main").siblings(".J_prod_separate_"+n);d.show(),s.toggleClass("trade-icon-close trade-icon-open"),l?s.parents(".prod_list_main").siblings(".J_prod_separate_"+n).find(".choose-prod").prop("checked",!0):d.each(function(){var t=e(this),i=t.data("skuid");e(".add_box_body_"+i).length&&t.find(".check").addClass("checked").find(".choose-prod").prop("checked",!0)})}}if(s.hasClass("J_check_box_prod")){var n=s.parents(".prod_list_main").attr("data-numiid"),o=a._skus_prod[n];s.parents(".prod_list_main").next().hasClass("J_prod_separate")?s.prop("checked")?(s.parents(".prod_list_main").siblings(".J_prod_separate_"+n).find(".check").addClass("checked").find(".choose-prod:not(:checked)").click().prop("checked",!0),a.prod_check_all_list||(a.prod_check_all_list={}),a.prod_check_all_list[n]=o.skus?o.skus.length:1):(s.parents(".prod_list_main").siblings(".J_prod_separate_"+n).find(".check").removeClass("checked").find(".choose-prod:checked").click().prop("checked",!1),a.prod_check_all_list&&a.prod_check_all_list[n]&&delete a.prod_check_all_list[n]):s.prop("checked")?(e("#J_add_box").find(".add_box_body_"+n).remove(),e(t.template.get("template.pt.custom.add_information_prod_select_all",o)).appendTo("#J_add_box"),a.prod_check_all_list||(a.prod_check_all_list={}),a.prod_check_all_list[n]=o.skus?o.skus.length:1):(e("#J_add_box").find(".add_box_body_"+n).remove(),a.prod_check_all_list&&a.prod_check_all_list[n]&&delete a.prod_check_all_list[n]);var r=e(".add_box_body").length;e(".prod_checked_num").text(r)}if(s.hasClass("choose-prod")){var p=s.data("numiid"),c=e(".prod_list_main_"+p),_=s.parents(".J_prod_separate"),m=_.data("skuid"),u=_.find(".datailed_list_prod_spec").find(".J_value_sku"),h=s.parents(".J_select_add").siblings(".datailed_list_prod_cord").text()||e(".prod_list_main_"+p).find(".list_prod_cord").text(),f=c.children(".list_prod_name").text(),v='<span data-skuText="'+(u.eq(0).text()||"")+'">'+(u.eq(0).data("skuval")||"")+'</span><span data-skuText="'+(u.eq(1).text()||"")+'">'+(u.eq(1).data("skuval")||"")+"</span>",g=c.attr("data-priceOutput"),b=c.attr("data-picPath"),y=c.data("taobaoid"),x=_.data("num"),w=_.data("shottitle"),k=e(".J_prod_separate_"+p);
if(s.prop("checked")){var o={num:x,numIid:p,picPath:b,priceOutput:g,skuId:m,title:f,propesNames:v,outerId:h,shotTitle:w,taobaoId:y};e(t.template.get("template.pt.custom.add_information_prod_select",o)).appendTo("#J_add_box"),k.length===e(".add_box_body_"+p).length&&(c.find(".check").addClass("checked").find(".J_check_box_prod").prop("checked",!0),a.prod_check_all_list||(a.prod_check_all_list={}),a.prod_check_all_list[p]=k.length)}else e("#J_add_box").find(".add_box_body_"+m).remove(),c.find(".J_check_box_prod").prop("checked",!1).parents(".check").removeClass("checked"),a.prod_check_all_list&&a.prod_check_all_list[p]&&delete a.prod_check_all_list[p];var r=e(".add_box_body").length;e(".prod_checked_num").text(r)}if(s.hasClass("delete-prod")){var T=s.closest("tr").data("skuid"),S=s.parents(".add_box_body"),p=S.data("numiid");e(".prod_list_main_"+p).find(".check").removeClass("checked").find(".J_check_box_prod").prop("checked",!1),S.remove(),e(".prod_checked_num").text(e(".add_box_body").length),e(".j-checkbox-"+T).length&&e(".j-checkbox-"+T).prop("checked")&&e(".j-checkbox-"+T).prop("checked",!1).parents(".check").removeClass("checked"),a.prod_check_all_list&&a.prod_check_all_list[p]&&delete a.prod_check_all_list[p]}if(s.hasClass("J_infor_search")){var C={text:s.siblings(".text_prod").children("input").val(),taobaoId:e(".m-shoplist-select").val(),specialFieldStatus:e(".tree-box").find(".item-selected").attr("id")};a._fn_load_prod_all(C)}}),i.find(".m-shoplist-select").on("change",function(){a._fn_load_tree_data(e(".tree-content"),e(this).val());var t=e.extend(a._fn_load_prod_all_params,{specialFieldStatus:"",taobaoId:e(this).val()});a._fn_load_prod_all(t),e(".prod_information_text").val()&&e(".prod_information_text").val("")}),a.prodPages.on("click","a.m-pages-prev, a.m-pages-next",function(){var t=e.extend({pageNo:e(this).data("page"),text:e(".prod_information_text").text()},a._fn_load_prod_all_params);a._fn_load_prod_all(t)})},_prod_list_event_unbind:function(e){e.find(".m-shoplist-select").off("change"),e.off("click",".tree-box .folder-name"),e.off("click"),this.prodPages&&this.prodPages.off("click","a.m-pages-prev, a.m-pages-next")},_fn_event_unbind:function(){this._fn_price_unbind_event(),this._elm_dom_container.find(".module-trade-searchBar-btn").on("click"),this._elm_dom_container.find(".module-trade-tab-navs").off("click"),e(".dl-horizontal").off("keyup","textarea"),e("#header .header").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),e("#module-trade-top").trigger("detach.ScrollToFixed"),this._elm_dom_container.find(".module-trade-searchBar-btn").off("click"),this._elm_dom_tradeList_container.off("click"),t.removeSub("trade.list.sub_module_query.submit",this._eventHandlerProxy_querySubmit),t.removeSub("trade.list.sub_module_tradeContainer.order_sort",this._eventHandlerProxy_OrderSort),t.removeSub("trade.list.sub_module_tradeContainer.status_search",this._eventHandlerProxy_StatusSearch),t.removeSub("trade.list.sub_module_tradeContainer.select_all",this._eventHandlerProxy_SelectAll),t.removeSub("trade.list.sub_module_tradeContainer.show_orders",this._eventHandlerProxy_ShowOrders),t.removeSub("trade.list.sub_module_tradeContainer.change_page_no",this._eventHandlerProxy_ChangePageNo),t.removeSub("trade.list.sub_module_tradeContainer.change_page_size",this._eventHandlerProxy_ChangePageSize),t.removeSub("trade.list.sub_module_tradeContainer.memo_sort",this._eventHandlerProxy_MemoSort),t.removeSub("trade.list.sub_module_tradeContainer.product_count",this._eventHandlerProxy_ProductCount),t.removeSub("trade.list.sub_module_tradeContainer.template_search",this._eventHandlerProxy_TemplateSearch),t.removeSub("trade.list.sub_module_tradeContainer.receiver_area_search",this._eventHandlerProxy_TemplateSearch),t.removeSub("trade.list.sub_module_taskbar.edit_logistics",this._eventHandlerProxy_EditLogistics),t.removeSub("trade.list.sub_module_taskbar.print",this._eventHandlerProxy_Print),t.removeSub("trade.list.sub_module_taskbar.edit_messageMemos",this._eventHandlerProxy_EditMessageMemos),t.removeSub("trade.list.sub_module_querybar.trade_sync",this._eventHandlerProxy_TradeSync),t.removeSub("trade.list.sub_module_taskbar.batch_delate",this._eventHandlerProxy_Batch_Delate),t.removeSub("trade.list.sub_module_taskbar.logistics_offline_send",this._eventHandlerProxy_LogisticsOfflineSend),t.removeSub("trade.list.sub_module_taskbar.logistics_online_send",this._eventHandlerProxy_LogisticsOnlineSend),t.removeSub("trade.list.sub_module_taskbar.logistics_dummy_send",this._eventHandlerProxy_LogisticsDumySend),t.removeSub("trade.list.sub_module_taskbar.print_express_undo",this._eventHandlerProxy_PrintExpressUndo),t.removeSub("trade.list.sub_module_taskbar.print_express_end",this._eventHandlerProxy_PrintExpressEnd),t.removeSub("trade.list.sub_module_taskbar.print_deliver_undo",this._eventHandlerProxy_PrintDeliverUndo),t.removeSub("trade.list.sub_module_taskbar.print_deliver_end",this._eventHandlerProxy_PrintDeliverEnd),t.removeSub("trade.list.sub_module_taskbar.trade_verify",this._eventHandlerProxy_TradeVerify),t.removeSub("trade.list.sub_module_taskbar.trade_verify_cancel",this._eventHandlerProxy_TradeVerifyCancel),t.removeSub("trade.list.sub_module_taskbar.manual_merge_orders_by_wangwangNo",this._eventHandlerProxy_ManualMergeOrders),t.removeSub("trade.list.sub_module_taskbar.scan_to_send_goods",this._eventHandlerProxy_ScanSendGoods),t.removeSub("trade.list.sub_module_taskbar.trade_batch_halt",this._eventHandlerProxy_TradeBatchHalt),t.removeSub("trade.list.sub_module_taskbar.trade_batch_halt_cancel",this._eventHandlerProxy_TradeBatchHaltCancel),t.removeSub("trade.list.sub_module_taskbar.resend_product",this._eventHandlerProxy_resendProduct),t.removeSub("control.trade.collection.all_selected",this._eventHandlerProxy_AllSelected),t.removeSub("control.trade.collection.all_selected_cancel",this._eventHandlerProxy_AllSelectedCancel),t.removeSub("control.trade.module.common_express.select",this._eventHandlerProxy_tradeExpressSelect),t.removeSub("control.trade.module.common_express.edit.done_4print",this._eventHandlerProxy_tradeExpressEditDone),t.removeSub("control.trade.view.focusout.edit_logistics.done_4print",this._eventHandlerProxy_tradeLogisticsEditDone),t.removeSub("control.trade.view.click.batch_update_express_id.done_4print",this._eventHandlerProxy_batchUpdateExpressIdDone),t.removeSub("trade.list.sub_module_taskbar.edit_logistics.done",this._eventHandlerProxy_editLogisticsDone),t.removeSub("trade.list.sub_module_resend_product.edit_logistics.done",this._eventHandlerProxy_resendProeditLogisticsDone),t.removeSub("control.trade.module.logistics_offline_send.done_4print",this._eventHandlerProxy_logistics_offline_send_Done),t.removeSub("control.trade.view.click.logistics_dummy_send.done_4print",this._eventHandlerProxy_logistics_dummy_send_Done),t.removeSub("control.trade.view.click.logistics_online_send.done_4print",this._eventHandlerProxy_logistics_online_send_Done_4print),t.removeSub("control.trade.view.logistics.online_cancel.done_4print",this._eventHandlerProxy_logistics_online_cancel_Done_4print),t.removeSub("control.trade.view.logistics_online_confirm.done_4print",this._eventHandlerProxy_logistics_online_confirm_Done_4print),t.removeSub("control.trade.view.click.create_wlb_no_done_4print",this.__eventHandlerProxy_create_wlb_no_done_4print),t.removeSub("control.trade.module.common_express.edit",this._eventHandlerProxy_tradeCommonExpressEdit),t.removeSub("control.trade.module.shipping_address.edit",this._eventHandlerProxy_tradeShippingAddressEdit),t.removeSub("control.trade.module.seller_memoflag.merge.edit",this._eventHandlerProxy_tradeSellerMemoflagMergeEdit),t.removeSub("control.trade.module.express.edit",this._eventHandlerProxy_tradeExpressEdit),t.removeSub("control.trade.module.print",this._eventHandlerProxy_tradePrint),t.removeSub("control.trade.module.message_memo.edit",this._eventHandlerProxy_tradeMessageMemoEdit),t.removeSub("control.trade.module.logistics_info",this._eventHandlerProxy_tradeLogisticsInfo),t.removeSub("control.trade.module.manual.merge.orders",this._eventHandlerProxy_tradeManualMerge),t.removeSub("trade.search.printlog",this._eventHandlerProxy_tradeSearchPrintLog)},_fn_event_handler:function(t){if(!t)throw new Error("[module.trade.list:_fn_event_handler] 参数非法.");if(!this._event_handler_object[t])throw new Error("[module.trade.list:_fn_event_handler] "+t+" 参数异常.");return e.proxy(function(){this._event_handler_object[t].apply(this,Array.prototype.slice.call(arguments,0))},this)},_event_handler_object:{query_submit:function(e){this._fn_ctrl_setCurHash(e,!0)},order_sort:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},status_search:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},product_count:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},template_search:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},receiver_area_search:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},memo_sort:function(e){e.pageNo=1,this._fn_ctrl_setCurHash(e)},select_all:function(e){var t=this._elm_dom_tradeList_container.find(".module-trade-list-item");e?(t.addClass("module-trade-list-item-selected").find(".J_Checkbox").prop("checked",!0),this._selected_item_ids=this._tradeCollection?this._tradeCollection.id_list:[]):(t.removeClass("module-trade-list-item-selected").find(".J_Checkbox").prop("checked",!1),this._selectall_unchecked_by_item_checkbox=!1,this._selected_item_ids=[])},show_orders:function(e){e?(this._elm_dom_tradeList_container.find(".module-trade-list-item-row3").show(),this._elm_dom_tradeList_container.find(".J_Trigger_Show_Orders").addClass("trade-icon-open").removeClass("trade-icon-close")):(this._elm_dom_tradeList_container.find(".module-trade-list-item-row3").hide(),this._elm_dom_tradeList_container.find(".J_Trigger_Show_Orders").addClass("trade-icon-close").removeClass("trade-icon-open"))},module_common_express_edit_done_4print:function(e,t,i,a){this._fn_item_express_updated(e,t,i,a)},module_trade_logistics_edit_done_4print:function(e){this._fn_to_save_item_outid_done(e)},module_trade_batch_update_expressId_done_4print:function(e){this._fn_batch_update_express_id_done(e)},module_trade_edit_Logistics_done:function(e){this._fn_edit_logistics_done(e)},module_trade_edit_Logistics_done_4resend:function(e){this._fn_edit_logistics_done_4resend(e)},module_trade_logistics_offline_send_done_4print:function(e){this._fn_logistics_send_done(e)},module_trade_logistics_online_send_done_4print:function(e){this._fn_logistics_online_send_done(e)},module_trade_logistics_online_cancel_done_4print:function(e){this._fn_logistics_online_cancel_done(e)},module_trade_logistics_online_confirm_done_4print:function(e){this._fn_logistics_online_confirm_done(e)},module_trade_logistics_dummy_send_done_4print:function(e){this._fn_logistics_send_done(e)},create_wlb_no_done_4print:function(e,t){this._fn_create_wlb_no_done(e,t)},change_page_no:function(e){this._fn_ctrl_setCurHash({pageNo:e})},change_page_size:function(e){this._fn_ctrl_setCurHash({pageSize:e,pageNo:1})},edit_logistics:function(){var e=this;t.sub("trade.list.sub_module_taskbar.edit_logistics.done",e._event_tiggered_by_taskbar=function(i){e._fn_edit_logistics_done(i),t.removeSub("trade.list.sub_module_taskbar.edit_logistics.done",e._event_tiggered_by_taskbar)}),i._editLogistics(this.getSelectedItemIds()),this._tradeCollection&&this._tradeCollection.command("edit_logistics",this.getSelectedItemIds())},print:function(){this._tradeCollection&&this._tradeCollection.command("print",this.getSelectedItemIds())},edit_messageMemos:function(){var i=I,a=i._selected_item_ids,s=[];return a.length?(e.each(a,function(e,t){var i=r.getModel(t);if(!i)throw new Error("[control.trade.model.print:_fn_check_data] 参数异常.");var a=i.toJSON();s.push(a.tid)}),e.dialog({title:"修改备注",content:t.template.get("template.pt.custom.remark_flag_all"),width:950,lock:!0,resize:!1,fixed:!0,ok:function(){var t=e("#j_text_remark").val(),a=e(".j_check_remark").find("input[type=radio]:checked").val(),n=e(".j_check_flag").find("input[type=radio]:checked").val();API.pt_custom_user_update_memo({memo:t,flag:n,ids:s.join(","),reset:a},function(){for(var l=0;l<s.length;l++){var d=s[l];if("true"==a)i._status_list[d].sellerMemo=t,e(".module-trade-list-item-selected").eq(l).find(".msg-seller-memo").text(t).end().find(".trade-icon-beizu").data("title",t).iTip({content:t});else{i._status_list[d].sellerMemo=i._status_list[d].sellerMemo+t;var o=i._status_list[d].sellerMemo;e(".module-trade-list-item-selected").eq(l).find(".msg-seller-memo").text(o).end().find(".trade-icon-beizu").data("title",o).iTip({content:o})}-1!=n&&(i._status_list[d].sellerFlag=n)}e(".module-trade-list-item-selected").attr("data-sellermemo",t),-1!=n&&(i._status_list[d].sellerFlag=n,e(".module-trade-list-item-selected").find(".trade-icon-flag").data("flag",n).attr("class","ml_5 trade-icon-flag trade-icon-flag-"+n))})},okVal:"保存",cancel:function(){},cancelVal:"关闭"}).time(0,function(){e(".dl-horizontal").find("[type=radio]").iCheck()}),void e("#j_text_remark").on("keyup",function(){var t=e("#j_text_remark").val();e(".comment-nums-detail").text(t.length)})):void e.dialog.alert("请选择订单")},batch_delate:function(){var t=I._selected_item_ids,i=[];return t.length?(e.each(t,function(e,t){var a=r.getModel(t);if(!a)throw new Error("[control.trade.model.print:_fn_check_data] 参数异常.");var s=a.toJSON();i.push(s.tid)}),void e.dialog.confirm("您确定要删除吗？",e.proxy(function(){API.pt_custom_user_batchDelete({ids:i.join(",")},function(){RayCloud.pages.setCurHash({t:Math.random()})})}))):void e.dialog.alert("请选择订单")},logistics_offline_send:function(){var a=this,s="control.trade.module.logistics_offline_send.done",n=this._fn_check_ifExistCODs(this.getSelectedItemIds());if(n)return void e.dialog.alert('<div style="max-height: 240px;">货到付款订单只支持在线下单方式发货！</div>');var l=this._fn_check_exceptionData(this.getSelectedItemIds(),!0);l||(t.sub(s,function(e){a._fn_logistics_send_done(e),t.removeSub(s)}),i._sendProd(this.getSelectedItemIds()))},logistics_online_send:function(){var e=this,i="control.trade.view.click.logistics_online_send.done",a=this._fn_check_exceptionData(this.getSelectedItemIds(),!1);a||(t.sub(i,function(a){e._fn_logistics_online_send_done(a),t.removeSub(i)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_send",this.getSelectedItemIds()))},logistics_dummy_send:function(){var i=this,a="control.trade.view.click.logistics_dummy_send.done",s=this._fn_check_ifExistCODs(this.getSelectedItemIds());return s?void e.dialog.alert('<div style="max-height: 240px;">货到付款订单只支持在线下单方式发货！</div>'):(t.sub(a,function(e){i._fn_logistics_send_done(e),t.removeSub(a)}),void(this._tradeCollection&&this._tradeCollection.command("logistics_dummy_send",this.getSelectedItemIds())))},print_express_undo:function(){var e=this,a="control.trade.view.click.print_express_undo.done";t.sub(a,function(t){e._fn_print_express_done(t,a,!0)}),i.print_express(this.getSelectedItemIds(),!1)},print_express_end:function(){var e=this,a="control.trade.view.click.print_express_end.done";t.sub(a,function(t){e._fn_print_express_done(t,a,!1)}),i.print_express(this.getSelectedItemIds(),!0)},print_deliver_undo:function(){var e=this,a="control.trade.view.click.print_deliver_undo.done";t.sub(a,function(t){e._fn_print_deliver_done(t,a,!0)}),i.print_deliver(this.getSelectedItemIds(),!1)},print_deliver_end:function(){var e=this,a="control.trade.view.click.print_deliver_end.done";t.sub(a,function(t){e._fn_print_deliver_done(t,a,!1)}),i.print_deliver(this.getSelectedItemIds(),!0)},trade_verify:function(){var e=this,i="control.trade.view.click.trade_verify.done";t.sub(i,function(t){e._fn_trade_verify_done(t,i,!1)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",this.getSelectedItemIds(),!0)},trade_verify_cancel:function(){var e=this,i="control.trade.view.click.trade_verify_cancel.done";t.sub(i,function(t){e._fn_trade_verify_done(t,i,!0)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",this.getSelectedItemIds(),!1)},trade_batch_halt:function(){var e=this,i="control.trade.view.click.trade_halt.done";t.sub(i,function(t){e._fn_trade_halt_done(t,i,!1)}),this._tradeCollection&&this._tradeCollection.command("trade_halt",this.getSelectedItemIds(),!0)},trade_batch_halt_cancel:function(){var e=this,i="control.trade.view.click.trade_halt_cancel.done";t.sub(i,function(t){e._fn_trade_halt_done(t,i,!0)}),this._tradeCollection&&this._tradeCollection.command("trade_halt",this.getSelectedItemIds(),!1)},manual_merge_orders_by_wangwangNo:function(i,a){var s=this;t.sub("control.trade.manual_merge_done",function(i,a){var n=s._elm_dom_tradeList_container.find('[uniqueid="'+a[0]+'"]'),l=function(){s._elm_dom_container.find(".J_Select_All").prop("checked",!1);var t=s._elm_dom_tradeList_container.find(".J_Checkbox:checked");e.each(t,function(t,i){e(i).prop("checked",!1);var a=e(i).parents(".module-trade-list-item").attr("uniqueid");s.removeIdFromSelectedItemIds(a)});var i=a.slice(1);if(i.length)for(var n=0;n<i.length;n++){var l=i[n];s._elm_dom_tradeList_container.find('[uniqueid="'+l+'"]').remove(),s._tradeCollection&&s._tradeCollection.remove_id_from_id_list(l),s.removeIdFromSelectedItemIds(l)}};n=n.length?n:n.find("[uniqueid]:last"),s._re_render_item_list(i,n,l),t.removeSub("control.trade.manual_merge_done")}),w.queryByWWNo(a)},manual_merge_orders:function(i){var a=this;t.sub("control.trade.manual_merge_done",function(i,s){var n=a._elm_dom_tradeList_container.find('[uniqueid="'+s[0]+'"]'),l=function(){a._elm_dom_container.find(".J_Select_All").prop("checked",!1);var t=a._elm_dom_tradeList_container.find(".J_Checkbox:checked");e.each(t,function(t,i){e(i).prop("checked",!1);var s=e(i).parents(".module-trade-list-item").attr("uniqueid");a.removeIdFromSelectedItemIds(s)});var i=s.slice(1);if(i.length)for(var n=0;n<i.length;n++){var l=i[n];a._elm_dom_tradeList_container.find('[uniqueid="'+l+'"]').remove(),a._tradeCollection&&a._tradeCollection.remove_id_from_id_list(l),a.removeIdFromSelectedItemIds(l)}};n=n.length?n:n.find("[uniqueid]:last"),a._re_render_item_list(i,n,l),t.removeSub("control.trade.manual_merge_done")}),this._tradeCollection&&this._tradeCollection.command("manual_merge_orders",i)},trade_sync:function(){this.ctrl_guide||(this.ctrl_guide=RayCloud.controls.get("control.trade_sync_pop")),this.ctrl_guide.sync(e.proxy(function(){this.update(this._status_hashs,null,!0)},this))},trade_printlog_search:function(e){this._fn_load_printlog_list_data(e)},resend_product:function(){this._fn_start_to_resend_product(this.getSelectedItemIds())},"module.common_express.select":function(t,i,a){var s=e(a.target).parents("[uniqueid]").find('input[name="outSid"]').val(),n=!1;s&&/^\w*\d+\w*$/.test(s)&&(n=!0),_.show(t,i,a,n)},"module.common_express.edit":function(){m.show()},"module.shipping_address.edit":function(e){u.show(e)},"module.seller_memoflag.merge.edit":function(e,t){h.show(e,t)},"module.express.edit":function(e){f.show(e)},"module.print":function(e){v.show(e)},"module.message_memo.edit":function(e){g.show(e)},"module.logistics_info":function(e,t,i,a,s){b.show(e,t,i,a,s)},"module.close_trade":function(e,t,i){y.show(e,t,i,!0)},"module.trade_sync_single":function(i,a){var s=this;x.show(i,a,e.proxy(function(e){var a=t.template.get("template.pt.custom.list_item",s._fn_prehandle_data(e)),n=i.parents(".module-trade-wrap"),l=i.find(".J_Checkbox").prop("checked"),d=i.find(".J_Trigger_Show_Orders").hasClass("trade-icon-open"),o=s._fn_createItemUI(e);for(var r in o)o.hasOwnProperty(r)&&(a=a.replace(r,o[r]));i.replaceWith(a);var p=n.find(".module-trade-list-item[uniqueid="+o["@@uniqueid"]+"]");l&&p.find(".J_Checkbox").prop("checked",!0),d&&(p.find(".J_Trigger_Show_Orders").removeClass("trade-icon-close").addClass("trade-icon-open"),p.find(".module-trade-list-item-row3").show());for(var r in e.messageMemos)if(e.messageMemos.hasOwnProperty(r)){var c=e.messageMemos[r];p.find(".J_Tip[note-data-tid="+r+"]").iTip({skin:"blue",triggerType:"hover",content:c.sellerMemo})}},this))},"module.manual.merge.orders":function(e){w.show(e)},scan_to_send_goods:function(){S.show()},"module.delay_confirm":function(e,t,i){k.show(e,t,i)},"module.postage_update":function(e,t,i){T.show(e,t,i)},"module.address_reachable":function(t,i,a){var s=e(a.target).parents("[uniqueid]").find('input[name="outSid"]').val(),n=!1;s&&/^\w*\d+\w*$/.test(s)&&(n=!0),c.show(i,a,n)}},_fn_logistics_send_done:function(e){if(e){e=e.slice(0);for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');i.length?i.fadeOut(2e3,function(){i.remove()}):this.dl.removeData(e[t]),this.removeIdFromSelectedItemIds(e[t]),this._tradeCollection&&this._tradeCollection.remove_id_from_id_list(e[t])}}},_fn_logistics_online_send_done:function(e){if(e){e=e.slice(0);for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');if(i.length){var a=i.find('input[name="outSid"]').val();if(a&&/^\w*\d+\w*$/.test(a))i.fadeOut(2e3,function(){i.remove()}),this.removeIdFromSelectedItemIds(e[t]),this._tradeCollection&&this._tradeCollection.remove_id_from_id_list(e[t]);else{var s=i.find(".trade-hover");if(s.find('[data-name="logistics_offline_send"]').remove(),s.find('[data-name="logistics_online_send"]').remove(),s.find('[data-name="logistics_dummy_send"]').remove(),s.next().length||s.after('<span style="width:auto;" class="trade-icon-ff9000 trade-online-sending">在线发货</span>'),!s.find('[data-name="logistics_online_confirm"]').length){var n='<li data-name="logistics_online_confirm" class="trade-hover-item J_Click">确认在线发货</li><li data-name="logistics_online_cancel" class="trade-hover-item J_Click">取消在线发货</li>';s.find(".trade-hover-bd").children().first().before(n)}}}else this.dl&&this.getData(e[t])&&(0==this.getData(e[t])._has_outSid?this.dl.updateData(e[t],"canConfirmSend",1):(this.dl.removeData(e[t]),this.removeIdFromSelectedItemIds(e[t])))}}},_fn_logistics_online_cancel_done:function(e){if(e)for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');if(i.length){var a=i.find(".trade-hover");a.find('[data-name="logistics_online_confirm"]').remove(),a.find('[data-name="logistics_online_cancel"]').remove(),a.next().remove();var s=r.getModel(e[t]).toJSON().type,n=s==this._TRADE_TYPE.COD?'<li data-name="logistics_online_send" class="trade-hover-item J_Click">在线下单发货</li>':'<li data-name="logistics_offline_send" class="trade-hover-item J_Click">自己联系物流发货</li><li data-name="logistics_online_send" class="trade-hover-item J_Click">在线下单发货</li><li data-name="logistics_dummy_send" class="trade-hover-item J_Click">无需物流发货</li>';a.find('[data-name="logistics_online_send"]').length||a.find(".trade-hover-bd").children().first().before(n)}}},_fn_logistics_online_confirm_done:function(e){if(e){e=e.slice(0);for(var t=0;t<e.length;t++){var i=this._elm_dom_tradeList_container.find('[uniqueid="'+e[t]+'"]');i.length&&(i.fadeOut(2e3,function(){i.remove()}),this.removeIdFromSelectedItemIds(e[t]),this._tradeCollection&&this._tradeCollection.remove_id_from_id_list(e[t]))}}},_fn_print_express_done:function(e,i,a){if(e){for(var s=0;s<e.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+e[s]+'"]');if(n.length){var l=n.find(".J_expressStatus span"),d=n.find(".J_Operater"),o='<span class="trade-icon-818181 J_Tip" data-title="快递单未打印">快</span>',r='<span class="trade-icon-1b6fd7 J_Tip" data-title="快递单已打印">快</span>';a&&l.replaceWith(o)&&n.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a&&d.find('[data-name="print_express_undo"]').attr("data-name","print_express_end").html("快递单已打印"),!a&&l.replaceWith(r)&&n.find(".J_expressStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),!a&&d.find('[data-name="print_express_end"]').attr("data-name","print_express_undo").html("快递单未打印")}else a&&this.dl.updateData(e[s],"status",0),!a&&this.dl.updateData(e[s],"status",1)}t.removeSub(i)}},_fn_print_deliver_done:function(e,i,a){if(e){for(var s=0;s<e.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+e[s]+'"]');if(n.length){var l=n.find(".J_deliverStatus span"),d=n.find(".J_Operater"),o='<span class="trade-icon-818181 J_Tip" data-title="发货单未打印">发</span>',r='<span class="trade-icon-3d900a J_Tip" data-title="发货单已打印">发</span>';a&&l.replaceWith(o)&&n.find(".J_deliverStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a&&d.find('[data-name="print_deliver_undo"]').attr("data-name","print_deliver_end").html("发货单已打印"),!a&&l.replaceWith(r)&&n.find(".J_deliverStatus .J_Tip").iTip({skin:"blue",triggerType:"hover"}),!a&&d.find('[data-name="print_deliver_end"]').attr("data-name","print_deliver_undo").html("发货单未打印")}else a&&this.dl.updateData(e[s],"deliverStatus",0),!a&&this.dl.updateData(e[s],"deliverStatus",1)}t.removeSub(i)}},_fn_trade_verify_done:function(e,i,a){if(e){for(var s=0;s<e.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+e[s]+'"]');if(n.length){var l=n.find(".J_isVerify"),d=n.find(".J_Operater"),o='<span class="trade-icon-818181 J_Tip" data-title="订单未审核">审</span>',r='<span class="trade-icon-dc398a J_Tip" data-title="订单已审核">审</span>';a&&l.empty().append(o)&&n.find(".J_isVerify .J_Tip").iTip({skin:"blue",triggerType:"hover"}),a&&d.find('[data-name="trade_verify"]').remove(),a&&d.find('[data-name="trade_verify_cancel"]').attr("data-name","trade_verify").html("订单已审核"),!a&&l.empty().append(r)&&n.find(".J_isVerify .J_Tip").iTip({skin:"blue",triggerType:"hover"}),!a&&d.find('[data-name="trade_verify_cancel"]').remove(),!a&&d.find('[data-name="trade_verify"]').attr("data-name","trade_verify_cancel").html("订单未审核")}else a&&this.dl.updateData(e[s],"isVerify",0),!a&&this.dl.updateData(e[s],"isVerify",1)}t.removeSub(i)}},_fn_trade_halt_done:function(i,a,s){if(i){for(var n=0;n<i.length;n++){var l=this._elm_dom_tradeList_container.find('[uniqueid="'+i[n]+'"]');if(l.length)if(s)l.find(".J_isHalt").empty(),l.find('[data-name="trade_halt_cancel"]').attr("data-name","trade_halt").html("订单挂起");else{l.find(".J_isHalt").empty();var d=e('<span data-title="挂起订单" class="trade-icon-7327db J_Tip" title="">挂</span>').appendTo(l.find(".J_isHalt"));d.iTip({triggerType:"hover"}),l.find('[data-name="trade_halt"]').attr("data-name","trade_halt_cancel").html("取消挂起")}else s&&this.dl.updateData(i[n],"isHalt",0),!s&&this.dl.updateData(i[n],"isHalt",1)}t.removeSub(a)}},_fn_edit_message_memo_done:function(i,a,n){if(i){n.memo=s.escape(n.memo);for(var l=0;l<i.length;l++){var d=this._elm_dom_tradeList_container.find('[uniqueid="'+i[l]+'"]');if(d.length){var o="trade-icon-flag-0 trade-icon-flag-1 trade-icon-flag-2 trade-icon-flag-3 trade-icon-flag-4 trade-icon-flag-5 trade-icon-flag-6";""!==n.flag&&d.find(".trade-icon-flag").removeClass(o).addClass("trade-icon-flag-"+n.flag);{var r=d.find(".trade-icon-beizu");d.find(".msg-seller-memo")}if(r.length)"true"===n.reset?""===n.memo?r.attr("data-title","").hide():r.show().attr("data-title",n.memo).iTip({skin:"blue",triggerType:"hover",content:n.memo}):e.each(r,function(t,i){var a=e(i),s=a.attr("data-title")+n.memo;a.show().attr("data-title",s).iTip({skin:"blue",triggerType:"hover",content:s})});else{var p=d.find(".message-note"),c=p.find(".memo-place-holder"),_="";if(n.memo){for(var m=0;m<c.length;m++)_+='<span data-title="'+n.memo+'" data-name="trigger_show_orders" note-data-tid="'+e(c[m]).attr("note-data-tid")+'" class="ml_5 trade-icon-beizu J_Tip J_Click" title=""></span>';c.remove(),p.append(_).find(".J_Tip").iTip({skin:"blue",triggerType:"hover",content:n.memo})}}d.find(".msg-seller-memo").length?"true"===n.reset?d.find(".msg-seller-memo").html(n.memo):e.each(d.find(".msg-seller-memo"),function(t,i){var a=e(i);a.html(a.html()+n.memo)}):n.memo&&d.find(".trade-icon-edit").before('<span class="msg-seller-memo" style="word-wrap: break-word;">'+n.memo+"</span>")}else{var u=i[l].split("_")[0],h=n.memo?1:0;this.dl&&this.dl.updateJsonData(i[l],"_has_sellerMemo",h,"messageMemos",u),this.dl&&this.dl.updateJsonData(i[l],"sellerMemo",n.memo,"messageMemos",u),this.dl&&""!==n.flag&&this.dl.updateJsonData(i[l],"sellerFlag",1*n.flag,"messageMemos",u)}}t.removeSub(a)}},_fn_edit_single_message_memo_done:function(e,i,a,n,l){if(i){var d=a.attr("data-tid"),o=(e.find(".order-temp"),"trade-icon-flag-0 trade-icon-flag-1 trade-icon-flag-2 trade-icon-flag-3 trade-icon-flag-4 trade-icon-flag-5 trade-icon-flag-6"),r=a.parent().find(".trade-icon-flag"),p=a.parent().find(".msg-seller-memo");if(l.memo=s.escape(l.memo),r.length)r.removeClass(o).addClass("trade-icon-flag-"+1*l.flag);else{var c='<span data-name="trigger_show_orders" class="ml_5 trade-icon-flag '+1*l.flag+' J_Click"></span>';a.parent().find(".note-wording").after(c)}if(p.length)p.html(l.memo);else{var _='<span style="word-wrap: break-word;" class="msg-seller-memo">'+l.memo+"</span>";a.before(_)}var m=e.find(".message-note"),u=m.find('[flag-data-tid="'+d+'"]'),h=m.find('[note-data-tid="'+d+'"]');if(u.hasClass("flag-place-holder")){var c='<span data-name="trigger_show_orders" class="ml_5 trade-icon-flag-'+1*l.flag+' J_Click" flag-data-tid="'+d+'"></span>';u.replaceWith(c)}else u.removeClass(o).addClass("trade-icon-flag-"+1*l.flag);if(h.hasClass("memo-place-holder")){if(""!=l.memo){var f='<span data-title="'+l.memo+'" note-data-tid="'+d+'" data-name="trigger_show_orders" class="ml_5 message-memo trade-icon-beizu J_Tip J_Click" title=""></span>';h.replaceWith(f),m.find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})}}else h.show().attr("data-title",l.memo).iTip({skin:"blue",triggerType:"hover",content:l.memo});t.removeSub(n)}},_fn_item_express_updated:function(e,i,a,s){if(e&&a){for(var n="",l="",d=0,o=0,p=0;p<a.length;p++)if(i==a[p].templateId){n=a[p].templateName,l=a[p].isWlb,d=a[p].expressId;break}s&&s.canDelivereds&&s.canDelivereds.length>0&&(o=s.canDelivereds[0],1!=o&&(o=0));var c=this._elm_dom_tradeList_container.find('[uniqueid="'+e+'"]'),_=r.getModel(e).toJSON().status;r.getModel(e)._save({expressTemplateType:l}),c.find(".J_Express_Container").html(this._fn_create_expressUI({status:_,expressTemplateName:n,expressTemplateId:String(i).replace(/w/,""),expressTemplateType:l,outSid:"",canDelivered:o,sendGoods:4==t.pages._fn_act_get_hashs().queryId?1:0})).find(".J_Tip").iTip({triggerType:"hover",skin:"blue"})}},_fn_edit_logistics_done:function(e){if(e)for(var t=this,i=e.ids,a=e.outSids,s=0;s<i.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+i[s]+'"]');if(a[s]=-1==a[s]?"":a[s],n.length){var l,d=n.find(".J_Express_Name"),o=d.attr("data-value"),p=n.find('input[name="outSid"]').val();l=a[s]&&p!=a[s]||o!=e.templateId?a[s]:p;var c=r.getModel(i[s]).toJSON().sendGoods,_=r.getModel(i[s]).toJSON().canDelivered;e.canDelivereds&&e.canDelivereds.length>s&&(_=e.canDelivereds[s]),n.find(".J_Express_Container").html(this._fn_create_expressUI({sendGoods:c,expressTemplateName:e.templateName,expressTemplateId:e.templateId,expressTemplateType:e.templateType,outSid:l,canDelivered:_})).find(".J_Tip").iTip({triggerType:"hover",skin:"blue"})}else{var m=t.dl&&t.dl.getData(i[s]);t.dl&&t.dl.updateData(i[s],"expressTemplateId",e.templateId),t.dl&&t.dl.updateData(i[s],"expressTemplateName",e.templateName),t.dl&&t.dl.updateData(i[s],"expressTemplateType",e.templateType),(a[s]&&m.outSid!=a[s]||m.expressTemplateId!=e.templateId)&&t.dl&&t.dl.updateData(i[s],"outSid",a[s])}}},_fn_close_trade:function(e,t){var i=e.attr("taobaoid");this._fn_event_handler("module.close_trade")(e,t,i)},_fn_trade_sync_single:function(e,t){this._fn_event_handler("module.trade_sync_single")(e,t)},_fn_trade_delay_confirm:function(e,t){var i=e.attr("taobaoid");this._fn_event_handler("module.delay_confirm")(e,t,i)},_fn_trade_postage_update:function(e,t){var i=e.attr("taobaoid");this._fn_event_handler("module.postage_update")(e,t,i)},_fn_trade_address_reachable:function(e,t,i){e.attr("taobaoid");this._fn_event_handler("module.address_reachable")(e,t,i)},_fn_edit_logistics_done_4resend:function(e){if(e)for(var t=this,i=e.ids,a=e.outSids,s=0;s<i.length;s++){var n=this._elm_dom_tradeList_container.find('[uniqueid="'+i[s]+'"]');
if(a[s]=-1==a[s]?"":a[s],n.length)n.find(".goods-express-name").html(e.templateNames[s]),n.find(".goods-express-no").html(a[s]),n.find('[name="express_wlb_info"]').remove();else{var l=t.dl&&t.dl.getData(i[s]);t.dl&&t.dl.updateData(i[s],"expressTemplateName",e.templateNames[s]),(a[s]&&l.outSid!=a[s]||l.expressTemplateId!=e.templateId)&&t.dl&&t.dl.updateData(i[s],"outSid",a[s])}}},_fn_to_save_item_outid_done:function(e){if(e){var t=e.ids,i=e.outSids,a=this._elm_dom_tradeList_container.find('[uniqueid="'+t+'"]');i="N/A"==i[0]?"":i[0],a.find('input[name="outSid"]').val(i).attr("data-value",i)}},_fn_batch_update_express_id_done:function(e){var t=this;if(e)for(var i=e.ids,a=e.outSids,n=e.templateId,l=s.escape(e.expressTemplateName),d=0;d<i.length;d++){var o=this._elm_dom_tradeList_container.find('[uniqueid="'+i[d]+'"]');if(o.length){var p=r.getModel(i[d]).toJSON().sendGoods,c=0;e.canDelivereds&&e.canDelivereds.length>d&&(c=e.canDelivereds[d]),o.find(".J_Express_Container").html(this._fn_create_expressUI({sendGoods:p,expressTemplateName:l,expressTemplateId:n,expressTemplateType:e.templateType,outSid:a[d],canDelivered:c})).find(".J_Tip").iTip({triggerType:"hover",skin:"blue"})}else t.dl&&t.dl.updateData(i[d],"outSid",a[d]),t.dl&&t.dl.updateData(i[d],"expressTemplateId",n),t.dl&&t.dl.updateData(i[d],"expressTemplateType",e.templateType),t.dl&&t.dl.updateData(i[d],"expressTemplateName",l)}},_fn_render_load_list_data:function(e,t){var i=t.list;this._status_list={};for(var a=0;a<i.length;a++)this._status_list[i[a].id]=i[a];return i.length?(e._selectall_unchecked_by_item_checkbox=!1,e._selected_item_ids=[],e._tradeCollection&&e._tradeCollection.destroy(),e._tradeCollection=new p(i),e.dl&&e.dl.destroy(),e._elm_dom_tradeList_container.off("click").empty(),e.dl=new C.DynamicList({target:".J_TradeList_Body",templateName:"template.pt.custom.list_item",fnHandleData:e._fn_prehandle_data,offset:20,itemCount:20,itemHeight:58,onItemAdded:function(t){return e._fn_createItemUI(t)},onBatchAdded:function(t,i){if(i.length){var a=e._elm_dom_container?e._elm_dom_container.find(".J_Select_All").prop("checked"):!1,s=e._elm_dom_container?e._elm_dom_container.find(".J_Trigger_Trade_Orders").prop("checked"):!1;(a||e._selectall_unchecked_by_item_checkbox)&&(i.find(".J_Checkbox").prop("checked",!0),i.addClass("module-trade-list-item-selected")),s&&i.find(".J_Trigger_Show_Orders").addClass("trade-icon-open").removeClass("trade-icon-close"),s&&i.find(".module-trade-list-item-row3").show(),i.find(".J_Tip").iTip({skin:"blue",triggerType:"hover"})}},onOnceItemAdded:function(t){t.on("click",function(t){_&&_.hide(),e._fn_actions_on_items(t)}),t.on("focus",".J_Focusout",function(t){e._fn_actions_focusin_item(t)}),t.on("blur",".J_Focusout",function(t){e._fn_actions_focusout_item(t)})}},i),n.update_search_total(t.total),void d.update_pages(t)):(e._tradeCollection&&e._tradeCollection.destroy(),e.dl&&e.dl.destroy(),e._fn_dom_update_tradeList_noResult(),void d.update_pages())},_tradeCollection:null,_fn_ctrl_update_tradeList:function(e){var t=this;e.sendGoods="4"==e.queryId?1:0,this._fn_load_list_data(e,function(e){t._fn_render_load_list_data(t,e)},function(){n.update_search_total(0),t._fn_dom_update_tradeList_error(),d.update_pages()})},_fn_load_list_data:function(i,a,s){var n=this;n.shopListInfo="",n.orderList={};var l=t.pages._fn_act_get_hashs();4==l.queryId?(e(".J_add_infor_dio").hide(),e(".J_batch_get_in").hide()):(e(".J_add_infor_dio").show(),e(".J_batch_get_in").show()),i.order||(i.order="desc"),API.pt_custom_user_list(i,function(e){for(var t=e.data,i=0;i<t.list.length;i++)n.orderList[t.list[i].id]=t.list[i];n.shopListInfo=t.shopList,a&&a(t)},function(e){s&&s(e)})},_fn_prehandle_data:function(i){i._buyerWangwang=encodeURIComponent(i.buyerNick),i=e.extend({outSid:"",expressTemplateName:"",expressTemplateType:0,receiverAddress:"",receiverCity:"",receiverDistrict:"",receiverState:"",receiverName:"",receiverZip:"",receiverPhone:"",itemKindCount:"",itemCount:""},i);var a=t.pages._fn_act_get_hashs();if("true"==a.sys)if(8==a.queryId||3==a.queryId){var s={WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"待发货",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"};i.toShowTradeMessage=s[i.status]?1:0,i.tradeMessage=s[i.status]||""}else 1==a.queryId&&(i.maybeShowChaiMessage=1);var n=!0,l=!0,d=!0;if(i.highlights)for(var o in i.highlights)if("orders"===o){var r=i.highlights.orders;this._status_highlights_orders=i.highlights.orders,e.each(i.orders,function(e,t){var a=r[t.oid];if(a){var s=i.orders[e];for(var n in a)s[n]&&!s[n].match(/[<>]/g)&&(s[n]=a[n])}}),delete i.highlights.orders}else i[o]&&!i[o].match(/[<>]/g)&&(i[o]=i.highlights[o],"receiverAddress"===o&&(n=!1));return i.escapeSellerMemo=l,i.escapeBuyerMessage=d,i.escapeAddress=n,i._show_shop_name=0,this._userData||(this._userData=t.user._data),this._userData&&1==this._userData.userConf.mmb&&this._userData.bindShops.length>1&&(i._show_shop_name=1),i},_fn_createItemUI:function(e){var t=e.tid+"_"+e.sysTid;e.orders=e.orders||[],e=this._fn_prehandle_data(e);var i=this._fn_create_expressUI(e),a=this._fn_create_operateUI(e),s=this._fn_create_addressUI(e),n=this._fn_create_orderUI(e);return{"@@uniqueid":t,"@@expressUI":i.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@operateUI":a.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@addressUI":s.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script"),"@@orderUI":n.replace(/\$/g,"&#36;").replace(/<script/gi,"&lt;script").replace(/<\/script/g,"&lt;/script")}},_fn_create_expressUI:function(i){return i._has_outSid=""!==e.trim(i.outSid)?1:0,t.template.get("template.pt.custom.express",i)},_fn_create_MemoUI:function(i){var a,n=i.escapeSellerMemo,l=i.escapeBuyerMessage,d=(e.extend(!0,{},i),[]),o=null,r=i.orders;return e.each(r,function(e,t){o!==t.tid&&(a=i.messageMemos&&i.messageMemos[t.tid],a&&(a.buyerMessage&&(a.buyerMessage=l===!1?a.escapeBuyerMessage:s.escape(a.buyerMessage),a._buyerMessage=l===!1?a.escapeBuyerMessage:s.escape(a.buyerMessage),a._buyerMessage=a._buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),a.sellerMemo&&(a.sellerMemo=n===!1?a.buyerMessage:s.escape(a.sellerMemo),a._sellerMemo=n===!1?a.buyerMessage:s.escape(a.sellerMemo),a._sellerMemo=a._sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),a._has_buyerMessage=a.buyerMessage?1:0,a._has_sellerMemo=a.sellerMemo?1:0,a._has_sellerFlag=void 0!==a.sellerFlag?1:0,d.push(a)),o=t.tid)}),t.template.get("template.pt.custom.messageMemos")},_fn_create_operateUI:function(e){return t.template.get("template.pt.custom.operater",e)},_fn_create_addressUI:function(e){var i=e.escapeAddress;return e._has_receiverMobile=e.receiverMobile?1:0,e.receiverPhone=e.receiverPhone||"",e.receiverAddress=e.receiverAddress||"",e.receiverAddress=i===!1?e.receiverAddress:s.escape(e.receiverAddress),t.template.get("template.pt.custom.shipping_address_list",e)},_fn_create_orderUI:function(i){var a=this,n=!0,l=!0,d=[],o=0,r=null,p={WAIT_BUYER_PAY:"待付款",WAIT_SELLER_SEND_GOODS:"买家已付款",WAIT_BUYER_CONFIRM_GOODS:"已发货",TRADE_FINISHED:"交易成功",TRADE_CLOSED:"交易关闭",TRADE_CLOSED_BY_TAOBAO:"交易关闭"},c={WAIT_SELLER_AGREE:"买家申请退款",WAIT_BUYER_RETURN_GOODS:"卖家同意退款",WAIT_SELLER_CONFIRM_GOODS:"买家退货中",SELLER_REFUSE_BUYER:"卖家拒绝退款"};e.each(i.orders,function(e,t){t.status_name=p[t.status]||"",t._has_sku=t.skuPropertiesName?1:0,t._has_sku&&(t.skuPropertiesName=t.skuPropertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;">$1</span>')),t._outerId=t.outerSkuId||t.outerId||"",t._has_outerId=t._outerId?1:0,t._sort_time=a._fn_get_sort_time(t),1===t.isRefund&&(t._refundStatus=c[t.refundStatus]||"",t._refundStatus||(t.isRefund=-1)),r!==t.tid?(r&&t.tid&&o++,d[o]=d[o]||{list:[]},d[o].oid=t.oid,d[o].tid=t.tid,d[o].taobaoId=t.taobaoId,d[o].mergeSplitType=i.mergeSplitType,d[o].maybeShowChaiMessage=i.maybeShowChaiMessage||0,d[o]._sort_time=t._sort_time,d[o].list.push(t),r=t.tid):d[o].list.push(t)});var _,m=[];return e.each(d,function(a,d){_=i.messageMemos?i.messageMemos[d.tid]:{},e.extend(d,_),d.paymentDisplay=d.paymentDisplay||i.paymentDisplay||"",d._has_paymentDisplay=d.paymentDisplay?1:0,d._has_buyerMessage=d.buyerMessage?1:0,d._has_sellerMemo=d.sellerMemo?1:0,d._has_sellerFlag=void 0!==d.sellerFlag?1:0,d.buyerMessage&&(d.buyerMessage=l===!1?d.buyerMessage:s.escape(d.buyerMessage),d.buyerMessage=d.buyerMessage.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),d.sellerMemo&&(d.sellerMemo=n===!1?d.sellerMemo:s.escape(d.sellerMemo),d.sellerMemo=d.sellerMemo.replace(/[\r\n]/g,"<br>").replace(/\s/g,"&nbsp;")),d.sysTid=i.sysTid||"",d.status=i.status||"",d.sendGoods=i.sendGoods;var o=t.pages._fn_act_get_hashs();m.push(t.template.get("template.pt.custom.orders",d,o))}),m.join("")},_fn_get_sort_time:function(e,i){var a="",s="",n=t.pages._fn_act_get_hashs();if(n.dateStatus)a=n.dateStatus;else{var l={pt_custom_1:"1",pt_custom_4:"2"};n.queryId||(n.queryId=1),a=l[n.root+"_"+n.app+"_"+n.queryId]}switch(i=i||{dateStatus:a||"1"},i.dateStatus){case"2":s="发货："+t.util.date.getdate(e.consignTime,"YY-MM-DD HH:MM:SS");break;default:s="交易："+t.util.date.getdate(e.payTime,"YY-MM-DD HH:MM:SS")}return s},_fn_actions_on_items:function(a){var s=this,n=e(a.target),l=n.attr("data-name");if(l){var d=n.parents(".module-trade-list-item"),o=d.attr("uniqueid");switch(l){case"check_select_item":s._fn_to_check_item(n,d);break;case"trigger_show_orders":s._fn_to_show_orders(a,d);break;case"item-save-outid":s._fn_to_save_item_outid(d,o);break;case"change_express":s._fn_to_change_express(d,o,a);break;case"batch_update_express_id":s._fn_to_update_batch_express_id(d,o,n);break;case"print":s._fn_to_print(o);break;case"cancel_merge":s._fn_to_cancel_merge(o,a);break;case"cancel_split":s._fn_to_cancel_split(o,a);break;case"split":s._fn_to_split(o,a);break;case"trade-icon-canmerged":n.next().css("display","inline");break;case"canmerged-close-icon":n.parent().hide();break;case"manual_merge_orders":var r=o.split("_")[0],p=d.attr("taobaoId");API.trade_merge_list({tid:r,taobaoId:p},function(e){var t=e.data.list;t&&s._fn_event_handler("manual_merge_orders")(t)},function(){},!1);break;case"logistics_online_confirm":var s=this,c="control.trade.view.click.logistics_online_confirm.done";t.sub(c,function(e){s._fn_logistics_online_confirm_done(e),t.removeSub(c)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_confirm",[o],d.find('input[name="outSid"]').val());break;case"logistics_online_cancel":var s=this,c="control.trade.view.click.logistics_online_cancel.done";t.sub(c,function(e){s._fn_logistics_online_cancel_done(e),t.removeSub(c)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_cancel",[o]);break;case"logistics_offline_send":var s=this,c="control.trade.module.logistics_offline_send.done",_=this._fn_check_exceptionData(o,!0,d);if(_)return;t.sub(c,function(e){s._fn_logistics_send_done(e),t.removeSub(c)}),this._tradeCollection&&this._tradeCollection.command("logistics_offline_send",[o]);break;case"logistics_online_send":var s=this,c="control.trade.view.click.logistics_online_send.done",_=this._fn_check_exceptionData(o,!1,d);if(_)return;t.sub(c,function(e){s._fn_logistics_online_send_done(e),t.removeSub(c)}),this._tradeCollection&&this._tradeCollection.command("logistics_online_send",[o]);break;case"reset_edit":var m=e(a.target),u=m.closest(".module-trade-list-item"),h=u.data("id"),f=this._status_list[h];f.payTime=t.util.date.getdate(f.payTime,"YY-MM-DD HH:MM");for(var v=t.util.date.getdate((new Date).getTime(),"YY-MM-DD HH:MM"),s=this,g=f.sellerFlag,b=0,y=0;y<f.orders.length;y++)b+=parseInt(f.orders[y].num);if(!s.shopList.length){var x=t.user.get().userConf;if(0==x.mmb)s.shopList.push({id:f.shop.id,title:f.shop.title,taobaoId:f.shop.taobaoId});else if(1==x.mmb)for(var w=s.shopListInfo,y=0;y<w.length;y++)s.shopList.push({id:w[y].id,title:w[y].title,taobaoId:w[y].taobaoId})}f.expressTemplateId=u.find(".J_Express_Name").data("value"),f.expressTemplateName=u.find(".J_Express_Name").text(),f.prodNum=b,s.dia_add_inf=e.dialog({title:"重新编辑",content:t.template.get("template.pt.custom.editor_prod",{list:f,shoplistCount:s.shopList.length,today:v}),okVal:"保存",cancelVal:"取消",ok:function(){return s._fn_print_info_ok("pt_custom_user_edit",h),!1},cancel:function(){},close:function(){s._fn_price_unbind_event(),s._unbind_events(e(".c_add_stamp_information"))},width:460,lock:!0,resize:!1,fixed:!1}),e(".c_add_stamp_information").find(".m-split-info").iTip({skin:"blue",triggerType:"hover",zIndex:2e4}),s._bind_events(e(".c_add_stamp_information")),s._fn_price_bind_event();var k=(e("body").find(".J_list_prod").find(".list_main"),e(".editor_prod_box"));k.find("input[type=radio]").iCheck(),k.find(".infor_home select").iSelect("select",f.shop.id.toString()),k.find(".flagRadio_"+g).parent(".iradio").addClass("checked"),s._fn_address(e(".editor_prod_box").find(".area_select"),{sendState:f.receiverState,sendCity:f.receiverCity,sendDistrict:f.receiverDistrict}),API.pt_custom_user_query({id:e(".editor_prod_box").find(".to_infor_btn").data("id"),detail:!0},function(i){var a=i.data;e(".j_express_templet").find(".J_Express_Name").attr("codeNumber",a.codeNumber),e(".j_express_templet").find(".J_Express_Name").attr("iswlb",a.templateType);for(var n=0;n<a.userCustomPrintItems.length;n++)a.userCustomPrintItems[n].index=n+1,a.userCustomPrintItems[n].propertiesName&&(a.userCustomPrintItems[n].propertiesName=a.userCustomPrintItems[n].propertiesName.replace(/\:([^;]+)/g,':<span style="color:brown;">$1</span>'));e(".J_list_prod").html(t.template.get("template.pt.custom.editor_prod_item",{list:a.userCustomPrintItems})),s._fn_price();e(t.template.get("template.pt.custom.send_prod_information",i.data)).appendTo(".to_information");e.trim(a.shopName)&&e(".infor_home_text").attr("shopid",a.shopid).text(a.shopName),s._fn_address(e(".editor_prod_box").find(".area_select1"),{sendState:i.data.sendProvince,sendCity:i.data.sendCity,sendDistrict:i.data.sendArea})});break;case"del_list":var m=e(a.target);e.dialog.confirm("您确定要删除吗？",e.proxy(function(){var t=m.parents(".module-trade-list-item").attr("data-id");API.pt_custom_user_batchDelete({ids:t},function(){m.parents(".module-trade-list-item").fadeOut(300,function(){e(this).remove()})})},this));case"logistics_dummy_send":var s=this,c="control.trade.view.click.logistics_dummy_send.done";t.sub(c,function(e){s._fn_logistics_send_done(e),t.removeSub(c)}),this._tradeCollection&&this._tradeCollection.command("logistics_dummy_send",[o]);break;case"trade_halt":t.sub("control.trade.view.click.trade_halt.done",function(){t.showSuccess("操作成功！",.8);var i=e('<span data-title="挂起订单" class="trade-icon-7327db J_Tip" title="">挂</span>').appendTo(d.find(".J_isHalt"));i.iTip({triggerType:"hover"}),d.find('[data-name="trade_halt"]').attr("data-name","trade_halt_cancel").html("取消挂起"),t.removeSub("control.trade.view.click.trade_halt.done")}),t.pub("control.trade.view.click.trade_halt",o,!0);break;case"trade_halt_cancel":t.sub("control.trade.view.click.trade_halt_cancel.done",function(){t.showSuccess("操作成功！",.8),d.find(".J_isHalt").empty(),d.find('[data-name="trade_halt_cancel"]').attr("data-name","trade_halt").html("订单挂起"),t.removeSub("control.trade.view.click.trade_halt_cancel.done")}),t.pub("control.trade.view.click.trade_halt",o,!1);break;case"print_express_end":var s=this,c="control.trade.view.click.print_express_end.done";t.sub(c,function(e){s._fn_print_express_done(e,c,!1)}),i.print_express([o],!0),t.pub("control.trade.view.click.print_express_end",o,!0);break;case"print_express_undo":var s=this;c="control.trade.view.click.print_express_undo.done",t.sub(c,function(e){s._fn_print_express_done(e,c,!0)}),i.print_express([o],!1),t.pub("control.trade.view.click.print_express_end",o,!1);break;case"print_deliver_end":var s=this,c="control.trade.view.click.print_deliver_end.done";t.sub(c,function(e){s._fn_print_deliver_done(e,c,!1)}),i.print_deliver([o],!0);break;case"print_deliver_undo":var s=this,c="control.trade.view.click.print_deliver_undo.done";t.sub(c,function(e){s._fn_print_deliver_done(e,c,!0)}),i.print_deliver([o],!1);break;case"trade_verify":var s=this,c="control.trade.view.click.trade_verify.done";t.sub(c,function(e){s._fn_trade_verify_done(e,c,!1)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",[o],!0);break;case"trade_verify_cancel":var s=this,c="control.trade.view.click.trade_verify_cancel.done";t.sub(c,function(e){s._fn_trade_verify_done(e,c,!0)}),this._tradeCollection&&this._tradeCollection.command("trade_verify",[o],!1);break;case"edit_shipping_address":s._fn_to_change_shipping_address(d,o);break;case"edit_messageMemos":s._fn_to_edit_messageMemos(d,o,n);break;case"logistics_info":var r=n.attr("data-tid"),p=n.attr("data-taobaoId"),T=n.attr("data-oid")||"";t.pub("control.trade.view.click.logistics_info",o,r,p,T,a);break;case"resend_product":this._fn_start_to_resend_product([o]);break;case"create_wlb_no":var S=d.find(".J_Express_Name").attr("data-value").replace(/w/,""),C=d.find('[data-name="create_wlb_no"]').attr("data-value");if(C)return;t.pub("control.trade.view.click.create_wlb_no",o,S);break;case"express_wlb_info":var S=d.find(".J_Express_Name").attr("data-value").replace(/w/,"");t.sub("control.trade.view.click.express_wlb_info.done",s._getWlbInfo=function(e){s._fn_get_wlb_info_done(d,e),t.removeSub("control.trade.view.click.express_wlb_info.done",s._getWlbInfo)}),t.pub("control.trade.view.click.express_wlb_info",o,S);break;case"trade_close":s._fn_close_trade(d,o);break;case"trade_sync_single":s._fn_trade_sync_single(d,o);break;case"delay_confirm":s._fn_trade_delay_confirm(d,o);break;case"trade_postage_update":s._fn_trade_postage_update(d,o);break;case"address_reachable":s._fn_trade_address_reachable(d,o,a);break;case"copy-wangwang-inmenu":break;case"open-wangwang-inmenu":break;case"merge-order-inmenu":s._fn_event_handler("manual_merge_orders_by_wangwangNo")(a,n.attr("wangwangNo"))}}},_fn_print_info_ok:function(i,a){var s=this,n=e(".c_add_stamp_information"),l=n.find(".in_information"),d=n.find(".to_information"),o=n.find(".J_list_prod"),r=o.find(".list_main"),p=[],c=[];r.each(function(){var t=e(this),i={itemName:t.find(".l_itemName").text(),propertiesName:t.find(".propertiesName_color").text(),itemPic:t.find(".order_main_image").find("img").data("picpath"),outerId:t.find(".order_code").text(),num:t.find(".J_number_prod").text(),numIid:t.data("numiid"),priceOutput:t.find(".price_prod_J").val()?e(this).find(".price_prod_J").val():0,skuId:t.data("skuid"),shotTitle:t.data("shottitle"),propertiesShortName:t.data("propertiesshortname"),warning:""};a&&(i.userCustomPrintId=a),-1==c.indexOf(t.data("numiid"))&&c.push(t.data("numiid")),p.push(i)});var _=d.find(".area_select1").find("select:eq(0) option:selected").text(),m=d.find(".area_select1").find("select:eq(1) option:selected").text(),u=d.find(".area_select1").find("select:eq(2) option:selected").text(),h=n.find(".J_Express_Name"),f=h.attr("id");f&&"w"===f.substring(0,1)&&(f=f.replace(/w/,""));var v="";l.find(".area_select").find("select:eq(2)").is(":visible")&&l.find(".area_select").find("select:eq(2)").val()&&(v=l.find(".area_select").find("select:eq(2) option:selected").text());var g={shopId:l.find(".infor_home_text option:selected").val()||l.find(".infor_home_text").attr("shopId"),taobaoId:l.find(".infor_home_text option:selected").attr("taobaoId")||l.find(".infor_home_text").attr("taobaoId"),receiverName:l.find(".infor_name_text").val(),sendMobilePhone:d.find(".info_phone_text").val(),sendPhone:d.find(".info_mobiel_text").val(),sendProvince:_,sendCity:m,sendArea:u,sendDetailAddress:d.find(".info_address_detailed").val(),sendName:d.find(".infor_name_text").val(),sendPostCode:d.find(".info_zip").val(),receiverTel:l.find(".info_mobiel_text").val(),receiverMobile:l.find(".info_phone_text").val(),receiverProvince:l.find(".area_select").find("select:eq(0)").val()?l.find(".area_select").find("select:eq(0) option:selected").text():"",receiverCity:l.find(".area_select").find("select:eq(0)").val()?l.find(".area_select").find("select:eq(1) option:selected").text():"",receiverArea:v,receiverZip:l.find(".info_zip").val(),receiverDetailAddress:l.find(".info_address_detailed").val(),flag:l.find(".flagRadio:checked").val(),sellerMemo:l.find(".sellerMemo").val(),tradeTimeMills:t.util.date.tojsdate(l.find(".tradeTime").val()).getTime(),payMoney:n.find(".money_pay").val(),templateId:f,templateName:h.text(),templateType:h.attr("iswlb"),codeNumber:h.attr("codeNumber"),templateTaobaoId:h.attr("taobaoId"),totalPrice:n.find(".prod_money_box").text(),carriage:n.find(".freight_money").val(),payMoney:n.find(".money_pay").val(),userCustomPrintItemJson:p,itemKind:c.length};if(!g.receiverName)return void e.dialog.alert("请填写客户姓名！");if(!g.receiverMobile&&!g.receiverTel)return void e.dialog.alert("请填写手机或固话！");if(g.receiverMobile&&!/^(0|86|17951)?(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[0-9])[0-9]{8}$/.test(g.receiverMobile))return void e.dialog.alert("收件信息手机号码格式不正确，请重新输入");if(g.receiverTel){if(g.receiverTel.indexOf("-")>=0&&!/^\d{3,4}-\d{7,8}$/.test(g.receiverTel))return void e.dialog.alert("收件信息固话格式不正确，请重新输入");if(g.receiverTel.indexOf("-")<0&&!/^\d{7,8}$/.test(g.receiverTel))return void e.dialog.alert("收件信息固话格式不正确，请重新输入")}if(!g.receiverDetailAddress)return void e.dialog.alert("请填写详细地址！");if(!g.templateId)return void e.dialog.alert("请选择快递模版！");if(g.sendMobilePhone&&!/^(0|86|17951)?(13[0-9]|15[0-9]|17[0-9]|18[0-9]|14[0-9])[0-9]{8}$/.test(g.sendMobilePhone))return void e.dialog.alert("发货信息手机号码格式不正确，请重新输入");if(g.sendPhone){if(g.sendPhone.indexOf("-")>=0&&!/^\d{3,4}-\d{7,8}$/.test(g.sendPhone))return void e.dialog.alert("发货信息固话格式不正确，请重新输入");if(g.sendPhone.indexOf("-")<0&&!/^\d{7,8}$/.test(g.sendPhone))return void e.dialog.alert("发货信息固话格式不正确，请重新输入")}a&&(g.id=a),API[i](JSON.stringify(g),function(i){1!=i.result?e.dialog.alert(i.message):(s.dia_add_inf.close(),t.user.get().taobaoId!=g.taobaoId?e.dialog.alert("该订单不是主店铺的订单，无法显示，请切换至子店铺查看！"):RayCloud.pages.setCurHash({t:Math.random()}))})},_fn_address:function(e,t){var i="";t?(i=new component.AddrDropDown,i.renderUI(e,[{name:"sendState",value:t.sendState},{name:"sendCity",value:t.sendCity},{name:"sendDistrict",value:t.sendDistrict}])):new component.AddrDropDown(e)},_fn_start_to_resend_product:function(i){if(!i.length)return void e.dialog.alert("您还未选择订单！");for(var a="",s="",n=[],l=0;l<i.length;l++){var d=r.getModel(i[l]).toJSON(),o=d.canConfirmSend,p=d.isRefund;if(1==p&&n.push(d.tid+"<br/>"),""!==a&&a!=o){s="请选择相同发货方式的订单，例如都是自己联系物流发货的订单.";break}a=o}if(s||(s=2==a?"无需物流发货不支持重新发货。":""),!s&&n.length&&(s="以下订单为退款订单，请先处理再重新发货！订单号："+n.join(",")),s)return void e.dialog.alert(s);var c=t.controls.get("control.trade.module.resend.product");c.show(i)},_fn_create_wlb_no_done:function(t,i){if(t){var a=this._elm_dom_tradeList_container.find('[uniqueid="'+t+'"]'),s=a.find('[data-name="create_wlb_no"]');if(i.successResult.length){var n=i.successResult[0].outSid;s.val(n).attr("data-value",n),e('<a class="m-outsid-callback-btn j-outsid-callback-btn" href="javascript:;" data-title="回收单号"></a>').insertAfter(s).iTip({skin:"blue",triggerType:"hover",zIndex:2e4})}}},_fn_get_wlb_info_done:function(e,i){var a=t.controls.get("control.trade.module.wlb.info.dialog"),s=e.find(".J_Express_Name"),n=s.html(),l=s.attr("data-value");a.show(i,n,l,e)},_fn_to_check_item:function(t,i){var a=this,s=e(t).prop("checked"),n=i.attr("uniqueid"),l=this._elm_dom_container.find(".J_Select_All");s?(i.addClass("module-trade-list-item-selected"),this.addIdToSelectedItemIds(n),this.getSelectedItemIds().length===this._tradeCollection.id_list.length&&l.prop("checked",!0)):(i.removeClass("module-trade-list-item-selected"),this.removeIdFromSelectedItemIds(n),l.prop("checked")&&(a._selectall_unchecked_by_item_checkbox=!0,l.prop("checked",!1)))},_fn_to_show_orders:function(i,a){{var s=this,n=a.find(".J_Trigger_Show_Orders"),l=e(i.target);l.parents(".module-trade-list-item").data("consigntime")}if(n.hasClass("trade-icon-close")){var d=l.parents(".module-trade-list-item").data("id"),o=s.orderList[d];o._sort_time=s._fn_get_sort_time(o);{var r=l.parents(".module-trade-list-item-row1").siblings(".module-trade-list-item-row3").children(".module-trade-list-items-wrap").find(".J_Orders_List"),p=l.parents(".module-trade-list-item-row1").siblings(".module-trade-list-item-row3");l.parents(".module-trade-list-item").data("payment"),l.parents(".module-trade-list-item").data("sellermemo"),l.parents(".module-trade-list-item").data("sellerflag")}e(p).find(".order-temp").length||API.pt_custom_user_detail({id:d},function(i){i.data;e(t.template.get("template.pt.custom.orders",o)).appendTo(r)}),a.find(".module-trade-list-item-row3").show(),a.find(".J_Trigger_Show_Orders").addClass("trade-icon-open").removeClass("trade-icon-close")}else a.find(".module-trade-list-item-row3").hide(),a.find(".J_Trigger_Show_Orders").addClass("trade-icon-close").removeClass("trade-icon-open");a.find(".J_Trade_Amount").find(".g_alert_information").iTip({skin:"blue",triggerType:"hover",maxWidth:300})},_fn_to_save_item_outid:function(a,s){var n=this;this._timer_save&&(clearTimeout(this._timer),this._timer_save=null);var l=a.find('input[name="outSid"]');return e.trim(l.val())===l.attr("data-value")?(this._timer_save=setTimeout(e.proxy(function(){a.find('input[name="outSid"]');a.find(".J_Save_OutSid").stop().animate({width:0}),a.find(".trade-icon-bottom").stop().animate({width:24})},this),200),!1):(a.find(".J_Save_OutSid").stop().css("width",36),a.find(".trade-icon-bottom").stop().css("width",0),t.sub("control.trade.view.focusout.edit_logistics.done",function(e){n._fn_to_save_item_outid_done(e),t.removeSub("control.trade.view.focusout.edit_logistics.done")}),void i.savaExpress_courierNumber(s,a.find(".J_Express_Name").attr("data-value"),e.trim(l.val())))},_fn_to_change_express:function(i,a,s){t.pub("control.trade.view.click.change_express",a,e(s.target).attr("data-value"),s)},_fn_to_update_batch_express_id:function(a,s,n){{var l=this;n.parents(".J_TradeList_Body"),this._elm_dom_container.find("input.J_Select_All")}return a.find(".J_Checkbox").prop("checked")?""===e.trim(a.find('input[name="outSid"]').val())?void e.dialog.alert("您还未填写运单号！",e.proxy(function(){a.find('input[name="outSid"]').focus()},this)):(t.sub("control.trade.view.click.batch_update_express_id.done",function(e){l._fn_batch_update_express_id_done(e),t.removeSub("control.trade.view.click.batch_update_express_id.done")}),void i.batch_saveExpress_Number(s,a.find(".J_Express_Name").attr("data-value"),e.trim(a.find('input[name="outSid"]').val()),l.getSelectedItemIds())):void e.dialog.alert("您还未选中当前订单！")},_fn_to_print:function(t){e.isArray(t)&&(t=t.join(",")),this._fn_event_handler("module.print")(t)},_fn_to_split:function(i,a){{var s=e(a.target),n=s.parents(".module-trade-list-item"),l=(n.parent(),n.find(".J_Express_Name").attr("data-value")),d=!1,o=n.find('input[name="outSid"]').val();s.attr("data-tid")}l.indexOf("w")>-1&&o&&/^\w*\d+\w*$/.test(o)&&(d=!0),e.dialog({title:"提示",icon:"warn.png",content:'<div class="ft_14 pt_20 pb_20">您是否确定进行订单拆分？ '+(d?"该操作会导致原电子面单号失效，您是否继续操作":"")+"</div>",okVal:"确定",ok:e.proxy(function(){var e=this;t.sub("control.trade.view.click.split_done",function(i){e._re_render_item_list(i.result,n),t.removeSub("control.trade.view.click.split_done")}),t.pub("control.trade.view.click.split",i,s.attr("data-tid"),s.attr("data-oid"),s.attr("data-sysTid"),s.attr("data-taobaoId")),s=null},this),cancelVal:"取消",cancel:function(){}})},_fn_to_cancel_merge:function(i,a){var s=e(a.target),n=s.parents(".module-trade-list-item"),l=n.find(".J_Express_Name").attr("data-value"),d=n.find('input[name="outSid"]').val(),o=!1;l.indexOf("w")>-1&&d&&/^\w*\d+\w*$/.test(d)&&(o=!0),e.dialog({title:"提示",icon:"warn.png",content:'<div class="ft_14 pt_20 pb_20">您是否确定要取消合并？ '+(o?"该操作会导致原电子面单号失效，您是否继续操作":"")+"</div>",okVal:"确定",ok:e.proxy(function(){var e=this;t.sub("control.trade.view.click.cancel_merge_done",function(i){e._re_render_item_list(i,n),t.removeSub("control.trade.view.click.cancel_merge_done")}),t.pub("control.trade.view.click.cancel_merge",i,s.attr("data-tid"),s.attr("data-taobaoId")),s=null},this),cancelVal:"取消",cancel:function(){}})},_fn_to_cancel_split:function(i,a){{var s=e(a.target),n=s.parents(".module-trade-list-item"),l=n.parent(),d=n.find(".J_Express_Name").attr("data-value"),o=n.find('input[name="outSid"]').val(),r=!1;s.attr("data-tid")}d.indexOf("w")>-1&&o&&/^\w*\d+\w*$/.test(o)&&(r=!0),e.dialog({title:"提示",icon:"warn.png",content:'<div class="ft_14 pt_20 pb_20">您是否确定要取消拆单？ '+(r?"该操作会导致原电子面单号失效，您是否继续操作":"")+"</div>",okVal:"确定",ok:e.proxy(function(){var e=this;t.sub("control.trade.view.click.cancel_split_done",function(i){var a=function(){for(var t=0;t<i.clear.length;t++){var a=i.clear[t].tid+"_"+i.clear[t].sysTid;l.find('[uniqueid="'+a+'"]').remove(),e._tradeCollection&&e._tradeCollection.remove_id_from_id_list(a),e.removeIdFromSelectedItemIds(a)}};e._re_render_item_list(i.result,n,a),t.removeSub("control.trade.view.click.cancel_split_done")}),t.pub("control.trade.view.click.cancel_split",i,s.attr("data-tid"),s.attr("data-taobaoId")),s=null},this),cancelVal:"取消",cancel:function(){}})},_fn_to_change_shipping_address:function(i,a){var n=this;t.sub("control.trade.save_shipping_address_success",function(l,d){var o=['<span class="J_Shipping_Address">收件人：'+l.receiverName+"<b>|</b>",l.receiverMobile?"<span>手机："+l.receiverMobile+"</span><b>|</b>":"<span>固定电话："+l.receiverPhone+"</span><b>|</b>",'<span class="detailed-address">详细地址：'+l.receiverState+"&nbsp;"+l.receiverCity+"&nbsp;"+l.receiverDistrict+"&nbsp;",s.escape(l.receiverAddress)+"，"+l.receiverZip+"</span></span>"].join("");i.find(".J_Shipping_Address").replaceWith(o),i.find(".product-receiver-destination").iTip({triggerType:"hover",skin:"blue",content:l.receiverState+l.receiverCity+l.receiverDistrict+s.escape(l.receiverAddress)}).html('<span class="receiver-short-address J_Click" data-name="trigger_show_orders">'+l.receiverState+l.receiverCity+l.receiverDistrict+"</span>");var r=d.data.addressReachable,p=-1;r&&r.length>0&&(p=d.data.addressReachable[0].canDelivered);var c=n._elm_dom_tradeList_container.find('[uniqueid="'+a+'"]'),_=c.find(".J_canDelivered");if(-1!=p&&_){var m="";1==p?(e(_).attr("class","ml_5 trade-icon-common trade-icon-right J_canDelivered J_Tip"),m="此物流可达"):(e(_).attr("class","ml_5 trade-icon-common trade-icon-doubt J_canDelivered J_Tip"),m="此物流可能无法送达"),e(_).parent().find(".J_Tip").iTip({triggerType:"hover",skin:"blue",content:m})}t.removeSub("control.trade.save_shipping_address_success")}),t.pub("control.trade.view.click.edit_shipping_address",a)},_fn_to_edit_messageMemos:function(i,a,s){var n=this;e.dialog({title:"修改备注",content:t.template.get("template.pt.custom.remark_flag"),width:950,lock:!0,resize:!1,fixed:!0,ok:function(){var t=e("#j_remark_dia").val(),a=s.parents(".module-trade-list-item").data("id"),l=e(".dl-horizontal").find("input[type=radio]:checked").val();API.pt_custom_user_update_memo({memo:t,flag:l,ids:a,reset:!0},function(){n._status_list[a].sellerMemo=t,n._status_list[a].sellerFlag=l,i.data({sellermemo:t,sellerflag:l}).find(".msg-seller-memo").text(t).end().find(".trade-icon-beizu").data("title",t).iTip({content:t}).end().find(".trade-icon-flag").data("flag",l).attr("class","ml_5 trade-icon-flag trade-icon-flag-"+l)})},okVal:"保存",cancel:function(){},cancelVal:"关闭"}).time(0,function(){var t=s.siblings(".trade-icon-flag").data("flag"),i=s.siblings(".msg-seller-memo").text();e(".radio-flag-"+t).prop("checked",!0),e(".dl-horizontal").find("[type=radio]").iCheck(),e("#j_remark_dia").val(i),e(".comment-nums-detail").text(i.length)}),e("#j_remark_dia").on("keyup",function(){var t=e("#j_remark_dia").val();e(".comment-nums-detail").text(t.length)})},_fn_actions_focusin_item:function(t){var i=e(t.target),a=i.attr("data-name");if(a){{var s=i.parents(".module-trade-list-item");
s.attr("uniqueid")}this._timer&&(clearTimeout(this._timer),this._timer=null),s.find(".J_Save_OutSid").stop().animate({width:36}),s.find(".trade-icon-bottom").stop().animate({width:0})}},_fn_check_ifExistCODs:function(e){var t=!1;if(e.length){for(var i=0;i<e.length;i++)if(r.getModel(e[i]).toJSON().type==this._TRADE_TYPE.COD){t=!0;break}return t}},_fn_check_exceptionData:function(t,i,a){var s=[],n=[],l=[],d=!1;if(t.length||(e.dialog.alert("您还未选择订单！"),d=!0),a)this._fn_get_error_tids_from_item_UI(a,t,s,n,l);else if(t.length)for(var o=0;o<t.length;o++){var r=this._elm_dom_tradeList_container.find('[uniqueid="'+t[o]+'"]');r.length?this._fn_get_error_tids_from_item_UI(r,t[o],s,n,l):this._tradeCollection&&this._tradeCollection.command("check_error_tids_for_data",t[o],s,n,l)}if(s.length&&(e.dialog.alert('<div style="max-height: 240px;">以下订单为异常订单，请先处理再发货！订单号：<br/>'+s.join("<br/>")+"</div>"),d=!0),n.length&&(e.dialog.alert('<div style="max-height: 240px;">以下订单为在线发货（待确认），不能使用确认发货操作！订单号：<br/>'+n.join("<br/>")+"</div>"),d=!0),i&&l.length){var p=a?"您还未保存运单号！":'<div style="max-height: 240px;">以下订单还未保存运单号！订单号：<br/>'+l.join("<br/>")+"</div>";e.dialog.alert(p),d=!0}return d},_fn_get_error_tids_from_item_UI:function(e,t,i,a,s){var n=t.split("_")[0];(e.find(".J_isExcep").children().length||e.find(".J_isHalt").children().length||e.find(".isRefund").children().length)&&i.push(n),e.find(".trade-online-sending").length&&a.push(n),e.find('input[name="outSid"]').val()||s.push(n)},_fn_actions_focusout_item:function(t){var i=e(t.target),a=i.attr("data-name");if(a){{var s=i.parents(".module-trade-list-item");s.attr("uniqueid")}this._timer_f&&(clearTimeout(this._timer_f),this._timer_f=null),this._timer_f=setTimeout(e.proxy(function(){var e=s.find('input[name="outSid"]');e.val(e.attr("data-value")),s.find(".J_Save_OutSid").stop().animate({width:0}),s.find(".trade-icon-bottom").stop().animate({width:24})},this),200)}},_re_render_item_list:function(e,i,a){for(var s=[],n=[],l=[],d=[],o=0;o<e.length;o++)s.push(e[o].id),n.push(e[o].taobaoId),l.push(e[o].sysTid),d.push(e[o].tid);var r={tids:d.join(","),sysTids:l.join(","),taobaoIds:n.join(",")},p=this;API.trade_search_tids(r,function(e){var s=e.data.list,n={SELLER_CONSIGNED_PART:1,WAIT_SELLER_SEND_GOODS:1};if(s){for(var l="",d=[],o=i.parents(".module-trade-wrap"),r=o.find(".J_Select_All").prop("checked"),c=o.find(".J_Trigger_Trade_Orders").prop("checked"),_=0;_<s.length;_++){var m=s[_].status;if(n[m]){l=t.template.get("template.pt.custom.list_item",p._fn_prehandle_data(s[_])),StringCollectionObj=p._fn_createItemUI(s[_]);for(var u in StringCollectionObj)StringCollectionObj.hasOwnProperty(u)&&(l=l.replace(u,StringCollectionObj[u]));if(l){var h=s[_].tid+"_"+s[_].sysTid;i.before(l),i.prev().css("border","1px solid #E19F33").attr("uniqueId",h).find(".J_Tip").iTip({skin:"blue",triggerType:"hover"}),d.push(h),p._tradeCollection&&p._tradeCollection._update_map_in_collection(h),p._tradeCollection&&p._tradeCollection._update_trade_model_in_collection(h,s[_]),r&&i.prev().find(".J_Checkbox").prop("checked",!0),c&&(i.prev().find(".J_Trigger_Show_Orders").removeClass("trade-icon-close").addClass("trade-icon-open"),i.prev().find(".module-trade-list-item-row3").show())}}}var f=i.attr("uniqueid");if(p._tradeCollection&&p._tradeCollection.id_list&&p._tradeCollection&&p._tradeCollection._update_id_list_in_collection(f,d),l){if(p._tradeCollection&&p._tradeCollection.remove_id_from_id_list(f),p.removeIdFromSelectedItemIds(f),r)for(var _=0;_<d.length;_++)p.addIdToSelectedItemIds(d[_]);i.remove(),l="",d=[]}a&&a()}},function(){})},_fn_ctrl_setCurHash:function(i,a){if(a===!0)return void t.pages.setCurHash(e.extend(i,{queryId:this._status_hashs.queryId,sys:this._status_hashs.sys}));var s=e.extend({},this._status_hashs);for(var n in i)void 0!==i[n]?s[n]=i[n]:delete s[n];t.pages.setCurHash(s)},_fn_show_guide_step1:function(t){if("true"!=localStorage.step1_showed){var i=e(".container");i.css("position","relative");var a='<img id="step1_show" class="step1_show"/>';cancelDom='<div id="cancel_guide" class="cancel_guide"></div>',$imgDom=e(a).appendTo(i).scrollToFixed({marginTop:-200,zIndex:101}),$cancelDom=e(cancelDom).appendTo(i).scrollToFixed({marginTop:133,marginLeft:80,zIndex:101}),e("#cancel_guide").on("click",function(){$imgDom.remove(),$cancelDom.remove(),$imgDom.trigger("detach.ScrollToFixed"),$cancelDom.trigger("detach.ScrollToFixed"),t&&t()}),localStorage.step1_showed="true"}else t&&t()},_update:function(t,i){this._fn_dom_render(t);var a=e.extend({},this._status_hashs);n.update(t,a),l.update(t,a),d.update(t,a),o.update(t,a),this._fn_ctrl_update_tradeList(t,a),i&&i()},init:function(){},update:function(i,a,s){this._elm_dom_container&&(e("#module-trade-top").trigger("detach.ScrollToFixed"),e("#module-trade-top").scrollToFixed({marginTop:41,zIndex:100})),this._status_hashs||(this._status_hashs={}),this.shopList=[];var n=e.proxy(function(){i.queryId=i.queryId||1,i.word&&(i.word=decodeURIComponent(i.word)),-1===e.inArray(i.dateStatus,[1,2])&&(i.queryId&&1!=i.queryId||(i.dateStatus=1)),-1===e.inArray(i.field,["trade_time","pay_time","pay_money","send_goods_time"])&&(i.field=4==i.queryId?"send_goods_time":"trade_time"),-1===e.inArray(i.order,["asc","desc"])&&(i.order=1==i.queryId||4==i.queryId||6==i.queryId||7==i.queryId||8==i.queryId?"desc":"asc"),i.pageNo&&i.pageNo.match(/^[1-9][0-9]*$/)||(i.pageNo="1"),i.pageSize&&i.pageSize.match(/^[1-9][0-9]*$/)||(i.pageSize=localStorage.trade_p_s||"20"),this._status_hashs.pageSize!=i.pageSize&&(localStorage.trade_p_s=i.pageSize),i.app&&delete i.app,i.root&&delete i.root;var n=e.extend({},i);this._update(i,a,s),this._status_hashs=n;var l=t.modules.get("trade.detail");l._initDialog(this.getContainer())},this);this._fn_show_guide_step1(n)},disabled:function(){},getContainer:function(){return this._elm_dom_container},getSelectedItemIds:function(){return this._selected_item_ids||[]},addIdToSelectedItemIds:function(t){for(var i=[],a=0;a<this._tradeCollection.id_list.length;a++)i[a]="_f";for(var s=0;s<this._selected_item_ids.length;s++){var n=e.inArray(this._selected_item_ids[s],this._tradeCollection.id_list);i[n]=this._selected_item_ids[s]}if(e.inArray(t,this._selected_item_ids)<0){var l=e.inArray(t,this._tradeCollection.id_list)>-1&&e.inArray(t,this._tradeCollection.id_list);i[l]=t;var d=i.join("&")+"&";d=d.replace(/_f&/g,""),d=d.substring(0,d.length-1),this._selected_item_ids=d.split("&")}},removeIdFromSelectedItemIds:function(t){if(e.inArray(t,this._selected_item_ids)>-1){var i=this._selected_item_ids.join("&")+"&",a=new RegExp(t+"&"),s="";i=i.replace(a,""),s=i.substring(0,i.length-1),this._selected_item_ids=""!==s?s.split("&"):[]}},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._status_hashs=!1,n.destroy(),l.destroy(),d.destroy(),o.destroy(),_.destroy(),m.destroy(),u.destroy(),h.destroy(),f.destroy(),v.destroy(),g.destroy(),b.destroy(),y.destroy(),x.destroy(),this.ctrl_guide&&this.ctrl_guide.destroy(),this._tradeCollection&&this._tradeCollection.destroy(),this._tradeCollection=null,this._elm_dom_container.empty().remove(),this._elm_dom_container=null,this._selected_item_ids=[])}};t.modules.define(I.name,I)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_wlb"></div>'],a=['<div class="pt_public pd_20">','<div class="ui-box ui-box-s1 noborder mb_10">','<div class="ui-box-hd" style="width:1227px;">','<div class="ui-box-hd-tit"><strong>电子面单设计</strong></div>',"</div>",'<div class="ui-box-bd" style="overflow:hidden; position:relative; width:1227px;">','<div class="clearfix option-set-hook" style="width:2490px; position:relative; left:-1245px">','<div class="f-lt" style="width:1245px;">','<div class="ft_14">','<span class="w400">',"<span>打印纸尺寸设置（毫米）：</span>",'<span class="mr_15">宽 <input type="text" class="ft-center widthStandard" value="{{widthStandard}}" style="width: 35px"/></span>','<span>高 <input type="text" class="ft-center heightStandard" value="{{heightStandard}}" style="width: 35px" /></span>',"</span>","</div>",'<div class="ft_14 pt_10">','<span class="w400" data-type="standard">',"<span>将打印内容整体偏移（毫米）：</span>",'<span class="opr-con mr_20"><a href="javascript:void(0)" class="J_Click ct-down" data-name="offset_set" data-type="down"><i></i></a><input type="text" style="width: 20px" class="ft-center mr_5 ml_5 verticalOffsetStandard" value="{{verticalOffsetStandard}}"><a href="javascript:void(0)" class="J_Click ct-up" data-name="offset_set" data-type="up"><i></i></a></span>','<span class="opr-con"><a href="javascript:void(0)" class="J_Click ct-left" data-name="offset_set" data-type="left"><i></i></a><input type="text" style="width: 20px" class="ft-center mr_5 ml_5 horizontalOffsetStandard" value="{{horizontalOffsetStandard}}"><a href="javascript:void(0)" class="J_Click ct-right" data-name="offset_set" data-type="right"><i></i></a></span>',"</span>","</div>","</div>",'<div class="f-lt" style="width:1245px;">','<div class="ft_14">','<span class="w400">',"<span>打印纸尺寸设置（毫米）：</span>",'<span class="mr_15">宽 <input type="text" class="ft-center widthCustom" value="{{widthCustom}}" style="width: 35px" /></span>','<span>高 <input type="text" class="ft-center heightCustom" value="{{heightCustom}}" style="width: 35px" /></span>',"</span>",'<span class="w240">全局打印字体设置：</span>','<span class="mr_15">','<span class="mr_5">大小</span>','<select class="global_fontSize" data-type="font-size">','<option value="8">8</option>','<option value="9">9</option>','<option value="10">10</option>','<option value="11">11</option>','<option value="12">12</option>','<option value="13">13</option>','<option value="14">14</option>','<option value="15">15</option>','<option value="16">16</option>','<option value="17">17</option>','<option value="18">18</option>','<option value="19">19</option>','<option value="20">20</option>','<option value="21">21</option>','<option value="22">22</option>','<option value="23">23</option>','<option value="24">24</option>','<option value="26">26</option>','<option value="28">28</option>','<option value="30">30</option>','<option value="32">32</option>','<option value="34">34</option>','<option value="36">36</option>','<option value="38">38</option>','<option value="40">40</option>','<option value="42">42</option>','<option value="44">44</option>','<option value="46">46</option>','<option value="48">48</option>','<option value="50">50</option>','<option value="52">52</option>','<option value="54">54</option>','<option value="56">56</option>','<option value="58">58</option>','<option value="60">60</option>','<option value="62">62</option>','<option value="64">64</option>','<option value="66">66</option>','<option value="68">68</option>','<option value="70">70</option>',"</select>","</span>",'<span class="mr_15">','<span class="mr_5">字体</span>','<select class="global_font" data-type="font-family">','<option value="新宋体">新宋体</option>','<option value="宋体">宋体</option>','<option value="黑体">黑体</option>','<option value="微软雅黑">微软雅黑</option>',"</select>","</span>",'<label><span class="">加粗：</span><input type="checkbox" class="global_fontBold" /></label>',"</div>",'<div class="ft_14 pt_10">','<span class="w400"  data-type="custom">',"<span>将打印内容整体偏移（毫米）：</span>",'<span class="opr-con mr_20"><a href="javascript:void(0)" class="J_Click ct-down" data-name="offset_set" data-type="down"><i></i></a><input type="text" style="width: 20px" class="ft-center mr_5 ml_5 verticalOffsetCustom" value="{{verticalOffsetCustom}}"><a href="javascript:void(0)" class="J_Click ct-up" data-name="offset_set" data-type="up"><i></i></a></span>','<span class="opr-con"><a href="javascript:void(0)" class="J_Click ct-left" data-name="offset_set" data-type="left"><i></i></a><input type="text" style="width: 20px" class="ft-center mr_5 ml_5 horizontalOffsetCustom" value="{{horizontalOffsetCustom}}"><a href="javascript:void(0)" class="J_Click ct-right" data-name="offset_set" data-type="right"><i></i></a></span>',"</span>",'<span class="single_tool">','<span class="w240 single_field">选择区域字体设置：</span>','<span class="mr_15">','<span class="mr_5">大小</span>','<select class="single_fontSize" data-type="font-size">','<option value="8">8</option>','<option value="9">9</option>','<option value="10">10</option>','<option value="11">11</option>','<option value="12">12</option>','<option value="13">13</option>','<option value="14">14</option>','<option value="15">15</option>','<option value="16">16</option>','<option value="17">17</option>','<option value="18">18</option>','<option value="19">19</option>','<option value="20">20</option>','<option value="21">21</option>','<option value="22">22</option>','<option value="23">23</option>','<option value="24">24</option>','<option value="26">26</option>','<option value="28">28</option>','<option value="30">30</option>','<option value="32">32</option>','<option value="34">34</option>','<option value="36">36</option>','<option value="38">38</option>','<option value="40">40</option>','<option value="42">42</option>','<option value="44">44</option>','<option value="46">46</option>','<option value="48">48</option>','<option value="50">50</option>','<option value="52">52</option>','<option value="54">54</option>','<option value="56">56</option>','<option value="58">58</option>','<option value="60">60</option>','<option value="62">62</option>','<option value="64">64</option>','<option value="66">66</option>','<option value="68">68</option>','<option value="70">70</option>',"</select>","</span>",'<span class="mr_15">','<span class="mr_5">字体</span>','<select class="single_font" data-type="font-family">','<option value="新宋体">新宋体</option>','<option value="宋体">宋体</option>','<option value="黑体">黑体</option>','<option value="微软雅黑">微软雅黑</option>',"</select>","</span>",'<label><span class="">加粗：</span><input type="checkbox" class="single_fontBold" /></label>',"</span>","</div>","</div>","</div>",'<div class="ft_14 pt_10">','<span class="w310">','<span class="w120 ft-right">电子面单模板：</span>','<span><select class="kd_list" style="width: 120px"><option act-loop="item in wlbExpressTemplates" value="{{item.templateId}}" data-taobaoId="{{item.taobaoId}}" data-cpcode="{{item.cpCode}}" data-code="{{item.cpCode}}">{{item.templateName}}</option></select></span>',"</span>","</div>",'<div class="ft_14 ft-center pd_20">','<span class="btn btn-success J_Click mr_10" data-name="save_set">保存当前设置</span>','<span class="btn mr_10 J_Click" data-name="reset_set">恢复默认设置</span>','<span class="btn mr_10 J_Click" data-name="preview_print">预览/打印测试</span>','<a href="javascript:history.back(-1)" class="btn btn-gray">返回</a>',"</div>",'<div class="ft_14 pb_10">','<div style="display:inline-block;vertical-align:top;">温馨小贴士：</div>','<div style="display:inline-block;">','<div>1. 谷歌浏览器或360极速浏览器 <span class="fc-red">小于12号字体在预览上有偏差</span>，但不影响实际打印</div>',"<div>2. 编辑电子面单模板后，强烈建议将打印预览界面截图发给你对应的快递网点进行确认，确保能被正常揽件，以免造成损失！</div>","</div>","</div>","</div>","</div>",'<div class="ui-box ui-box-s1 noborder page_desgin">','<div class="ui-box-hd" style="width:1227px;">','<div class="ui-box-hd-tit"><strong>打印内容设置</strong><span class="fc-red">（请不要忘记保存哦~）</span></div>','<div class="ui-box-hd-tit right-hd-tit" style="display:{{showCustom}}"><strong>电子面单选项</strong></div>',"</div>",'<div class="ui-box-bd nopadding" style="overflow:hidden; position:relative; width:1257px;">','<div class="clearfix wlb-status-c">','<div class="wlb-style-change">','<label><input type="radio" name="status" value="0" checked /> 菜鸟统一模板(100mm*180mm)</label>','<div style="width:100%;text-align:center;color:red">只有自定义区(深黄色区域)可编辑</div>',"</div>",'<div class="wlb-style-change">','<label><input type="radio" name="status" value="1" /> 菜鸟老模板</label>',"</div>","</div>",'<div class="clearfix desgin-set-hook" style="width: 1257px;position:relative; z-index:19;">','<div class="wlb-desgin clearfix" style="overflow:hidden;">','<div class="wlb_standard" style="float: left;width: {{widthStandard}}mm; display:block;margin:0;">','<div class="wlb_overflow">','<div class="wlb-main standard_desgin">','<object id="CaiNiaoPrint_OB" classid="clsid:09896DB8-1189-44B5-BADC-D6DB5286AC57" width="550px" height="800px">','<embed id="CaiNiaoPrint_EM" TYPE="application/x-cainiaoprint" width="550px" height="800px"></embed>',"</object>",'<div id="o-shadow" style="z-index: 10; position: absolute; top:100px; left:200px; width:550px; height:800px; background:white; display:none;">','<iframe style="position: absolute; z-index: -1; width: 100%; height: 100%; top: 0; ','left: 0; scrolling: no;" frameborder="0" src="about:blank"></iframe>',"</div>","</div>","</div>","</div>",'<div class="wlb_custom"  style="width: {{widthCustom}}mm; display:block;">','<div class="wlb-main custom_desgin" style="margin-left: 100px;position: relative;width: {{widthCustom}}mm; height: {{heightCustom}}mm;">','<img src="{{bgPathCustom}}" style="position:absolute; z-index:1; width: {{widthCustom}}mm; height: {{heightCustom}}mm;" alt="" />',"</div>","</div>","</div>",'<div class="wlb-list">','<div class="leaflet-designs">','<div class="options noborder standard-right-fields">',"{{standard_right_fields}}","</div>",'<div class="options noborder custom-right-fields">',"{{custom_right_fields}}","</div>","</div>","</div>","</div>","</div>","</div>","</div>"],s=['<div act-loop="item in positionInfo"  class="drsElement drsMoveHandle" style="position: absolute; z-index: 9; left: {{item.x}}px; top:{{item.y}}px; width: {{item.width}}px; height: {{item.height}}px; line-height:{{item.fontSize}}px;" data-field-name="{{item.field}}">','<span style="font-weight: {{item.fontBold}}; font-size: {{item.fontSize}}px; font-family: {{item.font}}; ">{{item.description}}</span>','<a class="close_field J_Click" data-name="close" href="javascript:void(0)"></a>',"</div>"],n=['<div style="position:relative; width:{{width}}mm; height:{{height}}mm">','<img src="{{bgPath}}" style="position:absolute; z-index:1; top:0; left:0; width: {{width}}mm; height: {{height}}mm;" alt="" />','<div act-loop="item in fieldSettings" style="position: absolute; z-index: 9;left: {{item.x}}px; top:{{item.y}}px; width: {{item.width}}px; height: {{item.height}}px; overflow:hidden">','<span style="font-weight: {{item.fontBold}}; font-size: {{item.fontSize}}px; font-family: {{item.font}}; ">{{item.description}}</span>',"</div>","</div>"],l=['<dl act-loop="item in list">',"<dt>{{item.title}}<span>ˇ</span></dt>","<dd>",'<div act-loop="setting in item.fieldSettingsList" class="item">',"<label>",'<input act-if="{{setting.optType}} != radio" type="checkbox" data-type="{{item.type}}" data-dttype="{{item.field}}" data-width="{{setting.width}}" data-height="{{setting.height}}" data-x="{{setting.x}}" data-y="{{setting.y}}" data-exitable="{{setting.edit}}" data-example="{{setting.example}}" data-fieldname="{{setting.field}}" data-description="{{setting.description}}" data-value="{{setting.value}}" data-font="{{setting.font}}" data-fontsize="{{setting.fontSize}}" data-bold="{{setting.bold}}" data-edit="{{setting.edit}}" data-nick="{{setting.nick}}" data-value="{{setting.value}}"/>','<input act-if="{{setting.optType}} == radio" name="{{setting.field}}" type="radio" data-type="{{item.type}}" data-dttype="{{item.field}}" data-width="{{setting.width}}" data-height="{{setting.height}}" data-x="{{setting.x}}" data-y="{{setting.y}}" data-exitable="{{setting.edit}}" data-example="{{setting.example}}" data-fieldname="{{setting.field}}" data-description="{{setting.description}}"  data-value="{{setting.value}}" data-font="{{setting.font}}" data-fontsize="{{setting.fontSize}}" data-bold="{{setting.bold}}" data-edit="{{setting.edit}}" data-nick="{{setting.nick}}"/>','<span class="editable-description">{{setting.description}}{{setting.value}}</span>',"</label>",'<span act-if="setting.edit == true" class="edit-icon"></span>',"</div>","</dd>","</dl>"];t.template.addTemp("template.pt.wlb",i),t.template.addTemp("template.pt.wlb.global",a),t.template.addTemp("template.pt.wlb.field.temp",s),t.template.addTemp("template.pt.wlb.field.temp.print",n),t.template.addTemp("template.pt.wlb.newMdul_right_fileds",l)}(jQuery,RayCloud),function(e,t){var i=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold">经济快递</div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 34px;">STO</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_detail_address_up}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_up}} {{send_mobile_up}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_up}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_up}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}}&nbsp;商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; ">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_up}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_up}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_up}}</span>','<span style="display: block">代收货款：{{collecting_money_up}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;">目的地</div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;">{{express_short_address}}</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;">始发：{{originating}}</span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;">到达：{{arrivals}}</span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;">收件签收：</span>','<span style="display: block; margin:8mm 1mm 0 0">&nbsp;&nbsp;年&nbsp;月&nbsp;日&nbsp;时</span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; ">快件送达收件人地址，经收件人或收件人（寄件人）允许的代收人签字，视为送达；您的签字代表您已验收包裹，并已确认商品信息无误、包装完好、没有划痕、破损等表面质量问题。</span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_down}}&nbsp; {{receiver_mobile_down}}</span>',"<span>{{receiver_detail_address_down}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_down}} {{send_mobile_down}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_down}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_down}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}} 商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_down}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_down}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_down}}</span>','<span style="display: block">代收货款：{{collecting_money_down}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; ">托寄物</span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;text-align: center">','<img src="/resources/css/build/images/sto.jpg" style="width: 90%; vertical-align: middle" >',"</div>","</div>","</div>","</div>"],a=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold">经济快递</div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 22px;">TTKDEX</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_detail_address_up}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_up}} {{send_mobile_up}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_up}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_up}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}}&nbsp;商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; ">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_up}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_up}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_up}}</span>','<span style="display: block">代收货款：{{collecting_money_up}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;">目的地</div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;">{{express_short_address}}</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;">始发：{{originating}}</span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;">到达：{{arrivals}}</span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;">收件签收：</span>','<span style="display: block; margin:8mm 1mm 0 0">&nbsp;&nbsp;年&nbsp;月&nbsp;日&nbsp;时</span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; ">快件送达收件人地址，经收件人或收件人（寄件人）允许的代收人签字，视为送达；您的签字代表您已验收包裹，并已确认商品信息无误、包装完好、没有划痕、破损等表面质量问题。</span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_down}}&nbsp; {{receiver_mobile_down}}</span>',"<span>{{receiver_detail_address_down}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_down}} {{send_mobile_down}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_down}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_down}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}} 商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_down}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_down}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_down}}</span>','<span style="display: block">代收货款：{{collecting_money_down}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; ">托寄物</span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">',"</div>","</div>","</div>","</div>"],s=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden;">','<div style="height:16mm;overflow: hidden">','<div style="float: right;width: 56mm; height: 16mm;overflow:hidden;">','<strong style="display: block; padding: 3mm 0 1mm 3mm; font-size: 15px;">代收货款</strong>','<span style="display: block; padding: 1mm 0 0 3mm; font-size: 12px">金额（小写）：</span>',"</div>","</div>",'<div style="height: 1mm;overflow: hidden"></div>','<div style="height: 21mm; border-bottom: 1px dashed #000; overflow:hidden;">','<div style="float: left; width: 34mm;height: 19mm; line-height:19mm; padding: 1mm 0; text-align:center; overflow:hidden;">',"</div>",'<div style="margin-left: 34mm; width:65mm; overflow:hidden;height: 21mm; padding-top: 5mm;text-align:center;border-left: 1px dashed #000">','<span style="font-size: 38px; font-weight: bold">{{express_short_address}}</span>',"</div>","</div>",'<div style="height: 16mm; border-bottom: 1px dashed #000; overflow:hidden;">','<div style="overflow:hidden; height: 14mm; padding: 1mm 0; text-align: center;">',"</div>","</div>",'<div style="position: relative; height: 49mm; overflow:hidden;">','<div style="position: absolute; top: 0; left: 0; height: 17mm; width: 93mm;font-size: 15px; font-weight: bold; overflow:hidden; border-bottom: 1px dashed #000">','<span style="float: left; padding: 2mm 0 0 3mm">收件人：</span>','<div style="margin-left: 20mm; padding: 2mm 3mm 0 0;overflow:hidden;">','<span style="display:block; padding-bottom: 1mm">{{receiver_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_up}}</span>','<span style="display: block;">{{receiver_detail_address_up}}</span>',"</div>","</div>",'<div style="position: absolute; top: 17mm; left: 0; height: 17mm; width: 93mm;font-size: 15px; overflow:hidden; border-bottom: 1px dashed #000">','<span style="float: left; padding: 4mm 0 0 3mm">寄件人：</span>','<div style="margin-left: 20mm; padding: 3mm 0 0 0;overflow:hidden;">','<span style="display: block; padding-bottom: 1mm">{{shop_title_up}}  {{send_detail_address_up}}</span>',"<span>{{send_mobile_up}}</span>","</div>","</div>",'<div style="position: absolute; bottom: 0; left: 0; border-right: 1px dashed #000; width: 40mm; height: 15mm;overflow:hidden;">','<span style="display: block; padding: 2mm 0 0 3mm; font-size: 15px;">收件人/代收人:</span>',"</div>",'<div style="position: absolute; bottom: 0; left: 40mm; width: 53mm; height: 15mm; overflow:hidden;">','<span style="display: block; padding: 2mm 0 0 6mm; font-size: 15px;">签收时间:</span>','<span style="display: block; text-align: center; padding-top: 3mm;font-size: 15px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;年&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日</span>',"</div>",'<div style="height: 49mm; width: 7mm; position: absolute; top: 0; right: 0; border-left: 1px dashed #000">','<span style="font-size: 14px; display: block; width: 5mm; padding-top: 20mm; height: 29mm; text-align: center">签收联</span>',"</div>","</div>",'<div style="height:2mm; overflow: hidden"></div>','<div style="height: 14mm;  overflow:hidden;">',"</div>",'<div style="height: 1mm;overflow: hidden"></div>','<div style="height:28mm; border-bottom: 1px dashed #000; overflow:hidden; position: relative">','<div style="height: 14mm; width: 93mm;font-size: 14px; position: absolute; left: 0; top: 0">','<span style="float: left; padding: 1.5mm 0 0 3mm">收件人：</span>','<div style="margin-left: 20mm; padding: 1.5mm 1mm 0 0;overflow:hidden;">','<span style="display:block; padding-bottom: 1mm">{{receiver_name_down}}&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_down}}</span>','<span style="display: block;">{{receiver_detail_address_down}}</span>',"</div>","</div>",'<div style="height: 14mm; width: 93mm; border-top: 1px dashed #000; font-size: 15px;position: absolute;overflow:hidden;left: 0; bottom: 0">','<span style="float: left; padding: 3mm 0 0 3mm">寄件人：</span>','<div style="margin-left: 20mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display: block; padding-bottom: 1mm">{{shop_title_down}}  {{send_detail_address_down}} </span>',"<span>{{send_mobile_up}}</span>","</div>","</div>",'<div style="height: 28mm; width: 7mm; border-left: 1px dashed #000; position: absolute; top: 0; right: 0">','<span style="font-size: 14px; display: block; width: 5mm; padding-top: 9mm; height: 40mm; text-align: center">收件联</span>',"</div>","</div>",'<div style="height: 26mm; overflow:hidden; border-bottom: 1px dashed #000">','<div style="float:left; width: 74mm;height: 26mm;overflow:hidden;border-right: 1px dashed #000; font-size: 12px;">','<span style="float: left; padding: 1.5mm 0 0 3mm">订单详情：{{item_short_title-item_properties-item_num}}</span>','<div style="margin-left: 20mm; padding: 1.5mm 1mm 1mm 0;overflow:hidden;">','<span style="font-size: 10px;">{{collecting_money_down}}</span>',"</div>","</div>",'<div style="float:left;height: 22mm; padding: 2mm 0 0 2mm ; text-align: center; overflow:hidden;">',"</div>","</div>",'<div style="height: 6mm; line-height: 6mm; overflow:hidden;">','<span style="font-size: 14px; padding-left: 3mm;">代收金额&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;金额（小写）:</span>',"</div>","</div>","</div>"],n=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; margin:0 auto;height: 186mm; font-family: "宋体";overflow: hidden;font-size:12px">','<div style="width:100mm; height:6mm; border-bottom:1px solid #000; overflow:hidden;">',"</div>",'<div style="width:100mm; height:25mm; border-bottom:1px solid #000; overflow:hidden">','<div style="float:left;width:75mm; border-right:1px solid #000; height:25mm; overflow:hidden">','<div style="width:75mm; border-bottom:1px solid #000; height:11mm;overflow:hidden">','<span style="display:block; font-size:18px; font-weight:bold;margin:3mm 0 0 18mm;">{{waybill_num_barcode_up}}</span>',"</div>",'<div style="width:75mm; height:14mm; overflow:hidden">','<span style="display:block; margin:2mm 0 0 2mm; font-size:10px; font-weight:bold;">寄件人：{{send_name_up}} 联系方式：{{send_mobile_up}}日期：{{send_date_day_up}}</span>','<span style="display:block; margin:0mm 0 0 2mm; font-size:10px; font-weight:bold">地址：{{send_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left; overflow:hidden">',"</div>","</div>",'<div style="width:100mm; height: 25mm; overflow:hidden; border-bottom:1px solid #000">','<div style="float:left; width:98mm; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold">收件人：{{receiver_name_up}}  电话：{{receiver_mobile_up}}</div>','<div style="float:left;width:98mm;  margin:2mm 0 0 2mm; font-size:14px; height:10mm; font-weight:bold">{{receiver_detail_address_up}}</div>','<div style="float:left; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold">品名：{{item_short_title}}</div>',"</div>",'<div style="width:100mm; height: 15mm; overflow:hidden; text-align:center; border-bottom:1px solid #000">','<span style="font-size:44px;font-weight:bold;letter-spacing:4px; display:inline-block; margin-top:2mm;">{{express_short_address}}</span>',"</div>",'<div style="width:100mm; height: 25mm; overflow:hidden; text-align:center ">',"</div>",'<div style="width:100mm; height: 23mm; overflow:hidden; border-bottom:1px solid #000">',"</div>",'<div style="width:100mm; height: 15mm; overflow:hidden; border-bottom:1px solid #000">','<div style="float:left; width:45mm; overflow:hidden; height:15mm; border-right:1px solid #000">',"</div>",'<div style="float:left; overflow:hidden; height:15mm;">','<span style="display:block; font-size:22px; font-weight:bold;margin:3mm 0 0 3mm;">{{waybill_num_barcode_down}}</span>',"</div>","</div>",'<div style="width:100mm; height: 15mm; overflow:hidden; border-bottom:1px solid #000">','<span style="display:block; margin:2mm 0 0 2mm; font-size:11px; font-weight:bold;">寄件人：{{send_name_up}} 联系方式：{{send_mobile_up}}日期：{{send_date_day_up}}</span>','<span style="display:block; margin:1mm 0 0 2mm; font-size:11px; font-weight:bold">地址：{{send_detail_address_down}}</span>',"</div>",'<div class="receiver-info" style="width:100mm; height: 25mm; overflow:hidden; border-bottom:1px solid #000">','<div style="float:left; width:98mm; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold">收件人：{{receiver_name_down}}  电话：{{receiver_mobile_up}}</div>','<div style="float:left;width:98mm;  margin:2mm 0 0 2mm; font-size:14px; height:10mm; font-weight:bold">地址：{{receiver_detail_address_down}}</div>','<div style="float:left; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold">品名：{{item_short_title}}</div>',"</div>",'<div class="note-helpmsg" style="width:100mm; height: 11.5mm; overflow:hidden; ">','<div style="float:left; width:45mm; overflow:hidden; height:11.5mm; border-right:1px solid #000">','<span style="float:left; margin:2mm; font-size:10px;">您对此单的签收，代表您已验货，确认商品信息无误，包装完好，没有划痕，破损等表面质量问题。</span>',"</div>",'<div style="float:left; overflow:hidden; height:11.5mm;">','<span style="float:left; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold">签收</span>',"</div>","</div>","</div>","</div>"],l=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:166mm;overflow: hidden;">','<div style="height: 12.7mm; overflow: hidden ">','<div style="float: left; width: 30mm; text-align: center; margin-left: 20mm; padding-top: 2mm">','<span style="font-size: 14pt;font-family: 黑体; display: block; margin-bottom: 2mm">标准快件</span>','<span style="font-size: 8pt; font-family: 黑体;">成就商业 精彩生活</span>',"</div>",'<div style="margin-left: 50mm; border-left: 1px solid #000; height: 15mm;">',"</div>","</div>",'<div style="height: 20mm; margin-left: 9mm; font-size: 12px; font-family: 宋体;">','<span style="display: block; margin-top:1mm;">{{receiver_name_up}}</span>','<span style="display: block; padding: 1mm 0">电话: {{receiver_mobile_up}}</span>',"<span>地址:{{receiver_detail_address_up}}</span>","</div>",'<div style="height: 15mm; margin-left: 9mm;overflow:hidden;font-family: 宋体;">','<div style="float: left; width: 62mm; margin-top:1mm;font-size: 10px;">','<span style="display: block">{{send_name_up}}</span>','<span style="display: block; padding: 1mm 0">电话: {{send_mobile_up}}</span>',"<span>地址:{{send_detail_address_up}}</span>","</div>",'<div style="margin-left: 62mm; height: 15mm; padding: 0 0 0 2mm; font-size: 10px; border-left: 1px solid #000">','<span style="display: block; padding: 2px 0 0 0">付款方式: </span>','<span style="display: block; padding: 1px 0;">保价费用:</span>','<span style="display: block; padding: 1px 0;">投保金额:</span>','<span style="display: block">签单返还:</span>',"</div>","</div>",'<div style="height: 15mm; margin-left: 9mm; line-height:13mm; overflow:hidden;">','<span style="font-size: 36px; font-family: 黑体;font-weight: bold;">{{express_short_address}}</span>',"</div>",'<div style="height: 20mm; margin-left: 9mm;overflow:hidden; font-family: 宋体;">','<div style="float: left; width: 62mm;height: 20mm; position: relative">','<span style="position: absolute; top: 2mm; left: 0">',"</span>",'<span style="position: absolute; top: 1mm; left: 18mm;">收件人签收</span>','<span style="position: absolute; bottom: 1mm; left: 18mm; font-size: 10px">',"运单编号: {{waybill_num_barcode_up}}<br />打印日期: {{trade_print_time_day}}","</span>","</div>",'<div style="margin-left: 62mm; height: 20mm; padding: 0 2mm; font-size: 12px; border-left: 1px solid #000">','<span style="display: block; padding:2px 0 0 0;">始发:</span>','<span style="display: block; padding: 1px 0">到达:</span>','<span style="display: block;font-family: 黑体; text-align: center; font-size: 38px"></span>',"</div>","</div>",'<div style="height: 6mm; overflow: hidden"></div>','<div style="height: 15mm;overflow:hidden;">','<div style="width: 50mm; text-align: center">',"</div>","</div>",'<div class="receiver-down" style="height:15mm; overflow: hidden; position: relative; font-family: 宋体;">','<span style="position: absolute; top: 1mm; left: 13mm; font-size: 12px;">{{receiver_name_down}}</span>','<span style="position: absolute; top: 1mm; right: 7mm; font-size: 12px">电话: {{receiver_mobile_down}}</span>','<span style="position: absolute; left: 3mm; top: 6mm">地址:{{receiver_detail_address_down}}</span>',"</div>",'<div class="sender-down" style="height:15mm; overflow: hidden;">','<div style="float: left; width: 62mm;height: 15mm; position: relative">','<span style="position: absolute; top: 1mm; left: 13mm; font-size: 12px;">{{send_name_down}}</span>','<span style="position: absolute; top: 6mm; left: 3mm; font-size: 10px">电话:{{send_mobile_down}}</span>','<span style="position: absolute; left: 3mm; top: 9mm;font-size: 10px;">地址:{{send_detail_address_down}}</span>',"</div>",'<div style="margin-left: 69mm; height: 15mm; padding: 0 2mm; font-size: 10px; border-left: 1px solid #000">','<span style="display: block; padding: 4px 0 0 0">付款方式: </span>','<span style="display: block; padding: 1px 0;">保价费用:</span>','<span style="display: block; padding: 1px 0;">投保金额:</span>','<span style="display: block">签单返还:</span>',"</div>","</div>",'<div style="height:35mm; overflow: hidden;">','<div style="float: left; width: 66mm;">',"&nbsp;&nbsp;&nbsp;商品信息：{{item_short_title-item_properties-item_num}}","</div>",'<div style="margin-left: 69mm; overflow: hidden;height: 35mm; text-align:center">',"</div>","</div>","</div>","</div>"],d=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/1 Tahoma,Helvetica,Arial,sans-serif; text-align:left;"><meta charset="UTF-8">','<div style="font-family: 黑体; width: 96mm; margin: 2mm 0 0 2mm;height:146mm;overflow: hidden;">','<div style="clear: both; overflow: hidden; height: 20mm;overflow: hidden; border-bottom: 1px dashed #000">','<div style="float: left; width: 40mm; height: 20mm; text-align: center; border-right: 1px dashed #000">','<span style="font-size: 20pt; display:block;margin-top: 8mm;">标准快递</span>',"</div>",'<div style="float: right; width: 56mm;height: 20mm; line-height: 20mm; margin-right: -1px">',"</div>","</div>",'<div style="position: relative; height: 32mm; overflow: hidden;border-bottom: 1px dashed #000">','<div style="position: absolute; top: 0; left: 0; width: 46mm; height: 15mm; border-bottom: 1px dashed #000; font-size: 12px;overflow: hidden;">','<span style="float: left; margin:1mm 0 0 1mm">寄件：</span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;">{{send_name_up}} {{send_mobile_up}}</span>','<span style="display: block; padding: 2px 0;">{{shop_title_up}}</span>',"<span>{{send_detail_address_down}}</span>","</div>","</div>",'<div style="position: absolute; top: 0; right: 0; width: 50mm; height: 19mm; line-height:18mm; border-bottom: 1px dashed #000; border-left: 1px dashed #000; text-align:center; font-size:32px; ">{{express_short_address}}</div>','<div style="position: absolute; bottom: 0; left: 0; width: 94mm; height: 15mm;padding: 1mm">','<span style="float:left;">收件：</span>','<div style="margin-left: 10mm; overflow: hidden; font-size: 14px">','<span style="display: block; margin-bottom: 2px">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_state_city_district_up}} <br />{{receiver_address_up}}</span>","</div>","</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 14mm; overflow: hidden">','<div style="float: left;width: 38mm; border-right: 1px dashed #000; height: 12mm; padding: 1mm">','<span style="display: block; padding: 2px 0">付款方式:</span>','<span style="display: block; padding: 1px 0">计费重量:</span>','<span style="display: block; padding: 2px 0">保价金额:</span>',"</div>",'<div style="margin-left:40mm; height: 14mm;">','<span style="display: block; padding-bottom: 5px;">收件人代收人:</span>','<span style="display: block; padding-bottom: 5px;">','签收时间:<span style="display: inline-block; text-align: right; width: 12mm">年</span><span style="display: inline-block; text-align: right; width: 8mm">月</span><span style="display: inline-block; text-align: right; width: 8mm">日</span><span style="display: inline-block; text-align: right; width: 8mm">时</span>',"</span>",'<span style="display: block;font-size: 8px;line-height: 8px;">快件送达收货人地址，经收货人或收件人允许的代收人签字，视为送达。</span>',"</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 20mm; overflow: hidden;position: relative">','<div style="position: absolute; width: 40mm; height: 3mm; top: 2px; left: 2px">',"订单号:","</div>",'<div style="position: absolute; top: 5px; right: 5mm; text-align: right; width: 40mm">件数: {{item_num}}件 重量: {{trade_package_weight}}</div>','<div style="height: 10.5mm; position: absolute; left: 2px; bottom: 0">','<span style="float: left">配货信息:</span>','<div style="margin-left: 16mm; overflow:hidden;">','<span style="display: block;margin-bottom: 2px">{{item_short_title-item_properties-item_num}}</span>',"</div>","</div>","</div>",'<div style="height: 4mm"></div>','<div style="border-top: 1px dashed #000; height: 15mm; overflow:hidden;">',"</div>",'<div style="border-top: 1px dashed #000; height: 17mm; overflow:hidden;">','<div style="float: left; width: 40mm;height: 17mm; border-right: 1px dashed #000;">','<span style="float: left; margin:1mm 0 0 1mm;">寄件：</span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;">{{send_name_down}} {{send_mobile_down}}</span>','<span style="display: block; padding: 2px 0;">{{shop_title_down}}</span>',"<span>{{send_detail_address_down}}</span>","</div>","</div>",'<div style="float: left;height: 17mm; overflow:hidden;width: 210px;">','<span style="float:left; margin:1mm 0 0 1mm;">收件：</span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">','<span style="display: block; margin-bottom: 2px">{{receiver_name_down}} {{receiver_mobile_down}}</span>',"<span>{{receiver_state_city_district_down}}<br />{{receiver_address_down}}</span>","</div>","</div>","</div>",'<div style="border-top: 1px dashed #000; height: 24mm; overflow:hidden;">','<div style="float: left; width: 68mm;overflow: hidden; border-right: 1px dashed #000;">','<div style="border-bottom: 1px dashed #000; height: 17mm;padding:0 1mm;overflow: hidden;">','<span style="float:left; margin-top:1mm">备注：</span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">',"<span>{{trade_buyer_message}}</span>","</div>","</div>",'<div style="height: 7mm; line-height: 7mm; padding-right: 10px; text-align: right">','<span style="float: left; padding-left: 10px">网址: www.ems.com.cn</span>客服电话: 11183',"</div>","</div>",'<div style="float: left;text-align:center; width: 27mm; height: 24mm;">',"</div>","</div>","</div>","</div>"],o=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/1 Tahoma,Helvetica,Arial,sans-serif; text-align:left;"><meta charset="UTF-8">','<div style="font-family: 黑体; width: 96mm; margin: 2mm 0 0 2mm;height:146.5mm;overflow: hidden;">','<div style="clear: both; overflow: hidden; height: 20mm;overflow: hidden; border-bottom: 1px dashed #000">','<div style="float: left; width: 40mm; height: 20mm; text-align: center; border-right: 1px dashed #000">','<span style="font-size: 20pt; display:block;margin-top: 8mm;">经济快递</span>',"</div>",'<div style="float: right; width: 56mm;height: 20mm; line-height: 20mm; margin-right: -1px">',"</div>","</div>",'<div style="position: relative; height: 32mm; overflow: hidden;border-bottom: 1px dashed #000">','<div style="position: absolute; top: 0; left: 0; width: 46mm; height: 15mm; border-bottom: 1px dashed #000; font-size: 12px;overflow: hidden;">','<span style="float: left; margin:1mm 0 0 1mm">寄件：</span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;">{{send_name_up}} {{send_mobile_up}}</span>','<span style="display: block; padding: 2px 0;">{{shop_title_up}}</span>',"<span>{{send_detail_address_down}}</span>","</div>","</div>",'<div style="position: absolute; top: 0; right: 0; width: 50mm; height: 19mm; line-height:18mm; border-bottom: 1px dashed #000; border-left: 1px dashed #000; text-align:center; font-size:32px; ">{{express_short_address}}</div>','<div style="position: absolute; bottom: 0; left: 0; width: 94mm; height: 15mm;padding: 1mm">','<span style="float:left;">收件：</span>','<div style="margin-left: 10mm; overflow: hidden; font-size: 14px">','<span style="display: block; margin-bottom: 2px">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_state_city_district_up}} <br />{{receiver_address_up}}</span>","</div>","</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 14mm; overflow: hidden">','<div style="float: left;width: 38mm; border-right: 1px dashed #000; height: 12mm; padding: 1mm">','<span style="display: block; padding: 2px 0">付款方式:</span>','<span style="display: block; padding: 1px 0">计费重量:</span>','<span style="display: block; padding: 2px 0">保价金额:</span>',"</div>",'<div style="margin-left:40mm; height: 14mm;">','<span style="display: block; padding-bottom: 5px;">收件人代收人:</span>','<span style="display: block; padding-bottom: 5px;">','签收时间:<span style="display: inline-block; text-align: right; width: 12mm">年</span><span style="display: inline-block; text-align: right; width: 8mm">月</span><span style="display: inline-block; text-align: right; width: 8mm">日</span><span style="display: inline-block; text-align: right; width: 8mm">时</span>',"</span>",'<span style="font-size: 8px;line-height: 8px;">快件送达收货人地址，经收货人或收件人允许的代收人签字，视为送达。</span>',"</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 20mm; overflow: hidden;position: relative">','<div style="position: absolute; width: 40mm; height: 3mm; top: 2px; left: 2px">',"订单号:","</div>",'<div style="position: absolute; top: 5px; right: 5mm; text-align: right; width: 40mm">件数: {{item_num}}件 重量: {{trade_package_weight}}</div>','<div style="height: 10.5mm; position: absolute; left: 2px; bottom: 0">','<span style="float: left">配货信息:</span>','<div style="margin-left: 16mm; height: 10mm;overflow:hidden;">','<span style="display: block;margin-bottom: 2px">{{item_short_title-item_properties-item_num}}</span>',"</div>","</div>","</div>",'<div style="height: 4mm"></div>','<div style="border-top: 1px dashed #000; height: 15mm; overflow:hidden;">',"</div>",'<div style="border-top: 1px dashed #000; height: 17mm; overflow:hidden;">','<div style="float: left; width: 40mm;height: 17mm; border-right: 1px dashed #000;">','<span style="float: left; margin:1mm 0 0 1mm;">寄件：</span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;">{{send_name_down}} {{send_mobile_down}}</span>','<span style="display: block; padding: 2px 0;">{{shop_title_down}}</span>',"<span>{{send_detail_address_down}}</span>","</div>","</div>",'<div style="float: left;height: 17mm; overflow:hidden;width: 210px;">','<span style="float:left; margin:1mm 0 0 1mm;">收件：</span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">','<span style="display: block; margin-bottom: 2px">{{receiver_name_down}} {{receiver_mobile_down}}</span>',"<span>{{receiver_state_city_district_down}}<br />{{receiver_address_down}}</span>","</div>","</div>","</div>",'<div style="border-top: 1px dashed #000; height: 24mm; overflow:hidden;">','<div style="float: left; width: 68mm;overflow: hidden; border-right: 1px dashed #000;">','<div style="border-bottom: 1px dashed #000; height: 17mm;padding:0 1mm;overflow: hidden;">','<span style="float:left; margin-top:1mm">备注：</span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">',"<span>{{trade_buyer_message}}</span>","</div>","</div>",'<div style="height: 7mm; line-height: 7mm; padding-right: 10px; text-align: right">','<span style="float: left; padding-left: 10px">网址: www.ems.com.cn</span>客服电话: 11183',"</div>","</div>",'<div style="float: left;text-align:center; width: 27mm; height: 24mm;">',"</div>","</div>","</div>","</div>"],r=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 96mm; height:149mm; margin: 0 0 0 2mm;overflow: hidden;font-family:黑体">','<div style="border: 1px solid #000; height: 87mm; overflow:hidden;">','<div style="border-bottom: 1px solid #000; height:15mm; overflow:hidden;">',"&nbsp;","</div>",'<div style="border-bottom: 1px solid #000; height: 11mm; overflow: hidden">','<div style="float:left; width: 70mm; border-right: 1px solid #000; height: 11mm; overflow:hidden;">','<span style="float: left; padding: 1mm 0 0 2mm">寄件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1px">{{send_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{send_mobile_up}}</span>','<span style="display: block;">{{send_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 11mm; ">','<span style="font-size: 12px;padding: 2px 0 6px 2px; display: block">原寄地</span>','<span style="font-size: 12px; width: 30mm; display: block; font-weight: bold;text-align: center;"></span>',"</div>","</div>",'<div style="height: 12mm; overflow:hidden;">','<div style="float:left; width: 70mm; height: 12mm;border-right: 1px solid #000; overflow:hidden;">','<span style="float: left; padding: 2mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;">{{receiver_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_up}}</span>','<span style="display: block; font-size: 12px; padding: 1px 0">{{receiver_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 10mm;">','<span style="font-size: 12px;padding: 2px 0 0 2px; display: block">目的地</span>','<span style="font-size: 28px; width: 30mm; display: block; font-weight: bold;  text-align: center;">{{express_short_address}}</span>',"</div>","</div>",'<div style="height:22mm; overflow:hidden; border-top: 2px solid #000; border-bottom: 2px solid #000">','<div style="float:left; width: 70mm; height: 22mm; text-align: center; line-height: 22mm; border-right: 1px solid #000">',"</div>",'<div style="margin-left: 63mm; overflow:hidden;">','<span style="display: block; height: 8mm; overflow:hidden; text-align: center">','<span style="font-size: 16px; display: block; padding: 2px 0; letter-spacing: 2px; font-weight: bold">&nbsp;</span>','<span style="font-weight: bold">&nbsp;</span>',"</span>",'<span style="display: block; padding: 1mm 0 1px 2mm">收件员</span>','<span style="display: block; padding: 1px 0 1px 1mm">寄件日期</span>','<span style="display: block;  padding: 1px 0 1px 2mm">派件员</span>',"</div>","</div>",'<div style="overflow:hidden;height: 30mm">','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">付款方式：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月结账号：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三方地区：</span>','<span style="display: block; font-size: 12px; padding: 1px 0 1px 2mm">保价声明值：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;保费：</span>','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">代收货款金额：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;卡号：</span>','<em style="display: block; padding: 2mm 0 0; font-size: 10px; margin-right: 22mm; text-align: right">收方签署:</em>','<em style="display: block; padding: 1mm 0 0;text-align: right;">日期:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日&nbsp;</em>'," </div>","</div>",'<div style="height: 2mm;"></div>','<div style="border: 1px solid #000; height: 59mm; overflow:hidden;">','<div style="height: 40mm; border-bottom: 1px solid #000; overflow:hidden; position:relative">','<div style="height: 40mm; width: 30mm; position: absolute; top: 0; right: 0;  text-align: center;">',"</div>",'<div style="position: absolute;top: 0; left:0; height: 14mm; width: 70mm; text-align: center; line-height: 14mm; border-bottom: 1px solid #000; border-right: 1px solid #000;">',"</div>",'<div style="position: absolute;top: 14mm; left:0; height: 15mm; width: 70mm; border-bottom: 1px solid #000; font-size: 10px;border-right: 1px solid #000;">','<span style="float: left; padding: 1mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1mm">{{receiver_name_down}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_down}}</span>','<span style="display: block; ">{{receiver_detail_address_down}}</span>',"</div>","</div>",'<div style="position: absolute;bottom: 0; left:0; height: 11mm; width: 70mm; line-height: 11mm;border-right: 1px solid #000;">',"<span>订单号：</span>","</div>","</div>",'<div style="overflow:hidden; height:19mm;">','<div style="margin:1mm">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>","</div>"],p=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 96mm; height:149mm; margin: 0 0 0 2mm;overflow: hidden;font-family:黑体">','<div style="border: 1px solid #000; height: 87mm; overflow:hidden;">','<div style="border-bottom: 1px solid #000; height:15mm; overflow:hidden;">','<div style="float:left;margin-left: 35mm; height: 15mm; width: 30mm;font-size: 58px; font-weight: bold; line-height: 15mm; text-align: center">COD</div>',"</div>",'<div style="border-bottom: 1px solid #000; height: 11mm; overflow: hidden">','<div style="float:left; width: 70mm; border-right: 1px solid #000; height: 11mm; overflow:hidden;">','<span style="float: left; padding: 1mm 0 0 2mm">寄件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1px">{{send_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{send_mobile_up}}</span>','<span style="display: block;">{{send_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 11mm; ">','<span style="font-size: 12px;padding: 2px 0 6px 2px; display: block">原寄地</span>','<span style="font-size: 12px; width: 30mm; display: block; font-weight: bold;text-align: center;"></span>',"</div>","</div>",'<div style="height: 12mm; overflow:hidden;">','<div style="float:left; width: 70mm; height: 12mm;border-right: 1px solid #000; overflow:hidden;">','<span style="float: left; padding: 2mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;">{{receiver_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_up}}</span>','<span style="display: block; font-size: 12px; padding: 1px 0">{{receiver_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 10mm;">','<span style="font-size: 12px;padding: 2px 0 0 2px; display: block">目的地</span>','<span style="font-size: 28px; width: 30mm; display: block; font-weight: bold;  text-align: center;">{{express_short_address}}</span>',"</div>","</div>",'<div style="height:22mm; overflow:hidden; border-top: 2px solid #000; border-bottom: 2px solid #000">','<div style="float:left; width: 70mm; height: 22mm; text-align: center; line-height: 22mm; border-right: 1px solid #000">',"</div>",'<div style="margin-left: 63mm; overflow:hidden;">','<span style="display: block; height: 8mm; overflow:hidden; text-align: center">','<span style="font-size: 16px; display: block; padding: 2px 0; letter-spacing: 2px; font-weight: bold">&nbsp;</span>','<span style="font-weight: bold">&nbsp;</span>',"</span>",'<span style="display: block; padding: 1mm 0 1px 2mm">收件员</span>','<span style="display: block; padding: 1px 0 1px 1mm">寄件日期</span>','<span style="display: block;  padding: 1px 0 1px 2mm">派件员</span>',"</div>","</div>",'<div style="overflow:hidden;height: 30mm">','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">付款方式：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月结账号：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三方地区：</span>','<span style="display: block; font-size: 12px; padding: 1px 0 1px 2mm">保价声明值：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;保费：</span>','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">代收货款金额：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;卡号：</span>','<em style="display: block; padding: 2mm 0 0; font-size: 10px; margin-right: 22mm; text-align: right">收方签署:</em>','<em style="display: block; padding: 1mm 0 0;text-align: right;">日期:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日&nbsp;</em>'," </div>","</div>",'<div style="height: 2mm;"></div>','<div style="border: 1px solid #000; height: 59mm; overflow:hidden;">','<div style="height: 40mm; border-bottom: 1px solid #000; overflow:hidden; position:relative">','<div style="height: 40mm; width: 30mm; position: absolute; top: 0; right: 0;  text-align: center;">',"</div>",'<div style="position: absolute;top: 0; left:0; height: 14mm; width: 70mm; text-align: center; line-height: 14mm; border-bottom: 1px solid #000; border-right: 1px solid #000;">',"</div>",'<div style="position: absolute;top: 14mm; left:0; height: 15mm; width: 70mm; border-bottom: 1px solid #000; font-size: 10px;border-right: 1px solid #000;">','<span style="float: left; padding: 1mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1mm">{{receiver_name_down}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_down}}</span>','<span style="display: block; ">{{receiver_detail_address_down}}</span>',"</div>","</div>",'<div style="position: absolute;bottom: 0; left:0; height: 11mm; width: 70mm; line-height: 11mm;border-right: 1px solid #000;">',"<span>订单号：</span>","</div>","</div>",'<div style="overflow:hidden; height:19mm;">','<div style="margin:1mm">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>","</div>"],c=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 96mm; height:149mm; margin: 0 0 0 2mm;overflow: hidden;font-family:黑体">','<div style="border: 1px solid #000; height: 87mm; overflow:hidden;">','<div style="border-bottom: 1px solid #000; height:15mm; overflow:hidden;">','<div style="float:left; height: 15mm;margin-left:40mm;font-size: 68px; font-weight: bold; line-height: 15mm; text-align: center">E</div>',"</div>",'<div style="border-bottom: 1px solid #000; height: 11mm; overflow: hidden">','<div style="float:left; width: 70mm; border-right: 1px solid #000; height: 11mm; overflow:hidden;">','<span style="float: left; padding: 1mm 0 0 2mm">寄件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1px">{{send_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{send_mobile_up}}</span>','<span style="display: block;">{{send_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 11mm; ">','<span style="font-size: 12px;padding: 2px 0 6px 2px; display: block">原寄地</span>','<span style="font-size: 12px; width: 30mm; display: block; font-weight: bold;text-align: center;"></span>',"</div>","</div>",'<div style="height: 12mm; overflow:hidden;">','<div style="float:left; width: 70mm; height: 12mm;border-right: 1px solid #000; overflow:hidden;">','<span style="float: left; padding: 2mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;">{{receiver_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_up}}</span>','<span style="display: block; font-size: 12px; padding: 1px 0">{{receiver_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 10mm;">','<span style="font-size: 12px;padding: 2px 0 0 2px; display: block">目的地</span>','<span style="font-size: 28px; width: 30mm; display: block; font-weight: bold;  text-align: center;">{{express_short_address}}</span>',"</div>","</div>",'<div style="height:22mm; overflow:hidden; border-top: 2px solid #000; border-bottom: 2px solid #000">','<div style="float:left; width: 70mm; height: 22mm; text-align: center; line-height: 22mm; border-right: 1px solid #000">',"</div>",'<div style="margin-left: 63mm; overflow:hidden;">','<span style="display: block; height: 9.5mm; overflow:hidden; text-align: center">','<span style="font-size: 16px; display: block; padding: 2px 0; letter-spacing: 2px; font-weight: bold">电商特惠</span>','<span style="font-weight: bold">&nbsp;</span>',"</span>",'<span style="display: block; padding: 1mm 0 1px 2mm">收件员</span>','<span style="display: block; padding: 1px 0 1px 1mm">寄件日期</span>','<span style="display: block;  padding: 1px 0 1px 2mm">派件员</span>',"</div>","</div>",'<div style="overflow:hidden;height: 30mm">','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">付款方式：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月结账号：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三方地区：</span>','<span style="display: block; font-size: 12px; padding: 1px 0 1px 2mm">保价声明值：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;保费：</span>','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">代收货款金额：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;卡号：</span>','<em style="display: block; padding: 2mm 0 0; font-size: 10px; margin-right: 22mm; text-align: right">收方签署:</em>','<em style="display: block; padding: 1mm 0 0;text-align: right;">日期:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日&nbsp;</em>'," </div>","</div>",'<div style="height: 2mm;"></div>','<div style="border: 1px solid #000; height: 59mm; overflow:hidden;">','<div style="height: 40mm; border-bottom: 1px solid #000; overflow:hidden; position:relative">','<div style="height: 40mm; width: 30mm; position: absolute; top: 0; right: 0;  text-align: center;">',"</div>",'<div style="position: absolute;top: 0; left:0; height: 14mm; width: 70mm; text-align: center; line-height: 14mm; border-bottom: 1px solid #000; border-right: 1px solid #000;">',"</div>",'<div style="position: absolute;top: 14mm; left:0; height: 15mm; width: 70mm; border-bottom: 1px solid #000; font-size: 10px;border-right: 1px solid #000;">','<span style="float: left; padding: 1mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1mm">{{receiver_name_down}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_down}}</span>','<span style="display: block; ">{{receiver_detail_address_down}}</span>',"</div>","</div>",'<div style="position: absolute;bottom: 0; left:0; height: 11mm; width: 70mm; line-height: 11mm;border-right: 1px solid #000;">',"<span>订单号：</span>","</div>","</div>",'<div style="overflow:hidden; height:19mm;">','<div style="margin:1mm">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>","</div>"],_=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 96mm; height:149mm; margin: 0 0 0 2mm;overflow: hidden;font-family:黑体">','<div style="border: 1px solid #000; height: 87mm; overflow:hidden;">','<div style="border-bottom: 1px solid #000; height:15mm; overflow:hidden;">','<div style="float:left;margin-left: 35mm; height: 15mm; width: 30mm;font-size: 58px; font-weight: bold; line-height: 15mm; text-align: center">COD</div>','<div style="float:left; height: 15mm;margin-left:0;font-size: 68px; font-weight: bold; line-height: 15mm; text-align: center">E</div>',"</div>",'<div style="border-bottom: 1px solid #000; height: 11mm; overflow: hidden">','<div style="float:left; width: 70mm; border-right: 1px solid #000; height: 11mm; overflow:hidden;">','<span style="float: left; padding: 1mm 0 0 2mm">寄件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1px">{{send_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{send_mobile_up}}</span>','<span style="display: block;">{{send_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 11mm; ">','<span style="font-size: 12px;padding: 2px 0 6px 2px; display: block">原寄地</span>','<span style="font-size: 12px; width: 30mm; display: block; font-weight: bold;text-align: center;"></span>',"</div>","</div>",'<div style="height: 12mm; overflow:hidden;">','<div style="float:left; width: 70mm; height: 12mm;border-right: 1px solid #000; overflow:hidden;">','<span style="float: left; padding: 2mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;">{{receiver_name_up}}&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_up}}</span>','<span style="display: block; font-size: 12px; padding: 1px 0">{{receiver_detail_address_up}}</span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 10mm;">','<span style="font-size: 12px;padding: 2px 0 0 2px; display: block">目的地</span>','<span style="font-size: 28px; width: 30mm; display: block; font-weight: bold;  text-align: center;">{{express_short_address}}</span>',"</div>","</div>",'<div style="height:22mm; overflow:hidden; border-top: 2px solid #000; border-bottom: 2px solid #000">','<div style="float:left; width: 70mm; height: 22mm; text-align: center; line-height: 22mm; border-right: 1px solid #000">',"</div>",'<div style="margin-left: 63mm; overflow:hidden;">','<span style="display: block; height: 9.5mm; overflow:hidden; text-align: center">','<span style="font-size: 16px; display: block; padding: 2px 0; letter-spacing: 2px; font-weight: bold">电商特惠</span>','<span style="font-weight: bold">&nbsp;</span>',"</span>",'<span style="display: block; padding: 1mm 0 1px 2mm">收件员</span>','<span style="display: block; padding: 1px 0 1px 1mm">寄件日期</span>','<span style="display: block;  padding: 1px 0 1px 2mm">派件员</span>',"</div>","</div>",'<div style="overflow:hidden;height: 30mm">','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">付款方式：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月结账号：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;第三方地区：</span>','<span style="display: block; font-size: 12px; padding: 1px 0 1px 2mm">保价声明值：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;保费：</span>','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm">代收货款金额：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;卡号：</span>','<em style="display: block; padding: 2mm 0 0; font-size: 10px; margin-right: 22mm; text-align: right">收方签署:</em>','<em style="display: block; padding: 1mm 0 0;text-align: right;">日期:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;日&nbsp;</em>'," </div>","</div>",'<div style="height: 2mm;"></div>','<div style="border: 1px solid #000; height: 59mm; overflow:hidden;">','<div style="height: 40mm; border-bottom: 1px solid #000; overflow:hidden; position:relative">','<div style="height: 40mm; width: 30mm; position: absolute; top: 0; right: 0;  text-align: center;">',"</div>",'<div style="position: absolute;top: 0; left:0; height: 14mm; width: 70mm; text-align: center; line-height: 14mm; border-bottom: 1px solid #000; border-right: 1px solid #000;">',"</div>",'<div style="position: absolute;top: 14mm; left:0; height: 15mm; width: 70mm; border-bottom: 1px solid #000; font-size: 10px;border-right: 1px solid #000;">','<span style="float: left; padding: 1mm 0 0 2mm">收件：</span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1mm">{{receiver_name_down}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_mobile_down}}</span>','<span style="display: block; ">{{receiver_detail_address_down}}</span>',"</div>","</div>",'<div style="position: absolute;bottom: 0; left:0; height: 11mm; width: 70mm; line-height: 11mm;border-right: 1px solid #000;">',"<span>订单号：</span>","</div>","</div>",'<div style="overflow:hidden; height:19mm;">','<div style="margin:1mm">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>","</div>"],m=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;"><meta charset="UTF-8">','<div style="font-family: 黑体; width:97.6mm; height:199.2mm; margin:2mm">','<div style="height:42.026mm;border-bottom:1px solid #000;overflow: hidden; ">','<div style="padding:1mm 3mm 0mm 1mm;">','<div style="clear: both; overflow: hidden; ">','<div style="float: left; width: 54mm; text-align: left;overflow: hidden;">','<div style="font-size: 8pt;font-family: 新宋体">始发网点：{{originating}}</div>','<div style="font-size: 8pt;font-family: 新宋体">寄件人：{{send_name_up}}</div>','<div style="font-size: 8pt;font-family: 新宋体">寄件人电话：{{send_mobile_up}}</div>','<div style="font-size: 8pt;font-family: 新宋体">寄件公司：{{shop_title_up}}</div>','<div style="font-size: 8pt;font-family: 新宋体">寄件人地址:{{send_detail_address_up}}</div>',"</div>",'<div style="overflow: hidden;padding-top: 1mm;float: right;width:39mm; ">','<div style="clear: both; overflow: hidden; ">','<div style="width: 10mm; height: 12mm;text-align: center; ">','<div style="font-size: 10pt;font-weight: bold;"></div>',"</div>",'<div style="margin-left:11mm;margin-top:-11mm;overflow:hidden;font-size: 7pt;text-align: left;">',"<div>体积：</div>","<div><span>{{send_date_up}}</span></div>","</div>","</div>","</div>","</div>","</div>",'<div style="padding-top: 2mm;overflow: hidden;">','<div style="padding:0 1mm;">','<div style="clear: both; overflow: hidden;float: left">','<div style="text-align: left;width:9mm;">','<span style="font-size: 10pt;font-weight: bold;">送达地址</span>',"</div>",'<div class="yunda-receiver" style="float: left;  overflow: hidden;font-size: 8pt;width:90mm;margin: -6.5mm 0 0 1mm;">','<div style="margin-left:9mm;font-family: 新宋体">收件人：{{receiver_name_up}}</div>','<div style="margin-left:9mm;font-family: 新宋体">收件人电话：{{receiver_mobile_up}}</div>','<div style="margin-left:9mm;font-family: 新宋体">收件公司：{{buyer_nick_up}}</div>','<div style="margin-left:9mm;font-family: 新宋体; height:25px;">收件人地址：{{receiver_detail_address_up}}</div>',"</div>","</div>","</div>","</div>",'<div style="padding-top: 2px;">','<span style="font-weight: bold;font-size: 14pt;padding-left:3mm;width:90mm">菜鸟电子面单一期暂无集包地</span>',"</div>","</div>",'<div style="height:22.678mm;border-bottom: 1px solid #000;padding-left:1mm;overflow: hidden;">','<div style="clear: both; overflow: hidden;">','<div style="float: left;width:22.678mm; text-align: center;border-right: 1px solid #000; ">','<div style="height:22.678mm;"></div>',"</div>",'<div style="overflow: hidden;float: left;">','<div style="clear: both; overflow: hidden;">','<div style="width:67mm;vertical-align:middle; overflow: hidden;text-align: center;word-break: break-all;padding-right:2mm;">','<span style="font-size: 28pt;font-weight: bold;line-height: 20mm;">{{express_short_address}}</span>',"</div>","</div>","</div>","</div>","</div>",'<div style="height:18.915mm;border-bottom: 1px solid #000;overflow: hidden; ">','<div style="text-align: center;padding-top:1mm;"></div>',"</div>",'<div style="height:6.88mm;line-height:6.88mm;border-bottom: 1px solid #000;overflow: hidden; ">','<div style="font-size: 11pt;font-weight: bold;padding-left: 3mm;">运单编号：<span>{{waybill_num_barcode_up}}</span></div>',"</div>",'<div style="height:11.899mm;border-bottom:1px solid #000;overflow: hidden; ">','<div style="overflow:hidden;">','<div style="float: left;width:50%; text-align: left;padding-top:3mm; ">','<span style="font-size: 7pt;padding-left:3mm;">收件人代签人：</span>',"</div>",'<div style="overflow: hidden;text-align: right;word-break: break-all;padding-right:2mm;">','<div style="font-size: 7pt;padding-top:3mm;">签收日期：&nbsp;&nbsp;&nbsp;&nbsp;年&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;日</div>',"</div>","</div>","</div>",'<div style="height:51.793mm;overflow: hidden; ">','<div class="note-description" style="height:40mm;padding:1mm 3mm 3mm 3mm;">','<div style="font-size:8pt;">服务描述：</div>','<div style="font-size:8pt;">订单号：{{trade_id}}</div>','<div style="font-size:8pt;">保险金额：</div>','<div style="font-size:8pt;">保险费：</div>','<div style="font-size:8pt;">到付金额：</div>',"</div>",'<div class="note-verified" style="border: 1px solid rgb(0, 0, 0); width: 50px; position: absolute; padding: 5px; left: 82mm;">已验视</div>',"</div>",'<div class="note-description" style="height:8.224mm;border-bottom: 1px solid #000;overflow: hidden;">','<div style="padding:1mm 1mm 0mm 1mm;">','<span style="font-size: 10pt;font-weight: bold;vertical-align: top;">{{waybill_num_barcode_down}}</span>',"</div>","</div>",'<div style="height:35.342mm;border-bottom: 1px solid #000;overflow: hidden;">','<div style="clear: both; overflow: hidden;boder-bottom:1px solid #000;">','<div style="float: left;text-align: left;width:54.2mm; ">','<div style="padding:1mm;overflow: hidden;">','<div><span style="font-size: 8pt;font-family: 新宋体">寄件人：{{send_name_down}}</span></div>','<div><span style="font-size: 8pt;font-family: 新宋体">寄件人电话：{{send_mobile_down}}</span></div>','<div><span style="font-size: 8pt;font-family: 新宋体">寄件公司：{{shop_title_down}}</span></div>','<div><span style="font-size: 8pt;font-family: 新宋体">寄件人地址：{{send_detail_address_down}}</span></div>','<div><span style="font-size: 8pt;font-family: 新宋体">收件人：{{receiver_name_down}}</span></div>','<div><span style="font-size: 8pt;font-family: 新宋体">收件人电话：{{receiver_mobile_down}}</span></div>','<div><span style="font-size: 8pt;white-space:nowrap;overflow: hidden;word-break:keep-all;font-family: 新宋体">收件公司：{{buyer_nick_down}}</span></div>','<div><span style="font-size: 8pt;font-family: 新宋体">收件人地址：{{receiver_detail_address_down}}</span></div>',"</div>","</div>",'<div class="note-description" style="overflow: hidden;height:35.342mm;border-left: 1px solid #000;">','<div style="padding:1mm;">','<div style="font-size:8pt;">服务描述：</div>','<div style="font-size:8pt;">订单号：{{trade_id}}</div>','<div style="font-size:8pt;">保险金额：</div>','<div style="font-size:8pt;">保险费：</div>','<div style="font-size:8pt;">到付金额：</div>',"</div>","</div>","</div>","</div>",'<div style="height:4mm;line-height: 4mm;font-family: 宋体;overflow: hidden; ">','<span style="font-size: 7pt;padding-left:2mm;">官方网站：http://www.yundaex.com</span>','<span style="font-size: 7pt;">客服热线：400-821-6789</span>','<span style="font-size: 7pt;padding-left:2mm;">收货人联 </span>',"</div>","</div>","</div>"],u=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,\'b8bf53\',sans-serif;">',"<div style=\"width: 100mm;height: 148mm;margin: 5px auto;overflow: hidden; font-family: '黑体';\">",'<div style="height: 30mm;overflow: hidden;">','<div style="padding: 2mm 0 2mm 2mm; height: 26mm; width: 74mm; float: left">','<div style="overflow:hidden;">','<span style="font-size: 10px; display: block; padding: 1mm 0">',"寄件人: {{send_name_up}} &nbsp;&nbsp;&nbsp;&nbsp; 联系电话: {{send_mobile_up}}","</span>",'<span style="font-size: 10px; display: block; padding-bottom: 1mm">',"寄件单位: {{seller_nick_up}}","</span>",'<span style="font-size: 10px; display: block; padding-bottom: 1mm">',"寄件地址: {{send_detail_address_up}}","</span>","</div>",'<div style="">','<div style="float: left; width: 38mm; overflow:hidden;">','<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"代收货款:","</span>",'<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"运单编号: {{waybill_num_barcode_up}}","</span>",'<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"订单编号: {{trade_id}}","</span>","</div>",'<div style="margin-left: 38mm;">','<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"货物信息:","</span>",'<span style="display: block; font-size: 10px; height: 10mm;overflow:hidden;">',"{{item_short_title-item_properties-item_num}}","</span>","</div>","</div>","</div>",'<div style="margin-left: 74mm; text-align: center; padding-top: 7.5mm; overflow: hidden">',"</div>","</div>",'<div style="height: 1.5mm; overflow:hidden;border-top: 1px dashed #000;border-bottom: 1px dashed #000;"></div>','<div style="height: 8.5mm; line-height: 7mm; text-align: center; border-bottom: 1px solid #000;overflow: hidden;">','<span style="display: block; font-size: 28px; font-weight: bold; letter-spacing: 1mm">{{express_short_address}}</span>',"</div>",'<div style="height:21mm; overflow: hidden; border-bottom: 1px solid #000">','<div style="padding: 1mm 0 1mm 2mm; height: 19mm; width: 80mm; letter-spacing: 1px;">','<div style="overflow:hidden;">','<span style="font-size: 11px; display: block; padding:1mm 0 1.5mm 0">',"寄件人: {{send_name_down}} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 联系电话: {{send_mobile_down}}","</span>",'<span style="font-size: 11px; display: block; padding-bottom: 1.5mm">',"寄件单位: {{seller_nick_down}}","</span>",'<span style="font-size: 11px; display: block; padding-bottom: 1.5mm">',"寄件地址: {{send_detail_address_down}}","</span>","</div>","</div>","</div>",'<div style="height:25mm; overflow: hidden; border-bottom: 1px solid #000">','<div style="margin: 0 0 1mm 2mm; height: 25mm; width: 77mm;float: left; border-right: 1px solid #000">','<div style="overflow:hidden;">','<span style="font-size: 14px; display: block; padding:1mm 0 1mm 0">',"收件人: {{receiver_name_up}}&nbsp;联系电话: {{receiver_mobile_up}}","</span>",'<span style="font-size: 14px; display: block; padding-bottom: 1mm">',"收件单位: {{buyer_nick_up}}","</span>",'<span style="font-size: 14px; display: block; height: 8mm; overflow:hidden; padding-bottom: 1.5mm">',"收件地址: {{receiver_detail_address_up}}","</span>",'<span style="text-align: center; display: block;font-size: 9px;">特殊约定:√ 不可开箱 √ 可开箱但不可使用 √ 可开箱可使用</span>',"</div>","</div>",'<div style="overflow:hidden; margin-left: 79mm; text-align: center">','<span style="font-size: 18px; display: block; letter-spacing: 1px; padding: 3mm 0 0 0">标准快递</span>',"</div>","</div>",'<div style="height: 27.5mm; overflow: hidden; border-bottom: 1px solid #000">','<div style="width: 54mm; float: left;">','<span style="margin-left: 12px;margin-top: 4px;">运单编号</span>',"</div>",'<div style="margin-left: 54mm; overflow:hidden;">','<span style="font-size: 14px; display: block; margin:3mm 0 8mm 0; text-align: center">签（代）收人：</span>','<span style="display: block; font-size: 14px; padding-bottom: 1mm; padding-left: 15mm;">',"年&nbsp;&nbsp;月&nbsp;&nbsp;日","</span>",'<span style="display: block; letter-spacing: 1px; font-size: 12px;">',"经收件人或寄件人允许的代签人签字，视为完整送达。","</span>","</div>","</div>",'<div style="height: 3mm; line-height: 3mm; padding: 1mm 2mm; text-align: right; font-size: 14px;">','<span style="float:left;">受理单位: </span>受理日期:&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;',"</div>",'<div style="height: 1.2mm; overflow:hidden;border-top: 1px dashed #000;border-bottom: 1px dashed #000;"></div>','<div style="height: 26mm; padding: 2mm; position: relative; overflow:hidden;">','<div style="position: absolute; top: -4px; left: 2mm; overflow:hidden; width: 52mm; height: 13.8mm;">','<span style="font-size: 10px; display: block; padding:1mm 0 1.5mm 0">',"收件人: {{receiver_name_down}} &nbsp; 联系电话: {{receiver_mobile_down}}","</span>",'<span style="font-size: 10px; display: block; overflow:hidden; padding-bottom: 1mm">',"收件地址: {{receiver_detail_address_up}}","</span>",'<span style="font-size: 10px; display: block;">',"发货日期: {{send_date_down}}","</span>","</div>",'<div style="position: absolute; left: 2mm; bottom: 1mm; width: 42mm; height: 11mm;top: 48px;">','<span style="margin-top: 4px; font-size: 10px;">订单编号</span>',"</div>",'<div style="position: absolute; bottom: 2mm; left: 44mm; width: 12mm; height: 12mm; border: 1px solid #000; overflow:hidden; text-align: center; line-height: 12mm;">','<span style="font-size: 38px;">{{item_cate_num}}</span>',"</div>",'<div style="position: absolute; left: 58mm; top: 3.2mm; overflow:hidden;">','<span style="letter-spacing: 2px; font-size: 18px; font-weight: bold; display:block;padding-bottom: 1mm">标准快递</span>','<span style="font-size: 12px; display: block; padding-bottom: 2px">',"运单编号: {{waybill_num_barcode_down}}","</span>",'<span style="font-size: 12px; display: block; padding-bottom: 2px">',"重量:   件数: {{item_num}}件","</span>",'<span style="font-size: 12px; display: block; padding-bottom: 2px">',"货物信息:","</span>",'<span style="font-size: 12px; padding-left: 1mm; display: block;">',"{{item_short_title-item_properties-item_num}}","</span>","</div>","</div>","</div>","</div>"],h=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,\'b8bf53\',sans-serif;">',"<div style=\"width: 100mm; height:148.5mm;margin: 5px auto;overflow: hidden; font-family: '黑体'; font-weight: bold;\">",'<div style="border-bottom: 1px solid #000; height: 21mm; overflow: hidden">','<div style="float:left; width: 34mm; overflow:hidden; text-align: center">','<span style="font-size: 30px; display: block; padding-top: 4mm">国内小包</span>','<span style="font-size: 20px"></span>',"</div>",'<div style="margin-left: 34mm; overflow:hidden; height: 21mm; line-height: 21mm ; text-align: center">',"</div>","</div>",'<div style="border-bottom: 1px solid #000; height: 8mm; overflow: hidden">','<span style="display: block; padding-left: 3mm; font-size: 20px; line-height: 8mm">{{express_short_address}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{receiver_city_up}}</span>',"</div>",'<div style="overflow: hidden; border-bottom: 1px solid #000; height: 23mm; font-size: 20px;">','<div style="float: left; width: 8mm; height: 23mm; border-right: 1px solid #000; text-align: center">','<span style="display: block; margin: 3mm 0 4mm -2mm;">收</span>','<span style="display: block; margin: 3mm 0 4mm -2mm;">件</span>',"</div>",'<div style="margin-left: 8mm; overflow:hidden; height: 19mm; padding: 2mm; font-size: 16px; font-weight: lighter">','<span style="display: block; padding-bottom: 2mm">{{receiver_name_up}} {{receiver_mobile_up}}</span>','<span style="display: block; height: 12mm; overflow:hidden;">{{receiver_detail_address_up}}</span>',"</div>","</div>",'<div style="overflow:hidden; border-bottom: 1px dashed #000; height: 38mm">','<div style="float: left; width: 54mm; height: 36mm; padding: 1mm; font-weight: lighter; font-size: 14px; border-right: 1px solid #000; position: relative">','<span style="display:block; padding-bottom: 2mm">订单号：{{trade_id}}</span>','<span style="display: block; padding-bottom: 1mm"> &nbsp;品名：{{item_short_title-item_num}}</span>','<span style="position: absolute; bottom:2mm; left: 2mm">重量(克)： </span>',"</div>",'<div style="margin-left: 56mm; height: 34mm; padding: 2mm; font-size: 16px">','<span style="display: block; padding-bottom: 1mm">收件人/代收人：</span>','<span style="display: block; padding-bottom: 16mm"></span>','<span style="display: block; padding-bottom: 1mm; font-size: 14px; font-weight: lighter">签收时间：</span>','<span style="display: block; font-size: 14px; font-weight: lighter">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;年&nbsp;&nbsp;月&nbsp;&nbsp;日&nbsp;&nbsp;时</span>',"</div>","</div>",'<div style="overflow:hidden; height: 18mm; position: relative">','<span style="position: absolute; bottom: 1mm; right: 4mm; font-size: 15px;">国内小包</span>',"</div>",'<div style="border-top: 1px solid #000; overflow:hidden; height: 12mm">','<div style="float: left; width: 8mm; border-right: 1px solid #000; height: 12mm; text-align: center">','<span style="display:block; font-size: 18px; padding-top: 1mm">收件 </span>',"</div>",'<div style="margin-left: 8mm; padding: 1mm; overflow:hidden; font-weight: lighter">','<span style="display: block; padding-bottom: 1mm">{{receiver_name_down}} {{receiver_mobile_down}}</span>','<span style="display: block; overflow:hidden;">{{receiver_detail_address_down}}</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; overflow:hidden; height: 30mm">','<div style="float: left; border-right: 1px solid #000; width: 69mm; height: 30mm">','<div style="border-bottom: 1px solid #000; width: 69mm; height: 16mm; overflow:hidden;">','<div style="float: left; width: 8mm; border-right: 1px solid #000; height: 16mm; line-height: 7mm; text-align: center">','<span style="display:block; font-size: 18px; padding-top: 1mm">寄件 </span>',"</div>",'<div style="margin-left: 8mm; padding: 1mm; height: 16mm; overflow:hidden; font-weight: lighter">','<span style="display: block; padding-bottom: 1mm">{{send_name_down}} {{send_mobile_down}}</span>','<span style="display: block; overflow:hidden;padding-bottom: 1mm">{{send_detail_address_down}}</span>','<span style="display: block; ">客户编码:34324324</span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; height: 6mm; line-height: 6mm; overflow:hidden;font-size: 14px;font-weight: lighter">','<span style="padding-left: 2mm">订单号:{{trade_id}}</span>',"</div>",'<div style="height: 6mm; line-height: 6mm; overflow:hidden; font-size: 14px;font-weight: lighter">','<span style="padding-left: 2mm">网址:www.11185.cn<span style="margin-left: 6mm">客服电话:11185</span></span>',"</div>","</div>",'<div style="height:26mm; width: 26mm; padding: 2mm; margin-left: 70mm; overflow:hidden;">',"</div>","</div>","</div>","</div>"],f=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,\'b8bf53\',sans-serif;">',"<div style=\"width: 96mm; height:148mm; margin: 1mm 0 0 2mm;overflow: hidden; font-family: '黑体'; font-weight: bold; border: 1px solid #000\">",'<div style="height:16mm; line-height: 15mm;border-bottom: 1px solid #000;">','<span style="font-size:44px; font-weight: bold;">{{express_short_address}}</span>',"</div>",'<div style="height: 33mm; padding: 0 2mm; overflow:hidden;  border-bottom: 1px solid #000">','<span style="font-size: 42px; font-weight: bold;text-align: center; display: block; padding:1mm 0 2mm 0">',"{{receiver_state_city_district_simple_up}}","</span>",'<span style="font-size: 15px; padding-left: 3mm; line-height: 6mm; overflow:hidden; display: block">',"{{receiver_address_up}}","</span>",'<span style="display: block; font-size: 18px; overflow:hidden; padding-bottom: 1mm;padding-top: 1mm;">','<span style="display: inline-block; width: 35mm; text-align: center">{{receiver_name_up}}</span>',"{{receiver_mobile_up}}","</span>",'<span style="display: block; font-size: 12px; overflow:hidden; padding-left: 38mm">',"</span>","</div>",'<div style="height: 44mm; overflow:hidden;  border-bottom: 1px dashed #000">','<div style="float:left;width: 53mm; padding-left: 2mm;">','<span style="width: 55mm; height: 17mm; display:block"></span>','<span style="display: block; height: 4mm; overflow:hidden; font-weight: normal; font-size: 10px; padding: 2mm 0 1mm 1mm">客户: {{buyer_nick_up}}</span>','<span style="display: block; font-weight: normal; font-size: 14px; padding-left: 1mm; padding-bottom: 2mm">订单号:{{trade_id}}</span>','<span style="display: block; font-size: 20px; padding-left: 1mm;  padding-bottom: 3mm">',"签收人:","</span>",'<span style="padding-left: 1mm; font-size: 12px;font-weight: normal; ">重要提示:请在确认货品然后再签收</span>',"</div>",'<div style="margin-left: 60mm;">','<span style="display: block; font-weight: normal; padding: 3mm 0 0 2mm">体积</span>','<span style="display: block; font-weight: normal; padding: 0 0 3mm 2mm">重量</span>','<span style="display: block; font-size: 14px; padding-bottom: 1mm">声明价值: {{insured_declared_value}}</span>','<span style="display: block; height: 2mm;">&nbsp;</span>','<span style="display: block; font-size: 24px; padding-bottom: 3mm">代收金额:</span>','<span style="display: block; font-size: 20px; padding-bottom: 3mm">{{premium}}&nbsp;</span>','<span style="display: block; font-size: 12px; text-align: center">',"年&nbsp;&nbsp;&nbsp;&nbsp;月&nbsp;&nbsp;&nbsp;&nbsp;日","</span>","</div>","</div>",'<div style="height:5mm; line-height: 5mm; overflow:hidden; padding: 0 6mm; border-bottom: 1px solid #000; text-align: right">','<span style="float:left;">宅急送</span>',"{{trade_print_time_day}}","</div>",'<div style="height: 19mm; overflow:hidden; position: relative; border-bottom: 1px solid #000">','<div style="position: absolute; top: 2mm; left: 3mm; width: 42mm">','<span style="font-size: 12px; font-weight: normal; display: block; padding-bottom: 2mm">',"签收人:","</span>",'<span style="font-size: 14px; font-weight: normal; display: block; padding-bottom: 1mm">',"品名: {{item_short_title}}","</span>",'<span style="font-size: 16px; display: block">',"{{waybill_num_barcode_down}}","</span>","</div>",'<div style="position: absolute; top: 2mm;left: 45mm">','<span style="font-size: 17px; display: block; margin-bottom: 2mm">',"{{receiver_mobile_down}}","</span>",'<span style="display: block; font-size: 12px; font-weight: normal">',"订单号: {{trade_id}}","</span>","</div>","</div>",'<div style="height:30mm; overflow:hidden;">','<span style="float: left; width: 30mm; height:30mm; text-align: center;border-right: 1px dashed #000; margin-left: -1px;">','<img src="/resources/css/build/images/ZJS2.png" style="width: 90%; vertical-align: middle" >',"</span>",'<span style="float: left; width: 32mm; height:30mm;border-right: 1px dashed #000;margin-left: -1px; padding:0 2mm;">','<span style="margin-top:1mm; display:block">买家留言：{{trade_buyer_message}}</span>',"</span>",'<span style="float: left; width: 26mm; height: 30mm; padding: 0 2mm;">',"</span>","</div>","</div>","</div>"],v=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold">经济快递</div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 30px;">QFKD</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_detail_address_up}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_up}} {{send_mobile_up}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_up}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_up}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}}&nbsp;商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; ">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_up}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_up}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_up}}</span>','<span style="display: block">代收货款：{{collecting_money_up}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;">目的地</div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;">{{express_short_address}}</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;">始发：{{originating}}</span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;">到达：{{arrivals}}</span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;">收件签收：</span>','<span style="display: block; margin:8mm 1mm 0 0">&nbsp;&nbsp;年&nbsp;月&nbsp;日&nbsp;时</span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; ">快件送达收件人地址，经收件人或收件人（寄件人）允许的代收人签字，视为送达；您的签字代表您已验收包裹，并已确认商品信息无误、包装完好、没有划痕、破损等表面质量问题。</span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_down}}&nbsp; {{receiver_mobile_down}}</span>',"<span>{{receiver_detail_address_down}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_down}} {{send_mobile_down}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_down}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_down}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}} 商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_down}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_down}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_down}}</span>','<span style="display: block">代收货款：{{collecting_money_down}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; ">托寄物</span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">','<img src="/resources/css/build/images/QFKD.jpg" style="width: 90%; vertical-align: middle" >',"</div>","</div>","</div>","</div>"],g=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold">快捷快递</div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 40px;font-weight: bold;">&nbsp;K&nbsp;J</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_detail_address_up}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_up}} {{send_mobile_up}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_up}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_up}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}}&nbsp;商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; ">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_up}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_up}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_up}}</span>','<span style="display: block">代收货款：{{collecting_money_up}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;">目的地</div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;">{{express_short_address}}</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;">始发：{{originating}}</span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;">到达：{{arrivals}}</span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;">收件签收：</span>','<span style="display: block; margin:8mm 1mm 0 0">&nbsp;&nbsp;年&nbsp;月&nbsp;日&nbsp;时</span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; ">快件送达收件人地址，经收件人或收件人（寄件人）允许的代收人签字，视为送达；您的签字代表您已验收包裹，并已确认商品信息无误、包装完好、没有划痕、破损等表面质量问题。</span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_down}}&nbsp; {{receiver_mobile_down}}</span>',"<span>{{receiver_detail_address_down}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_down}} {{send_mobile_down}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_down}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_down}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}} 商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_down}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_down}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_down}}</span>','<span style="display: block">代收货款：{{collecting_money_down}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; ">托寄物</span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">',"</div>","</div>","</div>","</div>"],b=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold">国通快递</div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 34px;">GTO</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_up}} {{receiver_mobile_up}}</span>',"<span>{{receiver_detail_address_up}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_up}} {{send_mobile_up}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_up}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_up}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}}&nbsp;商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; ">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_up}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_up}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_up}}</span>','<span style="display: block">代收货款：{{collecting_money_up}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;">目的地</div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;">{{express_short_address}}</span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;">始发：{{originating}}</span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;">到达：{{arrivals}}</span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;">收件签收：</span>','<span style="display: block; margin:8mm 1mm 0 0">&nbsp;&nbsp;年&nbsp;月&nbsp;日&nbsp;时</span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; ">快件送达收件人地址，经收件人或收件人（寄件人）允许的代收人签字，视为送达；您的签字代表您已验收包裹，并已确认商品信息无误、包装完好、没有划痕、破损等表面质量问题。</span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">收件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{receiver_name_down}}&nbsp; {{receiver_mobile_down}}</span>',"<span>{{receiver_detail_address_down}}</span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; ">发件信息</span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">{{send_name_down}} {{send_mobile_down}} &nbsp;<span style="font-size: 12px; font-weight: lighter">{{shop_title_down}}</span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;">{{send_detail_address_down}}</span>','<span style=" display: block;">寄件日期:{{send_date_day_up}} 商品：</span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm">服务信息</div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;">付款方式：{{payment_method_down}}</span>','<span style="display: block; padding-bottom: 2px;">是否保价：{{is_insured_down}}</span>','<span style="display: block; padding-bottom: 2px;">签单返还：{{signing_return_down}}</span>','<span style="display: block">代收货款：{{collecting_money_down}}</span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; ">托寄物</span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 1mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;">{{item_short_title-item_outer_id-item_properties-item_num}}</div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">','<img src="/resources/css/build/images/gto.jpg" style="width: 90%; vertical-align: middle" >',"</div>","</div>","</div>","</div>"],y=['<div class="ali_waybill" style="width:370px;height:715px;background:#FFFFE1;position:relative;font-family:新宋体">','<div style="position:absolute;left:5px;top:4px;width:113px;height:34px;" class="ali_waybill_logo_up {{previewCpCode}}">',"</div>",'<div style="position:absolute;left:284px;top:9px;width:91px;height:26px;font-weight:700;overflow:hidden;">','<span class="ali_waybill_product_type">{{ali_waybill_product_type}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-right:white;left:0px;top:43px;width:361px;height:50px;font-weight:700;font-size:40px;text-align:left;overflow:hidden;">','<span class="ali_waybill_short_address" style="margin:auto">{{ali_waybill_short_address}}</span>',"</div>",'<div style="position:absolute;left:-20px;top:90px;width:256px;height:30px;font-weight:700;font-size:24px;overflow:hidden;">','<span class="ali_waybill_package_center_name">{{ali_waybill_package_center_name}}</span>',"</div>",'<div act-if="previewCpCode != zto" class="ali_waybill_standard_mdul_barcode_1" style="position:absolute;left:286px;top:102px;width:84px;height:23px;"></div>','<div act-if="previewCpCode == zto" style="position:absolute;left:266px;top:97px;width:104px;height:23px;"><div style="width:30px;float:left;">发件日期</div>{{currentDate}}</div>','<div style="position:absolute;border:1px #333 solid;border-left:white;border-right:white;left:5px;top:132px;width:18px;height:55px;font-size:12px;">',"收件","</div>",'<div style="position:absolute;border:1px #333 solid;border-right:white;border-bottom:white;left:24px;top:132px;width:96px;height:33px;font-size:12px;font-weight:700;text-align:left;">','<span class="ali_waybill_consignee_name">{{ali_waybill_consignee_name}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-bottom:white;left:121px;top:132px;width:154px;height:33px;font-size:12px;font-weight:700;text-align:left;">','<span class="ali_waybill_consignee_phone">{{ali_waybill_consignee_phone}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-top:white;left:24px;top:152px;width:250px;height:37px;font-size:12px;font-weight:700;text-align:left;">','<span class="ali_waybill_consignee_address">{{ali_waybill_consignee_address}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-top:white;border-right:white;border-left:white;left:5px;top:190px;width:18px;height:55px;font-size:12px;">',"寄件","</div>",'<div style="position:absolute;border:1px #333 solid;border-right:white;border-bottom:white;left:24px;top:189px;width:96px;height:30px;font-size:12px;text-align:left;">','<span class="ali_waybill_send_name">{{ali_waybill_send_name}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-bottom:white;left:121px;top:189px;width:154px;height:30px;font-size:12px;text-align:left;">','<span class="ali_waybill_send_phone">{{ali_waybill_send_phone}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-top:white;left:24px;top:215px;width:250px;height:30px;font-size:12px;text-align:left;">','<span class="ali_waybill_shipping_address">{{ali_waybill_shipping_address}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-right:white;left:275px;top:132px;width:97px;height:20px;text-align:center;">',"服务","</div>",'<div style="position:absolute;border:1px #333 solid;border-top:white;border-right:white;left:275px;top:152px;width:97px;height:175px;text-align:left;font-size:8px;">',"{{ali_waybill_service}}","</div>",'<div class="ali_waybill_standard_mdul_barcode_2" style="position:absolute;border:1px #333 solid;border-right:white;border-left:white;left:0px;top:245px;width:275px;height:81px;"></div>','<div style="position:absolute;border:1px #333 solid;border-left:white;left:0px;top:327px;width:166px;height:73px;font-size:8px;padding:4px;text-align:left;">','<span class="ali_waybill_remark">快件送达收件人地址，经收件人或收件人（寄件人）允许的代收人签字，视为送达。您的签字代表您已验收此包裹，',"并已确认商品信息无误、包装完好、没有划痕、破损等表面质量问题。</span>","</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-top:white;left:175px;top:328px;width:110px;height:81px;font-size:12px;text-align:left;">','<p style="padding:10px;">签收人：<span class="ali_waybill_signName"></span></p>','<p style="padding:10px;">时间：<span class="ali_waybill_signTime"></span></p>',"</div>",'<div class="ali_waybill_standard_mdul_QR_code" style="position:absolute;border:1px #333 solid;border-top:white;border-right:white;left:285px;top:328px;width:85px;height:81px;"></div>','<div class="ali_waybill_logo_down {{previewCpCode}}" style="position:absolute;left:0px;top:415px;width:113px;height:53px;"></div>','<div class="ali_waybill_standard_mdul_barcode_3" style="position:absolute;left:173px;top:424px;width:151px;height:42px;"></div>','<div style="position:absolute;border:1px #333 solid;left:5px;top:475px;width:18px;height:63px;font-size:12px">',"收件","</div>",'<div style="position:absolute;border:1px #333 solid;border-right:white;border-bottom:white;left:24px;top:475px;width:96px;height:25px;font-size:12px;text-align:left;">','<span class="ali_waybill_consignee_name">{{ali_waybill_consignee_name}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-bottom:white;left:122px;top:475px;width:153px;height:25px;font-size:12px;text-align:left;">','<span class="ali_waybill_consignee_phone">{{ali_waybill_consignee_phone}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;left:24px;top:502px;width:250px;height:35px;font-size:12px;text-align:left;">','<span class="ali_waybill_consignee_address">{{ali_waybill_consignee_address}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-top:white;left:5px;top:537px;width:18px;height:56px;font-size:12px">',"寄件","</div>",'<div style="position:absolute;border:1px #333 solid;border-top:white;border-bottom:white;border-right:white;left:24px;top:537px;width:96px;height:25px;font-size:12px;text-align:left;">','<span class="ali_waybill_send_name">{{ali_waybill_send_name}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;border-left:white;border-top:white;border-bottom:white;left:122px;top:537px;width:153px;height:27px;font-size:12px;text-align:left;">','<span class="ali_waybill_send_phone">{{ali_waybill_send_phone}}</span>',"</div>",'<div style="position:absolute;border:1px #333 solid;left:24px;top:557px;width:250px;height:35px;font-size:12px;text-align:left;">','<span class="ali_waybill_shipping_address">{{ali_waybill_shipping_address}}</span>',"</div>",'<div class="ali_waybill_standard_mdul_QR_code" style="position:absolute;border:1px #333 solid;border-right:white;left:275px;top:475px;width:100px;height:117px;text-align:center;"></div>','<div id="ali_waybill_define" style="position:absolute;left:0px;top:585px;width:370px;height:135px;overflow:hidden;">',"{{ali_waybill_define}}",'<div style="position:absolute;left:310px;top:100px;width:70px;height:20px;font-weight:900;">已验视</div>',"</div>","</div>"];
t.template.addTemp("template.pt.wlb.TTKDEX.standard",a),t.template.addTemp("template.pt.wlb.STO.standard",i),t.template.addTemp("template.pt.wlb.YTO.standard",s),t.template.addTemp("template.pt.wlb.ZTO.standard",n),t.template.addTemp("template.pt.wlb.HTKY.standard",l),t.template.addTemp("template.pt.wlb.EMS.standard",d),t.template.addTemp("template.pt.wlb.EYB.standard",o),t.template.addTemp("template.pt.wlb.SF0.standard",r),t.template.addTemp("template.pt.wlb.SF1.standard",p),t.template.addTemp("template.pt.wlb.SF2.standard",c),t.template.addTemp("template.pt.wlb.SF3.standard",_),t.template.addTemp("template.pt.wlb.YUNDA.standard",m),t.template.addTemp("template.pt.wlb.UC.standard",u),t.template.addTemp("template.pt.wlb.POSTB.standard",h),t.template.addTemp("template.pt.wlb.ZJS.standard",f),t.template.addTemp("template.pt.wlb.GTO.standard",b),t.template.addTemp("template.pt.wlb.QFKD.standard",v),t.template.addTemp("template.pt.wlb.FAST.standard",g),t.template.addTemp("template.pt.wlb.all.standard",y)}(jQuery,RayCloud),function(e,t){var i=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold"></div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 34px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;"> </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; "></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;"></div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;"></span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;"></span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;"></span>','<span style="display: block; margin:8mm 1mm 0 0"></span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; "></span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">&nbsp; </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm"></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;"></div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;text-align: center">','<img src="/resources/css/build/images/sto.jpg" style="width: 90%; vertical-align: middle" >',"</div>","</div>","</div>","</div>"],a=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold"></div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 22px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;"> </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; "></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;"></div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;"></span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;"></span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;"></span>','<span style="display: block; margin:8mm 1mm 0 0"></span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; "></span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">&nbsp; </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm"></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;"></div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">',"</div>","</div>","</div>","</div>"],s=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden;">','<div style="height:16mm;overflow: hidden">','<div style="float: right;width: 56mm; height: 16mm;overflow:hidden;">','<strong style="display: block; padding: 3mm 0 1mm 3mm; font-size: 15px;"></strong>','<span style="display: block; padding: 1mm 0 0 3mm; font-size: 12px"></span>',"</div>","</div>",'<div style="height: 1mm;overflow: hidden"></div>','<div style="height: 21mm; border-bottom: 1px dashed #000; overflow:hidden;">','<div style="float: left; width: 34mm;height: 19mm; line-height:19mm; padding: 1mm 0; text-align:center; overflow:hidden;">',"</div>",'<div style="margin-left: 34mm; width:65mm; overflow:hidden;height: 21mm; padding-top: 5mm;text-align:center;border-left: 1px dashed #000">','<span style="font-size: 38px; font-weight: bold"></span>',"</div>","</div>",'<div style="height: 16mm; border-bottom: 1px dashed #000; overflow:hidden;">','<div style="overflow:hidden; height: 14mm; padding: 1mm 0; text-align: center;">',"</div>","</div>",'<div style="position: relative; height: 49mm; overflow:hidden;">','<div style="position: absolute; top: 0; left: 0; height: 17mm; width: 93mm;font-size: 15px; font-weight: bold; overflow:hidden; border-bottom: 1px dashed #000">','<span style="float: left; padding: 2mm 0 0 3mm"></span>','<div style="margin-left: 20mm; padding: 2mm 3mm 0 0;overflow:hidden;">','<span style="display:block; padding-bottom: 1mm">&nbsp;&nbsp;&nbsp;&nbsp;</span>','<span style="display: block;"></span>',"</div>","</div>",'<div style="position: absolute; top: 17mm; left: 0; height: 17mm; width: 93mm;font-size: 15px; overflow:hidden; border-bottom: 1px dashed #000">','<span style="float: left; padding: 4mm 0 0 3mm"></span>','<div style="margin-left: 20mm; padding: 3mm 0 0 0;overflow:hidden;">','<span style="display: block; padding-bottom: 1mm">  </span>',"<span></span>","</div>","</div>",'<div style="position: absolute; bottom: 0; left: 0; border-right: 1px dashed #000; width: 40mm; height: 15mm;overflow:hidden;">','<span style="display: block; padding: 2mm 0 0 3mm; font-size: 15px;"></span>',"</div>",'<div style="position: absolute; bottom: 0; left: 40mm; width: 53mm; height: 15mm; overflow:hidden;">','<span style="display: block; padding: 2mm 0 0 6mm; font-size: 15px;"></span>','<span style="display: block; text-align: center; padding-top: 3mm;font-size: 15px;"></span>',"</div>",'<div style="height: 49mm; width: 7mm; position: absolute; top: 0; right: 0; border-left: 1px dashed #000">','<span style="font-size: 14px; display: block; width: 5mm; padding-top: 20mm; height: 29mm; text-align: center"></span>',"</div>","</div>",'<div style="height:2mm; overflow: hidden"></div>','<div style="height: 14mm;  overflow:hidden;">',"</div>",'<div style="height: 1mm;overflow: hidden"></div>','<div style="height:28mm; border-bottom: 1px dashed #000; overflow:hidden; position: relative">','<div style="height: 14mm; width: 93mm;font-size: 14px; position: absolute; left: 0; top: 0">','<span style="float: left; padding: 1.5mm 0 0 3mm"></span>','<div style="margin-left: 20mm; padding: 1.5mm 1mm 0 0;overflow:hidden;">','<span style="display:block; padding-bottom: 1mm">&nbsp;&nbsp;&nbsp;&nbsp;</span>','<span style="display: block;"></span>',"</div>","</div>",'<div style="height: 14mm; width: 93mm; border-top: 1px dashed #000; font-size: 15px;position: absolute;overflow:hidden;left: 0; bottom: 0">','<span style="float: left; padding: 3mm 0 0 3mm"></span>','<div style="margin-left: 20mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display: block; padding-bottom: 1mm">   </span>',"<span></span>","</div>","</div>",'<div style="height: 28mm; width: 7mm; border-left: 1px dashed #000; position: absolute; top: 0; right: 0">','<span style="font-size: 14px; display: block; width: 5mm; padding-top: 9mm; height: 40mm; text-align: center"></span>',"</div>","</div>",'<div style="height: 26mm; overflow:hidden; border-bottom: 1px dashed #000">','<div style="float:left; width: 74mm;height: 26mm;overflow:hidden;border-right: 1px dashed #000; font-size: 12px;">','<span style="float: left; padding: 1.5mm 0 0 3mm"></span>','<div style="margin-left: 20mm; padding: 1.5mm 1mm 1mm 0;overflow:hidden;">','<span style="font-size: 10px;"></span>',"</div>","</div>",'<div style="float:left;height: 22mm; padding: 2mm 0 0 2mm ; text-align: center; overflow:hidden;">',"</div>","</div>",'<div style="height: 6mm; line-height: 6mm; overflow:hidden;">','<span style="font-size: 14px; padding-left: 3mm;"></span>',"</div>","</div>","</div>"],n=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; margin:0 auto;height: 186mm; overflow: hidden;font-size:12px;font-family:宋体;">','<div style="width:100mm; height:6mm; border-bottom:1px solid #000; overflow:hidden;">',"</div>",'<div style="width:100mm; height:25mm; border-bottom:1px solid #000; overflow:hidden">','<div style="float:left;width:75mm; border-right:1px solid #000; height:25mm; overflow:hidden">','<div style="width:75mm; border-bottom:1px solid #000; height:11mm;overflow:hidden">','<span style="display:block; font-size:18px; font-weight:bold;margin:3mm 0 0 18mm;"></span>',"</div>",'<div style="width:75mm; height:14mm; overflow:hidden">','<span style="display:block; margin:2mm 0 0 2mm; font-size:10px; font-weight:bold;"></span>','<span style="display:block; margin:0mm 0 0 2mm; font-size:10px; font-weight:bold"></span>',"</div>","</div>",'<div style="float:left; overflow:hidden">',"</div>","</div>",'<div style="width:100mm; height: 25mm; overflow:hidden; border-bottom:1px solid #000">','<div style="float:left; width:98mm; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold"></div>','<div style="float:left;width:98mm;  margin:2mm 0 0 2mm; font-size:14px; height:10mm; font-weight:bold"></div>','<div style="float:left; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold"></div>',"</div>",'<div style="width:100mm; height: 15mm; overflow:hidden; text-align:center; border-bottom:1px solid #000">','<span style="font-size:44px;font-weight:bold;letter-spacing:4px; display:inline-block; margin-top:2mm;"></span>',"</div>",'<div style="width:100mm; height: 25mm; overflow:hidden; text-align:center ">',"</div>",'<div style="width:100mm; height: 23mm; overflow:hidden; border-bottom:1px solid #000">',"</div>",'<div style="width:100mm; height: 15mm; overflow:hidden; border-bottom:1px solid #000">','<div style="float:left; width:45mm; overflow:hidden; height:15mm; border-right:1px solid #000">',"</div>",'<div style="float:left; overflow:hidden; height:15mm;">','<span style="display:block; font-size:22px; font-weight:bold;margin:3mm 0 0 3mm;"></span>',"</div>","</div>",'<div style="width:100mm; height: 15mm; overflow:hidden; border-bottom:1px solid #000">','<span style="display:block; margin:2mm 0 0 2mm; font-size:11px; font-weight:bold;"></span>','<span style="display:block; margin:1mm 0 0 2mm; font-size:11px; font-weight:bold"></span>',"</div>",'<div class="receiver-info" style="width:100mm; height: 25mm; overflow:hidden; border-bottom:1px solid #000">','<div style="float:left; width:98mm; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold"> </div>','<div style="float:left;width:98mm;  margin:2mm 0 0 2mm; font-size:14px; height:10mm; font-weight:bold"></div>','<div style="float:left; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold"></div>',"</div>",'<div class="note-helpmsg" style="width:100mm; height: 11.5mm; overflow:hidden; ">','<div style="float:left; width:45mm; overflow:hidden; height:11.5mm; border-right:1px solid #000">','<span style="float:left; margin:2mm; font-size:10px;"></span>',"</div>",'<div style="float:left; overflow:hidden; height:11.5mm;">','<span style="float:left; margin:2mm 0 0 2mm; font-size:14px; font-weight:bold"></span>',"</div>","</div>","</div>","</div>"],l=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:166mm;overflow: hidden;">','<div style="height: 12.7mm; overflow: hidden ">','<div style="float: left; width: 30mm; text-align: center; margin-left: 20mm; padding-top: 2mm">','<span style="font-size: 14pt;font-family: 黑体; display: block; margin-bottom: 2mm"></span>','<span style="font-size: 8pt; font-family: 黑体;"></span>',"</div>",'<div style="margin-left: 50mm; height: 15mm;">',"</div>","</div>",'<div style="height: 20mm; margin-left: 9mm; font-size: 12px; font-family: 宋体;">','<span style="display: block; margin-top:1mm;"></span>','<span style="display: block; padding: 1mm 0"></span>',"<span></span>","</div>",'<div style="height: 15mm; margin-left: 9mm;overflow:hidden;font-family: 宋体;">','<div style="float: left; width: 62mm; margin-top:1mm;font-size: 10px;">','<span style="display: block"></span>','<span style="display: block; padding: 1mm 0"></span>',"<span></span>","</div>",'<div style="margin-left: 62mm; height: 15mm; padding: 0 0 0 2mm; font-size: 10px;">','<span style="display: block; padding: 2px 0 0 0"></span>','<span style="display: block; padding: 1px 0;"></span>','<span style="display: block; padding: 1px 0;"></span>','<span style="display: block"></span>',"</div>","</div>",'<div style="height: 15mm; margin-left: 9mm; line-height:13mm; overflow:hidden;">','<span style="font-size: 36px; font-family: 黑体;font-weight: bold;"></span>',"</div>",'<div style="height: 20mm; margin-left: 9mm;overflow:hidden; font-family: 宋体;">','<div style="float: left; width: 62mm;height: 20mm; position: relative">','<span style="position: absolute; top: 2mm; left: 0">',"</span>",'<span style="position: absolute; top: 1mm; left: 18mm;"></span>','<span style="position: absolute; bottom: 1mm; left: 18mm; font-size: 10px">',"","</span>","</div>",'<div style="margin-left: 62mm; height: 20mm; padding: 0 2mm; font-size: 12px;">','<span style="display: block; padding:2px 0 0 0;"></span>','<span style="display: block; padding: 1px 0"></span>','<span style="display: block;font-family: 黑体; text-align: center; font-size: 38px"></span>',"</div>","</div>",'<div style="height: 6mm; overflow: hidden"></div>','<div style="height: 15mm;overflow:hidden;">','<div style="width: 50mm; text-align: center">',"</div>","</div>",'<div class="receiver-down" style="height:15mm; overflow: hidden; position: relative; font-family: 宋体;">','<span style="position: absolute; top: 1mm; left: 13mm; font-size: 12px;"></span>','<span style="position: absolute; top: 1mm; right: 7mm; font-size: 12px"></span>','<span style="position: absolute; left: 3mm; top: 6mm"></span>',"</div>",'<div class="sender-down" style="height:15mm; overflow: hidden;">','<div style="float: left; width: 62mm;height: 15mm; position: relative">','<span style="position: absolute; top: 1mm; left: 13mm; font-size: 12px;"></span>','<span style="position: absolute; top: 6mm; left: 3mm; font-size: 10px"></span>','<span style="position: absolute; left: 3mm; top: 9mm;font-size: 10px;"></span>',"</div>",'<div style="margin-left: 69mm; height: 15mm; padding: 0 2mm; font-size: 10px;">','<span style="display: block; padding: 4px 0 0 0"></span>','<span style="display: block; padding: 1px 0;"></span>','<span style="display: block; padding: 1px 0;"></span>','<span style="display: block"></span>',"</div>","</div>",'<div style="height:35mm; overflow: hidden;">','<div style="float: left; width: 66mm;">',"","</div>",'<div style="margin-left: 69mm; overflow: hidden;height: 35mm; text-align:center">',"</div>","</div>","</div>","</div>"],d=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/1 Tahoma,Helvetica,Arial,sans-serif; text-align:left;"><meta charset="UTF-8">','<div style="font-family: 黑体; width: 96mm; margin: 2mm 0 0 2mm;height:146mm;overflow: hidden;">','<div style="clear: both; overflow: hidden; height: 20mm;overflow: hidden; border-bottom: 1px dashed #000">','<div style="float: left; width: 40mm; height: 20mm; text-align: center; border-right: 1px dashed #000">','<span style="font-size: 20pt; display:block;margin-top: 8mm;"></span>',"</div>",'<div style="float: right; width: 56mm;height: 20mm; line-height: 20mm; margin-right: -1px">',"</div>","</div>",'<div style="position: relative; height: 32mm; overflow: hidden;border-bottom: 1px dashed #000">','<div style="position: absolute; top: 0; left: 0; width: 46mm; height: 15mm; border-bottom: 1px dashed #000; font-size: 12px;overflow: hidden;">','<span style="float: left; margin:1mm 0 0 1mm"></span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;"> </span>','<span style="display: block; padding: 2px 0;"></span>',"<span></span>","</div>","</div>",'<div style="position: absolute; top: 0; right: 0; width: 50mm; height: 19mm; line-height:18mm; border-bottom: 1px dashed #000; border-left: 1px dashed #000; text-align:center; font-size:32px; "></div>','<div style="position: absolute; bottom: 0; left: 0; width: 94mm; height: 15mm;padding: 1mm">','<span style="float:left;"></span>','<div style="margin-left: 10mm; overflow: hidden; font-size: 14px">','<span style="display: block; margin-bottom: 2px"> </span>',"<span> <br /></span>","</div>","</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 14mm; overflow: hidden">','<div style="float: left;width: 38mm; border-right: 1px dashed #000; height: 12mm; padding: 1mm">','<span style="display: block; padding: 2px 0"></span>','<span style="display: block; padding: 1px 0"></span>','<span style="display: block; padding: 2px 0"></span>',"</div>",'<div style="margin-left:40mm; height: 14mm;">','<span style="display: block; padding-bottom: 5px;"></span>','<span style="display: block; padding-bottom: 5px;">','<span style="display: inline-block; text-align: right; width: 12mm"></span><span style="display: inline-block; text-align: right; width: 8mm"></span><span style="display: inline-block; text-align: right; width: 8mm"></span><span style="display: inline-block; text-align: right; width: 8mm"></span>',"</span>",'<span style="display: block;font-size: 8px;line-height: 8px;"></span>',"</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 20mm; overflow: hidden;position: relative">','<div style="position: absolute; width: 40mm; height: 3mm; top: 2px; left: 2px">',"","</div>",'<div style="position: absolute; top: 5px; right: 5mm; text-align: right; width: 40mm"></div>','<div style="height: 10.5mm; position: absolute; left: 2px; bottom: 0">','<span style="float: left"></span>','<div style="margin-left: 16mm; overflow:hidden;">','<span style="display: block;margin-bottom: 2px"></span>',"</div>","</div>","</div>",'<div style="height: 4mm"></div>','<div style="border-top: 1px dashed #000; height: 15mm; overflow:hidden;">',"</div>",'<div style="border-top: 1px dashed #000; height: 17mm; overflow:hidden;">','<div style="float: left; width: 40mm;height: 17mm; border-right: 1px dashed #000;">','<span style="float: left; margin:1mm 0 0 1mm;"></span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;"> </span>','<span style="display: block; padding: 2px 0;"></span>',"<span></span>","</div>","</div>",'<div style="float: left;height: 17mm; overflow:hidden;width: 210px;">','<span style="float:left; margin:1mm 0 0 1mm;"></span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">','<span style="display: block; margin-bottom: 2px"> </span>',"<span><br /></span>","</div>","</div>","</div>",'<div style="border-top: 1px dashed #000; height: 24mm; overflow:hidden;">','<div style="float: left; width: 68mm;overflow: hidden; border-right: 1px dashed #000;">','<div style="border-bottom: 1px dashed #000; height: 17mm;padding:0 1mm;overflow: hidden;">','<span style="float:left; margin-top:1mm"></span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">',"<span></span>","</div>","</div>",'<div style="height: 7mm; line-height: 7mm; padding-right: 10px; text-align: right">','<span style="float: left; padding-left: 10px"></span>',"</div>","</div>",'<div style="float: left;text-align:center; width: 27mm; height: 24mm;">',"</div>","</div>","</div>","</div>"],o=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/1 Tahoma,Helvetica,Arial,sans-serif; text-align:left;"><meta charset="UTF-8">','<div style="font-family: 黑体; width: 96mm; margin: 2mm 0 0 2mm;height:146.5mm;overflow: hidden;">','<div style="clear: both; overflow: hidden; height: 20mm;overflow: hidden; border-bottom: 1px dashed #000">','<div style="float: left; width: 40mm; height: 20mm; text-align: center; border-right: 1px dashed #000">','<span style="font-size: 20pt; display:block;margin-top: 8mm;"></span>',"</div>",'<div style="float: right; width: 56mm;height: 20mm; line-height: 20mm; margin-right: -1px">',"</div>","</div>",'<div style="position: relative; height: 32mm; overflow: hidden;border-bottom: 1px dashed #000">','<div style="position: absolute; top: 0; left: 0; width: 46mm; height: 15mm; border-bottom: 1px dashed #000; font-size: 12px;overflow: hidden;">','<span style="float: left; margin:1mm 0 0 1mm"></span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;"> </span>','<span style="display: block; padding: 2px 0;"></span>',"<span></span>","</div>","</div>",'<div style="position: absolute; top: 0; right: 0; width: 50mm; height: 19mm; line-height:18mm; border-bottom: 1px dashed #000; border-left: 1px dashed #000; text-align:center; font-size:32px; "></div>','<div style="position: absolute; bottom: 0; left: 0; width: 94mm; height: 15mm;padding: 1mm">','<span style="float:left;"></span>','<div style="margin-left: 10mm; overflow: hidden; font-size: 14px">','<span style="display: block; margin-bottom: 2px"> </span>',"<span> <br /></span>","</div>","</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 14mm; overflow: hidden">','<div style="float: left;width: 38mm; border-right: 1px dashed #000; height: 12mm; padding: 1mm">','<span style="display: block; padding: 2px 0"></span>','<span style="display: block; padding: 1px 0"></span>','<span style="display: block; padding: 2px 0"></span>',"</div>",'<div style="margin-left:40mm; height: 14mm;">','<span style="display: block; padding-bottom: 5px;"></span>','<span style="display: block; padding-bottom: 5px;">','<span style="display: inline-block; text-align: right; width: 12mm"></span><span style="display: inline-block; text-align: right; width: 8mm"></span><span style="display: inline-block; text-align: right; width: 8mm"></span><span style="display: inline-block; text-align: right; width: 8mm"></span>',"</span>",'<span style="font-size: 8px;line-height: 8px;"></span>',"</div>","</div>",'<div style="border-bottom: 1px dashed #000; height: 20mm; overflow: hidden;position: relative">','<div style="position: absolute; width: 40mm; height: 3mm; top: 2px; left: 2px">',"","</div>",'<div style="position: absolute; top: 5px; right: 5mm; text-align: right; width: 40mm"></div>','<div style="height: 10.5mm; position: absolute; left: 2px; bottom: 0">','<span style="float: left"></span>','<div style="margin-left: 16mm; overflow:hidden;">','<span style="display: block;margin-bottom: 2px"></span>',"</div>","</div>","</div>",'<div style="height: 4mm"></div>','<div style="border-top: 1px dashed #000; height: 15mm; overflow:hidden;">',"</div>",'<div style="border-top: 1px dashed #000; height: 17mm; overflow:hidden;">','<div style="float: left; width: 40mm;height: 17mm; border-right: 1px dashed #000;">','<span style="float: left; margin:1mm 0 0 1mm;"></span>','<div style="margin:1mm 0 0 11mm; overflow: hidden">','<span style="display: block;"> </span>','<span style="display: block; padding: 2px 0;"></span>',"<span></span>","</div>","</div>",'<div style="float: left;height: 17mm; overflow:hidden;width: 210px;">','<span style="float:left; margin:1mm 0 0 1mm;"></span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">','<span style="display: block; margin-bottom: 2px"> </span>',"<span><br /></span>","</div>","</div>","</div>",'<div style="border-top: 1px dashed #000; height: 24mm; overflow:hidden;">','<div style="float: left; width: 68mm;overflow: hidden; border-right: 1px dashed #000;">','<div style="border-bottom: 1px dashed #000; height: 17mm;padding:0 1mm;overflow: hidden;">','<span style="float:left; margin-top:1mm"></span>','<div style="margin:1mm 0 0 10mm; overflow: hidden;">',"<span></span>","</div>","</div>",'<div style="height: 7mm; line-height: 7mm; padding-right: 10px; text-align: right">','<span style="float: left; padding-left: 10px"></span>',"</div>","</div>",'<div style="float: left;text-align:center; width: 27mm; height: 24mm;">',"</div>","</div>","</div>","</div>"],r=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 96mm; height:149mm; margin: 0 0 0 2mm;overflow: hidden;font-family:黑体">','<div style="border: 1px solid #000; height: 87mm; overflow:hidden;">','<div style="border-bottom: 1px solid #000; height:15mm; overflow:hidden;">',"&nbsp;","</div>",'<div style="border-bottom: 1px solid #000; height: 11mm; overflow: hidden">','<div style="float:left; width: 70mm; border-right: 1px solid #000; height: 11mm; overflow:hidden;">','<span style="float: left; padding: 1mm 0 0 2mm"></span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1px">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>','<span style="display: block;"></span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 11mm; ">','<span style="font-size: 12px;padding: 2px 0 6px 2px; display: block"></span>','<span style="font-size: 12px; width: 30mm; display: block; font-weight: bold;text-align: center;"></span>',"</div>","</div>",'<div style="height: 12mm; overflow:hidden;">','<div style="float:left; width: 70mm; height: 12mm;border-right: 1px solid #000; overflow:hidden;">','<span style="float: left; padding: 2mm 0 0 2mm"></span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;">&nbsp;&nbsp;&nbsp;&nbsp;</span>','<span style="display: block; font-size: 12px; padding: 1px 0"></span>',"</div>","</div>",'<div style="float:left;width:25mm; overflow:hidden;height: 10mm;">','<span style="font-size: 12px;padding: 2px 0 0 2px; display: block"></span>','<span style="font-size: 28px; width: 30mm; display: block; font-weight: bold;  text-align: center;"></span>',"</div>","</div>",'<div style="height:22mm; overflow:hidden; border-top: 2px solid #000; border-bottom: 2px solid #000">','<div style="float:left; width: 70mm; height: 22mm; text-align: center; line-height: 22mm; border-right: 1px solid #000">',"</div>",'<div style="margin-left: 63mm; overflow:hidden;">','<span style="display: block; height: 8mm; overflow:hidden; text-align: center">','<span style="font-size: 16px; display: block; padding: 2px 0; letter-spacing: 2px; font-weight: bold">&nbsp;</span>','<span style="font-weight: bold">&nbsp;</span>',"</span>",'<span style="display: block; padding: 1mm 0 1px 2mm"></span>','<span style="display: block; padding: 1px 0 1px 1mm"></span>','<span style="display: block;  padding: 1px 0 1px 2mm"></span>',"</div>","</div>",'<div style="overflow:hidden;height: 30mm">','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm"></span>','<span style="display: block; font-size: 12px; padding: 1px 0 1px 2mm"></span>','<span style="display: block; font-size: 12px; padding: 2mm 0 1px 2mm"></span>','<em style="display: block; padding: 2mm 0 0; font-size: 10px; margin-right: 22mm; text-align: right"></em>','<em style="display: block; padding: 1mm 0 0;text-align: right;"></em>'," </div>","</div>",'<div style="height: 2mm;"></div>','<div style="border: 1px solid #000; height: 59mm; overflow:hidden;">','<div style="height: 40mm; border-bottom: 1px solid #000; overflow:hidden; position:relative">','<div style="height: 40mm; width: 30mm; position: absolute; top: 0; right: 0;  text-align: center;">',"</div>",'<div style="position: absolute;top: 0; left:0; height: 14mm; width: 70mm; text-align: center; line-height: 14mm; border-bottom: 1px solid #000; border-right: 1px solid #000;">',"</div>",'<div style="position: absolute;top: 14mm; left:0; height: 15mm; width: 70mm; border-bottom: 1px solid #000; font-size: 10px;border-right: 1px solid #000;">','<span style="float: left; padding: 1mm 0 0 2mm"></span>','<div style="margin-left: 12mm; padding: 1mm 1mm 0 0;overflow:hidden;">','<span style="display:block;padding-bottom: 1mm">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>','<span style="display: block; "></span>',"</div>","</div>",'<div style="position: absolute;bottom: 0; left:0; height: 11mm; width: 70mm; line-height: 11mm;border-right: 1px solid #000;">',"<span></span>","</div>","</div>",'<div style="overflow:hidden; height:19mm;">','<div style="margin:1mm"></div>',"</div>","</div>","</div>","</div>"],p=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;"><meta charset="UTF-8">','<div style="font-family: 黑体; width:97.6mm; height:199mm; margin:2mm;position:relative;">','<div style="height:40.2mm;border-bottom:1px solid #000;overflow: hidden; ">','<div style="padding:1mm 3mm 0mm 1mm;">','<div style="clear: both; overflow: hidden; ">','<div style="float: left; width: 54mm; text-align: left;overflow: hidden;">','<div style="font-size: 8pt;font-family: 新宋体"></div>','<div style="font-size: 8pt;font-family: 新宋体"></div>','<div style="font-size: 8pt;font-family: 新宋体"></div>','<div style="font-size: 8pt;font-family: 新宋体"></div>','<div style="font-size: 8pt;font-family: 新宋体"></div>',"</div>",'<div style="overflow: hidden;padding-top: 1mm;float: right;width:39mm; ">','<div style="clear: both; overflow: hidden; ">','<div style="width: 10mm; height: 12mm;text-align: center; ">','<div style="font-size: 10pt;font-weight: bold;"></div>',"</div>",'<div style="margin-left:11mm;margin-top:-11mm;overflow:hidden;font-size: 7pt;text-align: left;">',"<div></div>","<div><span></span></div>","</div>","</div>","</div>","</div>","</div>",'<div style="padding-top: 2mm;overflow: hidden;">','<div style="padding:0 1mm;">','<div style="clear: both; overflow: hidden;float: left">','<div style="text-align: left;width:9mm;">','<span style="font-size: 10pt;font-weight: bold;"></span>',"</div>",'<div class="yunda-receiver" style="float: left;  overflow: hidden;font-size: 8pt;width:90mm;margin: -6.5mm 0 0 1mm;">','<div style="margin-left:9mm;font-family: 新宋体"></div>','<div style="margin-left:9mm;font-family: 新宋体"></div>','<div style="margin-left:9mm;font-family: 新宋体"></div>','<div style="margin-left:9mm;font-family: 新宋体; height:25px;"></div>',"</div>","</div>","</div>","</div>",'<div style="padding-top: 2px;">','<span style="font-weight: bold;font-size: 14pt;padding-left:3mm;width:90mm"></span>',"</div>","</div>",'<div style="height:22.678mm;border-bottom: 1px solid #000;padding-left:1mm;overflow: hidden;">','<div style="clear: both; overflow: hidden;">','<div style="float: left;width:22.678mm; text-align: center;border-right: 1px solid #000; ">','<div style="height:22.678mm;"></div>',"</div>",'<div style="overflow: hidden;float: left;">','<div style="clear: both; overflow: hidden;">','<div style="width:67mm;vertical-align:middle; overflow: hidden;text-align: center;word-break: break-all;padding-right:2mm;">','<span style="font-size: 28pt;font-weight: bold;line-height: 20mm;"></span>',"</div>","</div>","</div>","</div>","</div>",'<div style="height:18.915mm;border-bottom: 1px solid #000;overflow: hidden; ">','<div style="text-align: center;padding-top:1mm;"></div>',"</div>",'<div style="height:6.88mm;line-height:6.88mm;border-bottom: 1px solid #000;overflow: hidden; ">','<div style="font-size: 11pt;font-weight: bold;padding-left: 3mm;"><span></span></div>',"</div>",'<div style="height:11.899mm;border-bottom:1px solid #000;overflow: hidden; ">','<div style="overflow:hidden;">','<div style="float: left;width:50%; text-align: left;padding-top:3mm; ">','<span style="font-size: 7pt;padding-left:3mm;"></span>',"</div>",'<div style="overflow: hidden;text-align: right;word-break: break-all;padding-right:2mm;">','<div style="font-size: 7pt;padding-top:3mm;"></div>',"</div>","</div>","</div>",'<div style="height:51.793mm;overflow: hidden; ">','<div class="note-description" style="height:40mm;padding:1mm 3mm 3mm 3mm;">','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>',"</div>","</div>",'<div class="note-verified" style="border: 1px solid rgb(0, 0, 0); width: 50px; position: absolute; padding: 5px;top:139.8mm; left: 82mm;">&nbsp;</div>','<div class="note-description" style="height:8.224mm;border-bottom: 1px solid #000;overflow: hidden;">','<div style="padding:1mm 1mm 0mm 1mm;">','<span style="font-size: 10pt;font-weight: bold;vertical-align: top;"></span>',"</div>","</div>",'<div style="height:35.342mm;border-bottom: 1px solid #000;overflow: hidden;">','<div style="clear: both; overflow: hidden;boder-bottom:1px solid #000;">','<div style="float: left;text-align: left;width:54.2mm; ">','<div style="padding:1mm;overflow: hidden;">','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;white-space:nowrap;overflow: hidden;word-break:keep-all;font-family: 新宋体"></span></div>','<div><span style="font-size: 8pt;font-family: 新宋体"></span></div>',"</div>","</div>",'<div class="note-description" style="overflow: hidden;height:35.342mm;border-left: 1px solid #000;">','<div style="padding:1mm;">','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>','<div style="font-size:8pt;"></div>',"</div>","</div>","</div>","</div>",'<div style="height:4mm;line-height: 4mm;font-family: 宋体;overflow: hidden; ">','<span style="font-size: 7pt;padding-left:2mm;"></span>','<span style="font-size: 7pt;"></span>','<span style="font-size: 7pt;padding-left:2mm;"> </span>',"</div>","</div>","</div>"],c=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,\'b8bf53\',sans-serif;">',"<div style=\"width: 100mm;height: 146.5mm;margin: 5px auto;overflow: hidden; font-family: '黑体';\">",'<div style="height: 30mm;overflow: hidden;">','<div style="padding: 2mm 0 2mm 2mm; height: 26mm; width: 74mm; float: left">','<div style="overflow:hidden;">','<span style="font-size: 10px; display: block; padding: 1mm 0">',"","</span>",'<span style="font-size: 10px; display: block; padding-bottom: 1mm">',"","</span>",'<span style="font-size: 10px; display: block; padding-bottom: 1mm">',"","</span>","</div>",'<div style="">','<div style="float: left; width: 38mm; overflow:hidden;">','<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"","</span>",'<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"","</span>",'<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"","</span>","</div>",'<div style="margin-left: 38mm;">','<span style="display: block; font-size: 10px; padding-bottom: 1mm">',"","</span>",'<span style="display: block; font-size: 10px; overflow:hidden;">',"","</span>","</div>","</div>","</div>",'<div style="margin-left: 74mm; text-align: center; padding-top: 7.5mm; overflow: hidden">',"</div>","</div>",'<div style="height: 1.5mm; overflow:hidden;border-top: 1px dashed #000;border-bottom: 1px dashed #000;"></div>','<div style="height: 8.5mm; line-height: 7mm; text-align: center; border-bottom: 1px solid #000;overflow: hidden;">','<span style="display: block; font-size: 28px; font-weight: bold; letter-spacing: 1mm"></span>',"</div>",'<div style="height:21mm; overflow: hidden; border-bottom: 1px solid #000">','<div style="padding: 1mm 0 1mm 2mm; height: 19mm; width: 80mm; letter-spacing: 1px;">','<div style="overflow:hidden;">','<span style="font-size: 11px; display: block; padding:1mm 0 1.5mm 0">',"","</span>",'<span style="font-size: 11px; display: block; padding-bottom: 1.5mm">',"","</span>",'<span style="font-size: 11px; display: block; padding-bottom: 1.5mm">'," ","</span>","</div>","</div>","</div>",'<div style="height:25mm; overflow: hidden; border-bottom: 1px solid #000">','<div style="margin: 0 0 1mm 2mm; height: 25mm; width: 77mm;float: left; border-right: 1px solid #000">','<div style="overflow:hidden;">','<span style="font-size: 14px; display: block; padding:1mm 0 1mm 0">',"","</span>",'<span style="font-size: 14px; display: block; padding-bottom: 1mm">',"","</span>",'<span style="font-size: 14px; display: block; height: 8mm; overflow:hidden; padding-bottom: 1.5mm">',"","</span>",'<span style="text-align: center; display: block;font-size: 9px;"></span>',"</div>","</div>",'<div style="overflow:hidden; margin-left: 79mm; text-align: center">','<span style="font-size: 18px; display: block; letter-spacing: 1px; padding: 3mm 0 0 0"></span>',"</div>","</div>",'<div style="height: 27.5mm; overflow: hidden; border-bottom: 1px solid #000">','<div style="width: 54mm; float: left;">','<span style="margin-left: 12px;margin-top: 4px;"></span>',"</div>",'<div style="margin-left: 54mm; overflow:hidden;">','<span style="font-size: 14px; display: block; margin:3mm 0 8mm 0; text-align: center"></span>','<span style="display: block; font-size: 14px; padding-bottom: 1mm; padding-left: 15mm;">',"","</span>",'<span style="display: block; letter-spacing: 1px; font-size: 12px;">',"","</span>","</div>","</div>",'<div style="height: 3mm; line-height: 3mm; padding: 1mm 2mm; text-align: right; font-size: 14px;">','<span style="float:left;"></span>',"</div>",'<div style="height: 1.2mm; overflow:hidden;border-top: 1px dashed #000;border-bottom: 1px dashed #000;"></div>','<div style="height: 26mm; padding: 2mm; position: relative; overflow:hidden;">','<div style="position: absolute; top: -4px; left: 2mm; overflow:hidden; width: 52mm; height: 13.8mm;">','<span style="font-size: 10px; display: block; padding:1mm 0 1.5mm 0">',"","</span>",'<span style="font-size: 10px; display: block; overflow:hidden; padding-bottom: 1mm">'," ","</span>",'<span style="font-size: 10px; display: block;">',"","</span>","</div>",'<div style="position: absolute; left: 2mm; bottom: 1mm; width: 42mm; height: 11mm;top: 48px;">','<span style="margin-top: 4px; font-size: 10px;"></span>',"</div>",'<div style="position: absolute; bottom: 2mm; left: 44mm; width: 12mm; height: 12mm; border: 1px solid #000; overflow:hidden; text-align: center; line-height: 12mm;">','<span style="font-size: 38px;"></span>',"</div>",'<div style="position: absolute; left: 58mm; top: 3.2mm; overflow:hidden;">','<span style="letter-spacing: 2px; font-size: 18px; font-weight: bold; display:block;padding-bottom: 1mm"></span>','<span style="font-size: 12px; display: block; padding-bottom: 2px">',"","</span>",'<span style="font-size: 12px; display: block; padding-bottom: 2px">',"","</span>",'<span style="font-size: 12px; display: block; padding-bottom: 2px">',"","</span>",'<span style="font-size: 12px; padding-left: 1mm; display: block;">',"","</span>","</div>","</div>","</div>","</div>"],_=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,\'b8bf53\',sans-serif;">',"<div style=\"width: 100mm; height:146.5mm;margin: 5px auto;overflow: hidden; font-family: '黑体'; font-weight: bold;\">",'<div style="border-bottom: 1px solid #000; height: 20.5mm; overflow: hidden">','<div style="float:left; width: 34mm; overflow:hidden; text-align: center">','<span style="font-size: 30px; display: block; padding-top: 4mm"></span>','<span style="font-size: 20px"></span>',"</div>",'<div style="margin-left: 34mm; overflow:hidden; height: 21mm; line-height: 21mm ; text-align: center">',"</div>","</div>",'<div style="border-bottom: 1px solid #000; height: 8mm; overflow: hidden">','<span style="display: block; padding-left: 3mm; font-size: 20px; line-height: 8mm"></span>',"</div>",'<div style="overflow: hidden; border-bottom: 1px solid #000; height: 23mm; font-size: 20px;">','<div style="float: left; width: 8mm; height: 23mm; border-right: 1px solid #000; text-align: center">','<span style="display: block; margin: 3mm 0 4mm -2mm;"></span>','<span style="display: block; margin: 3mm 0 4mm -2mm;"></span>',"</div>",'<div style="margin-left: 8mm; overflow:hidden; height: 19mm; padding: 2mm; font-size: 16px; font-weight: lighter">','<span style="display: block; padding-bottom: 2mm"> </span>','<span style="display: block; height: 12mm; overflow:hidden;"></span>',"</div>","</div>",'<div style="overflow:hidden; border-bottom: 1px dashed #000; height: 38mm">','<div style="float: left; width: 54mm; height: 36mm; padding: 1mm; font-weight: lighter; font-size: 14px; border-right: 1px solid #000; position: relative">','<span style="display:block; padding-bottom: 2mm"></span>','<span style="display: block; padding-bottom: 1mm"></span>','<span style="position: absolute; bottom:2mm; left: 2mm"></span>',"</div>",'<div style="margin-left: 56mm; height: 34mm; padding: 2mm; font-size: 16px">','<span style="display: block; padding-bottom: 1mm"></span>','<span style="display: block; padding-bottom: 16mm"></span>','<span style="display: block; padding-bottom: 1mm; font-size: 14px; font-weight: lighter"></span>','<span style="display: block; font-size: 14px; font-weight: lighter"></span>',"</div>","</div>",'<div style="overflow:hidden; height: 18mm; position: relative">','<span style="position: absolute; bottom: 1mm; right: 4mm; font-size: 15px;"></span>',"</div>",'<div style="border-top: 1px solid #000; overflow:hidden; height: 12mm">','<div style="float: left; width: 8mm; border-right: 1px solid #000; height: 12mm; text-align: center">','<span style="display:block; font-size: 18px; padding-top: 1mm"> </span>',"</div>",'<div style="margin-left: 8mm; padding: 1mm; overflow:hidden; font-weight: lighter">','<span style="display: block; padding-bottom: 1mm"> </span>','<span style="display: block; overflow:hidden;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; overflow:hidden; height: 30mm">','<div style="float: left; border-right: 1px solid #000; width: 69mm; height: 30mm">','<div style="border-bottom: 1px solid #000; width: 69mm; height: 16mm; overflow:hidden;">','<div style="float: left; width: 8mm; border-right: 1px solid #000; height: 16mm; line-height: 7mm; text-align: center">','<span style="display:block; font-size: 18px; padding-top: 1mm"> </span>',"</div>",'<div style="margin-left: 8mm; padding: 1mm; height: 16mm; overflow:hidden; font-weight: lighter">','<span style="display: block; padding-bottom: 1mm"> </span>','<span style="display: block; overflow:hidden;padding-bottom: 1mm"></span>','<span style="display: block; "></span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; height: 6mm; line-height: 6mm; overflow:hidden;font-size: 14px;font-weight: lighter">','<span style="padding-left: 2mm"></span>',"</div>",'<div style="height: 6mm; line-height: 6mm; overflow:hidden; font-size: 14px;font-weight: lighter">','<span style="padding-left: 2mm"><span style="margin-left: 6mm"></span></span>',"</div>","</div>",'<div style="height:26mm; width: 26mm; padding: 2mm; margin-left: 70mm; overflow:hidden;">',"</div>","</div>","</div>","</div>"],m=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,\'b8bf53\',sans-serif;">',"<div style=\"width: 96mm; height:148mm; margin: 1mm 0 0 2mm;overflow: hidden; font-family: '黑体'; font-weight: bold; border: 1px solid #000\">",'<div style="height:16mm; line-height: 15mm;border-bottom: 1px solid #000;">','<span style="font-size:44px; font-weight: bold;"></span>',"</div>",'<div style="height: 33mm; padding: 0 2mm; overflow:hidden;  border-bottom: 1px solid #000">','<span style="font-size: 42px; font-weight: bold;text-align: center; display: block; padding:1mm 0 2mm 0">',"","</span>",'<span style="font-size: 15px; padding-left: 3mm; line-height: 6mm; overflow:hidden; display: block">',"","</span>",'<span style="display: block; font-size: 18px; overflow:hidden; padding-bottom: 1mm;padding-top: 1mm;">','<span style="display: inline-block; width: 35mm; text-align: center"></span>',"","</span>",'<span style="display: block; font-size: 12px; overflow:hidden; padding-left: 38mm">',"</span>","</div>",'<div style="height: 44mm; overflow:hidden;  border-bottom: 1px dashed #000">','<div style="float:left;width: 53mm; padding-left: 2mm;">','<span style="width: 55mm; height: 17mm; display:block"></span>','<span style="display: block; height: 4mm; overflow:hidden; font-weight: normal; font-size: 10px; padding: 2mm 0 1mm 1mm"> </span>','<span style="display: block; font-weight: normal; font-size: 14px; padding-left: 1mm; padding-bottom: 2mm"></span>','<span style="display: block; font-size: 20px; padding-left: 1mm;  padding-bottom: 3mm">',"","</span>",'<span style="padding-left: 1mm; font-size: 12px;font-weight: normal; "></span>',"</div>",'<div style="margin-left: 60mm;">','<span style="display: block; font-weight: normal; padding: 3mm 0 0 2mm"></span>','<span style="display: block; font-weight: normal; padding: 0 0 3mm 2mm"></span>','<span style="display: block; font-size: 14px; padding-bottom: 1mm"></span>','<span style="display: block; height: 2mm;">&nbsp;</span>','<span style="display: block; font-size: 24px; padding-bottom: 3mm"></span>','<span style="display: block; font-size: 20px; padding-bottom: 3mm">&nbsp;</span>','<span style="display: block; font-size: 12px; text-align: center">',"","</span>","</div>","</div>",'<div style="height:5mm; line-height: 5mm; overflow:hidden; padding: 0 6mm; border-bottom: 1px solid #000; text-align: right">','<span style="float:left;"></span>',"","</div>",'<div style="height: 19mm; overflow:hidden; position: relative; border-bottom: 1px solid #000">','<div style="position: absolute; top: 2mm; left: 3mm; width: 42mm">','<span style="font-size: 12px; font-weight: normal; display: block; padding-bottom: 2mm">',"","</span>",'<span style="font-size: 14px; font-weight: normal; display: block; padding-bottom: 1mm">',"","</span>",'<span style="font-size: 16px; display: block">',"","</span>","</div>",'<div style="position: absolute; top: 2mm;left: 45mm">','<span style="font-size: 17px; display: block; margin-bottom: 2mm">',"","</span>",'<span style="display: block; font-size: 12px; font-weight: normal">',"","</span>","</div>","</div>",'<div style="height:30mm; overflow:hidden;">','<span style="float: left; width: 30mm; height:30mm; text-align: center;border-right: 1px dashed #000; margin-left: -1px;">','<img src="/resources/css/build/images/ZJS2.png" style="width: 90%; vertical-align: middle" >',"</span>",'<span style="float: left; width: 32mm; height:30mm;border-right: 1px dashed #000;margin-left: -1px; padding:0 2mm;">','<span style="margin-top:1mm; display:block"></span>',"</span>",'<span style="float: left; width: 26mm; height: 30mm; padding: 0 2mm;">',"</span>","</div>","</div>","</div>"],u=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold"></div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 30px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;"> </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; "></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;"></div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;"></span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;"></span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;"></span>','<span style="display: block; margin:8mm 1mm 0 0"></span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; "></span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">&nbsp; </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm"></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;"></div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">','<img src="/resources/css/build/images/QFKD.jpg" style="width: 90%; vertical-align: middle" >',"</div>","</div>","</div>","</div>"],h=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold"></div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 40px;font-weight: bold;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;"> </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; "></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;"></div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;"></span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;"></span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;"></span>','<span style="display: block; margin:8mm 1mm 0 0"></span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; "></span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">&nbsp; </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm"></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 10mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;"></div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">',"</div>","</div>","</div>","</div>"],f=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">','<div style="height: 13mm; overflow:hidden;">','<div style="float: left; width: 75mm; height: 13mm; border-right: 1px solid #000; overflow:hidden;">','<div style="font-size: 34px; float: left; height: 13mm; padding-top:1mm; margin-left:2mm; line-height: 11mm; font-weight: bold"></div>','<div style="float: right; overflow:hidden; width: 34mm; padding-top:1mm;">',"</div>","</div>",'<div style="overflow:hidden; float:left; text-align: center; padding: 2mm 0 0 1mm;">','<span style="font-family: Arial; font-size: 34px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;"> </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center;border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden;float: left;height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 4mm; margin-top:1mm; "></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 10mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 10mm; text-align: center; border-right: 1px solid #000;">','<div style="width:4mm; height:10mm; display:block;"></div>',"</div>",'<div style="margin-left: 4mm; margin-top:2mm; height: 10mm;overflow:hidden; text-align: center; ">','<span style="font-size: 28px;"></span>',"</div>","</div>",'<div style="border-top: 1px solid #000; height: 5mm;overflow:hidden">','<span style="float: left; width: 47mm; padding: 1mm; border-right: 1px solid #000; height: 5mm; overflow: hidden;">','<span style="display:block;"></span>',"</span>",'<span style="float: left; padding: 1mm; overflow:hidden;"></span>',"</div>",'<div style="border-top: 1mm solid #000; border-bottom: 1mm solid #000; height: 19mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; text-align: center;  height: 19mm; overflow:hidden;">',"</div>",'<div style="float:left; height: 19mm; ">','<span style="display: block; margin:1mm 0 0 1mm;"></span>','<span style="display: block; margin:8mm 1mm 0 0"></span>',"</div>","</div>",'<div style="border-bottom: 1px solid #000; padding:1mm 2mm; height: 6mm;line-height: 8px">','<span style="font-size: 8px; "></span>',"</div>",'<div style="height: 3mm; overflow:hidden;"></div>','<div style="border-top: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="float: left; width: 75mm; border-right: 1px solid #000; height: 34mm; overflow:hidden;">','<div style="height: 17mm; overflow:hidden; border-bottom: 1px solid #000;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 13px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">&nbsp; </span>',"<span></span>","</div>","</div>",'<div style="height: 17mm; overflow:hidden;">','<div style="float: left; width: 4mm; height: 17mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 2mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 13mm; padding: 2mm; overflow:hidden; font-size: 12px">','<span style="display: block; padding-bottom: 1mm; height: 3mm; overflow:hidden;">  &nbsp;<span style="font-size: 12px; font-weight: lighter"></span></span>','<span style=" display: block;height: 6mm; padding-bottom: 2px; overflow:hidden;"></span>','<span style=" display: block;"></span>',"</div>","</div>","</div>",'<div style="overflow:hidden; float: left; height: 34mm;width: 25mm;margin-left: -1px;">','<div style="width: 100%; border-bottom: 1px solid #000; text-align: center; height: 5mm; line-height: 5mm"></div>','<div style="padding: 1mm; overflow: hidden; font-size: 10px;">','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block; padding-bottom: 2px;"></span>','<span style="display: block"></span>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000; height: 30mm; overflow:hidden;">','<div style="float: left; width: 100mm; height: 30mm">','<div style="float: left; width: 4mm; height: 30mm; text-align: center; border-right: 1px solid #000;">','<span style="display:block;padding-top: 6mm; width:4mm; "></span>',"</div>",'<div style="margin-left: 4mm; height: 26mm; padding: 0 2mm 2mm 2mm; overflow:hidden; font-size: 13px">','<div style="height: 1mm; line-height: 10mm; padding-bottom: 1mm; overflow: hidden; text-align: center">',"</div>",'<div style="padding:1mm; width: 64mm;"></div>',"</div>","</div>","</div>",'<div style="border-top: 1px solid #000;overflow:hidden; height: 22mm">','<div style="float: left; width: 55mm; height: 22mm; margin-top:3mm; overflow:hidden; text-align: center">',"</div>",'<div style="margin-left: 55mm;margin-top:3mm;ext-align: center">','<img src="/resources/css/build/images/gto.jpg" style="width: 90%; vertical-align: middle" >',"</div>","</div>","</div>","</div>"],v=['<div id="{{previewCpCode}}_temp" style="margin:0;padding:0;font:12px/ 1 Tahoma,Helvetica,Arial,sans-serif;text-align:left;"><meta charset="UTF-8">','<div style="width: 100mm; height:179.5mm; overflow: hidden; font-family: "黑体"; font-weight: bold;">',"</div>","</div>"];
t.template.addTemp("template.pt.wlb.TTKDEX.custom",a),t.template.addTemp("template.pt.wlb.STO.custom",i),t.template.addTemp("template.pt.wlb.YTO.custom",s),t.template.addTemp("template.pt.wlb.ZTO.custom",n),t.template.addTemp("template.pt.wlb.HTKY.custom",l),t.template.addTemp("template.pt.wlb.EMS.custom",d),t.template.addTemp("template.pt.wlb.EYB.custom",o),t.template.addTemp("template.pt.wlb.SF.custom",r),t.template.addTemp("template.pt.wlb.YUNDA.custom",p),t.template.addTemp("template.pt.wlb.UC.custom",c),t.template.addTemp("template.pt.wlb.POSTB.custom",_),t.template.addTemp("template.pt.wlb.ZJS.custom",m),t.template.addTemp("template.pt.wlb.GTO.custom",f),t.template.addTemp("template.pt.wlb.QFKD.custom",u),t.template.addTemp("template.pt.wlb.FAST.custom",h),t.template.addTemp("template.pt.wlb.DBL.custom",v)}(jQuery,RayCloud),function($,RC){function clearNoNum(e,t){"double"==t&&(e.val(e.val().replace(/[^\d.]/g,"")),e.val(e.val().replace(/^\./g,"")),e.val(e.val().replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3")),e.val(e.val().replace(/\.{2,}/g,".")),e.val(e.val().replace(".","$#$").replace(/\./g,"").replace("$#$",".")),e.val(e.val().replace(/^$/,"0"))),"int"==t&&(e.val(e.val().replace(/[^\d]/g,"")),e.val(e.val().replace(/^$/,"0")))}var standardMap=(RC.controls.get("control.print_pt"),{STO:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.sto.cn/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},YTO:function(e){e.ADD_PRINT_BARCODE("17mm","7mm","24mm","24mm","QRCode","http://www.yto.net.cn/downloadApp.html"),e.ADD_PRINT_BARCODE("40mm","20mm","60mm","13mm","128B","444002723712"),e.ADD_PRINT_BARCODE("106.5mm","54mm","40mm","12mm","128B","444002723712")},ZTO:function(e){e.ADD_PRINT_BARCODE("12mm","77mm","25mm","25mm","QRCode","http://www.zto.cn"),e.ADD_PRINT_BARCODE("77mm","10mm","80mm","17mm","128B",444002723712),e.ADD_PRINT_BARCODE("105mm","36mm","58mm","15mm","128B",444002723712)},HTKY:function(e){e.ADD_PRINT_BARCODE("66mm","5mm","22mm","22mm","QRCode",44400272371278),e.ADD_PRINT_BARCODE("2mm","54mm","42mm","12mm","128C",44400272371278),e.ADD_PRINT_BARCODE("92mm","10mm","42mm","12mm","128C",44400272371278)},EMS:function(e,t){e.ADD_PRINT_BARCODE("125mm","75mm","26mm","26mm","QRCode","http://www.ems.com.cn"),e.ADD_PRINT_BARCODE("5mm","45mm","55mm","12mm","128B",444002723712),e.ADD_PRINT_BARCODE("69mm","15mm","40mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("94mm","5mm","55mm","12mm","128B",444002723712)},EYB:function(e,t){e.ADD_PRINT_BARCODE("125mm","75mm","26mm","26mm","QRCode","http://www.ems.com.cn"),e.ADD_PRINT_BARCODE("5mm","45mm","55mm","12mm","128B",444002723712),e.ADD_PRINT_BARCODE("69mm","15mm","40mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("94mm","5mm","55mm","12mm","128B",444002723712)},SF0:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},SF1:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},SF2:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},SF3:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},YUNDA:function(e){e.ADD_PRINT_BARCODE("45mm","4mm","22mm","22mm","QRCode","http://www.yundaex.com"),e.ADD_PRINT_BARCODE("68.5mm","17mm","75mm","16mm","128B",444002723712),e.ADD_PRINT_BARCODE("155.5mm","41mm","50mm","8mm","128B",444002723712)},TTKDEX:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.ttkdex.com/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},UC:function(e,t){e.ADD_PRINT_BARCODE("8mm","78mm","25mm","25mm","QRCode","http://www.uc56.com"),e.ADD_PRINT_BARCODE("91mm","4mm","54mm","23mm","128B",444002723712),e.ADD_PRINT_BARCODE("137mm","3mm","50mm","10.6mm","128B",t.trade_id)},POSTB:function(e){e.ADD_PRINT_BARCODE("5mm","45mm","56mm","12mm","128A",908888888888),e.ADD_PRINT_BARCODE("95mm","4mm","50mm","10mm","128A",908888888888),e.ADD_PRINT_BARCODE("122mm","70mm","30mm","30mm","QRCode","http://www.11185.cn")},ZJS:function(e){e.ADD_PRINT_BARCODE("52mm","6mm","55mm","15mm","128b",444002723712)},GTO:function(e){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.gto365.com/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},QFKD:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.qfkd.com.cn/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},FAST:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.fastexpress.com.cn/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)}}),sfSingleSelTypes={"电商特惠(E)":"radio","顺丰特惠(E)":"radio","电商专配(E)":"radio","陆运件打印(E)":"radio"},mdul={name:"pt.wlb",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.wlb",_fn_dom_render:function(){if(!this._elm_dom_container){this._elm_dom_container=$(RC.template.get(this._elm_template_name)).appendTo(this._elm_dom_root)}},_fn_dom_update:function(){1==this.KdGlobalData.templateType?(this.KdGlobalData.optmgrl=-1227,this.KdGlobalData.desginmgrl=0,this.KdGlobalData.showCustom="block",this.KdGlobalData.showStandard="none"):(this.KdGlobalData.optmgrl=0,this.KdGlobalData.desginmgrl=0,this.KdGlobalData.showCustom="none",this.KdGlobalData.showStandard="block"),this._elm_dom_global=$(RC.template.get("template.pt.wlb.global",this.KdGlobalData)).prependTo(this._elm_dom_container.empty()),this._fn_ctrl_dom_render()},_fn_ctrl_dom_render:function(){this.$kd_list=this._elm_dom_global.find(".kd_list"),this.$width_standard=this._elm_dom_global.find(".widthStandard"),this.$height_standard=this._elm_dom_global.find(".heightStandard"),this.$width_custom=this._elm_dom_global.find(".widthCustom"),this.$height_custom=this._elm_dom_global.find(".heightCustom"),this.$vertical_offset_standard=this._elm_dom_global.find(".verticalOffsetStandard"),this.$horizontal_offset_standard=this._elm_dom_global.find(".horizontalOffsetStandard"),this.$vertical_offset_custom=this._elm_dom_global.find(".verticalOffsetCustom"),this.$horizontal_offset_custom=this._elm_dom_global.find(".horizontalOffsetCustom"),this.$global_font=this._elm_dom_global.find(".global_font"),this.$global_fontSize=this._elm_dom_global.find(".global_fontSize"),this.$global_fontBold=this._elm_dom_global.find(".global_fontBold"),this.$single_font=this._elm_dom_global.find(".single_font"),this.$single_fontSize=this._elm_dom_global.find(".single_fontSize"),this.$single_fontBold=this._elm_dom_global.find(".single_fontBold"),this.$single_field=this._elm_dom_global.find(".single_field"),this._elm_dom_desgin=this._elm_dom_global.find(".page_desgin"),this.$custom_desgin=this._elm_dom_desgin.find(".custom_desgin"),this.$leaflet_designs=this._elm_dom_desgin.find(".leaflet-designs"),this.$fiels_txt=this.$leaflet_designs.find(".field-txt"),this.$sf_detail_area=this._elm_dom_global.find(".sf-detail-area"),this.$global_font.val(this.KdGlobalData.fontCustom),this.$global_fontSize.val(this.KdGlobalData.fontSizeCustom),this.$kd_list.val(this._common_id),this._elm_dom_desgin.find("input[name=status][value="+this.KdGlobalData.templateType+"]").attr("checked","checked"),1==this.KdGlobalData.boldCustom&&this.$global_fontBold.attr("checked","checked"),this._fn_ctrl_from_input_render(),this._fn_ctrl_module_desgin(),this._fn_ctrl_common_drag(),this._fn_event_bind(),this._fn_param_compont_statu_init(),this._elm_dom_desgin.find("input[name=status][value="+this.KdGlobalData.templateType+"]").trigger("ifClicked")},_fn_param_compont_statu_init:function(){var e=$(".option-set-hook");e.find('input[type="text"]').prop("disabled","disabled"),e.find('input[type="checkbox"]').parent().addClass("disabled"),e.find("select").iSelect("disable"),e.find("a").removeClass("J_Click")},_fn_ctrl_from_input_render:function(){this._elm_dom_global.find("select").iSelect(),this._elm_dom_global.find("input").iCheck()},_fn_ctrl_module_desgin:function(){for(var e="",t=this.KdGlobalData.fieldSettings||[],i=0,a=t.length;a>i;i++){t[i].fontBold=t[i].bold?"bold":"normal";var s=t[i].show?"block":"none",n=['<div class="drsElement drsMoveHandle" deseditable="'+t[i].edit+'" titleid="'+t[i].titleId+'" style="position: absolute; z-index: 1; display:'+s+";left: "+t[i].x+"px; top: "+t[i].y+"px; width: "+t[i].width+"px; height: "+t[i].height+"px; line-height:"+t[i].fontSize+'px;" data-field-name="'+t[i].field+'">','<span style="font-weight: '+t[i].fontBold+"; font-size: "+t[i].fontSize+"px; font-family: "+t[i].font+';">'+t[i].description+"</span>",'<a class="close_field J_Click" data-name="close" href="javascript:void(0)"></a>',"</div>"];e+=n.join(""),t[i].show&&this.$leaflet_designs.find("input[data-field-name="+t[i].field+"]").iCheck("check")}this.$custom_desgin.append(e),this._fn_bind_event_4_edit_icon(),this._fn_ctrl_common_drag()},_fn_bind_event_4_edit_icon:function(){var e=this;this.$leaflet_designs.delegate(".edit-icon","click",function(t){var i=$(t.target),a=i.parent(".item");e._fn_create_leafdesign_input(i,a)})},_fn_create_leafdesign_input:function(e,t){var i=this,a=t.find(".editable-description"),s=t.find(".decript-edit-input");if(s.length)s.text(a.text()).show().focus(),a.hide(),e.hide();else{var n=$('<input  class="decript-edit-input" type="text" value="'+a.text()+'"/>');e.before(n),a.hide(),e.hide();var l=$($(".wlb-style-change").find('input[type="radio"]')[0]).prop("checked");n.on("keyup",function(t){var a=$(t.target);if(l){var s=e.siblings("label").find('input[type="checkbox"]');"service"!=s.data("dttype")&&(s.data("description",a.val()),s.prop("checked")&&i.inBrowse_CNPrint.SET_PRINT_CONTENT(s.data("fieldname"),a.val()))}else i._set_drag_ele_content(a,a.val())}).on("blur",function(t){var s=$(t.target);if(l){var n=e.siblings("label").find('input[type="checkbox"]');if("service"==n.data("dttype")){var d=n.data("description"),o=s.val();o.substring(0,d.length)==d&&(o=o.substring(d.length)),n.attr("data-value",o),a.text(d+o).show()}else a.text(s.val()).show();if(n.is(":checked"))if("service"==n.data("dttype")){var r=i._fn_get_standard_fieldset_checkedCK(s,"fieldname","=");i.aliWaybillService=r.join(";"),i.inBrowse_CNPrint.SET_PRINT_CONTENT("ali_waybill_service",r.join(";"))}else i.inBrowse_CNPrint.SET_PRINT_CONTENT(n.data("fieldname"),s.val())}else a.text(s.val()).show();e.show(),$(this).hide()}).focus()}},_set_drag_ele_content:function(e,t){var i=e.parents(".item"),a=i.find("input:checkbox").attr("data-field-name");this.$custom_desgin.find(".drsElement[data-field-name="+a+"]").find("span").text(t)},_fn_ctrl_common_drag:function(){var e=3.78*this.$height_custom.val(),t=new DragResize("dragresize",{minWidth:10,minHeight:10,minLeft:0,minTop:0,maxLeft:378,maxTop:e-5});t.isElement=function(e){return e.className&&e.className.indexOf("drsElement")>-1?!0:void 0},t.isHandle=function(e){return e.className&&e.className.indexOf("drsMoveHandle")>-1?!0:void 0},t.ondragfocus=function(){},t.ondragstart=function(){},t.ondragmove=function(){},t.ondragend=function(){},t.ondragblur=function(){},t.apply(document)},_fn_event_bind:function(){if(this._elm_dom_global.on("click",".J_Click",$.proxy(this._fn_event_handler,this)),this._elm_dom_desgin.on("click","dt",$.proxy(this._fn_ctrl_desgin_common_toggle,this)),this._elm_dom_desgin.on("click",".drsElement",$.proxy(this._fn_ctrl_single_style,this)),this._elm_dom_desgin.on("dblclick",".drsElement",$.proxy(this._fn_ctrl_single_style_db,this)),this._elm_dom_desgin.on("keyup",".drsElement",$.proxy(this._fn_ctrl_single_style_keyup,this)),this._elm_dom_desgin.find("input[name=status]").on("ifClicked",$.proxy(this._fn_ctrl_change_temp_type,this)),this.$leaflet_designs.find("input[type=checkbox],input[type=radio]").on("ifClicked",$.proxy(this._fn_ctrl_field_toggle,this)),this.$global_fontBold.on("ifClicked",$.proxy(this._fn_ctrl_global_font_bold,this)),this.$single_fontBold.on("ifClicked",$.proxy(this._fn_ctrl_single_font_bold,this)),this.$single_font.on("change",$.proxy(this._fn_ctrl_single_font_style_set,this)),this.$single_fontSize.on("change",$.proxy(this._fn_ctrl_single_font_style_set,this)),this.$global_font.on("change",$.proxy(this._fn_ctrl_global_font_style_set,this)),this.$global_fontSize.on("change",$.proxy(this._fn_ctrl_global_font_style_set,this)),this.$kd_list.on("change",$.proxy(this._fn_ctrl_change_kd,this)),this.$width_standard.on("keyup",function(){clearNoNum($(this),"double")}),this.$height_standard.on("keyup",function(){clearNoNum($(this),"double")}),this.$width_custom.on("keyup",function(){clearNoNum($(this),"double")}),this.$height_custom.on("keyup",function(){clearNoNum($(this),"double")}),this.$vertical_offset_standard.on("keyup",function(){clearNoNum($(this),"int")}),this.$horizontal_offset_standard.on("keyup",function(){clearNoNum($(this),"int")}),this.$vertical_offset_custom.on("keyup",function(){clearNoNum($(this),"int")}),this.$horizontal_offset_custom.on("keyup",function(){clearNoNum($(this),"int")}),this.$sf_detail_area.length){var e=this,t=this.KdGlobalData.fieldValuesStandard;t&&t.length&&($.each(t,function(t,i){"sf_wlb_type"==i.name&&$(e.$sf_detail_area.find('[name="sf_wlb_type"]')[1*i.value]).iCheck("check"),"sf_wlb_subtype"==i.name&&e.$sf_detail_area.find('[name="sf_wlb_subtype"]').iCheck("true"==i.value?"check":"uncheck")}),setTimeout(function(){e._get_SF_image()},50)),this.$sf_detail_area.find('[name="sf_wlb_type"]').on("ifClicked",function(){setTimeout(function(){e._get_SF_image()},50)}),this.$sf_detail_area.find('[name="sf_wlb_subtype"]').on("ifClicked",function(){setTimeout(function(){e._get_SF_image()},50)})}},_get_SF_image:function(){var e=this._elm_dom_global.find(".standard_desgin img");if(e.length){var t=this.$sf_detail_area.find('[name="sf_wlb_type"]:checked').val(),i=this.$sf_detail_area.find('[name="sf_wlb_subtype"]').prop("checked"),a={"0false":"/images/wlb/SF1.jpg","0true":"/images/wlb/SF2.jpg","1false":"/images/wlb/SF3.jpg","1true":"/images/wlb/SF4.jpg"};e.attr("src",a[""+t+i])}},_fn_event_unbind:function(){this._elm_dom_global.off("click",".J_Click"),this._elm_dom_desgin.off("click","dt"),this._elm_dom_desgin.off("click",".drsElement"),this._elm_dom_global.find("input[type=checkbox]").off("ifClicked"),this.$single_font.off("change"),this.$single_fontSize.off("change"),this.$global_font.off("change",$.proxy(this._fn_ctrl_global_font_style_set,this)),this.$global_fontSize.off("change"),this.$width_standard.off("keyup"),this.$height_standard.off("keyup"),this.$width_custom.off("keyup"),this.$height_custom.off("keyup"),this.$vertical_offset_standard.off("keyup"),this.$horizontal_offset_standard.off("keyup"),this.$vertical_offset_custom.off("keyup"),this.$horizontal_offset_custom.off("keyup"),this.$sf_detail_area.length&&(this.$sf_detail_area.find('[name="sf_wlb_type"]').off("ifClicked"),this.$sf_detail_area.find('[name="sf_wlb_subtype"]').off("ifClicked"))},_fn_ctrl_change_kd:function(e){var t=$(e.currentTarget),i=t.val(),a=t.find("option:selected").data("code"),s=t.find("option:selected").attr("data-taobaoId");$("#o-shadow").show(),RC.pages.modifyCurHash({id:i,cpcode:a,taobaoId:s,isNetDesign:this.isNetDesign?this.isNetDesign:""},!0,!1)},_fn_ctrl_change_temp_type:function(e){var t=$(e.currentTarget),i=t.val(),a=this._elm_dom_global.find(".option-set-hook"),s=this._elm_dom_global.find(".desgin-set-hook"),n=this._elm_dom_desgin.find(".right-hd-tit"),l=s.find(".wlb_standard"),d=s.find(".wlb_custom"),o=s.find(".wlb-list").find(".options.noborder");1==i?(a.find("input").each(function(){$(this).val(this.value?this.value:$(this).data("value"))}),a.find("select").each(function(){$(this).iSelect("setTitle",this.value?this.value:$(this).data("value"))}),a.find("input").prop("disabled",!1),a.find("select").iSelect("enable"),a.find("a").addClass("J_Click"),a.find('input[type="checkbox"]').parent().removeClass("disabled"),l.animate({"margin-left":"-888px"},800),d.animate({"margin-left":"60px"},800),$(".drsElement.drsMoveHandle").animate({left:$(".drsElement.drsMoveHandle").css("left")-888+"px"},800),n.show(),$(o[0]).slideUp(),$(o[1]).slideDown(),this.LODOP||(this.LODOP=getLodop()),$.each($('input[name="status"]'),function(e){$(this).parent()[e?"addClass":"removeClass"]("checked")})):(a.find("input").each(function(){$(this).attr("data-value",this.value),$(this).val("")}),a.find("select").each(function(){$(this).attr("data-value",this.value),$(this).iSelect("setTitle","")}),a.find("input").prop("disabled",!0),a.find("select").iSelect("disable"),a.find("a").removeClass("J_Click"),a.find('input[type="checkbox"]').parent().addClass("disabled"),l.animate({"margin-left":"150px"},800),d.animate({"margin-left":"888px"},800),$(".drsElement.drsMoveHandle").animate({left:$(".drsElement.drsMoveHandle").css("left")+888+"px"},800),n.show(),$(o[0]).slideDown(),$(o[1]).slideUp(),sample.mdulType=t.find("option:selected").data("cpcode"),this.inBrowse_CNPrint=this._fn_CaiNiaoPrint_factory(sample,$("#CaiNiaoPrint_OB")[0],$("#CaiNiaoPrint_EM")[0]),this.inBrowse_CNPrint.PRINT_DESIGN(),$.each($('input[name="status"]'),function(e){$(this).parent()[e?"removeClass":"addClass"]("checked")}))},_fn_ctrl_field_toggle:function(e){var t=$($(".wlb-style-change").find('input[type="radio"]')[0]).prop("checked"),i=$(e.currentTarget),a=i.data("field-name"),s=$.trim(i.closest(".item").find(".editable-description").text()),n=this.$custom_desgin.find(".drsElement[data-field-name="+a+"]");if(t)switch(i.data("type")){case"custom":i.is(":checked")?this.inBrowse_CNPrint.SET_PRINT_STYLEA(i.data("fieldname"),"Deleted",!0):(this.inBrowse_CNPrint.GET_VALUE("ItemIsAdded",i.attr("data-fieldname"))?this.inBrowse_CNPrint.SET_PRINT_STYLEA(i.data("fieldname"),"Deleted",!1):this.inBrowse_CNPrint.ADD_PRINT_TEXTA(i.data("fieldname"),i.data("y"),i.data("x"),i.data("width"),i.data("height"),i.data("description")),"trade_print_num"==i.data("fieldname")&&(this.inBrowse_CNPrint.SET_PRINT_STYLEA(0,"Top","++40mm"),this.inBrowse_CNPrint.SET_PRINT_STYLEA(0,"fontSize",i.data("fontsize"))),i.data("edit")||this.inBrowse_CNPrint.SET_PRINT_STYLEA(i.data("fieldname"),"ReadOnly",!0));break;case"standard":switch(i.data("dttype")){case"service":var l=this._fn_get_standard_fieldset_checkedCK(i,"fieldname","=");this.aliWaybillService=l.join(";"),this.inBrowse_CNPrint.SET_PRINT_CONTENT("ali_waybill_service",l.join(";"));break;case"fixedInfo":i.is(":checked")?(this.aliWaybillCpLogoUp=1,this.inBrowse_CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_up","PreviewOnly",1),this.inBrowse_CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_down","PreviewOnly",1)):(this.aliWaybillCpLogoUp=0,this.inBrowse_CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_up","PreviewOnly",0),this.inBrowse_CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_down","PreviewOnly",0));break;case"prodType":var l=this._fn_get_standard_fieldset_checkedCK(i,"nick"," ");this.aliWaybillProductType=l.join(""),this.inBrowse_CNPrint.SET_PRINT_CONTENT("ali_waybill_product_type",l.join(""))}}else{if(n.length<1){var d=1==this.KdGlobalData.boldCustom?"bold":"normal",o=['<div class="drsElement drsMoveHandle" style="position: absolute; z-index: 10; left: 10px; top:10px; width: 100px; height: 20px; line-height:12px;" data-field-name="'+a+'">','<span style="font-weight: '+d+"; font-size: "+this.KdGlobalData.fontSizeCustom+"px; font-family: "+this.KdGlobalData.fontCustom+'; ">'+s+"</span>",'<a class="close_field J_Click" data-name="close" href="javascript:void(0)"></a>',"</div>"].join("");n=$(o).appendTo(this.$custom_desgin)}if(i.is(":checked"))n.hide().css("z-index",1);else{var r=this._fn_get_drsEle_maxZindex();n.find("span").text(s),n.show().css("z-index",1*r+1)}}},_fn_get_standard_fieldset_checkedCK:function(e,t,i){var a=[];if(e.closest("dd").find(".icheckbox.checked,.iradio.checked").each(function(){{var e=[],s=$(this).find("input[type=checkbox],input[type=radio]");s.data("description")}e.push(s.data(t)),e.push(s.attr("data-value")),a.push(e.join(i))}),e.is(":checked"))for(var s=a.length,n=0;s>n;n++){var l=a.pop();-1==l.indexOf(e.data(t))&&a.unshift(l)}else a.push(e.data(t)+i+e.attr("data-value"));return a},_fn_get_drsEle_maxZindex:function(){var e=this.$custom_desgin.find(".drsElement:visible"),t=0;return $.each(e,function(e,i){i.style.zIndex>t&&(t=i.style.zIndex)}),t},_fn_ctrl_single_style_db:function(e){var t=$(e.currentTarget);if("true"==t.attr("deseditable")){t.addClass("drsElementFocus"),t.attr("contentEditable",!0),t.removeClass("drsElementFocus"),t.removeClass("drsMoveHandle");for(var i=(t.children("span").text(),t.attr("data-field-name")),a=t.parents(".wlb-desgin").siblings(".wlb-list").find(".item").find("input"),s=0;s<$(a).length;s++){var n=$(a[s]).attr("data-field-name");if(n==i){{var l=$(a[s]).parent(".icheckbox").parent("label");$(a[s]).parent(".icheckbox").parent("label").siblings(".decript-edit-input")}more_box=l.parent(".item"),more_label=l.siblings(".edit-icon"),dei_tex=$(a[s]).parent(".icheckbox").siblings(".editable-description"),t.focus(),t.on("blur",function(){t.addClass("drsElementFocus"),t.addClass("drsMoveHandle")})}}}},_fn_ctrl_single_style_keyup:function(e){for(var t=$(e.target),i=t.text(),a=t.attr("data-field-name"),s=t.parents(".wlb-desgin").siblings(".wlb-list").find(".item").find("input"),n=0;n<$(s).length;n++){var l=$(s[n]).attr("data-field-name");if(l==a){{var d=$(s[n]).parent(".icheckbox").siblings(".editable-description"),o=$(s[n]).parent(".icheckbox").parent("label").parent(".item");$(s[n]).parent(".icheckbox").parent("label").siblings(".edit-icon")}$(o).addClass("add_red_target"),t.on("blur",function(){$(o).removeClass("add_red_target"),t.addClass("drsElement"),t.addClass("drsMoveHandle"),t.addClass("drsElementFocus")}),$(d).text(i)}}},_fn_ctrl_single_style:function(e){var t=$(e.currentTarget);t.addClass("drsElementFocus"),t.siblings(".drsElement").removeClass("drsElementFocus");var i=t.data("field-name");this._fn_ctrl_desgin_common_toggle(i);var a=t.find("span"),s=a.css("font-family"),n=parseInt(a[0].style.fontSize,10),l=a.css("font-weight"),d=a.text();this.$single_field.text(d+"字体设置："),this.$single_field.closest(".single_tool").attr("data-fieldname",i),this._fn_ctrl_select_checked(this.$single_font,s),this._fn_ctrl_select_checked(this.$single_fontSize,n),this.$single_fontBold.iCheck(400==l||"normal"==l?"unCheck":"Check")},_fn_ctrl_global_font_style_set:function(e){var t=$(e.currentTarget),i=t.data("type"),a=t.val(),s=this._elm_dom_desgin.find(".custom_desgin"),n="font-family"==i?{"font-family":a}:{"font-size":a+"px"};s.find(".drsElement span").css(n),"font-size"==i&&s.find(".drsElement").css({"line-height":a+"px"})},_fn_ctrl_single_font_style_set:function(e){var t=$(e.currentTarget),i=t.data("type"),a=t.val(),s=t.closest(".single_tool").attr("data-fieldname"),n="font-family"==i?{"font-family":a}:{"font-size":a+"px"};this.$custom_desgin.find("div[data-field-name="+s+"] span").css(n),"font-size"==i&&this.$custom_desgin.find("div[data-field-name="+s+"]").css({"line-height":a+"px"})},_fn_ctrl_global_font_bold:function(e){var t=$(e.currentTarget),i=this.$custom_desgin.find(".drsElement span");t.is(":checked")?(i.css("font-weight","normal"),this.$single_fontBold.is(":checked")&&this.$single_fontBold.iCheck("uncheck")):(i.css("font-weight","bold"),this.$single_fontBold.is(":checked")||this.$single_fontBold.iCheck("check"))},_fn_ctrl_single_font_bold:function(e){var t=$(e.currentTarget),i=t.closest(".single_tool").attr("data-fieldname");this.$custom_desgin.find(".drsElement[data-field-name="+i+"] span").css(t.parent().hasClass("checked")?{"font-weight":"normal"}:{"font-weight":"bold"})},_fn_ctrl_select_checked:function(e,t){e.val(t),e.iSelect("update")},_fn_ctrl_save_custom_data:function(){var e={};switch(e.id=this.$kd_list.val(),e.taobaoId=this.$kd_list.find("option:selected").attr("data-taobaoId"),e.templateType=this._elm_dom_desgin.find("input[name=status]:checked").val(),e.templateType){case"0":var t=this._fn_ctrl_get_standard_fieldSettings();e.fieldValuesStrStandard=JSON.stringify(t.fix),e.fieldSettingsStrStandard=JSON.stringify(t.define),e.cainiaoEncryptedFields=this.inBrowse_CNPrint.GET_VALUE("CustomProgramData",0);break;case"1":e.fontCustom=this.$global_font.val(),e.fontSizeCustom=this.$global_fontSize.val(),e.boldCustom=this.$global_fontBold.is(":checked")?1:0,e.widthCustom=this.$width_custom.val(),e.heightCustom=this.$height_custom.val(),e.verticalOffsetCustom=this.$vertical_offset_custom.val(),e.horizontalOffsetCustom=this.$horizontal_offset_custom.val(),e.widthStandard=this.$width_standard.val(),e.heightStandard=this.$height_standard.val(),e.verticalOffsetStandard=this.$vertical_offset_standard.val(),e.horizontalOffsetStandard=this.$horizontal_offset_standard.val(),e.fieldSettingsStrCustom=JSON.stringify(this._fn_ctrl_get_fieldSettings())}return e},_fn_ctrl_get_fieldSettings:function(){var e=[];return this.$custom_desgin.find(".drsElement").each(function(){var t=$(this),i=t.attr("data-field-name"),a={};a.field=i,a.description=$.trim(t.find("span").text()),a.edit=t.attr("deseditable"),a.titleId=t.attr("titleid"),a.show="none"==t[0].style.display?!1:!0,a.width=t.width(),a.height=t.height(),a.x=parseInt(t.css("left"),10),a.y=parseInt(t.css("top"),10),a.font=t.find("span").css("font-family"),a.fontSize=parseInt(t.find("span")[0].style.fontSize),a.bold=400==t.find("span").css("font-weight")?!1:!0,e.push(a)}),e},_fn_ctrl_get_standard_fieldSettings:function(){var e=this,t={fix:[],define:[]};return $(".standard-right-fields").find(".icheckbox.checked,.iradio.checked").children("input[type=checkbox],input[type=radio]").each(function(){var i=$(this),a={};switch(a.field=i.data("fieldname"),i.data("edit")?(a.description=e.inBrowse_CNPrint.GET_VALUE("ItemContent",a.field),a.edit=i.data("edit")):a.description=i.data("description"),a.edit=i.data("edit"),i.data("type")){case"custom":a.width=e.inBrowse_CNPrint.GET_VALUE("itemWidth",a.field),a.height=e.inBrowse_CNPrint.GET_VALUE("itemHeight",a.field),a.x=e.inBrowse_CNPrint.GET_VALUE("itemLeft",a.field),a.y=e.inBrowse_CNPrint.GET_VALUE("itemTop",a.field),a.font=e.inBrowse_CNPrint.GET_VALUE("itemFont",a.field),a.fontSize=e.inBrowse_CNPrint.GET_VALUE("itemFontSize",a.field),a.bold=e.inBrowse_CNPrint.GET_VALUE("itemBold",a.field);break;case"standard":a.width=i.data("width"),a.height=i.data("height"),a.x=i.data("x"),a.y=i.data("y"),a.font=i.data("font"),a.fontSize=i.data("fontsize"),a.bold=0==i.data("bold")?!1:!0}switch(i.data("dttype")){case"fixedInfo":t.fix.push({name:"ali_waybill_cp_logo_up",value:1});break;case"prodType":for(var s=!0,n=0;n<t.fix.length;n++)"ali_waybill_product_type"==t.fix[n].name&&(t.fix[n].value=t.fix[n].value+" "+a.description,s=!1);s&&t.fix.push({name:"ali_waybill_product_type",value:a.description});break;case"service":for(var s=!0,n=0;n<t.fix.length;n++)"ali_waybill_service"==t.fix[n].name&&(t.fix[n].value=t.fix[n].value+";"+a.field+"="+i.attr("data-value"),s=!1);s&&t.fix.push({name:"ali_waybill_service",value:a.field+"="+i.attr("data-value")});break;default:t.define.push(a)}}),t},_fn_ctrl_get_printContentSettings:function(){var e=[];return this.$sf_detail_area.length&&(e.push({name:"sf_wlb_type",value:this.$sf_detail_area.find("[name='sf_wlb_type']:checked").val()}),e.push({name:"sf_wlb_subtype",value:this.$sf_detail_area.find("[name='sf_wlb_subtype']").prop("checked")})),e},_fn_ctrl_update_kd_desgin:function(e,t,i,a,s){var n=this,l=({url:"http://www.damaijia.com/DEMO/pt_wlb_user_query.json?time="+(new Date).getTime(),type:"get",data:{api_name:"pt_wlb_user_query"},dataType:"JSON"},{url:"/template/wlb/STO.html",dataType:"html",type:"get"});try{$.when(API.pt_wlb_user_query({id:e,templateList:!0,taobaoId:a}),$.ajax(l)).done(function(t,l){n.KdGlobalData=t[0].data,n.KdFieldHtml=l[0],n.cainiaoEncryptedFields=t[0].data.cainiaoEncryptedFields,n.data=t[0].data;for(var d=t[0].data.fieldHeadTexts||[],o="",r={},p=0;p<d.length;p++){var c=d[p],_=c.fieldSettingsList||[];r["customdata"+c.id]=_,o+='<dl class="custom-title" customdataid="customdata'+c.id+'"><dt>'+c.title+"<span>ˇ</span></dt><dd></dd></dl>"}if(n.KdGlobalData.custom_right_items_data=r,n.KdGlobalData.custom_right_fields=o,t[0].data.cnProductTypeStrs&&"string"==typeof t[0].data.cnProductTypeStrs){var m=t[0].data.cnProductTypeStrs.split(",");leafletDesignsJSON[1].fieldSettingsList=[];for(var u in m){var h={optType:sfSingleSelTypes[m[u]],description:m[u],desc:m[u],field:"ali_waybill_product_type",nick:-1!=m[u].indexOf("(")?m[u].substring(m[u].indexOf("(")+1,m[u].indexOf(")")):m[u],titleId:"2",x:284,y:9,width:91,height:26,font:"宋体",fontSize:9,bold:0};leafletDesignsJSON[1].fieldSettingsList.push(h)}}var f=t[0].data.fieldSettingsStandard,v=leafletDesignsJSON[leafletDesignsJSON.length-1].fieldSettingsList;for(var u in f){for(var g=0;g<v.length;g++)v[g].field==f[u].field&&(v[g].description=f[u].description,v[g].desc=f[u].description,v[g].width=f[u].width,v[g].height=f[u].height,v[g].x=f[u].x,v[g].y=f[u].y);if("custom_qrcode"==f[u].field){var b=leafletDesignsJSON[6].fieldSettingsList;b[b.length-1].description=f[u].description}}var y=t[0].data.fieldValuesStandard,x=leafletDesignsJSON[2].fieldSettingsList;for(var u in y)if("ali_waybill_service"==y[u].name){var w=y[u].value.split(";");for(var g in w){var k=w[g].split("=");if(k[1])for(var p in x)x[p].field==k[0]&&(x[p].value=k[1])}}if(n.KdGlobalData.standard_right_fields=RC.template.get("template.pt.wlb.newMdul_right_fileds",{list:leafletDesignsJSON}),i&&n._fn_event_unbind(),n.isNetDesign)API.wlb_company_user_query({id:e,templateList:!0,taobaoId:a},function(e){n.KdGlobalData.wlbExpressTemplates=e.data.wlbExpressTemplates,n._fn_dom_update();for(var t in f)$(".standard-right-fields").find('input[data-fieldname="'+f[t].field+'"]').iCheck("check");y||(n.aliWaybillCpLogoUp=1,n.aliWaybillProductType="",n.aliWaybillService=""),$(".wlb-style-change").hide(),$(".wlb_standard").fadeOut("slow"),$(".wlb_custom").animate({"margin-left":"120px"},800),s&&s()});else{n._fn_dom_update();for(var u in f)$(".standard-right-fields").find('input[data-fieldname="'+f[u].field+'"]').iCheck("check");y||(n.aliWaybillCpLogoUp=1,n.aliWaybillProductType="",n.aliWaybillService="")}})}catch(d){console.log(d)}},_fn_event_handler:function(e){e.preventDefault();var t=$(e.currentTarget),i=t.data("name");this._event_handler_list[i].call(this,e)},_event_handler_list:{offset_set:function(e){var t,i,a=$(e.currentTarget),s=a.data("type"),n=a.closest(".w400").data("type");if("standard"==n&&(t=this.$vertical_offset_standard,i=this.$horizontal_offset_standard),"custom"==n&&(t=this.$vertical_offset_custom,i=this.$horizontal_offset_custom),"up"==s){var l=parseInt(t.val(),10);l+=1,t.val(l)}if("down"==s){var l=parseInt(t.val(),10);l-=1,t.val(l)}if("right"==s){var l=parseInt(i.val(),10);l+=1,i.val(l)}if("left"==s){var l=parseInt(i.val(),10);l-=1,i.val(l)}},preview_print:function(){$("#o-shadow").show();var e=this._elm_dom_desgin.find("input[name=status]:checked").val();
if(0==e){var t=this,i=(this.KdGlobalData.templatePathStandard,{});if(i.width=this.$width_standard.val(),i.height=this.$height_standard.val(),i.y=-this.$vertical_offset_standard.val(),i.x=this.$horizontal_offset_standard.val(),this.KdGlobalData.cpCode="SF"){if(this.$sf_detail_area.length)var a=""+this.$sf_detail_area.find("[name='sf_wlb_type']:checked").val()+this.$sf_detail_area.find("[name='sf_wlb_subtype']").prop("checked");var s={"0false":0,"0true":1,"1false":2,"1true":3};i.sfType=s[a]||0}API.pt_wlb_fields_sample({templateType:e},$.proxy(function(e){var a=this.$kd_list.find("option:selected").data("code");"SF"==a&&void 0!=typeof i.sfType&&(a+=i.sfType);var s=RC.template.get("template.pt.wlb."+a+".standard",e.data);i.html=s,t._fn_custom_wlb_html_print(i,e.data),$("#o-shadow").hide()},this))}else if(1==e){var i={};i.bgPath=this.KdGlobalData.bgPathCustom,i.width=this.$width_custom.val(),i.height=this.$height_custom.val(),i.fontSize=this.$global_fontSize.val(),i.font=this.$global_font.val(),i.bold=this.$global_fontBold.is(":checked")?1:0,i.y=this.$vertical_offset_custom.val(),i.x=this.$horizontal_offset_custom.val(),API.pt_wlb_fields_sample({templateType:e},$.proxy(function(e){var t=this._fn_ctrl_get_fieldSettings(),a=e.data,s=this.$kd_list.find("option:selected").data("code"),n=RC.template.get("template.pt.wlb."+s+".custom");if(i.html=n,a){for(var l=0,d=t.length;d>l;l++)t[l].description=a[t[l].field]||"",t[l].fontBold=t[l].bold?"bold":"normal";i.fieldSettings=t,this._fn_custom_wlb_text_print(i)}$("#o-shadow").hide()},this))}},save_set:function(){$("#o-shadow").show();var e=this._fn_ctrl_save_custom_data(),t=this;API.pt_wlb_update(e,$.proxy(function(e){e.data&&API.pt_wlb_user_query({id:this._common_id,templateList:!0,taobaoId:this._common_taobaoId},function(e){t.data=e.data,$.dialog.alert("保存成功",function(){$("#o-shadow").fadeOut()})})},this))},reset_set:function(){var e=this,t=this.$kd_list.val(),i=this.$kd_list.find("option:selected").data("code"),a=this.$kd_list.find("option:selected").attr("data-taobaoId"),s=this._elm_dom_desgin.find("input[name=status]:checked").val()||0;$("#o-shadow").show(),$.dialog.confirm("确定恢复默认吗？",function(){API.pt_wlb_default({id:t,templateType:s,taobaoId:a},function(){e._fn_ctrl_update_kd_desgin(t,i,!0,a,function(){$("#o-shadow").hide()})})},function(){$("#o-shadow").hide()})},close:function(e){var t=$(e.currentTarget),i=t.closest(".drsElement"),a=i.data("field-name");this.$leaflet_designs.find("input[data-field-name="+a+"]").iCheck("uncheck"),i.hide()}},_fn_custom_wlb_html_print:function(e,t){try{var i=$($(".wlb-style-change").find('input[type="radio"]')[0]).prop("checked");if(i)this.inBrowse_CNPrint.SET_PRINT_MODE("NOCLEAR_AFTER_PRINT",!0),this.inBrowse_CNPrint.PREVIEW();else{var a=this.$kd_list.find("option:selected").data("code");"SF"==a&&void 0!=typeof e.sfType&&(a+=e.sfType);var s=getLodop();null!=s&&"undefined"!=typeof s.VERSION&&(s.PRINT_INIT("电子面单设计"),s.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",e.html),standardMap[a](s,t),s.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),s.PREVIEW())}}catch(n){console.log(n)}},_fn_custom_wlb_text_print_bak:function(e){try{var t=getLodop();if(null!=t&&"undefined"!=typeof t.VERSION){t.PRINT_INIT("电子面单设计");for(var i="",a=[],s=["waybill_num_barcode_up","waybill_num_barcode_down"],n=e.fieldSettings,l=0,d=n.length;d>l;l++)-1!==$.inArray(n[l].field,s)?a.push(n[l]):i+='<div style="position: absolute; z-index: 9;left:'+n[l].x+"px; top:"+n[l].y+"px; width: "+n[l].width+"px; height: "+n[l].height+'px; overflow:hidden"><span style="font-weight: '+n[l].fontBold+"; font-size: "+n[l].fontSize+"px; font-family: "+n[l].font+'; ">'+n[l].description+"</span></div>";var o='<div style="position:relative; width:'+e.width+"mm; height: "+e.height+'mm"><img src="'+e.bgPath+'" style="position:absolute; z-index:1; top:0; left:0; width: '+e.width+"mm; height: "+e.height+'mm;" alt="" />'+i+"</div>";t.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",o);for(var r=0,p=a.length;p>r;r++)t.ADD_PRINT_BARCODE(a[r].y,a[r].x,a[r].width,a[r].height,"128B",1234567890);t.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),t.PREVIEW()}}catch(c){console.log(c)}},_fn_custom_wlb_text_print:function(e){try{var t=(this.$kd_list.find("option:selected").data("code"),getLodop());if(null!=t&&"undefined"!=typeof t.VERSION){t.PRINT_INITA(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm","自定义电子面单设计"),t.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",e.html),t.SET_PRINT_STYLE("FontSize",3*e.fontSize/4),t.SET_PRINT_STYLE("FontName",e.font),t.SET_PRINT_STYLE("Bold",e.bold);for(var i=e.fieldSettings,a=["waybill_num_barcode_up","waybill_num_barcode_down","custom_qrcode","qrcode","trade_barcode_up","trade_barcode_down","package_center_code"],s=0,n=i.length;n>s;s++)if(i[s].show)if(-1!==$.inArray(i[s].field,a)){var l="128B";("custom_qrcode"==i[s].field||"qrcode"==i[s].field)&&(l="QRCode",i[s].height=i[s].width),t.ADD_PRINT_BARCODE(i[s].y,i[s].x,i[s].width,i[s].height,l,1234567890)}else{var d=i[s].description;t.ADD_PRINT_TEXT(i[s].y,i[s].x,i[s].width,i[s].height,d),t.SET_PRINT_STYLEA(0,"FontName",i[s].font),t.SET_PRINT_STYLEA(0,"FontSize",3*i[s].fontSize/4),t.SET_PRINT_STYLEA(0,"Bold",i[s].bold?1:0)}t.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),t.PREVIEW()}}catch(o){console.log(o)}},_fn_ctrl_desgin_common_toggle:function(e){var t=this,i="object"==typeof e?$(e.currentTarget):this.$leaflet_designs.find("input[data-field-name="+e+"]"),a=i.closest("dl"),s=this.KdGlobalData.fieldSettings||[];if(a.hasClass("custom-title")){var n=a.attr("customdataid"),l=t.KdGlobalData.custom_right_items_data||{},d=l[n]||[],o=a.find("dd"),r="";if(!o.children().length&&d.length){for(var p=0;p<d.length;p++){var c=d[p];r+='<div class="item"><label><input type="checkbox" data-field-name="'+c.field+'" /><span class="editable-description">'+c.description+"</span></label>"+(1==c.edit?'<span class="edit-icon"></span>':"")+"</div>"}o.append(r),o.find("input").iCheck();for(var _=0,m=s.length;m>_;_++)if(s[_].show){var u=o.find('input[data-field-name="'+s[_].field+'"]');u.length&&u.iCheck("check")}o.find("input[type=checkbox]").on("ifClicked",$.proxy(this._fn_ctrl_field_toggle,this))}}a.addClass("current"),a.siblings().removeClass("current")},_fn_CaiNiaoPrint_factory:function(sample,OB,EB){var CNPrint=OB&&EB?getCaiNiaoPrint(OB,EB):getCaiNiaoPrint();with(sample)CNPrint.PRINT_INITA(top,left,width,height,taskname);CNPrint.SET_PRINT_IDENTITY("AppKey=12001121&Seller_ID="+this._common_taobaoId),CNPrint.SET_PRINT_PAGESIZE(1,"100mm","180mm","");var config="A4";CNPrint.SET_PRINT_MODE("CAINIAOPRINT_MODE","CP_CODE="+this.$kd_list.find("option:selected").data("cpcode")+"&CONFIG="+config),CNPrint.SET_SHOW_MODE("DESIGN_IN_BROWSE",sample.inBrowse),sample.inBrowse&&(CNPrint.SET_SHOW_MODE("HIDE_QBUTTIN_PREVIEW",!0),CNPrint.SET_SHOW_MODE("HIDE_PBUTTIN_SETUP",!0),CNPrint.SET_SHOW_MODE("HIDE_VBUTTIN_SETUP",!0),CNPrint.SET_SHOW_MODE("HIDE_ABUTTIN_SETUP",!0),CNPrint.SET_SHOW_MODE("HIDE_RBUTTIN_SETUP",!0),CNPrint.SET_SHOW_MODE("HIDE_GROUND_LOCK",!0),CNPrint.SET_SHOW_MODE("SETUP_ENABLESS","11111111000000"));for(var property in sample.aliwaybill)sample.aliwaybill[property]?CNPrint.SET_PRINT_CONTENT(property,sample.aliwaybill[property]):"";var fieldValuesStandard=this.data.fieldValuesStandard;for(var i in fieldValuesStandard){var $srf=$(".standard-right-fields");switch(fieldValuesStandard[i].name){case"ali_waybill_cp_logo_up":CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_up","PreviewOnly",0),CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_down","PreviewOnly",0),this.aliWaybillCpLogoUp=0,$srf.find('input[data-fieldname="company_logo"]').iCheck("check");break;case"ali_waybill_product_type":var _pt=fieldValuesStandard[i].value.split(" ");for(var j in _pt)$srf.find('input[data-description="'+_pt[j]+'"]').iCheck("check");this.aliWaybillProductType=fieldValuesStandard[i].value;var types=fieldValuesStandard[i].value.split(" ");for(var t in types)-1!=types[t].indexOf("(")&&(types[t]=types[t].substring(types[t].indexOf("(")+1,types[t].indexOf(")")));CNPrint.SET_PRINT_CONTENT(fieldValuesStandard[i].name,types.join(" "));break;case"ali_waybill_service":var _vs=fieldValuesStandard[i].value.split(";");for(var j in _vs)$srf.find('input[data-fieldname="'+_vs[j].split("=")[0]+'"]').iCheck("check");this.aliWaybillService=fieldValuesStandard[i].value,CNPrint.SET_PRINT_CONTENT(fieldValuesStandard[i].name,fieldValuesStandard[i].value)}}var _this=this;return setTimeout(function(){var e=_this.data.fieldSettingsStandard;for(var t in e){var i=e[t].field,a=e[t].y?e[t].y:0,s=e[t].x?e[t].x:0,n=e[t].width?e[t].width:0,l=e[t].height?e[t].height:0,d="";if("string"==typeof e[t].description)for(var o=e[t].description.split("\\n"),r=0;r<o.length;r++)d+=o[r],r<o.length-1&&(d+=String.fromCharCode(13));CNPrint.ADD_PRINT_TEXTA(i,a,s,n,l,d);var p=e[t].fontSize?e[t].fontSize:12,c=e[t].bold?e[t].bold:0;CNPrint.SET_PRINT_STYLEA(i,"FontSize",p),CNPrint.SET_PRINT_STYLEA(i,"Bold",c),e[t].edit||CNPrint.SET_PRINT_STYLEA(e[t].field,"ReadOnly",!0)}},1e3),CNPrint},init:function(){},getContainer:function(){return this._elm_dom_container},update:function(e,t){return"undefined"==typeof e.id?void(location.href="#/pt/wlb_list/"):(this.isNetDesign=e.isNetDesign,this._common_id=e.id,this._common_cpCode=e.cpcode,this._common_taobaoId=e.taobaoId,this._fn_dom_render(),this._fn_ctrl_update_kd_desgin(this._common_id,this._common_cpCode,!1,this._common_taobaoId),void(t&&t()))},destroy:function(){this._elm_dom_container&&(this._elm_dom_container.empty().remove(),this._elm_dom_container=null,this._common_id=null,this._fn_event_unbind())}},leafletDesignsJSON=[{id:1,title:"固定区信息",field:"fixedInfo",type:"standard",fieldSettingsList:[{description:"打印物流公司logo",titleId:"1",field:"company_logo",x:5,y:4,width:113,height:34,font:"宋体",fontSize:9,bold:0}]},{id:2,title:"产品类型",field:"prodType",type:"standard",fieldSettingsList:[]},{id:3,title:"物流服务信息",field:"service",type:"standard",fieldSettingsList:[{edit:!0,description:"保价金额：",example:"102元",field:"ali_waybill_serv_insure_amount",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"保价费用：",example:"102元",field:"ali_waybill_serv_insure_fee",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{description:"代收金额(系统生成)",example:"102元",field:"ali_waybill_serv_cod_amount",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{description:"到付金额(系统生成)",example:"102元",field:"ali_waybill_serv_dest_amount",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"返款周期：",example:"即日退/三日退",field:"ali_waybill_serv_cod_arrival_days",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"签单返回：",example:"原件返回/传真返回",field:"ali_waybill_serv_receipt_return_type",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"送货进仓：",example:"送货进仓",field:"ali_waybill_serv_door_delivery",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"夜间服务：",example:"夜间服务",field:"ali_waybill_serv_night_delivery",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"限时达：",example:"限时达",field:"ali_waybill_serv_delivery_time_limit",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"配送环境：",example:"常温/冷冻/冷藏",field:"ali_waybill_serv_delivery_enc",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"计费重量：",example:"2kg",field:"ali_waybill_ext_weight",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"投递费用：",example:"15元",field:"ali_waybill_ext_delivery_fee",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"业务类型：",example:"电商特惠/顺丰特惠/电商专配/陆运件",field:"ali_waybill_ext_sf_biz_type",x:9,y:103,width:186,height:30,font:"微软雅黑：",fontSize:16,bold:1,titleId:"3"},{edit:!0,description:"第三方地区：",example:"21121",field:"ali_waybill_ext_sf_third_area",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{description:"发件日期(系统生成)",example:"1/1/2015",field:"ali_waybill_ext_send_date",x:242,y:100,width:150,height:30,font:"宋体",fontSize:10,bold:0,titleId:"3"},{edit:!0,description:"付款方式：",example:"寄付月结/转第三方付",field:"ali_waybill_ext_payment_type",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"},{edit:!0,description:"月结帐号：",example:"12345",field:"ali_waybill_ext_custom_code",x:287,y:156,width:85,height:20,font:"宋体",fontSize:9,bold:0,titleId:"3"}]},{id:4,title:"收货人信息",type:"custom",fieldSettingsList:[{description:"买家昵称",field:"buyer_nick",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"4"}]},{id:5,title:"卖家信息",type:"custom",fieldSettingsList:[{description:"卖家昵称",field:"seller_nick",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"5"},{description:"店铺名称",field:"shop_title",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"5"}]},{id:6,title:"商品信息",type:"custom",fieldSettingsList:[{description:"商品名称",field:"goods_title",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品简称",field:"goods_short_title",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品规格",field:"goods_properties",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品编码",field:"goods_outer_id",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品单价",field:"goods_price",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品总数",field:"goods_total_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品种类",field:"goods_cate_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品简称+数量",field:"goods_short_title-goods_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品编码+数量",field:"goods_outer_id-goods_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品简称+规格+数量",field:"goods_short_title-goods_properties-goods_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品编码+规格+数量",field:"goods_outer_id-goods_properties-goods_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品简称+商家编码+数量",field:"goods_short_title-goods_outer_id-goods_num",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"商品简称+商家编码+规格+数量",field:"goods_short_title-goods_outer_id-goods_properties-goods_num",x:0,y:0,width:180,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"数量+商品简称",field:"goods_num-goods_short_title",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"数量+商家编码",field:"goods_num-goods_outer_id",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"数量+商品简称+规格",field:"goods_num-goods_short_title-goods_properties",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"数量+商家编码+规格",field:"goods_num-goods_outer_id-goods_properties",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"数量+商品简称+商家编码",field:"goods_num-goods_short_title-goods_outer_id",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"},{description:"数量+商品简称+商家编码+规格",field:"goods_num-goods_short_title-goods_outer_id-goods_properties",x:0,y:0,width:180,height:20,font:"宋体",fontSize:10,bold:0,titleId:"6"}]},{id:7,title:"订单信息",type:"custom",fieldSettingsList:[{description:"订单编号",field:"trade_id",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"订单编号条码",field:"trade_barcode",x:0,y:0,width:200,height:50,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"下单时间",field:"trade_create_time",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"付款时间",field:"trade_pay_time",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"打印时间",field:"trade_print_time",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"赠品",field:"premiums",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"买家留言",field:"trade_buyer_message",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"卖家备注",field:"trade_seller_memo",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"实付总额",field:"trade_payment",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"邮费",field:"trade_post_fee",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"发票抬头",field:"trade_invoice_title",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"7"},{edit:!0,description:"自定义二维码：",field:"custom_qrcode",x:0,y:0,width:60,height:60,font:"宋体",fontSize:10,bold:0,titleId:"7"},{description:"打印序号",field:"trade_print_num",x:180,y:0,width:32,height:20,font:"宋体",fontSize:20,bold:1,titleId:"8"}]},{id:8,title:"可编辑标签",type:"custom",fieldSettingsList:[{edit:!0,description:"客户：",field:"customer_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"},{edit:!0,description:"买家留言：",field:"buyer_message_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"},{edit:!0,description:"订单号：",field:"order_number_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"},{edit:!0,description:"赠品：",field:"premiums_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"},{edit:!0,description:"卖家备注：",field:"seller_memo_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"},{edit:!0,description:"商品信息：",field:"goods_info_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"},{edit:!0,description:"商品总数：",field:"goods_total_text",x:0,y:0,width:150,height:20,font:"宋体",fontSize:10,bold:0,titleId:"8"}]}],sample={top:0,left:0,width:"100mm",height:"180mm",taskname:"菜鸟模板",mdulType:"",inBrowse:!0,aliwaybill:{ali_waybill_short_address:"杭州 051",ali_waybill_package_center_code:"5486",ali_waybill_package_center_name:"杭州转苏州",ali_waybill_waybill_code:"444002723712",ali_waybill_cod_amount:"FKFS=到付;PSRQ=2015-07-10",ali_waybill_consignee_address:"江苏省南京市鼓楼区汉口路22号",ali_waybill_consignee_name:"张三",ali_waybill_consignee_phone:"13742567889",ali_waybill_send_name:"李四",ali_waybill_send_phone:"18058435611",ali_waybill_shipping_address:"浙江省杭州市滨江区南环路4028号中恒世纪科技园",ali_waybill_shipping_address_city:"杭州市",ali_waybill_cp_logo_down:"物流公司logo",ali_waybill_cp_logo_up:"物流公司logo",ali_waybill_shipping_branch_code:"21121",ali_waybill_shipping_branch_name:"浙江杭州分部",ali_waybill_shipping_address_city:"杭州",ali_waybill_ext_send_date:"2014-08-16 10:14:05",ali_waybill_ext_sf_biz_type:"",ali_waybill_product_type:""},ali_waybill_service:{ali_waybill_serv_insure_amount:" ",ali_waybill_serv_insure_fee:" ",ali_waybill_serv_cod_amount:" ",ali_waybill_serv_dest_amount:" ",ali_waybill_serv_cod_arrival_days:" ",ali_waybill_serv_receipt_return_type:" ",ali_waybill_serv_door_delivery:" ",ali_waybill_serv_night_delivery:" ",ali_waybill_serv_delivery_time_limit:" ",ali_waybill_serv_delivery_enc:" ",ali_waybill_ext_weight:" ",ali_waybill_ext_delivery_fee:" ",ali_waybill_ext_sf_biz_type:" ",ali_waybill_ext_sf_third_area:" ",ali_waybill_ext_send_date:" ",ali_waybill_ext_payment_type:" ",ali_waybill_ext_custom_code:" "},define:{buyer_message_text:"买家留言：",buyer_nick:"买家昵称",custom_content1:"感谢您对我们的支持！1",custom_content2:"感谢您对我们的支持！2",custom_content3:"感谢您对我们的支持！3",custom_qrcode:"自定义二维码",customer_text:"客户：",express_logo:"快递公司Logo",goods_cate_num:"2",goods_info_text:"商品信息：",goods_num:"(2件)",order_number_text:"订单号：",premiums:"精美发夹",premiums_text:"赠品：",seller_memo_text:"卖家备注：",seller_nick:"卖家昵称",shop_name:"店铺名称",trade_barcode:"772482971663109",trade_buyer_message:"请尽快发货！",trade_create_time:"2014-08-15 11:34:02",trade_id:"772482971663109",trade_invoice_title:"杭州市光云科技有限公司",trade_package_weight:"5.0kg",trade_pay_time:"2014-08-15 13:15:18",trade_payment:"110.00",trade_post_fee:"10.00",trade_print_time:"2014-08-15 16:10:00",trade_print_time_day:"2014-08-15",trade_seller_memo:"发顺丰快递"}};RC.modules.define(mdul.name,mdul)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_elist">','<div class="pt_express_list">','<div class="express-tab">','<div class="express-hd clearfix">','<ul class="hd-title clearfix">',"<li>",'<a href="#/pt/list/">普通面单</a>',"</li>",'<li class="current">','<a href="#/pt/wlb_list/">菜鸟电子面单</a>',"</li>","</ul>",'<div class="hd-sync">','<a target="_blank" style="margin-right: 10px;" href="http://bbs.taobao.com/catalog/thread/567766-314499398.htm?spm=a210m.7475144.1998166562.75.rhc9kh">电子面单单号回收策略</a>','<a target="_blank" style="margin-right: 10px;" href="http://wlmart.wuliu.taobao.com/user/service_frame.htm?spm=a1z0f.7.0.0.zteMX4&temp=1&serviceType=28">去淘宝开通更多快递</a>','<button class="J_Click" data-name="sync_list" data-id="0">同步已开通电子面单服务的快递</button>',"</div>","</div>",'<div class="express-bd">','<div class="express-panel pt-list-tab"></div>',"</div>",'<div class="clearfix">','<div class="pagination-pages f-rt mr_5">','<div class="pagination-page J_Page_Container"></div>',"</div>","</div>","</div>","</div>","</div>"],a=['<table class="express-table">',"<thead>","<tr>",'<th width="60">','<div class="cell-box ft-center">序号</div>',"</th>",'<th width="110">','<div class="cell-box">类型</div>',"</th>",'<th width="80">','<div class="cell-box">快递类型</div>',"</th>",'<th width="220">','<div class="cell-box">发货网点\\发货地址</div>',"</th>",'<th width="200">','<div class="cell-box">操作</div>',"</th>",'<th width="100">','<div class="cell-box">常用快递</div>',"</th>","</tr>","</thead>",'<tbody class="common-list-tr">','<tr act-loop="item in items" data-id={{item.id}} data-taobaoId="{{item.taobaoId}}" class="J_List_Item_{{item.id}}">',"<td>",'<div class="cell-box ft-center">{{item.idex}}</div>',"</td>","<td>",'<div class="cell-box"><span class="J_Express_Name">{{item.name}}</span><a data-id={{item.id}} data-name="edit_name" class="edit-ex J_Click"></a></div>',"</td>","<td>",'<div class="cell-box">','<span class="cp-type" act-if="item.cpType == 1">直营</span>','<span class="cp-type" act-if="item.cpType != 1">加盟</span>',"</div>","</td>",'<td class="cp-detail">','<span class="cp-type" act-if="item.cpType != 1">','<div class="cell-box" act-loop="branchAccount in item.branchAccounts">','<span class="cp-img"></span>','<span class="cp-content">','<span class="cp-branchCode"><span act-if="branchAccount.shopFlag != undefined" class="shop_info mr_5" style="cursor: default;font-size:12px;color:#fff;padding: 2px 5px;background:#d50000 none repeat scroll 0 0;" data-title="{{branchAccount.shopName}}">{{branchAccount.shopFlag}}</span>网点名称：{{branchAccount.branchName}}</span>','<span class="cp-quantity"><span class="cp-quantity-title">可用单号：</span><span  class="cp-quantity-content">{{branchAccount.quantity}}</span></span></br>','<div class="cp-location">','<span act-loop="address in branchAccount.waybillAddresses">发货地址：<div class="addr">{{address.province}}{{address.city}}{{address.area}}{{address.addressDetail}}<span class="defaultAddress J_Click" data-id={{item.id}} data-taobaoId={{branchAccount.taobaoId}} data-branchCode={{branchAccount.branchCode}} data-name="update_default_addr" data-addressId={{address.waybillAddressId}} act-if="address.isDefault == 1" title="更改默认地址"></span><span class="no-defaultAddress J_Click" data-id={{item.id}} data-taobaoId={{branchAccount.taobaoId}} data-branchCode={{branchAccount.branchCode}} data-addressId={{address.waybillAddressId}} data-name="update_default_addr" act-if="address.isDefault != 1" title="更改默认地址"></span></div></span>',"</div>","</span>","</div>","</span>",'<span class="cp-type" act-if="item.cpType == 1">','<div class="cell-box" act-loop="branchAccount in item.branchAccounts">','<span class="cp-img"></span>','<span class="cp-content">','<span class="cp-branchCode"><span act-if="branchAccount.shopFlag != undefined" class="shop_info mr_5" style="cursor: default;font-size:12px;color:#fff;padding: 2px 5px;background:#d50000 none repeat scroll 0 0;" data-title="{{branchAccount.shopName}}">{{branchAccount.shopFlag}}</span>全部网点通用</span></br>','<span class="cp-location"  act-loop="address in item.addresses">','<span>发货地址：<div class="addr">{{address.province}}{{address.city}}{{address.country}}{{address.addr}}<span class="defaultAddress J_Click" data-id={{item.id}} data-taobaoId={{item.taobaoId}} data-branchCode={{branchAccount.branchCode}} data-addressId={{address.contactId}} data-name="update_default_addr" act-if="address.sendDef == 1" title="更改默认地址"></span><span class="no-defaultAddress J_Click" data-taobaoId={{item.taobaoId}} data-id={{item.id}} data-branchCode={{branchAccount.branchCode}} data-addressId={{address.contactId}} data-name="update_default_addr" act-if="address.sendDef != 1" title="更改默认地址"></span></div></span>',"</span>","</span>","</div>","</span>","</td>","<td>",'<div class="cell-box opr-list-ex">',"{{item.isDefaultHtml}}","<span>|</span>",'<a class="J_Click" data-name="preview" data-type="{{item.templateType}}" data-cpcode="{{item.cpCode}}" data-id="{{item.id}}">预览</a>',"<span>|</span>",'<a href="#/pt/wlb/?id={{item.id}}&cpcode={{item.cpCode}}&taobaoId={{item.taobaoId}}">设计</a>',"<span>|</span>","{{item.sltPrinter}}","</div>","</td>","<td>",'<div class="cell-box">','<div class="ui-switch ui-switch-small">','<span data-id="{{item.id}}" data-name="default_express" class="ui-switch-statu {{item.commonUseClass}} J_Click">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>","</div>","</td>","</tr>","</tbody>","</table>"],s=['<div class="ft_14 pd_10" id="printer-list">','<div class="pb_20 ft-center">','<span class="mr_5">选择打印机：</span>','<select data-zindex="1000">','<option act-loop="item in printArr" value="item.value">{{item.name}}</option>',"</select>","</div>",'<div class="ft-center">','<span class="btn btn-success w80 J_printer">确 定</span>',"</div>","</div>"];t.template.addTemp("template.pt.eList.all",i),t.template.addTemp("template.common.elist.tab",a),t.template.addTemp("template.lock.printer.list",s)}(jQuery,RayCloud),function($,RC){var wlbList=RC.controls.get("control.pt.wlb_list"),CommonExpress=RC.controls.get("control.common_express"),PrintPt=RC.controls.get("control.print_pt"),FormUtil=RC.controls.get("control.form_util"),WidgetPage=RC.controls.get("control.widget.page"),TEMP=['<div style="display:none;">','<form action="" method="post">','<input type="hidden" name="id" value="">','<input type="hidden" name="expressName" value="">','<div class="pd_10">','模板名称：<span class="J_Express_Name"></span> + ','<input type="text" name="suffix" value="" class="input-mini"> ',"(不超过3个字)","</div>",'<div class="pd_15 ft-center">','<button type="submit" class="btn btn-primary">保存</button>','<span class="btn btn-gray ml_15 J_Close">关闭</span>',"</div>","</form>","</div>"],EditNameWidget={show:function(e,t,i){this._render(),this._update_dom(e,t,i),this.$dialog=$.dialog({title:"修改快递模板名称",width:420,close:$.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=$(TEMP.join("")).appendTo("body"),this._event_bind())},_update_dom:function(e,t,i){this.$el.find('input[name="id"]').val(e),this.$el.find('input[name="expressName"]').val(i),this.$el.find(".J_Express_Name").html(i);var a=t.slice(i.length);this.$el.find('input[name="suffix"]').val(a)},_event_bind:function(){this.$el.on("submit","form",$.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",$.proxy(this._fn_event_handler_click_close,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(e){e.preventDefault();var t=FormUtil.getData(e.target);return t.suffix.length>3?($.dialog.alert("超出最长字数限制！"),!1):(RC.pub("module.pt.list.submit.edit_wlb_name",{id:t.id,name:t.expressName+t.suffix,taobaoId:this._get_taobao_id(t.id)}),!1)},_fn_event_handler_click_close:function(){this.hide()},_get_taobao_id:function(e){return $(".J_List_Item_"+e).attr("data-taobaoId")||0},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}},standardMap={STO:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.sto.cn/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},YTO:function(e){e.ADD_PRINT_BARCODE("17mm","7mm","24mm","24mm","QRCode","http://www.yto.net.cn/downloadApp.html"),e.ADD_PRINT_BARCODE("40mm","20mm","60mm","13mm","128B","444002723712"),e.ADD_PRINT_BARCODE("106.5mm","54mm","40mm","12mm","128B","444002723712")},ZTO:function(e){e.ADD_PRINT_BARCODE("12mm","77mm","25mm","25mm","QRCode","http://www.zto.cn"),e.ADD_PRINT_BARCODE("77mm","10mm","80mm","17mm","128B",444002723712),e.ADD_PRINT_BARCODE("105mm","36mm","58mm","15mm","128B",444002723712)},HTKY:function(e){e.ADD_PRINT_BARCODE("66mm","5mm","22mm","22mm","QRCode",44400272371278),e.ADD_PRINT_BARCODE("2mm","54mm","42mm","12mm","128C",44400272371278),e.ADD_PRINT_BARCODE("92mm","10mm","42mm","12mm","128C",44400272371278)},EMS:function(e,t){e.ADD_PRINT_BARCODE("125mm","75mm","26mm","26mm","QRCode","http://www.ems.com.cn"),e.ADD_PRINT_BARCODE("5mm","45mm","55mm","12mm","128B",444002723712),e.ADD_PRINT_BARCODE("69mm","15mm","40mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("94mm","5mm","55mm","12mm","128B",444002723712)},EYB:function(e,t){e.ADD_PRINT_BARCODE("125mm","75mm","26mm","26mm","QRCode","http://www.ems.com.cn"),e.ADD_PRINT_BARCODE("5mm","45mm","55mm","12mm","128B",444002723712),e.ADD_PRINT_BARCODE("69mm","15mm","40mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("94mm","5mm","55mm","12mm","128B",444002723712)},SF0:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},SF1:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},SF2:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},SF3:function(e){e.ADD_PRINT_BARCODE("42mm","8mm","65mm","15mm","128C",444002723712),e.ADD_PRINT_BARCODE("94mm","8mm","65mm","12mm","128C",444002723712),e.ADD_PRINT_BARCODE("123mm","15mm","65mm","8mm","128B",780489471078146)},YUNDA:function(e){e.ADD_PRINT_BARCODE("45mm","4mm","22mm","22mm","QRCode","http://www.yundaex.com"),e.ADD_PRINT_BARCODE("68.5mm","17mm","75mm","16mm","128B",444002723712),e.ADD_PRINT_BARCODE("155.5mm","41mm","50mm","8mm","128B",444002723712)},TTKDEX:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.ttkdex.com/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},UC:function(e,t){e.ADD_PRINT_BARCODE("8mm","78mm","25mm","25mm","QRCode","http://www.uc56.com"),e.ADD_PRINT_BARCODE("91mm","4mm","54mm","23mm","128B",444002723712),e.ADD_PRINT_BARCODE("137mm","3mm","50mm","10.6mm","128B",t.trade_id)},POSTB:function(e){e.ADD_PRINT_BARCODE("5mm","45mm","56mm","12mm","128A",908888888888),e.ADD_PRINT_BARCODE("95mm","4mm","50mm","10mm","128A",908888888888),e.ADD_PRINT_BARCODE("122mm","70mm","30mm","30mm","QRCode","http://www.11185.cn")
},ZJS:function(e){e.ADD_PRINT_BARCODE("52mm","6mm","55mm","15mm","128b",444002723712)},GTO:function(e){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.gto365.com/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},QFKD:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.qfkd.com.cn/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)},FAST:function(e,t){e.ADD_PRINT_BARCODE("65mm","8mm","60mm","15mm","128B",444002723712),e.ADD_PRINT_BARCODE("127mm","12mm","60mm","8mm","128B",t.trade_id),e.ADD_PRINT_BARCODE("127mm","72mm","30mm","30mm","QRCode","http://www.fastexpress.com.cn/"),e.ADD_PRINT_BARCODE("160mm","9mm","49mm","16mm","128B",444002723712)}},mdul={name:"pt.wlb_list",depend:"pt",_elm_dom_root:"#main",_elm_template_name:"template.pt.eList.all",_fn_dom_render:function(){if(!this._elm_dom_container){var e=this._elm_dom_container=$(RC.template.get(this._elm_template_name)).appendTo(this._elm_dom_root);this._elm_dom_ptListTab=e.find(".pt-list-tab"),this._elm_dom_pageContainer=e.find(".J_Page_Container"),this._fn_event_bind()}},_fn_dom_update:function(e,t){for(var i=t.pageNo?1*t.pageNo:1,a=t.pageSize?1*t.pageSize:10,s=[],n=(i-1)*a+1;i*a>=n;n++)s.push(n);for(var l=PrintPt.findLocalPrinter(),d=0,o=e.list.length;o>d;d++)e.list[d].isDefaultHtml=1==e.list[d].isDefault?'<em class="fc_999 J_Default_Express" data-id="'+e.list[d].id+'">已默认</em>':'<a class="set-deafult J_Click J_User_Top" data-name="wlb_user_top" data-id="'+e.list[d].id+'">设为默认</a>',e.list[d].commonUseClass=1==e.list[d].commonUse?"ui-switch-on":"ui-switch-off",e.list[d].idex=s[d],e.list[d].sltPrinter=""==e.list[d].printerName||-1==$.inArray(e.list[d].printerName,l)?'<a class="J_Click" data-name="lock_print" data-id="'+e.list[d].id+'" data-status="0">锁定打印机</a>':'<em class="fc_999">'+e.list[d].printerName+'<a class="J_Click ml_5" data-name="lock_print" data-id="'+e.list[d].id+'" data-status="1" data-print="'+e.list[d].printerName+'">[取消锁定]</a></em>';var r={items:e.list},p=RC.template.get("template.common.elist.tab",r);this._elm_dom_ptListTab.html(p),this._elm_dom_pageContainer.html(WidgetPage.get_html("",function(e){return"#/pt/wlb_list/?pageNo="+e},Math.ceil(e.total/e.page.pageSize),e.page.pageNo)),$(".shop_info").iTip({skin:"blue",triggerType:"hover"})},_fn_dom_update_extradata:function(e){for(var t=e.list||[],i=0;i<t.length;i++){for(var a=t[i].id,s="",n=t[i].branchAccounts,l=0;l<n.length;l++);this._elm_dom_ptListTab.find("[data-id="+a+"] .cp-address").text(s)}},_fn_dom_updateEmptyList:function(){this._elm_dom_ptListTab.html('<div class="empty-list">暂无电子面单模板，请<a data-id="0" data-name="sync_list" class="J_Click">同步已开通电子面单服务的快递</a>或者<a href="http://wlmart.wuliu.taobao.com/user/service_frame.htm?spm=a1z0f.7.0.0.zteMX4&temp=1&serviceType=28">去淘宝开通更多快递</a></div>')},_fn_dom_update_userTop:function(e){var t=this._elm_dom_ptListTab.find(".J_Default_Express");t.length&&($('<a class="set-deafult J_Click J_User_Top"data-name="wlb_user_top" data-id="'+t.attr("data-id")+'">设为默认</a>').insertAfter(t),this._update_express_data(t.attr("data-id"),{isDefault:0}),t.remove());var i=this._elm_dom_ptListTab.find(".J_List_Item_"+e).find(".J_User_Top");i.length&&($('<em class="fc_999 J_Default_Express" data-id="'+e+'">已默认</em>').insertAfter(i),this._update_express_data(e,{isDefault:1,commonUse:1}),i.remove())},_fn_event_bind:function(){this._elm_dom_container.on("click.J_Click",".J_Click",this._fn_event_handler("click")),RC.sub("module.pt.list.submit.edit_wlb_name",this._fn_event_handler_submit_editName_proxy=$.proxy(this._fn_event_handler_submit_editName,this))},_fn_event_unbind:function(){this._elm_dom_container.off("click.J_Click"),RC.removeSub("module.pt.list.submit.edit_wlb_name",this._fn_event_handler_submit_editName_proxy)},_fn_event_handler_submit_editName:function(e){var t=e.id,i=e.name,a=e.taobaoId;wlbList.name_edit({id:t,name:i,taobaoId:a},$.proxy(function(){this._update_express_data(t,{name:i}),EditNameWidget.hide(),this._fn_dom_update_expressName(t,i)},this))},_fn_event_handler:function(e){if(!e)throw new Error("[module.pt.list:_fn_event_handler] 参数非法.");if(!this._event_handler_list[e])throw new Error("[module.pt.list:_fn_event_handler] "+e+" 参数异常.");return $.proxy(function(t){this._event_handler_list[e].call(this,t)},this)},_fn_dom_update_defaultExpressStatus:function(e,t){var i=this._elm_dom_ptListTab.find(".J_List_Item_"+e).find(".ui-switch-statu");t?i.removeClass("ui-switch-off").addClass("ui-switch-on"):i.removeClass("ui-switch-on").addClass("ui-switch-off")},_fn_dom_update_expressName:function(e,t){this._elm_dom_ptListTab.find(".J_List_Item_"+e).find(".J_Express_Name").html(t)},_event_handler_list:{click:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-name"),i=$(e.currentTarget).attr("data-id");if(!t||!i)throw new Error("[module.pt.list:_event_handler_list::click] 参数非法.");var a=this._common_list[t];if(!a)throw new Error("[module.pt.list:_event_handler_list::click] "+t+" 参数异常.");a.call(this,i,e)}},_common_list:{sync_list:function(){wlbList.user_sync({},$.proxy(function(){this.update(this._status_hashs,null,!0)},this))},update_default_addr:function(e,t){var i=$(t.currentTarget).attr("data-addressId"),a=$(t.currentTarget).attr("data-branchCode"),s=$(t.currentTarget).attr("data-taobaoId");wlbList.update_default_addr({id:e,addressId:i,branchCode:a,taobaoId:s},$.proxy(function(){$(t.currentTarget).parents(".cp-type").find(".defaultAddress").removeClass("defaultAddress").addClass("no-defaultAddress"),$(t.currentTarget).removeClass("no-defaultAddress").addClass("defaultAddress")},this))},user_delete:function(e){wlbList.user_delete(e,$.proxy(function(){this.update(this._status_hashs,null,!0)},this))},wlb_user_top:function(e){var t=this._get_taobao_id(e);wlbList.user_top({id:e,taobaoId:t},$.proxy(function(){this._fn_dom_update_userTop(e),this._fn_dom_update_defaultExpressStatus(e,!0)},this))},default_express:function(e){var t=this._get_express_detail(e);if(t.isDefault)return void $.dialog.alert("默认快递必须为常用快递！");var i=this._get_taobao_id(e);1==t.commonUse?CommonExpress.remove_wlb(e,$.proxy(function(){this._update_express_data(e,{commonUse:0}),this._fn_dom_update_defaultExpressStatus(e,!1)},this),i):CommonExpress.add_wlb(e,$.proxy(function(){this._update_express_data(e,{commonUse:1}),this._fn_dom_update_defaultExpressStatus(e,!0)},this),i)},edit_name:function(e){var t=this._get_express_detail(e);EditNameWidget.show(t.id,t.name,t.expressName)},preview:function(id,e){var _this=this,$target=$(e.currentTarget),_type=$target.data("type"),_id=id,_taobaoId=this._get_taobao_id(id);0==_type?$.when(API.pt_wlb_user_query({id:_id,taobaoId:_taobaoId}),API.pt_wlb_fields_sample({})).done(function(o,t){var CNPrint=getCaiNiaoPrint(),data=o[0].data,fieldValues=t[0].data;if(null!=CNPrint&&"undefined"!=typeof CNPrint.VERSION){CNPrint.PRINT_INITA(0,0,"100mm","180mm","菜鸟电子面单打印任务"),CNPrint.SET_PRINT_IDENTITY("AppKey=12001121&Seller_ID="+(fieldValues.seller_id?fieldValues.seller_id:data.taobaoId)),CNPrint.SET_PRINT_MODE("CAINIAOPRINT_MODE","CP_CODE="+data.cpCode+"&CONFIG="+(fieldValues.print_config?fieldValues.print_config:"")),CNPrint.SET_PRINT_PAGESIZE(1,"100mm","180mm",""),CNPrint.ADD_PRINT_DATA("ProgramData",data.cainiaoEncryptedFields);for(var prop in fieldValues)fieldValues[prop]?CNPrint.SET_PRINT_CONTENT(prop,fieldValues[prop]):void 0;var fieldSettingsStandard=data.fieldSettingsStandard;if(fieldSettingsStandard)for(var i=0;i<fieldSettingsStandard.length;i++){var field=fieldSettingsStandard[i].field,x=fieldSettingsStandard[i].x?fieldSettingsStandard[i].x:0,y=fieldSettingsStandard[i].y?fieldSettingsStandard[i].y:0;switch(width=fieldSettingsStandard[i].width?fieldSettingsStandard[i].width:150,height=fieldSettingsStandard[i].height?fieldSettingsStandard[i].height:20,field){case"custom_qrcode":CNPrint.SET_PRINT_CONTENT("custom_qrcode",""),CNPrint.ADD_PRINT_BARCODE(y,x,"20mm","20mm","QRCode",fieldSettingsStandard[i].description);break;case"trade_barcode":CNPrint.SET_PRINT_CONTENT("trade_barcode",""),CNPrint.ADD_PRINT_BARCODE(y,x,width,height,"128B",fieldValues[field]);break;case"trade_print_num":CNPrint.SET_PRINT_CONTENT("trade_print_num",1);break;default:var value=fieldValues[field];"string"==typeof value&&(value=value.replace(/,/g,"\n").replace(/&#44/g,",").replace(/<br\/>/g,"\n")),-1!=field.indexOf("_time")&&(value=RC.util.date.getdate(value,"YY-MM-DD HH:MM:SS")),fieldSettingsStandard[i].edit?value?CNPrint.SET_PRINT_CONTENT(field,value):void 0:CNPrint.SET_PRINT_CONTENT(field,value?value:"")}}var fieldValuesStandard=data.fieldValuesStandard;if(fieldValuesStandard)for(var i=0;i<fieldValuesStandard.length;i++)with(fieldValuesStandard[i])switch(name){case"ali_waybill_cp_logo_up":CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_up","PreviewOnly",0),CNPrint.SET_PRINT_STYLEA("ali_waybill_cp_logo_down","PreviewOnly",0);break;case"ali_waybill_service":var _vs=value.split(";");for(var v in _vs){var _service=_vs[v].split("=");fieldValues[_service[0]]&&(_service[1]=fieldValues[_service[0]],"ali_waybill_ext_send_date"==_service[0]&&(_service[1]=RC.util.date.getdate(_service[1],"YY-MM-DD"))),_vs[v]=_service.join("=")}CNPrint.SET_PRINT_CONTENT(name,_vs.join(";"));break;case"ali_waybill_product_type":var types=value.split(" ");for(var t in types)-1!=types[t].indexOf("(")&&(types[t]=types[t].substring(types[t].indexOf("(")+1,types[t].indexOf(")")));CNPrint.SET_PRINT_CONTENT(name,types.join(" "));break;default:CNPrint.SET_PRINT_CONTENT(name,value)}CNPrint.PREVIEW()}}):1==_type&&$.when(API.pt_wlb_user_query({id:_id,taobaoId:_taobaoId}),API.pt_wlb_fields_sample({templateType:_type})).done(function(e,t){var i=e[0].data,a=t[0].data,s={};s.width=i.widthCustom,s.height=i.heightCustom,s.y=i.verticalOffsetCustom,s.x=i.horizontalOffsetCustom;var n=RC.template.get("template.pt.wlb."+i.cpCode+".custom");s.html=n,s.fieldSettings=i.fieldSettings,_this._fn_custom_wlb_text_print(s,i,a)})},lock_print:function(e,t){var i=this._get_taobao_id(e);PrintPt.lockPrinter(e,"wlb",t,i)}},_getSFType:function(e){var t={"0false":0,"0true":1,"1false":2,"1true":3},i=e.fieldValuesStandard,a=0;if(i&&i.length){for(var s=[],n=0;n<i.length;n++)"sf_wlb_type"==i[n].name&&(s[0]=""+i[n].value),"sf_wlb_subtype"==i[n].name&&(s[1]=""+i[n].value);a=t[s.join("")]}return a},_fn_custom_wlb_html_print:function(e,t,i){try{var a=getLodop();null!=a&&"undefined"!=typeof a.VERSION&&(a.PRINT_INIT("电子面单设计"),a.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",e.html),standardMap[t](a,i),a.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),a.PREVIEW())}catch(s){console.log(s)}},_fn_custom_wlb_text_print:function(e,t,i){try{var a=getLodop();if(null!=a&&"undefined"!=typeof a.VERSION){a.PRINT_INITA(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm","自定义电子面单设计"),a.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",e.html),a.SET_PRINT_STYLE("FontSize",3*t.fontSizeCustom/4),a.SET_PRINT_STYLE("FontName",t.fontCustom),a.SET_PRINT_STYLE("Bold",t.boldCustom);for(var s=e.fieldSettings,n=["waybill_num_barcode_up","waybill_num_barcode_down","custom_qrcode","qrcode","trade_barcode_up","trade_barcode_down","package_center_code"],l=0,d=s.length;d>l;l++)if(s[l].show)if(s[l].description=i[s[l].field]||"",s[l].fontBold=s[l].bold?"bold":"normal",-1!==$.inArray(s[l].field,n)){var o="128B";("custom_qrcode"==s[l].field||"qrcode"==s[l].field)&&(o="QRCode",s[l].height=s[l].width),a.ADD_PRINT_BARCODE(s[l].y,s[l].x,s[l].width,s[l].height,o,1234567890)}else{var r=s[l].description;a.ADD_PRINT_TEXT(s[l].y,s[l].x,s[l].width,s[l].height,r),a.SET_PRINT_STYLEA(0,"FontName",s[l].font),a.SET_PRINT_STYLEA(0,"FontSize",3*s[l].fontSize/4),a.SET_PRINT_STYLEA(0,"Bold",s[l].bold?1:0)}a.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),a.PREVIEW()}}catch(p){console.log(p)}},_cacheCommonData:[],_status_hashs:{},_status_list:[],_update_express_data:function(e,t){var i=!1;if($.each(this._status_list,function(a,s){return e==s.id?(i=!0,t=$.extend(s,t),!1):void 0}),!i)throw new Error("[module.pt.list:_get_detail] "+id+" 非法操作.")},_get_address_detail:function(e){var t=null;if($.each(this._status_list,function(i,a){return 2==a.cpType&&$.each(a,function(){}),e==a.id?(t=$.extend({},a),!1):void 0}),null===t)throw new Error("[module.pt.list:_get_detail] "+e+" 非法操作.");return t},_get_express_detail:function(e){var t=null;if($.each(this._status_list,function(i,a){return e==a.id?(t=$.extend({},a),!1):void 0}),null===t)throw new Error("[module.pt.list:_get_detail] "+e+" 非法操作.");return t},_get_taobao_id:function(e){var t=0;return $.each($(".J_List_Item_"+e),function(e,i){var a=$(i).attr("data-taobaoId");return"undefined"!=typeof a?void(t=a):void 0}),t},_get_default_express_id:function(){var e=null;return $.each(this._status_list,function(t,i){return i.isDefault?(e=i.id,!1):void 0}),e},init:function(){},getContainer:function(){return this._elm_dom_container},update:function(e,t){this._status_hashs=$.extend({},e),this._fn_dom_render(),e.pageSize=e.pageSize||10,wlbList.load({pageNo:e.pageNo||1,pageSize:e.pageSize},$.proxy(function(t){t.list.length?(this._status_list=t.list.slice(0),this._fn_dom_update(t,e),this._fn_dom_update_extradata(t)):this._fn_dom_updateEmptyList()},this),$.proxy(function(){this._status_list=[]},this)),t&&t()},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._status_hashs={},this._status_list=[],this._cacheCommonData=[],this._elm_dom_ptListTab=null,this._elm_dom_pageContainer=null,this._elm_dom_container.empty().remove(),this._elm_dom_container=null)}};RC.modules.define(mdul.name,mdul)}(jQuery,RayCloud),function(e,t){t.template.printLog={get_wrap:function(e){return['<div class="ui-wrap m-print-log" wrapType="'+e.typeName+'">','<div class="ui-hd">','<div class="ui-tab">','<div class="ui-tab-navs">','<a typeName="count" href="#/pt/print_log/?typeName=count">汇总统计</a>','<a typeName="expressPrint" href="#/pt/print_log/?typeName=expressPrint">快递单打印</a>','<a typeName="deliverPrint" href="#/pt/print_log/?typeName=deliverPrint">发货单打印</a>','<a typeName="send" href="#/pt/print_log/?typeName=send">订单发货</a>',"</div>","</div>",'<div class="ui-query">'+this.get_wrap_type(e).queryUI+"</div>","</div>",this.get_wrap_type(e).contentUI,"</div>"].join("")},get_wrap_type:function(e){for(var i="",a="",s=['<div class="ui-bd">','<div class="ui-datalist m-print-log-list">','<div class="ui-datalist-hd">',"<ul>",'<li class="a-index">序号</li>','<li class="a-time">'+("send"==e.typeName?"发货时间":"打印时间")+"</li>",'<li class="a-nick">店铺</li>','<li class="a-sid">系统订单号</li>','<li class="a-tid">平台交易号</li>','<li class="a-express">快递公司</li>','<li class="a-outsid">快递号</li>','<li class="a-wangwang">旺旺</li>','<li class="a-receiver-name">收件人</li>','<li class="a-receiver-mobile">联系方式</li>','<li class="a-">省份</li>',"</ul>","</div>",'<div class="ui-datalist-bd"></div>',"</div>","</div>",'<div class="ui-ft">','<div class="ui-pages"></div>',"</div>"].join(""),n=t.user.get().shopList,l='<select id="queryShops">',d=0;d<n.length;d++)l+='<option value="'+n[d].taobaoId+'">'+n[d].title+"</option>";return l+="</select>",a=2==e.platform?'<label class="mr_10"><input name="platform" type="radio" value="1">淘宝订单</label><label class="mr_10"><input name="platform" type="radio" value="2" checked>自定义订单</label>':'<label class="mr_10"><input name="platform" type="radio" value="1" checked>淘宝订单</label><label class="mr_10"><input name="platform" type="radio" value="2">自定义订单</label>',"expressPrint"==e.typeName||"deliverPrint"==e.typeName?i=['<form action="#/pt/print_log/" method="get" class="J_Form">',a,"<span>",'<input type="text" data-date-format="yyyy-mm-dd HH:MM:SS" data-max-date="today" name="startDate" class="date-picker" readonly value="'+e.startDate+'" style="width:160px"> &mdash; <input type="text" data-date-format="yyyy-mm-dd HH:MM:SS" data-max-date="today" name="endDate" class="date-picker" readonly value="'+e.endDate+'" style="width:160px">',"</span>",'<span class="ml_10">'+l+"</span>",'<span class="ml_10"><select id="queryExpress"><option value="">所有快递</option></select></span>','<input class="ml_10" name="text" type="text" placeholder="搜系统订单号\\平台交易号\\快递号" style="width:205px;" value="'+(e.text||"")+'">','<button type="submit" class="btn btn-primary ml_10">查询</button>',"</form>"].join(""):"send"==e.typeName?i=['<form action="#/pt/print_log/" method="get" class="J_Form">',"<span>",'<input type="text" data-date-format="yyyy-mm-dd HH:MM:SS" data-max-date="today" name="startDate" class="date-picker" readonly value="'+e.startDate+'" style="width:160px"> &mdash; <input type="text" data-date-format="yyyy-mm-dd HH:MM:SS" data-max-date="today" name="endDate" class="date-picker" readonly value="'+e.endDate+'" style="width:160px">',"</span>",'<span class="ml_10">'+l+"</span>",'<span class="ml_10"><select id="queryExpress"><option value="">所有快递</option></select></span>','<input class="ml_10" name="text" type="text" placeholder="搜系统订单号\\平台交易号\\快递号" style="width:205px;" value="'+(e.text||"")+'">','<button type="submit" class="btn btn-primary ml_10">查询</button>',"</form>"].join(""):(i=['<form action="#/pt/print_log/" method="get" class="J_Form">',"<span>",'<input type="text" data-date-format="yyyy-mm-dd" data-max-date="today" name="startDate" class="date-picker" readonly value="'+e.startDate+'" style="width:140px"> &mdash; <input type="text" data-date-format="yyyy-mm-dd" data-max-date="today" name="endDate" class="date-picker" readonly value="'+e.endDate+'" style="width:140px">',"</span>",'<span class="ml_10">'+l+"</span>",'<button type="submit" class="btn btn-primary ml_10">查询</button>',"</form>"].join(""),s=['<div class="ui-bd">','<div class="J_Charts" style="height:300px;padding:20px;"></div>','<div class="ui-datalist m-count-list">','<div class="ui-datalist-hd">',"<ul>","<li>日期</li>","<li>快递单打印量（淘宝订单）</li>","<li>快递单打印量（自定义订单）</li>","<li>发货单打印量（淘宝订单）</li>","<li>发货单打印量（自定义订单）</li>","<li>淘宝订单发货量</li>","</ul>","</div>",'<div class="ui-datalist-bd J_List"></div>',"</div>","</div>"].join("")),{queryUI:i,contentUI:s}},get_print_listData:function(e){var i="";if(e&&e.length)for(var a=0;a<e.length;a++)i+=['<div class="ui-datalist-item"><ul class="ui-datalist-item-base">','<li class="a-index">'+(a+1)+"</li>",'<li class="a-time">'+t.util.date.getdate(e[a].printTime,"YY-MM-DD HH:MM:SS")+"</li>",'<li class="a-nick">'+e[a].shop+"</li>",'<li class="a-sid">'+e[a].sid+"</li>",'<li class="a-tid">'+e[a].viewTid+"</li>",'<li class="a-express">'+e[a].expressCompany+"</li>",'<li class="a-outsid">'+e[a].outSid+"</li>",'<li class="a-wangwang">'+e[a].nick+"</li>",'<li class="a-receiver-name">'+e[a].receiverName+"</li>",'<li class="a-receiver-mobile">'+(e[a].receiverMobile||e[a].receiverTel)+"</li>",'<li class="a-state">'+e[a].receiverState+"</li>","</ul></div>"].join("");else i='<div style="text-align:center;padding:15px">暂无数据！</div>';return i},get_count_listData:function(e,i){var a="",s="",n="",l=86399e3;if(e&&e.list&&e.list.length){e.taobaoId&&(s="&taobaoId="+e.taobaoId);for(var d=0;d<e.list.length;d++){var o=e.list[d];n="&startDate="+o.date+"&endDate="+(o.date+l),a+=['<div class="ui-datalist-item"><ul class="ui-datalist-item-base">',"<li>"+t.util.date.getdate(o.date,"YY-MM-DD")+"</li>","<li>"+o.expressPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=expressPrint&platform=1'+n+s+'" target="_blank">明细</a></li>',"<li>"+o.customExpressPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=expressPrint&platform=2'+n+s+'" target="_blank">明细</a></li>',"<li>"+o.deliverPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=deliverPrint&platform=1'+n+s+'" target="_blank">明细</a></li>',"<li>"+o.customDeliverPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=deliverPrint&platform=2'+n+s+'" target="_blank">明细</a></li>',"<li>"+o.sendLogisticsCount+'<a class="ml_10" href="#/pt/print_log/?typeName=send'+n+s+'" target="_blank">明细</a></li>',"</ul></div>"].join("")}n="&startDate="+i.startDate+"&endDate="+(i.endDate+l),a+=['<div class="ui-datalist-item"><ul class="ui-datalist-item-base">',"<li>累计</li>","<li>"+e.sum.expressPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=expressPrint&platform=1'+s+n+'" target="_blank">明细</a></li>',"<li>"+e.sum.customExpressPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=expressPrint&platform=2'+s+n+'" target="_blank">明细</a></li>',"<li>"+e.sum.deliverPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=deliverPrint&platform=1'+s+n+'" target="_blank">明细</a></li>',"<li>"+e.sum.customDeliverPrintCount+'<a class="ml_10" href="#/pt/print_log/?typeName=deliverPrint&platform=2'+s+n+'" target="_blank">明细</a></li>',"<li>"+e.sum.sendLogisticsCount+'<a class="ml_10" href="#/pt/print_log/?typeName=send'+s+n+'" target="_blank">明细</a></li>',"</ul></div>",'<div class="ui-datalist-item"><ul class="ui-datalist-item-base">',"<li>平均值</li>","<li>"+e.avg.expressPrintCount+"</li>","<li>"+e.avg.customExpressPrintCount+"</li>","<li>"+e.avg.deliverPrintCount+"</li>","<li>"+e.avg.customDeliverPrintCount+"</li>","<li>"+e.avg.sendLogisticsCount+"</li>","</ul></div>"].join("")}else a='<div style="text-align:center;padding:15px">暂无数据！</div>';return a}}}(jQuery,RayCloud),function(e,t){var i=t.template.printLog,a=t.controls.get("control.common_pages"),s={name:"pt.print_log",_ele_root:"#main",depend:"pt",_template_name:"template.print_log",_render:function(s){this.$el&&this.$el.attr("wraptype")==s.typeName||(e(this._ele_root).find(".m-print-log").length&&e(this._ele_root).find(".m-print-log").remove(),this.$el=e(i.get_wrap(s)).appendTo(this._ele_root),this.$el.find(".ui-tab-navs").find('[typeName="'+(s.typeName||"count")+'"]').addClass("crt"),e("#queryShops").iSelect("select",s.taobaoId),e("#queryExpress").iSelect("select",s.code),this.$el.find('[name="platform"]').length&&this.$el.find('[name="platform"]').iCheck(),this.$el.find("#queryExpress").length&&API.print_log_allExpress({},function(t){for(var i=t.data,a="",n=0;n<i.length;n++)a+='<option value="'+i[n].code+'">'+i[n].name+"</option>";e("#queryExpress").append(a).iSelect("update").iSelect("select",s.code)}));var n={startDate:t.util.date.tojsdate(s.startDate).getTime(),endDate:t.util.date.tojsdate(s.endDate).getTime(),taobaoId:s.taobaoId||this.$el.find("#queryShops").val(),code:s.code||this.$el.find("#queryExpress").val()};s.typeName&&"count"!=s.typeName?(this.$el.find('[name="platform"]').iCheck(),n.type=0,n.pageSize=s.pageSize||localStorage[s.root]||20,n.pageNo=s.pageNo||1,s.text&&(n.text=s.text),this.$el.find('[name="platform"]').length&&(n.platform=s.platform||this.$el.find('[name="platform"]:checked').val()),"deliverPrint"==s.typeName?n.type=1:"send"==s.typeName&&(n.type=2),API.print_log_detail(n,function(t){var s=t.data.printTradeLogDetails;e(".ui-datalist-bd").html(i.get_print_listData(s)),s&&s.length?a.pagesUI(e(".ui-pages"),t.data,!0):e(".ui-pages").html("")})):this._fn_ctrl_load_data(n,e.proxy(this._update_dom,this)),this._event_bind()},_update_date:function(e){this.$el.find(".J_Form").find('input[name="startDate"]').val(e.startDate),this.$el.find(".J_Form").find('input[name="endDate"]').val(e.endDate)},_update_dom:function(t,a){this._update_charts(t.list),t.taobaoId=e("#queryShops").val(),this.$el.find(".J_List").html(i.get_count_listData(t,a))},_update_charts:function(t){if(!t.length)return void this.$el.find(".J_Charts").html("暂无数据");var i=[],a=[],s=[],n=[],l=[],d=[];e.each(t,function(e,t){i.push(t.date),a.push(t.expressPrintCount),l.push(t.customExpressPrintCount),s.push(t.deliverPrintCount),d.push(t.customDeliverPrintCount),n.push(t.sendLogisticsCount)});var o={title:{text:" ",x:-20},xAxis:{type:"datetime",labels:{formatter:function(){return Highcharts.dateFormat("%m.%d",this.value)}},categories:i},yAxis:{title:{text:" "},min:0,plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{xDateFormat:"%Y-%m-%d",shared:!0},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",borderWidth:0},series:[{name:"快递单(淘宝订单)",data:a},{name:"快递单(自定义订单)",data:l},{name:"发货单(淘宝订单)",data:s},{name:"发货单(自定义订单)",data:d},{name:"订单发货量",data:n}]};this.$el.find(".J_Charts").highcharts(o)},_event_bind:function(){this.$el.on("submit",".J_Form",e.proxy(function(e){this._onsubmit(e)},this))},_event_unbind:function(){this.$el.off("submit",".J_Form")},_onsubmit:function(i){i.preventDefault();var a=this.$el.find(".J_Form"),s=e.trim(a.find('input[name="startDate"]').val()),n=e.trim(a.find('input[name="endDate"]').val());if(!s)return e.dialog.alert("请选择开始时间！",e.proxy(function(){this.$el&&a.find('input[name="startDate"]').focus()},this)),!1;if(!t.util.date.is_date(s))return e.dialog.alert("开始时间格式不正确！",e.proxy(function(){this.$el&&a.find('input[name="startDate"]').focus()},this)),!1;if(t.util.date.tojsdate(s)>new Date)return e.dialog.alert("开始时间不能大于当前时间！",e.proxy(function(){this.$el&&a.find('input[name="startDate"]').focus()},this)),!1;if(!n)return e.dialog.alert("请选择结束时间！",e.proxy(function(){this.$el&&a.find('input[name="endDate"]').focus()},this)),!1;if(t.util.date.tojsdate(n)>new Date)return e.dialog.alert("结束时间不能大于当前时间！",e.proxy(function(){this.$el&&a.find('input[name="endDate"]').focus()},this)),!1;if(t.util.date.tojsdate(n)<t.util.date.tojsdate(s))return e.dialog.alert("开始时间不能大于结束时间！",e.proxy(function(){this.$el&&a.find('input[name="startDate"]').focus()},this)),!1;if(t.util.date.tojsdate(t.util.date.getdiffdate(s,"30d","YY-MM-DD"))<t.util.date.tojsdate(n))return e.dialog.alert("当前一次最多只能查询30天的数据！",e.proxy(function(){this.$el&&a.find('input[name="startDate"]').focus()},this)),!1;var l=t.pages._fn_act_get_hashs(),d={typeName:l.typeName||"count",startDate:t.util.date.tojsdate(s).getTime(),endDate:t.util.date.tojsdate(n).getTime(),t:Math.random()};return e("#queryShops").val()&&(d.taobaoId=e("#queryShops").val()),e("#queryExpress").val()&&(d.code=e("#queryExpress").val()),a.find('[name="text"]').length&&a.find('[name="text"]').val()&&(d.text=a.find('[name="text"]').val()),a.find('[name="platform"]').length&&(d.platform=a.find('[name="platform"]:checked').val()),t.pages.setCurHash(d),!1},_fn_ctrl_load_data:function(e,t){API.print_log_list(e,function(i){t(i.data,e)})},init:function(){},getContainer:function(){return this.$el},update:function(e,i){var a=t.util.date.tojsdate(new Date).getTime(),s="YY-MM-DD";e.typeName&&"count"!=e.typeName&&(s="YY-MM-DD HH:MM:SS"),(!e.startDate||e.startDate>a)&&(e.startDate=""),(!e.endDate||e.endDate>a)&&(e.endDate=a),e.startDate&&e.endDate&&(e.endDate<e.startDate||t.util.date.tojsdate(t.util.date.getdiffdate(e.startDate,"30d",s))<t.util.date.tojsdate(e.endDate))&&(e.startDate="",e.endDate=""),e.endDate&&e.startDate?(e.startDate=t.util.date.getdate(1*e.startDate,s),e.endDate=t.util.date.getdate(1*e.endDate,s)):(e.endDate=t.util.date.getdate(new Date,s),e.startDate=t.util.date.getdiffdate(e.endDate,"-7d",s)),this._render(e),i&&i()},destroy:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div class="pt_20 pl_20 clearfix">','<div class="f-lt shop-info-setting">','<div class="ui-box ui-box-s1" style="border-bottom: none;">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">关联店铺</div>',"</div>",'<div class="ui-box-bd nopadding" style="border: none;border-bottom: 1px solid #eaeaea;">','<div class="J_Shop_Item">',"</div>","</div>","</div>",'<div class="to-add-shop">','<span class="btn btn-normal J_Bind_Shop">添加店铺</span>','<a class="btn btn-normal ml_10 J_re_oauth" data-taobaoid="{{taobaoId}}">重新授权</a>',"</div>","</div>",'<div class="f-rt book-info-setting">','<div class="ui-box ui-box-s1">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">订购信息</div>',"</div>",'<div class="ui-box-bd">','<div class="f-rt mt_20">','<a class="btn btn-danger J_Renewals_Set" data-nick="{{nick}}">续费</a>',"</div>",'<div class="pt_5 pb_t J_Account" data-nick="{{nick}}">当前账号：{{nick}}</div>','<div class="pt_5 pb_t J_Level" act-if="level == 1">订购版本：打印版</div>','<div class="pt_5 pb_t J_Level" act-if="level == 2">订购版本：中级版</div>','<div class="pt_5 pb_t J_Level" act-if="level == 3">订购版本：高级版</div>','<div class="pt_5 pb_t J_Deadline">到期时间：{{_deadline}}</div>',"</div>","</div>","</div>",'<div class="f-rt multi-shop-setting" act-if="_switch_mode == 1">','<div class="ui-box ui-box-s1">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">多店铺管理模式选择</div>',"</div>",'<div class="ui-box-bd">','<div class="muti-shop-mode">','<span act-if="mmb == 0" class="shop-mode-option J_Switch_Mode mode-selected">切换模式</span>','<span act-if="mmb != 0" class="shop-mode-option J_Switch_Mode">切换模式</span>','<span act-if="mmb == 1" class="shop-mode-option J_Switch_Mode mode-selected">整合模式</span>','<span act-if="mmb != 1" class="shop-mode-option J_Switch_Mode">整合模式</span>',"</div>",'<div class="muti-shop-note">切换模式：多个店铺以切换的方式进行管理</div>','<div class="muti-shop-note">整合模式：多个店铺以主店铺的系统设置进行统一管理</div>',"</div>","</div>","</div>","</div>"],a=['<div style="background-color: #fbfbfb; border: 1px solid #eaeaea;height: 40px;line-height: 40px;padding: 0 15px;" class="ft_14 J_Shop_Tab" data-id="{{taobaoId}}">','店铺账号：{{nick}}<span class="btn ml_20 btn-small J_Edit_ShopInfo" data-id="{{taobaoId}}">编辑店铺信息</span><span act-if="_has_bind == 1" class="btn ml_20 btn-small J_Unbind_Shop" data-id="{{taobaoId}}">解除绑定</span>',"</div>",'<div class="pd_10 ft_14" style="line-height:20px;border-left:1px solid #eaeaea;border-right:1px solid #eaeaea;">',"<div>店铺名称：{{title}}",'<span act-if="isMainShop == true" class="shop-main-mark">主店铺</span>','<span class="ml_40">店铺标识：<span act-if="_has_flag == 1" class="shop-flag">{{flag}}</span></span>',"</div>","<div>备注：{{remark}}</div>",'<h3 class="mt_20 ft-bold">发货信息：</h3>','<div>联系人：{{sendContact}} &nbsp;&nbsp;&nbsp;&nbsp; 电话：<span act-if="_has_sendMobile == 1">{{sendMobile}}</span><span act-if="_has_sendMobile == 0">{{sendPhone}}</span><br>',"{{sendState}}{{sendCity}}{{sendDistrict}} {{sendAddress}},{{sendPost}}","</div>",'<h3 class="mt_20 ft-bold">退货信息：</h3>','<div>联系人：{{refundContact}} &nbsp;&nbsp;&nbsp;&nbsp; 电话：<span act-if="_has_refundMobile == 1">{{refundMobile}}</span><span act-if="_has_refundMobile == 0">{{refundPhone}}</span><br>',"{{refundState}}{{refundCity}}{{refundDistrict}} {{refundAddress}},{{refundPost}}","</div>","</div>"],s=['<form action="" method="" style="line-height: 28px" class="shop_info_edit_dlg">','<input type="hidden" name="taobaoId" value="{{taobaoId}}">',"<div>",'<div class="shop-info-edit-line">店铺名称：{{title}}',"&nbsp;&nbsp;&nbsp;&nbsp;店铺标识：",'<span act-if="_has_flag == 1" class="shop-flag">{{flag}}</span>',"</div>",'<div class="shop-info-edit-line">备注：<input type="text" name="remark" value="{{remark}}" class="ipt-small mr_10" style="width:230px"></div>',"</div>",'<div class="mt_20">','<h3 class="ft-bold">发货信息</h3>',"<div>",'<div class="shop-info-edit-line">','姓名：<input type="text" name="sendContact" value="{{sendContact}}" class="ipt-small mr_10" style="width:60px">','手机：<input type="text" name="sendMobile" value="{{sendMobile}}" class="ipt-small mr_10" style="width:100px">','固话：<input type="text" name="sendPhoneArea" value="{{sendPhoneArea}}" class="ipt-small mr_10" style="width:40px;margin-right:0;"> - <input type="text" name="sendPhoneNum" value="{{sendPhoneNum}}" class="ipt-small mr_10" style="width:80px">','邮编：<input type="text" name="sendPost" value="{{sendPost}}" class="ipt-small mr_10" style="width:100px">',"</div>",'<div class="shop-info-edit-line">所在地区：<span class="J_Send_Area"></span><input type="text" name="sendAddress" value="{{sendAddress}}" class="ipt-small mr_10" style="width:360px"/></div>',"</div>","</div>",'<div class="mt_20">','<h3 class="ft-bold">退货信息</h3>',"<div>",'<div class="shop-info-edit-line">','姓名：<input type="text" name="refundContact" value="{{refundContact}}" class="ipt-small mr_10" style="width:60px">','手机：<input type="text" name="refundMobile" value="{{refundMobile}}" class="ipt-small mr_10" style="width:100px">','固话：<input type="text" name="refundPhoneArea" value="{{refundPhoneArea}}" class="ipt-small mr_10" style="width:40px;margin-right:0;"> - <input type="text" name="refundPhoneNum" value="{{refundPhoneNum}}" class="ipt-small mr_10" style="width:80px">','邮编：<input type="text" name="refundPost" value="{{refundPost}}" class="ipt-small mr_10" style="width:100px">',"</div>",'<div class="shop-info-edit-line">','所在地区：<span class="J_Refund_Area"></span>','<input type="text" name="refundAddress" value="{{refundAddress}}" class="ipt-small mr_10"  style="width:380px">',"</div>","</div>","</div>",'<div class="pd_15 ft-center">','<button type="submit" class="btn btn-primary">保存</button>','<span class="btn btn-gray ml_10 J_Close">关闭</span>',"</div>","</form>"];
t.template.addTemp("template.setting.shop_info",i),t.template.addTemp("template.setting.shop_info.shop_view",a),t.template.addTemp("template.setting.shop_info.shop_edit",s)}(jQuery,RayCloud),function(e,t){var i=function(){var e={};e.keys=function(e){var t=[];for(var i in e)t.push(i);return t};var t={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}},i={escape:new RegExp("["+e.keys(t.escape).join("")+"]","g")};return e.escape=function(e){return null===e?"":(""+e).replace(i.escape,function(e){return t.escape[e]})},e}(),a=t.controls.get("control.form_util"),s=window.component.AddrDropDown,n={show:function(t){this._render(),this._update(t),this.$dialog=e.dialog({title:"修改店铺信息",width:900,close:e.proxy(this.clear,this),content:this.$el.show()})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(){this.$el||(this.$el=e('<div style="display:none;"></div>').appendTo("body"),this._event_bind())},_update:function(i){i=e.extend({title:"",mobile:"",phone:"",remark:"",sendAddress:"",sendContact:"",sendPost:"",sendMobile:"",sendPhone:"",sendState:"",sendCity:"",sendDistrict:"",refundAddress:"",refundContact:"",refundPost:"",refundMobile:"",refundPhone:"",refundState:"",refundCity:"",refundDistrict:""},i);var a=i.sendPhone.split("-");i.sendPhoneArea=a[0]||"",i.sendPhoneNum=a.slice(1).join("-")||"",a=i.refundPhone.split("-"),i.refundPhoneArea=a[0]||"",i.refundPhoneNum=a.slice(1).join("-")||"",i._has_flag=i.flag?1:0,this.$el.empty().html(t.template.get("template.setting.shop_info.shop_edit",i));var n=this.address_component1=new s;n.renderUI(this.$el.find(".J_Send_Area"),[{name:"sendState",value:i.sendState},{name:"sendCity",value:i.sendCity},{name:"sendDistrict",value:i.sendDistrict}]);var l=this.address_component2=new s;l.renderUI(this.$el.find(".J_Refund_Area"),[{name:"refundState",value:i.refundState},{name:"refundCity",value:i.refundCity},{name:"refundDistrict",value:i.refundDistrict}]),this.$el.find("select").css("marginRight","10px")},_event_bind:function(){this.$el.on("submit","form",e.proxy(this._fn_event_handler_submit_form,this)),this.$el.on("click",".J_Close",e.proxy(this.hide,this))},_event_unbind:function(){this.$el.off("submit","form"),this.$el.off("click",".J_Close")},_fn_event_handler_submit_form:function(i){i.preventDefault();var s=a.getData(i.target),n=this.address_component1.getValue(),l=this.address_component2.getValue();return s.sendState=n.province||"",s.sendCity=n.city||"",s.sendDistrict=n.area||"",s.refundState=l.province||"",s.refundCity=l.city||"",s.refundDistrict=l.area||"",e.each(s,function(t,i){s[t]=e.trim(i)}),""===s.sendContact?void e.dialog.alert("发货人姓名不能为空！"):s.sendMobile&&!/^[1]\d{10}$/.test(s.sendMobile)?void e.dialog.alert("发货人手机号码格式不正确！"):s.sendPhoneArea&&s.sendPhoneNum||!s.sendPhoneArea&&!s.sendPhoneNum?s.sendMobile||s.sendPhoneArea||s.sendPhoneNum?""===s.sendPost?void e.dialog.alert("发货人邮编不能为空！"):""===s.sendState?void e.dialog.alert("发货人所在地区不能为空！"):""===s.sendAddress?void e.dialog.alert("发货人详细地址不能为空！"):""===s.refundContact?void e.dialog.alert("退货人姓名不能为空！"):s.refundMobile&&!/^[1]\d{10}$/.test(s.refundMobile)?void e.dialog.alert("退货人手机号码格式不正确！"):s.refundPhoneArea&&s.refundPhoneNum||!s.refundPhoneArea&&!s.refundPhoneNum?s.refundMobile||s.refundPhoneArea||s.refundPhoneNum?""===s.refundPost?void e.dialog.alert("退货人邮编不能为空！"):""===s.refundState?void e.dialog.alert("退货人所在地区不能为空！"):""===s.refundAddress?void e.dialog.alert("退货人详细地址不能为空！"):(s.sendPhone=s.sendPhoneArea&&s.sendPhoneNum?[s.sendPhoneArea,s.sendPhoneNum].join("-"):"",s.refundPhone=s.refundPhoneArea&&s.refundPhoneNum?[s.refundPhoneArea,s.refundPhoneNum].join("-"):"",delete s.sendPhoneArea,delete s.sendPhoneNum,delete s.refundPhoneArea,delete s.refundPhoneNum,API.modify_shop_info(s,e.proxy(function(){this.hide(),t.pub("module.setting.shop_info.edit.success",s),s=null},this)),!1):void e.dialog.alert("退货人手机，固话至少填写一项！"):void e.dialog.alert("请填写正确的退货人区号和电话！"):void e.dialog.alert("发货人手机，固话至少填写一项！"):void e.dialog.alert("请填写正确的发货人区号和电话！")},clear:function(){this.$el&&(this._event_unbind(),this.$el.empty().remove(),this.$el=null,this.dialog=null,this.address_component1=null,this.address_component2=null)},destroy:function(){this.hide(),this.clear()}},l={removeSub:function(){t.removeSub("iframe.bindshop.login"),t.removeSub("iframe.bindshop.error")},show:function(i){this.dialogHandler=e.dialog({content:"url:https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/bindshop.do?taobaoId="+i.taobaoId+"&state=1000&view=web",width:"800px",height:"623px",lock:!0,fixed:!0,title:"绑定店铺"}),t.sub("iframe.bindshop.login",e.proxy(function(t){this.removeSub(),this.dialogHandler.close(),u._status_shop_data.bindShops?u._status_shop_data.bindShops.push(t):(u._status_shop_data.bindShops=[],u._status_shop_data.bindShops.push(t)),u._fn_dom_append_shopInfo(t),_.update(u.$el.find(".J_Shop_Item"),u._status_shop_data.bindShops.length),e.dialog.showSuccess("绑定成功！"),window.location.reload()},this)),t.sub("iframe.bindshop.error",e.proxy(function(t){this.removeSub(),this.dialogHandler.close(),e.dialog.alert(t)},this))}},d={removeSub:function(){t.removeSub("iframe.reOauth.login"),t.removeSub("iframe.reOauth.error")},authorized:!0,show:function(i){t.sub("iframe.reOauth.error",e.proxy(function(){this.removeSub(),this.authorized=!1,this.dialogHandler.close(),e.dialog({title:"",button:[{name:"订购掌柜",focus:"ui_state_highlight",callback:function(){window.open("https://fuwu.taobao.com/ser/detail.html?service_code=appstore-10316")}},{name:"联系客服订购",callback:function(){window.open("http://www.taobao.com/webww/ww.php?ver=3&touid=guanghua2cc&siteid=cntaobao&status=2&charset=utf-8")}}],fixed:!0,lock:!0,resize:!1,content:"授权失败，请检查您的店铺是否成功订购超级掌柜！"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""})},this)),this.dialogHandler=e.dialog({content:"url:https://oauth.taobao.com/authorize?response_type=code&client_id=12001121&redirect_uri="+t.jxcDomain+"/refresh.do?taobaoId="+i.data("taobaoid")+"&state=1000&view=web",width:"800px",height:"623px",lock:!0,fixed:!0,title:"重新授权"})}};try{for(var o=location.href.split("?")[1].split("&"),r=0;r<o.length;r++){var p=o[r].split("=");"authorized"==p[0]&&(e.dialog({title:"",button:[{name:"订购掌柜",focus:"ui_state_highlight",callback:function(){window.open("https://fuwu.taobao.com/ser/detail.html?service_code=appstore-10316")}},{name:"联系客服订购",callback:function(){window.open("http://www.taobao.com/webww/ww.php?ver=3&touid=guanghua2cc&siteid=cntaobao&status=2&charset=utf-8")}}],fixed:!0,lock:!0,resize:!1,content:"授权失败，请检查您的店铺是否成功订购超级掌柜！"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""}),d.authorized=p[1]?!1:!0)}}catch(c){}var _={_fn_ctrl_clear_trigger:function(){this.$shopTabs.each(e.proxy(function(t,i){var a=e(i),s=a.find(".J_Trigger_Show_Shop");0!=s.length&&s.remove()},this))},init:function(e,t){return this.$shopTabs=e.find(".J_Shop_Tab"),this.$shopTabs.length<=1?(this._fn_ctrl_show_tab_from_array(this.$shopTabs,t),void this._fn_ctrl_clear_trigger()):(this._fn_ctrl_hide_tabs(this.$shopTabs),this._fn_ctrl_show_tab_from_array(this.$shopTabs,t),void this._event_bind())},update:function(e,t){this._event_unbind(),this.init(e,t)},_event_bind:function(){this.$shopTabs.each(e.proxy(function(t,i){e(i).on("click",e.proxy(function(i){$shopTab=e(i.target),($shopTab.hasClass("J_Shop_Tab")||$shopTab.hasClass("J_Trigger_Show_Shop"))&&(this._fn_ctrl_hide_tabs(this.$shopTabs),this._fn_ctrl_show_tab_from_array(this.$shopTabs,t))},this))},this))},_event_unbind:function(){this.$shopTabs.each(e.proxy(function(t,i){e(i).off("click")},this))},_fn_ctrl_hide_tabs:function(t){t.each(e.proxy(function(t,i){this._fn_ctrl_hide_tab(e(i))},this))},_fn_ctrl_find_trigger:function(e,t){var i=e.find(".J_Trigger_Show_Shop");if(i.length>0)return i;var a=t?"trade-icon-open":"trade-icon-close";return e.html('<span class="'+a+' J_Trigger_Show_Shop J_Click" ></span>'+e.html()),e.find(".J_Trigger_Show_Shop")},_fn_ctrl_hide_tab:function(e){var t=this._fn_ctrl_find_trigger(e,!1);t.hasClass("trade-icon-open")&&(t.removeClass("trade-icon-open"),t.addClass("trade-icon-close")),e.next().hide()},_fn_ctrl_show_tab_from_array:function(t,i){t.each(e.proxy(function(t,a){t==i&&this._fn_ctrl_show_tab(e(a))},this))},_fn_ctrl_show_tab:function(e){var t=this._fn_ctrl_find_trigger(e,!0);t.hasClass("trade-icon-close")&&(t.removeClass("trade-icon-close"),t.addClass("trade-icon-open")),e.next().show(),u._fn_ctrl_change_order_info(parseInt(e.attr("data-id")))}},m=t.controls.get("control.user.deadline"),u={name:"setting.shop_info",depend:"setting",_dom_root:"#main",_template_name:"template.setting.shop_info",_render:function(i){this.$el||(i.bindUsers&&i.bindUsers.length>1?(i._switch_mode=1,i.switchTitle=0==i.userConf.mmb?"设置为整合模式":"设置为切换模式",i.mmb=i.userConf.mmb):(i._switch_mode=0,i.switchTitle=""),this.$el=e(t.template.get(this._template_name,i)).appendTo(this._dom_root),this._fn_event_bind(),this._fn_event_xufei_bind())},_fn_ctrl_filter_data:function(a){var s=t.user.get(),n=s.userConf,l=n.mmb,d=!1;return 1==l&&a.bindShops&&a.bindShops.length>0&&s.taobaoId==a.taobaoId&&(d=!0),a.isMainShop=d,a._has_sendMobile=a.sendMobile?1:0,a._has_refundMobile=a.refundMobile?1:0,a._has_bind=a._has_bind?1:0,a._has_flag=a.flag?1:0,a.remark&&(a.remark=i.escape(a.remark)),a=e.extend({title:"-",mobile:"-",phone:"-",remark:"-",sendAddress:"-",sendContact:"-",sendPost:"-",sendMobile:"-",sendPhone:"-",refundAddress:"-",refundContact:"-",refundPost:"-",refundMobile:"-",refundPhone:"-",sendPhone:"",sendState:"",sendCity:"",sendDistrict:"",refundState:"",refundCity:"",refundDistrict:""},a)},_fn_dom_update_shopInfo:function(e){var i=this._fn_ctrl_filter_data(e);if(this.$el.find(".J_Shop_Item").html(t.template.get("template.setting.shop_info.shop_view",i)),i.bindShops&&i.bindShops.length>0)for(var a=0;a<i.bindShops.length;a++)this._fn_dom_append_shopInfo(i.bindShops[a]);_.init(this.$el.find(".J_Shop_Item"),0)},_fn_dom_append_shopInfo:function(e){e._has_bind=1;var i=this._fn_ctrl_filter_data(e);this.$el.find(".J_Shop_Item").append(t.template.get("template.setting.shop_info.shop_view",i))},_fn_event_bind:function(){this.$el.on("click",".J_Edit_ShopInfo",e.proxy(this._fn_event_handler_editShopInfo,this)),this.$el.on("click",".J_Bind_Shop",e.proxy(this._fn_event_handler_bindShop,this)),this.$el.on("click",".J_re_oauth",e.proxy(this._fn_event_handler_oauth,this)),this.$el.on("click",".J_Unbind_Shop",e.proxy(this._fn_event_handler_unbindShop,this)),this.$el.on("click",".J_Switch_Mode",e.proxy(this._fn_event_handler_switchMode,this)),t.sub("module.setting.shop_info.edit.success",this._fn_event_handler_proxy_editSuccess=e.proxy(function(){this._fn_ctrl_load_shopInfo(e.proxy(this._fn_dom_update_shopInfo,this))},this))},_fn_event_unbind:function(){this.$el.off("click",".J_Edit_ShopInfo"),this.$el.off("click",".J_Bind_Shop"),this.$el.off("click",".J_Unbind_Shop"),this.$el.off("click",".J_Switch_Mode"),t.removeSub("module.setting.shop_info.edit.success",this._fn_event_handler_proxy_editSuccess)},_fn_event_handler_editShopInfo:function(t){var i=parseInt(e(t.target).attr("data-id"));n.show(this._status_shop_data.bindShops&&this._status_shop_data.bindShops.length>0&&i!=this._status_shop_data.taobaoId?this._fn_ctrl_find_shop(i):this._status_shop_data)},_fn_event_handler_bindShop:function(){e.dialog({title:"",button:[{name:"我已订购",focus:"ui_state_highlight",callback:function(){return l.show(t.user.get()),!0}},{name:"联系客服订购",callback:function(){window.open("http://www.taobao.com/webww/ww.php?ver=3&touid=guanghua2cc&siteid=cntaobao&status=2&charset=utf-8")}}],fixed:!0,lock:!0,resize:!1,content:'您添加的店铺也要订购掌柜哦~<br><font color="red">温馨提示：</font>授权时请注意账号变更'}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""})},_fn_event_handler_oauth:function(t){var i=e(t.target);e.dialog({title:"",button:[{name:"我已订购",focus:"ui_state_highlight",callback:function(){return d.authorized=!0,d.show(i),!0}},{name:"联系客服订购",callback:function(){window.open("http://www.taobao.com/webww/ww.php?ver=3&touid=guanghua2cc&siteid=cntaobao&status=2&charset=utf-8")}}],fixed:!0,lock:!0,resize:!1,content:'您授权的店铺也要订购掌柜哦~<br><font color="red">温馨提示：</font>授权时请注意账号变更'}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""})},_fn_event_handler_unbindShop_ok:function(t){API.shop_unbind({taobaoId:t.taobaoId},e.proxy(function(){var e=this.$el.find(".J_Shop_Tab[data-id="+t.taobaoId+"]");e.next().remove(),e.remove(),this._fn_ctrl_remove_shop(t.taobaoId),_.update(this.$el.find(".J_Shop_Item"),0),window.location.reload()},this))},_fn_event_handler_unbindShop:function(t){var i=e(t.target),a=this._fn_ctrl_find_shop(parseInt(i.attr("data-id")));e.dialog({title:"",cancel:!0,ok:e.proxy(function(){return this._fn_event_handler_unbindShop_ok(a),!0},this),okVal:"解除绑定",fixed:!0,lock:!0,resize:!1,close:function(){},content:"您确定要解除绑定店铺:"+a.title}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""})},_fn_event_handler_switchMode:function(t){e(t.target);API.user_switch_mode({},e.proxy(function(){e.dialog.showSuccess("设置成功！"),window.location.reload()},this))},_status_shop_data:{},_fn_ctrl_find_user_by_taobaoid:function(e,t){if("undefined"!=typeof e.bindUsers&&0!=e.bindUsers.length)for(var i=0;i<e.bindUsers.length;i++){var a=e.bindUsers[i];if(a.taobaoId==t)return a}},_fn_ctrl_change_order_info:function(e){var i=t.user.get(),a=this._fn_ctrl_find_user_by_taobaoid(i,e);"undefined"!=typeof a&&(this.$el.find(".J_Account").text("当前账号："+a.nick),this.$el.find(".J_Account").attr("data-nick",a.nick),this.$el.find(".J_Level").text("订购版本：打印版"),this.$el.find(".J_Deadline").text("到期时间："+t.util.date.getdate(a.deadline,"YY-MM-DD")))},_fn_ctrl_find_shop:function(e){if(this._status_shop_data.bindShops&&0!=this._status_shop_data.bindShops.length)for(var t=0;t<this._status_shop_data.bindShops.length;t++){var i=this._status_shop_data.bindShops[t];if(i.taobaoId==e)return i}},_fn_ctrl_remove_shop:function(e){if(this._status_shop_data.bindShops&&0!=this._status_shop_data.bindShops.length){for(var t=[],i=0;i<this._status_shop_data.bindShops.length;i++){var a=this._status_shop_data.bindShops[i];a.taobaoId!=e&&t.push(a)}this._status_shop_data.bindShops=t}},_fn_ctrl_load_shopInfo:function(t){API.shop_info({},e.proxy(function(i){this._status_shop_data=e.extend(!0,{},i.data),t(i.data)},this))},_fn_event_xufei_bind:function(){e(".J_Renewals_Set").on("click",function(){var t=e(".J_Account").attr("data-nick"),i=m.getDeadline(t),a={nick:t,deadline:i};m.show(a)})},init:function(){},update:function(){var i=t.user.get();i._deadline=t.util.date.getdate(i.deadline,"YY-MM-DD"),this._render(i),e(this._dom_root).children().hide(),this.$el.show(),this._fn_ctrl_load_shopInfo(e.proxy(this._fn_dom_update_shopInfo,this))},getContainer:function(){return this.$el},destroy:function(){this.$el&&(n.destroy(),this._status_shop_data={},this._fn_event_unbind(),_._event_unbind(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(u.name,u)}(jQuery,RayCloud),function(e,t){var i=['<div class="sync-content"><div class="ui-box ui-box-s1 sync-order-content">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">订单</div>',"</div>",'<div class="ui-box-bd">','<div class="sync-option">',"<label>",'<span class="check"><input type="checkbox" class="J_Checkbox" name="syncAfterLogin"></span>每次登陆自动同步一次订单',"</label>","</div>",'<div class="sync-option">',"<label>",'<span class="check"><input type="checkbox" id="sync_order_everyday_time" class="J_Checkbox" name="t2as"></span>每天',"</label>&nbsp;&nbsp;",'<select class="sync-order-time" id="sync_order_time">','<option value="0">0:00</option>','<option value="1">1:00</option>','<option value="2">2:00</option>','<option value="3" selected>3:00</option>','<option value="4">4:00</option>','<option value="5">5:00</option>','<option value="6">6:00</option>','<option value="7">7:00</option>','<option value="8">8:00</option>','<option value="9">9:00</option>','<option value="10">10:00</option>','<option value="11">11:00</option>','<option value="12">12:00</option>','<option value="13">13:00</option>','<option value="14">14:00</option>','<option value="15">15:00</option>','<option value="16">16:00</option>','<option value="17">17:00</option>','<option value="18">18:00</option>','<option value="19">19:00</option>','<option value="20">20:00</option>','<option value="21">21:00</option>','<option value="22">22:00</option>','<option value="23">23:00</option>',"</select>",'&nbsp;&nbsp;<label for="sync_order_everyday_time">自动同步一次订单</label>',"</div>",'<div class="sync-option">',"<label>",'<span class="check"><input type="checkbox" class="J_Checkbox" name="mergeAfterSync"></span>同步的订单智能合并',"</label>","</div>","</div>","</div>",'<div class="ui-box ui-box-s1 sync-product-content">','<div class="ui-box-hd">','<div class="ui-box-hd-tit">商品</div>',"</div>",'<div class="ui-box-bd">','<div class="sync-option">',"<label>",'<span class="check"><input type="checkbox" class="J_Checkbox" name="itemOnSaleSAL"></span>每次登陆自动同步一次出售中的宝贝',"</label>","</div>",'<div class="sync-option">',"<label>",'<span class="check"><input type="checkbox" class="J_Checkbox" name="itemInventorySAL"></span>每次登陆自动同步一次下架中的宝贝',"</label>","</div>",'<div class="sync-option">',"<label>",'<span class="check"><input type="checkbox" id="sync_pro_everyday_time" class="J_Checkbox" name="it2as"></span>每天',"</label>&nbsp;&nbsp;",'<select class="sync-order-time" id="sync_item_time">','<option value="0">0:00</option>','<option value="1">1:00</option>','<option value="2">2:00</option>','<option value="3" selected>3:00</option>','<option value="4">4:00</option>','<option value="5">5:00</option>','<option value="6">6:00</option>','<option value="7">7:00</option>','<option value="8">8:00</option>','<option value="9">9:00</option>','<option value="10">10:00</option>','<option value="11">11:00</option>','<option value="12">12:00</option>','<option value="13">13:00</option>','<option value="14">14:00</option>','<option value="15">15:00</option>','<option value="16">16:00</option>','<option value="17">17:00</option>','<option value="18">18:00</option>','<option value="19">19:00</option>','<option value="20">20:00</option>','<option value="21">21:00</option>','<option value="22">22:00</option>','<option value="23">23:00</option>',"</select>",'&nbsp;&nbsp;<label for="sync_pro_everyday_time">自动同步一次宝贝</label>',"</div>","</div>","</div>",'<div class="operation-area">','<button class="btn btn-success save-setting">保存</button>','<button class="btn btn-gray reset-setting">重置</button></div>',"</div>"];t.template.addTemp("template.setting.sync_option",i)}(jQuery,RayCloud),function(e,t){var i={name:"setting.sync_option",depend:"setting",_dom_root:"#main",_template_name:"template.setting.sync_option",_render:function(){this.$el||(this.$el=e(t.template.get(this._template_name)).appendTo(this._dom_root),API.user_sync_query({},e.proxy(function(e){var t=e.data;t.syncAfterLogin&&this.$el.find("input[name=syncAfterLogin]").prop("checked",!0),t.mergeAfterSync&&this.$el.find("input[name=mergeAfterSync]").prop("checked",!0),t.itemOnSaleSAL&&this.$el.find("input[name=itemOnSaleSAL]").prop("checked",!0),t.itemInventorySAL&&this.$el.find("input[name=itemInventorySAL]").prop("checked",!0),"undefined"!=typeof t.t2as&&(this.$el.find("input[name=t2as]").prop("checked",!0),this.$el.find("#sync_order_time").find("option[value="+t.t2as+"]").prop("selected",!0)),"undefined"!=typeof t.it2as&&(this.$el.find("input[name=it2as]").prop("checked",!0),this.$el.find("#sync_item_time").find("option[value="+t.it2as+"]").prop("selected",!0)),this._fn_event_bind()},this)))},_get_save_params:function(){var e={};return e.syncAfterLogin=this.$el.find("input[name=syncAfterLogin]").prop("checked"),e.mergeAfterSync=this.$el.find("input[name=mergeAfterSync]").prop("checked"),e.itemOnSaleSAL=this.$el.find("input[name=itemOnSaleSAL]").prop("checked"),e.itemInventorySAL=this.$el.find("input[name=itemInventorySAL]").prop("checked"),this.$el.find("input[name=t2as]").prop("checked")&&(e.t2as=parseInt(this.$el.find("#sync_order_time").val())),this.$el.find("input[name=it2as]").prop("checked")&&(e.it2as=parseInt(this.$el.find("#sync_item_time").val())),e},_fn_ctrl_save:function(){var t=this._get_save_params();API.user_sync_save(t,e.proxy(function(){e.dialog.showSuccess("保存成功！")},this))},_fn_ctrl_reset:function(){this.$el.find("input[name=syncAfterLogin]").prop("checked",!0),this.$el.find("input[name=mergeAfterSync]").prop("checked",!0),this.$el.find("input[name=itemOnSaleSAL]").prop("checked",!0),this.$el.find("input[name=itemInventorySAL]").prop("checked",!0),this.$el.find("input[name=t2as]").prop("checked",!1),this.$el.find("input[name=it2as]").prop("checked",!1),this.$el.find("#sync_order_time").val(3).iSelect("update"),this.$el.find("#sync_item_time").val(3).iSelect("update")},_fn_event_bind:function(){this.$el.find("select").iSelect(),this.$el.find(".save-setting").on("click",e.proxy(function(){this._fn_ctrl_save()},this)),this.$el.find(".reset-setting").on("click",e.proxy(function(){this._fn_ctrl_reset()},this))},_fn_event_unbind:function(){this.$el.find(".save-setting").off("click"),this.$el.find(".reset-setting").off("click")},init:function(){},update:function(){var i=t.user.get();i._deadline=t.util.date.getdate(i.deadline,"YY-MM-DD"),this._render(i),e(this._dom_root).children().hide(),this.$el.show()},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._fn_event_unbind(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="sms-setting">','<div class="setting-hd setting-account">',"</div>",'<div class="setting-main clearfix">',"</div>",'<div class="setting-record">',"</div>","</div>"],a=['	<li act-loop="active in actives" data-id={{active.id}} class="clearfix">','<div class="recharge-type">','套餐{{active.seq}}：<strong class="num">{{active.count}}</strong> 条短信',"</div>",'<div class="recharge-price">','优惠价：<strong class="num">{{active.payment}}元</strong> （约<span class="num">{{active.perPrice}}分</span>/条）',"</div>",'<div class="recharge-btn">','<span class="btn btn-danger btn-recharge">充值</span>',"</div>","</li>"],s=['<div class="message-recharge-dialog">','<ul class="recharge-list">','<li class="clearfix" data-id="0" >','<div class="recharge-type">','自定义：<input style="width: 95px;" type="text" value="" name="customCount"> 条短信',"</div>",'<div class="recharge-price">','优惠价：<strong class="num recharge-total-price">元</strong> （约<span class="num recharge-single-price">10分</span>/条）',"</div>",'<div class="recharge-btn">','<span class="btn btn-danger btn-custom-recharge">充值</span>',"</div>","</li>","</ul>",'<div class="tips">',"<h3>温馨小贴士：</h3>","<ul>","<li>","1.短信永久生效，若软件过期，续订后可正常使用；","</li>","<li>",'2.如需开发票或遇到问题，请联系旺旺客服<a target="_blank" href="http://www.taobao.com/webww/ww.php?ver=3&amp;touid=guanghua2cc&amp;siteid=cntaobao&amp;status=2&amp;charset=utf-8" class="contact">和我联系</a>',"</li>","</ul>","</div>","</div>"],n=['<span class="text">','您当前可用短信数量：<strong class="num">{{balance}}</strong>条',"</span>",'<span class="btn btn-danger message-recharge">立即充值</span>','<span class="btn btn-success ml_10 on-all-config">一键开启全部服务</span>'],l=['<li class="clearfix">','<div class="step-module config-type1" data-type="1">',"<h3>催付提醒</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type1._class}} switch-type1">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>","</li>",'<li class="clearfix">','<div class="step-module config-type2" data-type="2">',"<h3>付款关怀</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type2._class}} switch-type2">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>","</li>",'<li class="clearfix">','<div class="step-module config-type3" data-type="3">',"<h3>发货提醒</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type3._class}} switch-type3">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>","</li>",'<li class="clearfix">','<div class="step-module config-type6" data-type="6">',"<h3>到货提醒</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type6._class}} switch-type6">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>","</li>",'<li class="clearfix">','<div class="step-module config-type9" data-type="9">',"<h3>好评感谢</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type9._class}} switch-type9">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>","</li>",'<li class="clearfix">','<div class="step-module config-type11" data-type="11">',"<h3>短信不足提醒</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type11._class}} switch-type11">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>",'<div class="step-module config-type12" data-type="12">',"<h3>电子面单不足提醒</h3>",'<div class="mt_10">','<div class="ui-switch ui-switch-small">','<span class="ui-switch-statu {{type12._class}} switch-type12">','<label class="ui-switch-label ui-switch-label-on"></label>','<label class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>",'<span class="btn btn-small btn-primary">设置</span>',"</div>",'<i class="top-arrow" style="display: none;"></i>',"</div>","</li>"],d=['<div class="setting-label"></div>','<div id="J_step" class="setting-step">','<ul class="step-list">',"</ul>","</div>",'<div class="horizontal-line"></div>','<div class="vertical-line"></div>','<div class="setting-mobile">','<div class="message-box">','<p class="text">',"请选择相应的配置查看模板预览","</p>","</div>",'<div class="direction"></div>',"</div>"],o=['<div class="tab-con record-detail">','<div class="total">','共发送短信  <a class="link J_Total" href="javascript:void(0);" >{{total}}</a>  条',"</div>",'<div class="detail">','<table style="width:100%;">',"<colgroup>",'<col width="246">','<col width="248">','<col width="248">','<col width="246">',"</colgroup>","<tbody>","<tr>","<td>",'催付提醒：<a href="javascript:void(0);" class="link J_PAY_REMIND">{{type1}}</a>条',"</td>","<td >",'付款关怀：<a href="javascript:void(0);" class="link J_PAY_CARE">{{type2}}</a>条',"</td>","<td>",'发货提醒：<a href="javascript:void(0);" class="link J_Send">{{type3}}</a>条',"</td>",'<td class="last">','到货提醒：<a href="javascript:void(0);" class="link J_Received">{{type6}}</a>条',"</td>","</tr>","<tr>","<td>",'好评感谢：<a href="javascript:void(0);" class="link J_RATED_THX">{{type9}}</a>条',"</td>","<td>",'短信不足提醒：<a href="javascript:void(0);" class="link J_SMS_Not_Enough">{{type11}}</a>条',"</td>","<td>",'电子面单不足提醒：<a href="javascript:void(0);" class="link J_WLB_Not_Enough">{{type12}}</a>条',"</td>",'<td class="last">',"</td>","</tr>","</tbody></table>","</div>","</div>"],r=['<div class="tab-hd">','<div class="fl">','<span class="tit">短信发送记录</span>','<div class="ui-tag-group ui-tag-group-small sms_sent_group ml_10">','<span class="tag current">今天</span>','<span class="tag">昨天</span>','<span class="tag">近7天</span>',"</div>","</div>",'<div class="fr">','<a href="javascript:;" class="refresh-btn J_Tip" data-title="刷新">刷新</a>',"</div>","</div>"],p=['<div class="common-tip-dialog">',"<div>",'<span style="font:16px/58px 微软雅黑;">请在新开窗口完成支付,完成付款后根据您的情况进行以下操作！</span>',"</div>",'<div class="btns" style="margin: 0px 0px 0px 66px;">','<button type="button" class="save-btn pay-complete">支付完成</button>','<div class="send-message ml_15">','<a class="link">支付遇到问题？返回重新选择</a>',"</div>","</div>","</div>"];t.template.addTemp("template.sms.settings",i),t.template.addTemp("template.sms.settings.account",n),t.template.addTemp("template.sms.settings.config",d),t.template.addTemp("template.sms.settings.config.type",l),t.template.addTemp("template.sms.settings.statistics",r),t.template.addTemp("template.sms.settings.statistics.detail",o),t.template.addTemp("template.sms.settings.recharge",s),t.template.addTemp("template.sms.settings.recharge.active",a),t.template.addTemp("template.sms.settings.recharge.forward",p)}(jQuery,RayCloud),function(e,t){var i={type1:"催付提醒",type2:"付款关怀",type3:"发货提醒",type4:"延迟发货提醒",type5:"包裹状态提醒",type6:"到货提醒",type7:"确认收货提醒",type8:"回款提醒",type9:"好评感谢",type10:"中差评提醒",type11:"短信不足提醒",type12:"电子面单不足提醒"},a={"店铺名称":10,"买家旺旺":7,"收件人姓名":4,"订单编号":15,"快递公司":4,"运单号":12,"发货日期":6,"收件人城市":4},s={priceLevels:[10,7,6.4,6,5.6,5.27,5],getSinglePrice:function(e){return this.priceLevels[e]},calculatePriceLevel:function(e){return 300>e?0:1500>e?1:5e3>e?2:1e4>e?3:38e3>e?4:11e4>e?5:6},calculatePrice:function(e,t){"undefined"==typeof t&&(t=this.calculatePriceLevel(e));var i=this.priceLevels[t];return(e*i/100).toFixed(2)}},n={init:function(e,t){this.toggleStep(e,t)},toggleStep:function(t,i){var a=28,s=[294,176],n=[438,224,156],l=[556,342],d=[50,158],o=0,r=0,p=0;e("#J_step").on("mouseenter mouseleave",".step-module",function(c){var _=e(this),m=_.find(".top-arrow"),u=m.height(),h=_.parent("li"),f=h.index(),v=_.index();if(4!=f&&5!=f?(r=s[0],p=0):(r=s[1],p=4==f?d[0]:d[1]),o=0==f?_.outerHeight()+u-2:_.outerHeight()*(f+1)+a*f+u-2,"mouseenter"==c.type){t&&"function"==typeof t&&t(_),m.show(),_.addClass("current"),e(".horizontal-line").css({top:o,right:r});var g=e(c.target),g=g.hasClass("step-module")?g:g.parents(".step-module"),b=e(".setting-mobile").position().left-(g.position().left+g.width()/2);if(4!=f&&5!=f){var y=9;b+=y,e(".horizontal-line").css({width:b>n[v]?b:n[v]})}else{var y=18;b=b+e(".setting-mobile").width()/2+y,e(".horizontal-line").css({width:b>l[v]?b:l[v]})}e(".vertical-line").css({height:p})}else"mouseleave"==c.type&&(i&&"function"==typeof i&&i(_),m.hide(),_.removeClass("current"),e(".horizontal-line").css({width:0}),e(".vertical-line").css({height:0}))})}},l={init:function(t,i){t.find(".tag").on("click",function(t){$tag=e(t.target),$tag.hasClass("current")||($tag.parent().find(".current").removeClass("current"),$tag.addClass("current"),"function"==typeof i&&i(t))})},destroy:function(e){e.find(".tag").off("click")}},d={init:function(t){this.$templateTextarea&&this.$templateTextarea.off("keyup"),this.$templateTextarea=t.find("textarea[name=template]"),this.$wroteNum=t.find(".wrote_num"),this.$messageNum=t.find(".message-num "),this.numPerMessage=parseInt(t.find(".one-message-num").text()),this.$templateTextarea.on("keyup",e.proxy(function(){this.manual_change_num()
},this))},manual_change_text:function(e){this.$templateTextarea.val(e),this.$templateTextarea.focus(),this.manual_change_num()},manual_change_num:function(){var e=p.config.signature?p.config.signature.length:0,t=this._calculate_template_length(this.$templateTextarea.val())+2+e;this.$wroteNum.text(t);var i=Math.floor(t/this.numPerMessage)+(t%this.numPerMessage==0?0:1);this.$messageNum.text(i)},_calculate_template_length:function(e){for(var t=this.find_variables(e),i=0,s=0,n=0;n<t.length;n++){i+=t[n].length+2;var l=a[t[n]];s+=l?l:t[n].length+2}return e.length-i+s},_loop_chars_in_turn:function(e,t,i){if(!(e>=t.length-2)){for(var a=-1,s=-1,n=e;n<t.length;n++){var l=t.charAt(n);if("#"==l){if(-1!=a){s=n;break}a=n}}if(-1!=a&&-1!=s){var d=t.substring(a+1,s);""!=d&&i.push(d),this._loop_chars_in_turn(s+1,t,i)}}},find_variables:function(e){var t=[];return this._loop_chars_in_turn(0,e,t),t}},o=["一","二","三","四","五","六","七","八","九"],r={_format_data:function(t){return e.each(t,function(e,t){t.seq=o[e],t.payment=(t.payment/100).toFixed(2)}),t},_fn_ctrl_smsActiveList:function(i){API.sms_active_list({},e.proxy(function(a){var n={actives:this._format_data(a.data)},l=t.template.get("template.sms.settings.recharge.active",n);i.find(".recharge-list").append(l),this.$dialogReceipt=e.dialog({title:"短信充值",content:i.show()}),i.find("input[name=customCount]").numeral(!1,!1),i.find("input[name=customCount]").on("keypress",function(e){var t=e.keyCode?e.keyCode:e.which;if(!(t>=48&&57>=t||8==t))return!1;var a=0;a=parseInt(8!=t?this.value+(t-48):this.value.length<=1?"0":this.value.substring(0,this.value.substring(0,this.value.length-1)));var n=s.calculatePriceLevel(a),l=s.getSinglePrice(n),d=s.calculatePrice(a,n);i.find(".recharge-total-price").text(d+"元"),i.find(".recharge-single-price").text(l+"分")}),i.find("input[name=customCount]").on("keydown",function(e){var t=e.keyCode?e.keyCode:e.which;if(8==t){var a=parseInt(this.value.length<=1?"0":this.value.substring(0,this.value.substring(0,this.value.length-1))),n=s.calculatePriceLevel(a),l=s.getSinglePrice(n),d=s.calculatePrice(a,n);i.find(".recharge-total-price").text(d+"元"),i.find(".recharge-single-price").text(l+"分")}}),i.find(".btn-custom-recharge").on("click",this._event_handle("_handle_custom_recharge_event")),i.find(".btn-recharge").on("click",this._event_handle("_handle_active_recharge_event"))},this))},_handle_custom_recharge_event:function(t){var i=e(t.target).parent().parent(),a=e.trim(i.find("input[name=customCount]").val());return""==a||isNaN(a)?void e.dialog.alert("请输入充值的短信数！",function(){},this.$d):0==parseInt(a)?void e.dialog.alert("输入的充值数需要大于0！",function(){},this.$d):void this._forward_alipay("/sms/alipay_api?customCount="+a)},_handle_active_recharge_event:function(t){var i=e(t.target).parent().parent();this._forward_alipay("/sms/alipay_api?activeId="+i.attr("data-id"))},_event_handle:function(t){return e.proxy(this[t],this)},_forward_alipay:function(i){window.open(i),this.$dialogRemind=e(t.template.get("template.sms.settings.recharge.forward",{})),this.$dialogRemindReceipt=e.dialog({title:"",content:this.$dialogRemind}),this.$dialogRemind.find(".pay-complete").on("click",e.proxy(function(){this.$dialogRemindReceipt.close(),this.$dialogReceipt.close(),t.pub("sms.account.flash")},this)),this.$dialogRemind.find(".link").on("click",e.proxy(function(){this.$dialogRemindReceipt.close(),t.pub("sms.account.flash")},this))},init:function(e){this._fn_ctrl_smsActiveList(e),this.$d=e}},p={_get_blacklist_scope:function(e){return parseInt(e.find("input[name=blacklist]:checked").val())},_fn_ctrl_smsConfigBlacklistAdd:function(t,i,a,s){2==t?(i.type=p.type,API.sms_config_blacklist_add(i,e.proxy(a,this),s)):API.sms_config_gblacklist_add(i,e.proxy(a,this),s)},_fn_ctrl_smsConfigBlacklistDelete:function(t,i,a,s){2==t?(i.type=p.type,API.sms_config_blacklist_delete(i,e.proxy(a,this),s)):API.sms_config_gblacklist_delete(i,e.proxy(a,this),s)},_fn_ctrl_smsConfigSystplList:function(t,i,a){var s={type:t};API.sms_config_systpl_list(s,e.proxy(i,this),a)},_fn_ctrl_smsConfigCustplList:function(t,i,a){var s={type:t};API.sms_config_custpl_list(s,e.proxy(i,this),a)},_fn_ctrl_smsConfigCustplAdd:function(t,i,a,s){var n={type:t,template:i};API.sms_config_custpl_add(n,e.proxy(a,this),s)},_fn_ctrl_smsConfigCustplUpdate:function(t,i,a,s){var n={id:t,template:i};API.sms_config_custpl_update(n,e.proxy(a,this),s)},_fn_ctrl_smsConfigCustplDelete:function(t,i,a){var s={id:t};API.sms_config_custpl_delete(s,e.proxy(i,this),a)},_render_blacklist:function(a,s){var n=0==s.useGlobalBlacklist||1==s.useGlobalBlacklist?!0:!1,l=this._parseBlacklist(n?s.globalBlacklist:s.blacklist);e(t.template.get("template.sms.type.blacklist",{count:l.length,typeName:i["type"+s.type]})).appendTo(a.find(".blacklist-main")),e(t.template.get("template.sms.type.blacklist.nick",{nicks:l})).appendTo(a.find(".blacklist-nicks")),a.find(".set-blacklist a[class=link]").on("click",function(){var e=a.find(".blacklist-dashboard");p._hide_all_sub_dialog(a,"blacklist-dashboard"),t.pub("subdialog.show",a),"none"==e.css("display")?e.show():e.hide()}),0==s.useGlobalBlacklist?a.find(".blacklist-main .non-blacklist").addClass("current"):a.find(".blacklist-main .use-blacklist").addClass("current")},_handle_blacklist_remove_event:function(t){var i=p._get_blacklist_scope(p.$d),a=e(t.target).parent().text();a=a.substring(0,a.length-1);var s={blacklist:a};p._fn_ctrl_smsConfigBlacklistDelete(i,s,e.proxy(function(){var e=this,t=e.text();t=t.substring(0,t.length-1),e.remove();var i=p.$d;i.find(".blacklist-count").html("目前已加入黑名单：<strong>"+(i.find(".blacklist-nicks li").text().split("×").length-1)+"</strong>");var a=p.config,s=p._get_blacklist_scope(i);1==s?a.globalBlacklist=p._process_delete_blacklist_toconfig(a.globalBlacklist,t):a.blacklist=p._process_delete_blacklist_toconfig(a.blacklist,t)},e(t.target).parent()))},_process_add_blacklist_toconfig:function(e,t){return e||(e=""),""!=e&&(e+=","),e+=t},_process_delete_blacklist_toconfig:function(t,i){if(!t)return"";var a=[];return e.each(t.split(","),function(e,t){t!=i&&a.push(t)}),a.join(",")},_format_express_company_data:function(t,i){var a=!1,s={};if(i.configs.expressCode&&""!=e.trim(i.configs.expressCode)&&"whole"!=i.configs.expressCode)for(var n=i.configs.expressCode.split(","),l=0;l<n.length;l++)s[n[l]]=!0;else a=!0;for(var l=0;l<t.length;l++){var d=t[l];d.checked=a||s[d.cpCode]?"checked":""}return t},_init_blacklist:function(i,a,s){0==s.useGlobalBlacklist||1==s.useGlobalBlacklist?a.find("input[name=blacklist]").first().attr("checked",!0):a.find("input[name=blacklist]").last().attr("checked",!0),a.find(".set-blacklist .close").on("click",function(){a.find(".blacklist-dashboard").hide()}),a.find(".blacklist-nicks .nick-close").on("click",e.proxy(this._handle_blacklist_remove_event,this)),a.find(".add-blacklist").on("click",function(){var i=a.find("input[name=blacklistNick]").val();if(""!=e.trim(i)){var n=a.find(".blacklist-nicks li").text().split("×"),l=!1;if(e.each(n,function(e,t){t==i&&(l=!0)}),l)return void e.dialog.alert("该用户已经加入黑名单",function(){},a);var d=p._get_blacklist_scope(a),o={blacklist:i};p._fn_ctrl_smsConfigBlacklistAdd(d,o,e.proxy(function(){var a=this,l=a.find(".blacklist-nicks").append(e(t.template.get("template.sms.type.blacklist.nick.single",{nick:i})));l.find("li").last().find(".nick-close").on("click",e.proxy(p._handle_blacklist_remove_event,a)),a.find(".blacklist-count").html("目前已加入黑名单：<strong>"+n.length+"</strong>"),a.find("input[name=blacklistNick]").val(""),a.find("input[name=blacklistNick]").focus();var d=p._get_blacklist_scope(a);1==d?s.globalBlacklist=p._process_add_blacklist_toconfig(s.globalBlacklist,i):s.blacklist=p._process_add_blacklist_toconfig(s.blacklist,i)},a))}})},_hide_all_sub_dialog:function(e,t){"message-template"!=t&&e.find(".message-template").hide(),"generate-shorturl-popup"!=t&&e.find(".generate-shorturl-popup").hide(),"blacklist-dashboard"!=t&&e.find(".blacklist-dashboard").hide(),"send-message-dashboard"!=t&&e.find(".send-message-dashboard").hide(),"choose-express-popup"!=t&&e.find(".choose-express-popup").hide(),"update-sign"!=t&&e.find(".update-sign").hide()},_handle_message_template_tab_switch:function(e,t){e?(t.find(".sys-template").show(),t.find(".cust-template").hide()):(t.find(".sys-template").hide(),t.find(".cust-template").show())},_add_cust_template:function(i,a,s){this._fn_ctrl_smsConfigCustplAdd(i,a,function(i){var n={id:i.data.id,template:a};this.$d.find(".list-custom-item").length>0?this.$d.find(".list-custom-item").last().after(e(t.template.get("template.sms.type.messageEdit.custpl.single",n))):this.$d.find(".add-item").before(e(t.template.get("template.sms.type.messageEdit.custpl.single",n))),this.custpls.push(n);var l=this.$d.find(".list-custom-item").last();this._init_message_template_hover_event(l),this._init_message_template_select_event(l),this._init_message_template_update_event(l.find(".template-update")),this._init_message_template_delete_event(l.find(".template-delete")),s&&"function"==typeof s&&s(n),3==this.custpls.length&&this.$d.find(".add-item").hide()})},_delete_cust_template:function(t){var i=parseInt(t.find("input[name=custTpl]").val());this._fn_ctrl_smsConfigCustplDelete(i,function(){t.remove();var a=[];e.each(this.custpls,function(e,t){t.id!=i&&a.push(t)}),this.custpls=a,this.$d.find(".add-item").show()})},_update_cust_template:function(e,t,i,a){this._fn_ctrl_smsConfigCustplUpdate(t,i,function(){a()})},_init_message_template_hover_event:function(t){t.hover(function(){e(this).addClass("current")},function(){e(this).removeClass("current")})},_init_message_template_delete_event:function(t){t.on("click",e.proxy(function(t){var i=e(t.target).parent().parent();this._delete_cust_template(i)},this))},_init_message_template_select_event:function(t){t.find("input[type=radio]").on("click",e.proxy(function(t){var i=e(t.target).parent().parent().parent();d.manual_change_text(i.find(".text").text())},this))},_init_message_template_update_event:function(i){i.on("click",e.proxy(function(i){var a=e(i.target).parent().parent(),s=parseInt(a.find("input[type=radio]").val()),n={};e.each(this.custpls,function(e,t){t.id==s&&(n=t)});var l=a.next();a.hide();var d=e(t.template.get("template.sms.type.messageEdit.edittpl",n));l.before(d),this._init_message_template_opr_event(d,function(e){e||(a.find(".text").text(d.find("textarea").val()),n.template=d.find("textarea").val()),a.show(),d.remove()},a)},this))},_init_message_template_event:function(e){this._init_message_template_hover_event(e.find(".message-template .list-custom-item")),this._init_message_template_hover_event(e.find(".message-template .list-system-item")),this._init_message_template_update_event(e.find(".message-template .template-update")),this._init_message_template_delete_event(e.find(".message-template .template-delete")),this._init_message_template_select_event(e.find(".message-template .list-custom-item")),this._init_message_template_select_event(e.find(".message-template .list-system-item"))},_init_message_template_opr_event:function(t,i){var a=i&&"function"==typeof i?i:function(){t.remove()};t.find(".save-edit-template").on("click",e.proxy(function(){var i=t.find("textarea[name=editTemplate]").val(),s=parseInt(t.find("input[type=radio]").val());0>=s?this._add_cust_template(this.type,i,e.proxy(a,this)):this._update_cust_template(this.type,s,i,e.proxy(a,this))},this)),t.find(".cancel-edit-template").on("click",e.proxy(function(){a(!0)},this))},_init_message_template:function(i,a,s){a.find(".change-template").on("click",e.proxy(function(){var e=this;p._hide_all_sub_dialog(this,"message-template");var t=e.find(".message-template");"none"==t.css("display")?t.css("display","block"):t.css("display","none")},a)),a.find(".message-template .close").on("click",function(){e(this).parent().hide()}),this._fn_ctrl_smsConfigSystplList(i,function(s){a.find(".sys-template").html(""),e(t.template.get("template.sms.type.messageEdit.systpl",{templates:s.data})).appendTo(a.find(".sys-template")),this.systpls=s.data,this._fn_ctrl_smsConfigCustplList(i,function(i){a.find(".cust-template").html(""),e(t.template.get("template.sms.type.messageEdit.custpl",{templates:i.data})).appendTo(a.find(".cust-template")),this.custpls=i.data,3==this.custpls.length&&a.find(".add-item").hide(),a.find(".message-template .add-item a").on("click",e.proxy(function(i){var a=e(i.target).parent(),s={template:"",id:-1};this.systpls&&this.systpls.length>0&&(s.template=this.systpls[0].template);var n=e(t.template.get("template.sms.type.messageEdit.edittpl",s));a.before(n),this._init_message_template_opr_event(n)},this)),this._init_message_template_event(a)})}),d.init(a.find(".messages-edit")),d.manual_change_text(s.template)},_clear_blacklist:function(e){e.find(".blacklist-nicks li").remove(),e.find("input[name=blacklistNick]").val(""),e.find(".blacklist-count").html("目前已加入黑名单：<strong>0</strong>")},_fill_blacklist:function(i,a){e(t.template.get("template.sms.type.blacklist.nick",{nicks:a})).appendTo(i.find(".blacklist-nicks")),i.find(".blacklist-count").html("目前已加入黑名单：<strong>"+a.length+"</strong>"),i.find(".blacklist-nicks .nick-close").on("click",e.proxy(p._handle_blacklist_remove_event,this))},_parseBlacklist:function(t){var i=[];return t&&""!=t&&e.each(t.split(","),function(e,t){i.push({nick:t})}),i},_has_dom:function(e){return this.$d.find(e).length>0},init:function(a,s,n){if(this.$d=s,this.config=n,this.type=a,this.isOpen=c.data.configs[this.type-1].open,this._has_dom(".blacklist-main")&&("undefined"==typeof n.useGlobalBlacklist&&(n.useGlobalBlacklist=0),this._render_blacklist(s,n),this._init_blacklist(a,s,n)),this._has_dom(".sent-after")){e(t.template.get("template.sms.type.sentAfter",{})).appendTo(s.find(".sent-after"));var o=n.configs;if(o.afterCreateTrade){var r=parseInt(o.afterCreateTrade);10==r||20==r||30==r||60==r?s.find(".sent-after-group").find("span[data-value="+r+"]").addClass("current"):(s.find(".sent-after-group").find("span[data-value=-1]").addClass("current"),s.find(".sent-after-custom").val(parseInt(r/60)))}else s.find(".sent-after-group .tag").find("span[data-value=30]").addClass("current");s.find(".sent-after-custom").numeral(!0,!1)}if(this._has_dom(".messages-edit")){var _=t.template.get("template.sms.type.messageEdit",n),m=e(_).appendTo(s.find(".messages-edit"));m.find(".signature").after(e(t.template.get("template.sms.type.messageEdit.tag"+a,{}))),s.find(".message-tag a").on("click",e.proxy(function(t){var i=this,a=e(t.target).text(),s=i.find("textarea[name=template]"),n=s[0];n.focus();var l=p.get_textarea_select_start(n),o=s.val();o=o.substring(0,l)+a+o.substring(l,o.length),d.manual_change_text(o),p.set_textarea_cur_pos(n,l+a.length)},s)),s.find(".generate-shorturl").on("click",e.proxy(function(){var e=this;p._hide_all_sub_dialog(this,"generate-shorturl-popup");var t=e.find(".generate-shorturl-popup");"none"==t.css("display")?t.css("display","block"):t.css("display","none")},s));var u=s.find(".generate-shorturl-popup");u.find(".close").on("click",e.proxy(function(){this.css("display","none")},u)),s.find(".shorturl-generate").on("click",e.proxy(function(){var t=s.find("input[name=longurl]"),i=(s.find("input[name=shorturl]"),e.trim(t.val()));return""==i?void e.dialog.alert("请输入链接地址！"):void API.sms_config_shorturl({url:i},e.proxy(function(t){var i=t.data;return i.error_code?void e.dialog.alert("请输入正确的链接地址！"):(s.find(".shorturl_copy").show(),void(s.find("input[name=shorturl]")[0].value=i.url_short))},this))},this)),s.find(".charging-rules-a").hover(function(){var t=e(this).parent().find(".rule-popup");t.css("display","block")},function(){var t=e(this).parent().find(".rule-popup");t.css("display","none")}),this._init_message_template(a,s,n),s.find(".add-template").on("click",e.proxy(function(){var t=s.find(".messages-edit textarea[name=template]").val();return""==e.trim(t)?void e.dialog.alert("请输入模板内容进行添加"):void this._add_cust_template(this.type,t,function(){e.dialog.showSuccess("添加成功")})},this)),s.find(".signature-update").on("click",e.proxy(function(){p._hide_all_sub_dialog(this.$d,"update-sign");var e=this.$d.find(".update-sign");"none"==e.css("display")?(e.css("display","block"),s.find("input[name=signature]").val(this.config.signature),s.find("input[name=signature]").focus()):e.css("display","none")},this)),s.find(".signature .close").on("click",e.proxy(function(){var e=this.$d.find(".update-sign");e.css("display","none")},this)),s.find(".sign-save").on("click",e.proxy(function(){var t=e.trim(this.$d.find("input[name=signature]").val());if(""==t)return void e.dialog.alert("请输入短信签名");if(t.length>20)return void e.dialog.alert("您输入的签名过长，请重新输入，最大长度为20个字符");var i={signature:t};API.sms_config_signature_update(i,e.proxy(function(){this.config.signature=t,this.$d.find(".sign-content").text("【"+t+"】"),d.manual_change_num(),e.dialog.showSuccess("保存成功");var i=this.$d.find(".update-sign");i.css("display","none")},this))},this))}if(this._has_dom(".same-city-deliver")){var h=e(t.template.get("template.sms.type.sameCityDeliver",{})).appendTo(s.find(".same-city-deliver"));n.configs.sameCitySend&&"1"==n.configs.sameCitySend?h.find("input[value=1]").attr("checked",!0):h.find("input[value=0]").attr("checked",!0)}if(this._has_dom(".tips")&&e(t.template.get("template.sms.type.tips"+a,{})).appendTo(s.find(".tips")),this._has_dom(".sent-part")&&(n.startAt||(n.startAt=8),n.endAt||(n.endAt=22),e(t.template.get("template.sms.type.sentPart",{})).appendTo(s.find(".sent-part")),s.find("select[name=startAt] option[value="+n.startAt+"]").attr("selected",!0),s.find("select[name=endAt] option[value="+n.endAt+"]").attr("selected",!0)),this._has_dom(".order-price")){e(t.template.get("template.sms.type.orderPrice",{})).appendTo(s.find(".order-price"));var o=n.configs;o.tradePaymentStart||o.tradePaymentEnd?s.find(".order-price .price-custom").addClass("current"):s.find(".order-price .price-no-limit").addClass("current"),o.tradePaymentStart&&s.find("input[name=priceAt]").val(o.tradePaymentStart),o.tradePaymentEnd&&s.find("input[name=priceEnd]").val(o.tradePaymentEnd),s.find("input[name=priceAt]").numeral(!0,!1),s.find("input[name=priceEnd]").numeral(!0,!1)}if(this._has_dom(".sms-warn-count")){var f=e(t.template.get("template.sms.type.smsWarnCount",{})).appendTo(s.find(".sms-warn-count"));"undefined"==typeof n.configs.warnCount&&(n.configs.warnCount=100);var v=n.configs.warnCount;10==v||50==v||100==v||500==v?f.find(".warn-count-"+v).addClass("current"):(f.find(".warn-count-custom").addClass("current"),f.find("input[name=warnCountCustom]").val(v))}if(this._has_dom(".sent-mobile")){var g=[];if(n.configs.receiverMobiles&&""!=e.trim(n.configs.receiverMobiles)){var b=JSON.parse(n.configs.receiverMobiles);e.each(b,function(e,t){t.remark||(t.remark=""),g.push(e>0?{mobile:t.mobile,clz:"mt_10",remark:t.remark}:{mobile:t.mobile,clz:"",remark:t.remark})});var y=3-b.length;if(y>0)for(var x=0;y>x;x++)g.push({mobile:"",clz:"mt_10",remark:""})}else g=[{mobile:"",clz:"",remark:""},{mobile:"",clz:"mt_10",remark:""},{mobile:"",clz:"mt_10",remark:""}];e(t.template.get("template.sms.type.sentMobile",{mobileNumbers:g})).appendTo(s.find(".sent-mobile")),s.find("input[name=sendMobileNumber]").numeral(!1,!0),s.find("input[name=warnCountCustom]").numeral(!1,!0)}if(this._has_dom(".express-company")&&API.pt_wlb_user_tplnames({cpType:2},e.proxy(function(i){e(t.template.get("template.sms.type.expressCompany",{expresses:this._format_express_company_data(i.data,n)})).appendTo(s.find(".express-company")),s.find(".express-company").find("input[name=tplname]").iCheck(),s.find(".choose-express .choose-express-click").on("click",e.proxy(function(){p._hide_all_sub_dialog(s,"choose-express-popup");var e=this.$d.find(".choose-express-popup");"none"==e.css("display")?e.css("display","block"):e.css("display","none")},this)),s.find(".choose-express-popup .close").on("click",e.proxy(function(){var e=this.$d.find(".choose-express-popup");e.css("display","none")},this)),s.find(".choose-express-popup .choose-express-enter").on("click",e.proxy(function(){var e=this.$d.find(".choose-express-popup");e.css("display","none")},this)),""==n.configs.expressCode||"whole"==n.configs.expressCode?s.find(".express-company .whole-express").first().addClass("current"):s.find(".express-company .custom-express").last().addClass("current"),l.init(s.find(".express-company .ui-tag-group"))},this)),this._has_dom(".sys-rated")){var w=e(t.template.get("template.sms.type.sysRated",{})).appendTo(s.find(".sys-rated"));0==n.configs.buyerManualRate&&w.find("input[name=buyerManualRate_sys]").prop("checked",!0)}if(this._has_dom(".btns")){e(t.template.get("template.sms.type.btns",{})).appendTo(s.find(".btns"));var k=s.find(".send-message");k.find(".send-message-a").on("click",e.proxy(function(){p._hide_all_sub_dialog(s,"send-message-dashboard");var e=this.find(".common-popup");"none"==e.css("display")?e.css("display","block"):e.css("display","none")},k)),k.find(".send-message-dashboard .btn").on("click",e.proxy(function(){var i=e.trim(k.find("input[name=testMobile]").val());if(""==i)return void e.dialog.alert("请输入手机号码");var a={type:this.type,mobile:i};a.template=1==this.type||3==this.type||6==this.type?this.$d.find("textarea[name=template]").val():c.data.configs[this.type-1].template,API.sms_test_info(a,function(){e.dialog.showSuccess("发送成功"),t.pub("sms.sent.test",a)})},this)),k.find("input[name=testMobile]").numeral(!1,!0),k.find(".close").on("click",e.proxy(function(){var e=this.find(".common-popup");e.css("display","none")},k)),s.find(".save-btn").on("click",e.proxy(function(){c._validate_account_balance()&&this._handle_save_event()},this)),this.isOpen&&s.find(".save-btn").text("保存")}this.$dialogReceipt=e.dialog({title:i["type"+a],content:s.show()}),s.find("select").iSelect(),s.find("input[type=radio]").iCheck(),s.find("input[type=checkbox]").iCheck(),this._has_dom(".shorturl-copy-a")&&(s.find("a.shorturl-copy-a").zclip({path:"resources/js/ZeroClipboard.swf",copy:function(){return s.find("input[name=shorturl]")[0].value},afterCopy:function(){e.dialog.showSuccess('复制"'+s.find("input[name=shorturl]")[0].value+'"成功')}}),s.find(".generate-shorturl-popup").hide(),s.find(".shorturl_copy").hide()),this._has_dom(".blacklist-main")&&s.find("input[name=blacklist]").on("ifChecked",e.proxy(function(){p._clear_blacklist(this.$d);var e=p._get_blacklist_scope(this.$d),t=p.config;p._fill_blacklist(this.$d,p._parseBlacklist(1==e?t.globalBlacklist:t.blacklist))},this)),l.init(s.find(".ui-tag-group"),function(){var e=this.$tag.parent();if(e.hasClass("message-template-tab")){var t="系统模板"==this.$tag.text()?!0:!1;p._handle_message_template_tab_switch(t,p.$d)}})},_get_save_params:function(){var t={id:this.config.id,type:this.config.type,openSettings:!0};if(t.configs={},1==this.type)if(this.$d.find(".sent-after-group").find("span[data-value=-1]").hasClass("current")){var i=e.trim(this.$d.find(".sent-after-custom").val());""!=i&&(t.configs.afterCreateTrade=60*parseInt(i))}else t.configs.afterCreateTrade=this.$d.find(".sent-after-group").find(".current").attr("data-value");if(1==this.type||2==this.type||3==this.type||6==this.type||9==this.type){if(t.startAt=parseInt(this.$d.find("select[name=startAt]").val()),t.endAt=parseInt(this.$d.find("select[name=endAt]").val()),this.$d.find(".price-custom").hasClass("current")){var a=e.trim(this.$d.find("input[name=priceAt]").val()),s=e.trim(this.$d.find("input[name=priceEnd]").val());""!=a&&(t.configs.tradePaymentStart=a),""!=s&&(t.configs.tradePaymentEnd=s)}else t.configs.tradePaymentStart="",t.configs.tradePaymentEnd="";t.useGlobalBlacklist=this.$d.find(".use-blacklist").hasClass("current")?parseInt(this.$d.find("input[name=blacklist]:checked").val()):0,t.template=e.trim(this.$d.find("textarea[name=template]").val())}if(6==this.type){var n=this.$d.find("input[name=sameCityDeliver]:checked").val();t.configs.sameCitySend=n}if((11==this.type||12==this.type)&&(this.$d.find(".sms-warn-count .warn-count-custom").hasClass("current")?t.configs.warnCount=this.$d.find("input[name=warnCountCustom]").val():this.$d.find(".sms-warn-count .warn-count-10").hasClass("current")?t.configs.warnCount=10:this.$d.find(".sms-warn-count .warn-count-50").hasClass("current")?t.configs.warnCount=50:this.$d.find(".sms-warn-count .warn-count-100").hasClass("current")?t.configs.warnCount=100:this.$d.find(".sms-warn-count .warn-count-500").hasClass("current")&&(t.configs.warnCount=500)),9==this.type){var l=this.$d.find("input[name=buyerManualRate_sys]").prop("checked");t.configs.buyerManualRate=l?0:1}if(11==this.type||12==this.type){var d=[];this.$d.find("input[name=sendMobileNumber]").each(function(t,i){var a={},s=e.trim(i.value);if(""!=s){a.mobile=s;var n=e(i).next().next();""!=e.trim(n.val())&&(a.remark=e.trim(n.val())),d.push(a)}}),d.length>0&&(t.configs.receiverMobiles=JSON.stringify(d))}if(12==this.type)if("全部快递公司"==this.$d.find(".express-company .ui-tag-group .current").text())t.configs.expressCode="whole";else{var o=[];this.$d.find(".express-company input[name=tplname]:checked").each(function(e,t){o.push(t.value)}),t.configs.expressCode=o.join(",")}return t},_validate_params:function(t){if(1==t.type){if(t.configs.afterCreateTrade&&isNaN(t.configs.afterCreateTrade))return e.dialog.alert("请输入正确的拍下后的时间，例如1"),!1;var i=4320;if(t.configs.afterCreateTrade>i)return e.dialog.alert("自定义时间最大不能超过72个小时，请重新输入"),!1}if(1==t.type||2==t.type||3==t.type||6==t.type||9==t.type){if(t.configs.tradePaymentStart&&isNaN(t.configs.tradePaymentStart))return e.dialog.alert("请输入正确的订单金额，例如10.00元或者10元"),!1;if(t.configs.tradePaymentEnd&&isNaN(t.configs.tradePaymentEnd))return e.dialog.alert("请输入正确的订单金额，例如10.00元或者10元"),!1;if(t.configs.tradePaymentStart&&t.configs.tradePaymentEnd&&parseFloat(t.configs.tradePaymentStart)>=parseFloat(t.configs.tradePaymentEnd))return e.dialog.alert("输入的开始金额需要小于结束金额"),!1;if(!t.template||""==t.template)return e.dialog.alert("请设置短信模板"),!1;if(t.startAt>=t.endAt)return e.dialog.alert("开始时间不能晚于结束时间"),!1}if(11==t.type||12==t.type){if(!t.configs.warnCount)return e.dialog.alert("请输入警戒值"),!1;if(isNaN(t.configs.warnCount))return e.dialog.alert("请输入正确的警戒值，例如12"),!1;if(!t.configs.receiverMobiles)return e.dialog.alert("请输入手机号码"),!1;var a=JSON.parse(t.configs.receiverMobiles);if(0==a.length)return e.dialog.alert("请输入手机号码"),!1;for(var s=0;s<a.length;s++){var n=a[s].mobile;if(!n)return e.dialog.alert("请输入手机号码"),!1;if(isNaN(n)||11!=n.length)return e.dialog.alert("请输入正确的手机号码"),!1;var l=n.substring(0,2);if("13"!=l&&"14"!=l&&"15"!=l&&"17"!=l&&"18"!=l)return e.dialog.alert("请输入正确的手机号码"),!1}}return 12==t.type&&""==t.configs.expressCode?(e.dialog.alert("请选择快递公司"),!1):!0},_handle_save_event:function(){var i=this._get_save_params();this._validate_params(i)&&API.sms_config_update(i,e.proxy(function(){e.dialog.showSuccess("保存并开启成功"),this.$dialogReceipt.close(),t.pub("settings.open",i)},this))},get_textarea_select_start:function(e){e.focus();var t=0;if(e.selectionStart)t=e.selectionStart;else if(document.selection){var i=document.selection.createRange();if(null==i)t=e.value.length;else{var a=e.createTextRange(),s=a.duplicate();a.moveToBookmark(i.getBookmark()),s.setEndPoint("EndToStart",a),t=s.text.length}}else t=e.value.length;return t},set_textarea_cur_pos:function(e,t){if(e.focus(),e.setSelectionRange)e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}},c={name:"sms.settings",depend:"sms",_dom_root:"#main",_load:!1,_template_name:"template.sms.settings",_template_account_name:"template.sms.settings.account",_template_config_name:"template.sms.settings.config",_template_config_type_name:"template.sms.settings.config.type",_template_statistics_name:"template.sms.settings.statistics",_render_statistics:function(i){this.$el.find(".setting-record"),this.statistics_data=this._format_statistics_data(i),e(t.template.get(this._template_statistics_name,this.statistics_data)).appendTo(this.$el.find(".setting-record")),this.$el.find(".setting-record").append(e(t.template.get(this._template_statistics_name+".detail",this._format_statistics_data(i)))),l.init(this.$el,this._event_handle("_handle_statistics_load_event")),this.$el.find(".refresh-btn").on("click",this._event_handle("_handle_statistics_load_event")),this.$el.find(".refresh-btn").iTip({skin:"blue",triggerType:"hover",content:"刷新"}),this._bind_statistics_redirect_event()},_bind_statistics_redirect_event:function(){this.$el.find(".J_Total").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_Send").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_Received").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_PAY_REMIND").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_PAY_CARE").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_RATED_THX").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_SMS_Not_Enough").on("click",this._event_handle("_handle_redirect")),this.$el.find(".J_WLB_Not_Enough").on("click",this._event_handle("_handle_redirect"))},_unbind_statistics_redirect_event:function(){this.$el.find(".J_Total").off("click"),this.$el.find(".J_Send").off("click"),this.$el.find(".J_PAY_REMIND").off("click"),this.$el.find(".J_PAY_CARE").off("click"),this.$el.find(".J_RATED_THX").off("click"),this.$el.find(".J_Received").off("click"),this.$el.find(".J_SMS_Not_Enough").off("click"),this.$el.find(".J_WLB_Not_Enough").off("click")},_render:function(i){this._load||(this.data=i,this.$el=e(t.template.get(this._template_name,i.account)).appendTo(this._dom_root),e(t.template.get(this._template_account_name,i.account)).appendTo(this.$el.find(".setting-account")),e(t.template.get(this._template_config_name,{})).appendTo(this.$el.find(".setting-main")),this._render_statistics(i.sendStatistics),this._rend_config(i.configs),this._bind_config_onoff_event(),this._bind_detail_show_event(),this._bind_on_all_config_event(),this._bind_recharge_show_event(),n.init(function(t){var i=parseInt(t.attr("data-type")),a=c.data.configs[i-1];e(".message-box .text").text(a.template?"【"+c.data.signature+"】"+a.template:"")},function(){e(".message-box .text").text("选择相应的短信服务预览短信内容")}),this._load=!0)},_rend_config:function(i){this.$el.find(".step-list").append(e(t.template.get(this._template_config_type_name,this._format_config_data(i))))},_format_config_data:function(e){for(var t=function(e){return e?"ui-switch-on":"ui-switch-off"},i={},a=0;a<e.length;a++){var s={};s._class=t(e[a].open),i["type"+e[a].type]=s}return i},_format_statistics_data:function(e){for(var t={type1:0,type2:0,type3:0,type4:0,type5:0,type6:0,type7:0,type8:0,type9:0,type10:0,type11:0,type12:0,total:e.total},i=0;i<e.groups.length;i++){var a=e.groups[i];1==a.type?t.type1=a.total:2==a.type?t.type2=a.total:3==a.type?t.type3=a.total:4==a.type?t.type4=a.total:5==a.type?t.type5=a.total:6==a.type?t.type6=a.total:7==a.type?t.type7=a.total:8==a.type?t.type8=a.total:9==a.type?t.type9=a.total:10==a.type?t.type10=a.total:11==a.type?t.type11=a.total:12==a.type&&(t.type12=a.total)}var s=new Date,n=new Date(s);n.setDate(n.getDate()-1);var l=new Date(s);return l.setDate(s.getDate()-7),t.todaystart=this._format_date(s),t.yesterdaystart=this._format_date(n),t.yesterdayend=this._format_date(s),t.pre7daystart=this._format_date(l),t},_format_date:function(e){var t="-",i=":",a=e.getMonth()+1,s=e.getDate();return a>=1&&9>=a&&(a="0"+a),s>=0&&9>=s&&(s="0"+s),e.getFullYear()+t+a+t+s+" 00"+i+"00"},_fn_ctrl_userSmsIndex:function(e){API.user_sms_index({},function(t){e(t.data)})},_fn_ctrl_smsLogGroup:function(e,t){API.sms_log_group(e,function(e){t(e.data)})},_fn_ctrl_smsConfigOnall:function(e){API.sms_config_onall({},function(t){e(t.data)})},_fn_ctrl_smsConfigOnoff:function(e,t){API.sms_config_onoff(e,function(e){t(e.data)})},_fn_ctrl_smsInfo:function(){API.user_sms_info({},e.proxy(function(e){var t=this.$el.find(".setting-account .num");this.data.account=e.data,t.text(e.data.balance)
},this))},_find_type_in_dom:function(e,t){return e.hasClass(t+"1")?1:e.hasClass(t+"2")?2:e.hasClass(t+"3")?3:e.hasClass(t+"4")?4:e.hasClass(t+"5")?5:e.hasClass(t+"6")?6:e.hasClass(t+"7")?7:e.hasClass(t+"8")?8:e.hasClass(t+"9")?9:e.hasClass(t+"10")?10:e.hasClass(t+"11")?11:12},_show_on_config:function(e){this.$el.find(".switch-type"+e).removeClass("ui-switch-off").addClass("ui-switch-on")},_on_config:function(t){var i={open:1,type:t};return 11==t||12==t?void this._handle_detail_show_event(null,function(t,a,s){var n=!0;if("undefined"!=typeof s.configs.receiverMobiles)try{var l=JSON.parse(s.configs.receiverMobiles);l.length>0&&(n=!1)}catch(d){}n?e.dialog({title:"",cancel:!0,ok:function(){return p.init(t,a,s),!0},okVal:"确认",fixed:!0,lock:!0,resize:!1,close:function(){},content:"请先填写卖家接收手机号！"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""}):c._fn_ctrl_smsConfigOnoff(i,e.proxy(function(){this._show_on_config(t),this.data.configs[t-1].open=!0},c))},t):void this._fn_ctrl_smsConfigOnoff(i,e.proxy(function(){this._show_on_config(t),this.data.configs[t-1].open=!0},this))},_off_config:function(t){var i={open:0,type:t};this._fn_ctrl_smsConfigOnoff(i,e.proxy(function(){this.$el.find(".switch-type"+t).removeClass("ui-switch-on").addClass("ui-switch-off"),this.data.configs[t-1].open=!1},this))},_validate_account_balance:function(){return 0==c.data.account.balance?(e.dialog({title:"",cancel:!0,ok:function(){return c._handle_recharge_show_event(),!0},okVal:"充值",fixed:!0,lock:!0,resize:!1,close:function(){},content:"您的短信余额不足，请先充值！"}).time(0,function(){this.DOM.icon[0].innerHTML='<img src="http://static.superboss.cc/newweb/js/dev/global/skins/icons/warn.png" class="ui_icon_bg"/>',this.DOM.icon[0].style.display=""}),!1):!0},_get_log_date:function(){var e=this.$el.find(".sms_sent_group").find(".current");return"今天"==e.text()?1:"昨天"==e.text()?2:3},_create_log_redirect_addr:function(e){var t=this._get_log_date(),i="#/sms/sent_log/?";return 0!=e&&(i+="type="+e+"&"),1==t?i+"startAt="+this.statistics_data.todaystart:2==t?i+"startAt="+this.statistics_data.yesterdaystart+"&endAt="+this.statistics_data.yesterdayend:i+"startAt="+this.statistics_data.pre7daystart},_handle_redirect:function(t){var i=e(t.target),a=3;i.hasClass("J_Send")?a=3:i.hasClass("J_Received")?a=6:i.hasClass("J_SMS_Not_Enough")?a=11:i.hasClass("J_WLB_Not_Enough")?a=12:i.hasClass("J_Total")?a=0:i.hasClass("J_PAY_REMIND")?a=1:i.hasClass("J_PAY_CARE")?a=2:i.hasClass("J_RATED_THX")&&(a=9);var s=this._create_log_redirect_addr(a);window.location=s},_handle_config_type_on_event:function(t){var i=this._find_type_in_dom(e(t.target).parent(),"switch-type");this._off_config(i)},_handle_config_type_off_event:function(t){if(this._validate_account_balance()){var i=this._find_type_in_dom(e(t.target).parent(),"switch-type");this._on_config(i)}},_handle_detail_show_event:function(i,a,s){var n=s?s:this._find_type_in_dom(e(i.target).parent().parent(),"config-type"),l=t.template.get("template.sms.type"+n,{});""!==l&&(l=e(l),API.sms_config_info({type:n},e.proxy(function(t){return a&&"function"==typeof a?void e.proxy(a(n,l,t.data),this):void p.init(n,l,t.data)},this)))},_handle_on_all_config_event:function(){this._validate_account_balance()&&this._fn_ctrl_smsConfigOnall(e.proxy(function(e){for(var t=0;t<e.length;t++)this._show_on_config(e[t])},this))},_handle_recharge_show_event:function(){var i=t.template.get("template.sms.settings.recharge",{});i=e(i),r.init(i)},_handle_statistics_load_event:function(){var i=this.$el.find(".sms_sent_group .current"),a={};a.timeType="今天"==i.text()?1:"昨天"==i.text()?2:3,this._unbind_statistics_redirect_event(),this._fn_ctrl_smsLogGroup(a,e.proxy(function(i){this.$el.find(".record-detail").remove(),this.$el.find(".setting-record").append(e(t.template.get(this._template_statistics_name+".detail",this._format_statistics_data(i)))),this._bind_statistics_redirect_event()},this))},_event_handle:function(t){return e.proxy(this[t],this)},_bind_config_type_onoff_event:function(e){this.$el.find(".config-type"+e+" .ui-switch-label-on").on("click",this._event_handle("_handle_config_type_on_event")),this.$el.find(".config-type"+e+" .ui-switch-label-off").on("click",this._event_handle("_handle_config_type_off_event"))},_bind_config_onoff_event:function(){this._bind_config_type_onoff_event(1),this._bind_config_type_onoff_event(2),this._bind_config_type_onoff_event(3),this._bind_config_type_onoff_event(6),this._bind_config_type_onoff_event(9),this._bind_config_type_onoff_event(11),this._bind_config_type_onoff_event(12)},_bind_detail_type_show_event:function(e){this.$el.find(".config-type"+e+" .btn").on("click",this._event_handle("_handle_detail_show_event"))},_bind_detail_show_event:function(){this._bind_detail_type_show_event(1),this._bind_detail_type_show_event(2),this._bind_detail_type_show_event(3),this._bind_detail_type_show_event(6),this._bind_detail_type_show_event(9),this._bind_detail_type_show_event(11),this._bind_detail_type_show_event(12)},_bind_on_all_config_event:function(){this.$el.find(".on-all-config").on("click",this._event_handle("_handle_on_all_config_event"))},_bind_recharge_show_event:function(){this.$el.find(".message-recharge").on("click",this._event_handle("_handle_recharge_show_event"))},_unbind_config_type_onoff_event:function(e){this.$el.find(".config-type"+e+" .ui-switch-label-on").off("click"),this.$el.find(".config-type"+e+" .ui-switch-label-off").off("click")},_unbind_config_onoff_event:function(){this._unbind_config_type_onoff_event(1),this._unbind_config_type_onoff_event(2),this._unbind_config_type_onoff_event(3),this._unbind_config_type_onoff_event(6),this._unbind_config_type_onoff_event(9),this._unbind_config_type_onoff_event(11),this._unbind_config_type_onoff_event(12)},_unbind_detail_type_show_event:function(e){this.$el.find(".config-type"+e+" .btn").off("click")},_unbind_detail_show_event:function(){this._unbind_detail_type_show_event(1),this._unbind_detail_type_show_event(2),this._unbind_detail_type_show_event(3),this._unbind_detail_type_show_event(6),this._unbind_detail_type_show_event(9),this._unbind_detail_type_show_event(11),this._unbind_detail_type_show_event(12)},_unbind_on_all_config_event:function(){this.$el.find(".on-all-config").off("click",this._event_handle("_handle_on_all_config_event"))},_unbind_recharge_show_event:function(){},init:function(){},update:function(i,a){this.$el||(this.$el=[]),this._fn_ctrl_userSmsIndex(e.proxy(function(e){this._render(e)},this)),t.sub("settings.open",e.proxy(function(e){var t=e.type;this.$el.find(".switch-type"+t).removeClass("ui-switch-off").addClass("ui-switch-on"),this.data.configs[t-1].open=!0,e.template&&(this.data.configs[t-1].template=e.template)},this)),t.sub("sms.sent.test",e.proxy(function(){this.to&&clearTimeout(this.to),this.to=setTimeout(e.proxy(function(){this._fn_ctrl_smsInfo(),this.to=null},this),1e3)},this)),t.sub("sms.account.flash",e.proxy(function(){this._fn_ctrl_smsInfo()},this)),a&&a()},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._unbind_config_onoff_event(),this._unbind_detail_show_event(),this._unbind_on_all_config_event(),this._unbind_recharge_show_event(),this._unbind_statistics_redirect_event(),l.destroy(this.$el),this.$el.empty().remove(),this.$el=null,this._load=!1)}};t.modules.define(c.name,c)}(jQuery,RayCloud),function(e,t){var i=["<li>","{{nick}}",'<a class="small-close nick-close" href="javascript:;">×</a>',"</li>"],a=['<li act-loop="nick in nicks">',"{{nick.nick}}",'<a class="small-close nick-close" href="javascript:;">×</a>',"</li>"],s=['<label class="ui-label">黑名单过滤：</label>','<div class="ui-tag-group ui-tag-group-s1 blacklist-filter">','<span class="tag non-blacklist">不过滤</span>','<span class="tag use-blacklist">过滤黑名单</span>','<div class="set-blacklist ml_10">','<a class="link" href="javascript:;">设置黑名单</a>',"<!-- 设置黑名单的模板 -->",'<div style="display: none;" class="common-popup blacklist-dashboard">','<a class="close" href="javascript:;">×</a>','<div class="tab-nav">',"<label>",'<span class="check radio"><input type="radio" name="blacklist" value="1" autocomplete="off"></span>使用全局黑名单',"</label>",'<label class="ml_15">','<span class="check radio"><input type="radio" name="blacklist" value="2" autocomplete="off"></span>使用{{typeName}}黑名单',"</label>","</div>",'<div class="tab-con mt_10">','<div class="item">',"<span>买家旺旺：</span>",'<input style="width: 210px;" type="text" name="blacklistNick"/>','<a class="btn btn-primary add-blacklist" href="javascript:;">加入黑名单</a>',"</div>",'<div class="item mt_10" style="display:none;">',"<span>批量导入：</span>",'<a class="btn" href="javascript:;" >差评买家</a>','<a class="btn ml_5" href="javascript:;" >中评买家</a>','<a class="btn ml_5" href="javascript:;" >中差评买家</a>',"</div>",'<div class="blacklist-box mt_15">','<p class="blacklist-count">目前已加入黑名单：<strong>{{count}}</strong></p>','<div class="list">','<ul class="clearfix blacklist-nicks">',"</ul>","</div>","</div>","</div>","</div>","</div>","</div>"],n=["<ul>",'<li act-loop="tpl in templates" class="list-item list-system-item">','<label for="">','<span class="check radio"><input type="radio" name="sysTpl" value="{{tpl.id}}" autocomplete="off"></span>','<div class="text">{{tpl.template}}</div>',"</label>","</li>","</ul>"],l=["<ul>",'<li act-loop="tpl in templates" class="list-item list-custom-item">','<label for="">','<span class="check radio"><input type="radio" name="custTpl" value="{{tpl.id}}" autocomplete="off"></span>','<div class="text">{{tpl.template}}</div>',"</label>",'<div class="operation">','<a href="javascript:;"  class="template-update">修改</a>','<span class="line">|</span>','<a href="javascript:;" class="template-delete">删除</a>',"</div>","</li>",'<li class="list-item add-item">','<a href="javascript:;">新增模板</a>',"</li>","</ul>"],d=['<li class="list-item list-custom-item">','<label for="">','<span class="check radio"><input type="radio" name="custTpl" value="{{id}}" autocomplete="off"></span>','<div class="text">{{template}}</div>',"</label>",'<div class="operation">','<a href="javascript:;" class="template-update">修改</a>','<span class="line">|</span>','<a href="javascript:;" class="template-delete">删除</a>',"</div>","</li>"],o=['<li class="list-item list-edit-item current">','<label for="">','<span class="check radio "><input type="radio" name="custTpl" value="{{id}}" autocomplete="off"></span>','<textarea name="editTemplate">{{template}}</textarea>','<a class="btn btn-small cancel-edit-template" href="javascript:;">取消</a>','<a class="btn btn-small btn-primary save-edit-template" href="javascript:;">保存</a>',"</label>","</li>"],r=['<div class="edit-hd">',"<h3>短信编辑</h3>",'<div class="operations">','<a href="javascript:;" class="change-template">换个短信模板</a>','<a href="javascript:;" class="generate-shorturl">生成短链接</a>','<a href="javascript:;" class="add-template">添加到短信模板</a>',"</div>","<!-- 换个短信模板面板 -->",'<div style="display: none;" class="common-popup message-template mt_30">','<a class="close" href="javascript:void(0);">×</a>','<div class="ui-tag-group ui-tag-group-small message-template-tab">','<span class="tag current">系统模板</span>','<span class="tag">自定义模板</span>',"</div>",'<div class="tab-con sys-template">',"</div>",'<div class="tab-con cust-template" style="display:none;">',"</div>","</div>","<!-- 生成短链接的模板 -->",'<div style="display: block;" class="common-popup link-popup generate-shorturl-popup">','<a class="close" href="javascript:;">×</a>','<div class="item">','<input style="width: 180px;" type="text" name="longurl" placeholder="以http://或者https://开头" />','<a class="btn ml_5 shorturl-generate" href="javascript:void(0);">生成短链接</a>',"</div>",'<div class="item mt_10 shorturl_copy" style="display:block;">','<input style="width: 180px;" type="text" name="shorturl"/>','<a class="btn ml_5 shorturl-copy-a" href="#">复制</a>',"</div>","</div>","</div>",'<div class="edit-bd">','<div class="text">','<textarea name="template"></textarea>',"</div>",'<div class="signature">','<div class="fl">','签名：<span class="sign-content">【{{signature}}】</span>','<a href="javascript:void(0);" class="ml_5 signature-update">修改</a>',"<!-- 修改签名的模板 -->",'<div style="display: none;" class="update-sign">','<div class="common-popup">','<a class="close" href="javascript:void(0);">×</a>','<input style="width: 120px;" type="text" name="signature"/>','<a class="btn btn-primary ml_5 sign-save" href="javascript:;">保存</a>',"</div>","</div>","</div>",'<div class="fr">','已经输入<span class="num highlight wrote_num">57</span>/<span class="num one-message-num">66</span>（约需要<span class="message-num highlight">1</span>条短信）','<div class="charging-rules ml_5 inline-block">','<a href="javascript:;" class="charging-rules-a">计费规则</a>',"<!-- 计费规则的模板 -->",'<div class="rule-popup" style="display: none;">',"<ul>","<li>","1、一条短信超过66字算作两条短信，以此类推。","</li>","<li>","2、一个汉字、字母或标点都算作一个字。","</li>","<li>","3、带签名短信以实际发送为准，有可能超过默认字数。","</li>","</ul>","<i></i>","</div>","</div>","</div>","</div>","</div>"],p=['<div class="tags message-tag">',"可插入标签：",'<a href="javascript:;">#店铺名称#</a>','<a href="javascript:;">#买家旺旺#</a>','<a href="javascript:;">#收件人姓名#</a>','<a href="javascript:;">#下单时间#</a>',"</div>"],c=['<div class="tags message-tag">',"可插入标签：",'<a href="javascript:;">#店铺名称#</a>','<a href="javascript:;">#买家旺旺#</a>','<a href="javascript:;">#收件人姓名#</a>','<a href="javascript:;">#下单时间#</a>',"</div>"],_=['<div class="tags message-tag">',"可插入标签：",'<a href="javascript:;">#店铺名称#</a>','<a href="javascript:;">#买家旺旺#</a>','<a href="javascript:;">#收件人姓名#</a>','<a href="javascript:;">#订单编号#</a>','<a href="javascript:;">#快递公司#</a>','<a href="javascript:;">#运单号#</a>','<a href="javascript:;">#发货日期#</a>',"</div>"],m=['<div class="tags message-tag">',"可插入标签：",'<a href="javascript:;">#店铺名称#</a>','<a href="javascript:;">#买家旺旺#</a>','<a href="javascript:;">#收件人姓名#</a>','<a href="javascript:;">#收件人城市#</a>','<a href="javascript:;">#快递公司#</a>','<a href="javascript:;">#运单号#</a>',"</div>"],u=['<div class="tags message-tag">',"可插入标签：",'<a href="javascript:;">#店铺名称#</a>','<a href="javascript:;">#买家旺旺#</a>','<a href="javascript:;">#收件人姓名#</a>',"</div>"],h=['<label class="ui-label">发送时段：</label>','<select name="startAt" data-zIndex="1008600">','<option value="8">8:00</option>','<option value="9">9:00</option>','<option value="10">10:00</option>','<option value="11">11:00</option>','<option value="12">12:00</option>','<option value="13">13:00</option>','<option value="14">14:00</option>','<option value="15">15:00</option>','<option value="16">16:00</option>','<option value="17">17:00</option>','<option value="18">18:00</option>','<option value="19">19:00</option>','<option value="20">20:00</option>','<option value="21">21:00</option>','<option value="22">22:00</option>',"</select>","—",'<select name="endAt" data-zIndex="1008600">','<option value="8">8:00</option>','<option value="9">9:00</option>','<option value="10">10:00</option>','<option value="11">11:00</option>','<option value="12">12:00</option>','<option value="13">13:00</option>','<option value="14">14:00</option>','<option value="15">15:00</option>','<option value="16">16:00</option>','<option value="17">17:00</option>','<option value="18">18:00</option>','<option value="19">19:00</option>','<option value="20">20:00</option>','<option value="21">21:00</option>','<option value="22">22:00</option>',"</select>",'<span class="explain ml_5">（其余时段自动延时发送）</span>'],f=['<label class="ui-label">同城发货：</label>','<label class="mr_20">','<input type="radio" name="sameCityDeliver" value="0"/> 不发送',"</label>",'<label class="mr_20">','<input type="radio" name="sameCityDeliver" value="1" /> 发送',"</label>"],v=['<label class="ui-label">订单金额：</label>','<div class="ui-tag-group ui-tag-group-s1 ">','<span class="tag price-no-limit">不限</span>','<span class="tag price-custom">自定义</span>','<span class="custom-area">','<input class="ml_10" style="width: 40px;" type="text" name="priceAt"/>',"—",'<input style="width: 40px;" type="text" name="priceEnd"/>  元',"</span>","</div>"],g=['<label class="ui-label">订单拍下后：</label>','<div class="ui-tag-group ui-tag-group-s1 sent-after-group">','<span class="tag" data-value="10">10分钟</span>','<span class="tag" data-value="20">20分钟</span>','<span class="tag" data-value="30">30分钟</span>','<span class="tag" data-value="60">1小时</span>','<span class="tag" data-value="-1">自定义</span>','<span class="custom-area "><input class="ml_10 sent-after-custom" style="width: 40px;" type="text"> 小时</span>',"</div>"],b=['<label class="ui-label">警戒值：</label>','<div class="ui-tag-group ui-tag-group-s1">','<span class="tag warn-count-10">10条</span>','<span class="tag warn-count-50">50条</span>','<span class="tag warn-count-100">100条</span>','<span class="tag warn-count-500" >500条</span>','<span class="tag warn-count-custom">自定义</span>','<span class="custom-area">','<input class="ml_10 mr_10" type="text" name="warnCountCustom" style="width: 40px;">',"条","</span>","</div>"],y=['<label class="ui-label">发送手机：</label>','<div act-loop="mobileNumber in mobileNumbers" class="{{mobileNumber.clz}} sent-mobile-edit">','<input placeholder="必填" type="text" style="width: 140px;" name="sendMobileNumber" value="{{mobileNumber.mobile}}">','<span class="ml_30" style="font-size: 14px;">备注：</span><input placeholder="选填" type="text" style="width: 140px;" name="sendMobileRemark" value="{{mobileNumber.remark}}">',"</div>"],x=['<label class="ui-label">快递公司：</label>','<div class="ui-tag-group ui-tag-group-s1">','<span class="tag whole-express">全部快递公司</span>','<span class="tag custom-express">自定义</span>','<div class="ml_10 choose-express">','<a class="link choose-express-click" href="javascript:;">选择快递公司</a>','<div class="common-popup choose-express-popup" style="display:none;">','<a class="close" href="javascript:void(0);">×</a>','<div class="company-list">','<label act-loop="express in expresses">','<input type="checkbox" autocomplete="off" value="{{express.cpCode}}" name="tplname" {{express.checked}}>',"{{express.templateName}}","</label>","</div>",'<div class="ta-c">','<a class="btn btn-small btn-primary choose-express-enter" href="javascript:;">收起</a>',"</div>","</div>","</div>","</div>"],w=['<label class="ui-label">评价类型：</label>','<label class="mr_20">','<input type="checkbox" name="buyerManualRate" value="0" checked disabled/> 买家主动好评',"</label>",'<label class="mr_20">','<input type="checkbox" name="buyerManualRate_sys" value="1" /> 系统默认好评',"</label>"],k=["<h3>温馨小贴士</h3>","<ul>","<li>","1、同一旺旺且是同一手机号，当天只发送1次；","</li>","<li>","2、拍下多笔订单，只要有未付款的订单，就会发送短信","</li>","</ul>"],T=["<h3>温馨小贴士</h3>","<ul>","<li>","1、不在发送时段的短信自动延时发送，若订单已发货则自动取消短信","</li>","</ul>"],S=["<h3>温馨小贴士</h3>","<ul>","<li>","1、不在发送时段的短信自动延时发送，若订单已确认收货则自动取消短信","</li>","</ul>"],C=["<h3>温馨小贴士</h3>","<ul>","<li>","1、不在发送时段的短信自动延时发送，若订单已确认收货则自动取消短信","</li>","</ul>"],I=["<h3>温馨小贴士</h3>","<ul>","<li>","1、同一旺旺且是同一手机号，当天只发送1次；","</li>","<li>","2、不在发送时段的短信自动延时发送","</li>","</ul>"],E=['<button type="button" class="save-btn">保存并开启</button>','<div class="send-message ml_15">','<a class="link send-message-a" href="javascript:;" >发送测试短信</a>','<div class="common-popup send-message-dashboard" style="display:none">','<a class="close" href="javascript:;">×</a>','手机：<input style="width: 120px;" type="text" name="testMobile"/>','<a class="btn btn-primary ml_5" href="javascript:;">发送</a>',"</div>","</div>"],P=['<div class="common-tip-dialog to-pay-reminder">','<div class="ui-form">','<div class="ui-form-item sent-after">',"</div>",'<div class="ui-form-item sent-part">',"</div>",'<div class="ui-form-item order-price">',"</div>",'<div class="ui-form-item blacklist-main">',"</div>",'<div class="messages-edit">',"</div>",'<div class="btns">',"</div>",'<div class="tips">',"</div>","</div>","</div>"],$=['<div class="common-tip-dialog to-pay-reminder">','<div class="tip">',"订单付款后自动发送","</div>",'<div class="ui-form">','<div class="ui-form-item sent-part">',"</div>",'<div class="ui-form-item order-price">',"</div>",'<div class="ui-form-item blacklist-main">',"</div>",'<div class="messages-edit">',"</div>",'<div class="btns">',"</div>",'<div class="tips">',"</div>","</div>","</div>"],J=['<div class="common-tip-dialog to-pay-reminder">','<div class="tip">',"订单发货后自动发送","</div>",'<div class="ui-form">','<div class="ui-form-item sent-part">',"</div>",'<div class="ui-form-item order-price">',"</div>",'<div class="ui-form-item blacklist-main">',"</div>",'<div class="messages-edit">',"</div>",'<div class="btns">',"</div>",'<div class="tips">',"</div>","</div>","</div>"],N=['<div class="common-tip-dialog to-pay-reminder">','<div class="tip">',"快递到达买家所在城市，自动发送短信给买家","</div>",'<div class="ui-form">','<div class="ui-form-item sent-part">',"</div>",'<div class="ui-form-item same-city-deliver">',"</div>",'<div class="ui-form-item order-price">',"</div>",'<div class="ui-form-item blacklist-main">',"</div>",'<div class="messages-edit">',"</div>",'<div class="btns">',"</div>",'<div class="tips">',"</div>","</div>","</div>"],D=['<div class="common-tip-dialog to-pay-reminder">','<div class="tip">',"买家给出好评（双方已互评），自动发送","</div>",'<div class="ui-form">','<div class="ui-form-item sent-part">',"</div>",'<div class="ui-form-item sys-rated">',"</div>",'<div class="ui-form-item order-price">',"</div>",'<div class="ui-form-item blacklist-main">',"</div>",'<div class="messages-edit">',"</div>",'<div class="btns">',"</div>",'<div class="tips">',"</div>","</div>","</div>"],R=['<div class="common-tip-dialog sms-inadequate-reminder" >','<div class="tip">','<label for="">温馨小贴士：</label>',"当短信数量低于警戒值时，系统将及时提醒订阅的手机号码。 ","</div>",'<div class="ui-form">','<div class="ui-form-item sms-warn-count">',"</div>",'<div class="ui-form-item sent-mobile">',"</div>",'<div class="btns ui-form-item mt_10">',"</div>","</div>","</div>"],A=['<div class="common-tip-dialog wlb-inadequate-reminder" style="width:672px">','<div class="tip">','<label for="">温馨小贴士：</label>',"当电子面单余额低于警戒值时，系统将及时提醒订阅的手机号码。 ","</div>",'<div class="ui-form">','<div class="ui-form-item sms-warn-count">',"</div>",'<div class="ui-form-item express-company">',"</div>",'<div class="ui-form-item sent-mobile">',"</div>",'<div class="btns ui-form-item mt_10">',"</div>","</div>","</div>"];t.template.addTemp("template.sms.type1",P),t.template.addTemp("template.sms.type2",$),t.template.addTemp("template.sms.type3",J),t.template.addTemp("template.sms.type6",N),t.template.addTemp("template.sms.type9",D),t.template.addTemp("template.sms.type11",R),t.template.addTemp("template.sms.type12",A),t.template.addTemp("template.sms.type.blacklist",s),t.template.addTemp("template.sms.type.blacklist.nick",a),t.template.addTemp("template.sms.type.blacklist.nick.single",i),t.template.addTemp("template.sms.type.messageEdit",r),t.template.addTemp("template.sms.type.messageEdit.systpl",n),t.template.addTemp("template.sms.type.messageEdit.custpl",l),t.template.addTemp("template.sms.type.messageEdit.edittpl",o),t.template.addTemp("template.sms.type.messageEdit.custpl.single",d),t.template.addTemp("template.sms.type.messageEdit.tag1",p),t.template.addTemp("template.sms.type.messageEdit.tag2",c),t.template.addTemp("template.sms.type.messageEdit.tag3",_),t.template.addTemp("template.sms.type.messageEdit.tag6",m),t.template.addTemp("template.sms.type.messageEdit.tag9",u),t.template.addTemp("template.sms.type.sameCityDeliver",f),t.template.addTemp("template.sms.type.smsWarnCount",b),t.template.addTemp("template.sms.type.sentMobile",y),t.template.addTemp("template.sms.type.expressCompany",x),t.template.addTemp("template.sms.type.sysRated",w),t.template.addTemp("template.sms.type.tips1",k),t.template.addTemp("template.sms.type.tips2",T),t.template.addTemp("template.sms.type.tips3",S),t.template.addTemp("template.sms.type.tips6",C),t.template.addTemp("template.sms.type.tips9",I),t.template.addTemp("template.sms.type.sentPart",h),t.template.addTemp("template.sms.type.sentAfter",g),t.template.addTemp("template.sms.type.orderPrice",v),t.template.addTemp("template.sms.type.btns",E)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.widget.page"),a=(t.controls.get("control.form_util"),{getDatetime:function(i){var a=i.val();return a+=-1===a.indexOf(":")?" 00:00:00":":00",t.util.date.is_date(a)?t.util.date.tojsdate(a).getTime():void e.dialog.alert("开始时间格式不正确！",e.proxy(function(){i.focus()},this))}}),s={name:"sms.txn_log",depend:"sms",_dom_root:"#main",_template_name:"template.sms.txnlog",_page_size:10,_render:function(){this.$el||(this.$el=e(t.template.get(this._template_name,{})).appendTo(this._dom_root),this._query_and_render_logs(),this._bind_form_submit_event())},_query_and_render_logs:function(a){this.$el.find(".data-tr").remove(),this._fn_ctrl_smsTxList(a,function(a){var s=this._format_data(a.data.list);this.$el.find(".recharge-list table tbody").append(s.length>0?t.template.get("template.sms.txnlog.row",{txnLogs:s}):t.template.get("template.sms.txnlog.row.empty",{}));var n=parseInt(a.data.total/this._page_size+"")+(a.data.total%this._page_size==0?0:1);this.$el.find(".pagination-page").html(""),e(i.get_html("","",n,a.data.page.pageNo)).appendTo(this.$el.find(".pagination-page")),this.$el.find(".page-no").on("click",e.proxy(function(t){var i=e(t.target);this._query_and_render_logs(i.attr("data-key"))},this));var l=function(t,i){var a=t.$el.find(i).find("a");a.hasClass("disable")||a.on("click",e.proxy(function(t){var i=e(t.target);this._query_and_render_logs(i.attr("data-key"))},t))};l(this,".page-prev"),l(this,".page-next")})},_fn_ctrl_smsTxList:function(t,i){var s={};return""!=this.$el.find(".record-search input[name=startAt]").val()&&(s.startAt=a.getDatetime(this.$el.find(".record-search input[name=startAt]"))),""!=this.$el.find(".record-search input[name=endAt]").val()&&(s.endAt=a.getDatetime(this.$el.find(".record-search input[name=endAt]"))),s.startAt&&s.endAt&&s.startAt>s.endAt?(e.dialog.showWarn("开始时间必须小于结束时间！"),!1):(t&&(s.pageNo=t),s.pageSize=this._page_size,API.sms_tx_list(s,e.proxy(i,this)),!0)},_format_data:function(i){return"undefined"==typeof i?[]:(e.each(i,function(e,i){i.txnType=i.activeId>=101?"活动赠送":"充值购买",i.payment=(i.payment/100).toFixed(2),i.txnDatetime=t.util.date.getdate(i.txnDatetime,"YY-MM-DD HH:MM:SS")}),i)},_handle_form_submit_event:function(e){e.preventDefault(),this._query_and_render_logs()},_bind_form_submit_event:function(){this.$el.find(".record-search form").on("submit",this._event_handle("_handle_form_submit_event"))},_unbind_form_submit_event:function(){this.$el.find(".record-search form").off("submit")},_event_handle:function(t){return e.proxy(this[t],this)},init:function(){},update:function(e,t){this._render(),t&&t()},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._unbind_form_submit_event(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div class="record-list-box">','<div class="record-hd">',"<h3>短信充值记录</h3>","</div>",'<div class="record-search">','<form action="">','充值时间：<input type="text" class="date-picker" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startAt"> — <input type="text" class="date-picker mr_5" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="endAt">','<button class="ml_10 btn btn-primary" type="submit">查询</button>',"</form>","</div>",'<div class="recharge-list">',"<table>","<colgroup>",'<col width="262" />','<col width="240" />','<col width="240" />','<col width="240" />',"</colgroup>","<tr>","<th>充值时间</th>","<th>充值条数</th>","<th>充值形式</th>","<th>充值金额</th>","</tr>","</table>",'<div class="mb_30 mt_15 clearfix">','<div class="pagination-pages">','<div class="pagination-page">',"</div>","</div>","</div>","</div>","</div>"],a=['<tr act-loop="txnLog in txnLogs" class="data-tr">',"<td>{{txnLog.txnDatetime}}</td>","<td>{{txnLog.count}}</td>","<td>{{txnLog.txnType}}</td>","<td>{{txnLog.payment}}</td>","</tr>"],s=['<tr class="data-tr">','<td colspan="4" style="text-align:left;">','<div class="pd_30">暂无数据</div>',"</td>","</tr>"];t.template.addTemp("template.sms.txnlog",i),t.template.addTemp("template.sms.txnlog.row",a),t.template.addTemp("template.sms.txnlog.row.empty",s)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.widget.page"),a=(t.controls.get("control.form_util"),{getDatetime:function(i){var a=i.val();return a+=-1===a.indexOf(":")?" 00:00:00":":00",t.util.date.is_date(a)?t.util.date.tojsdate(a).getTime():void e.dialog.alert("开始时间格式不正确！",e.proxy(function(){i.focus()},this))}}),s={name:"sms.sent_log",depend:"sms",_dom_root:"#main",_template_name:"template.sms.sentlog",_page_size:10,_render:function(i){this.$el&&this.destroy(),this.$el=e(t.template.get(this._template_name,this._format_hash_data(i))).appendTo(this._dom_root),i.type&&this.$el.find('select[name="sentType"]').find("option[value="+i.type+"]").attr("selected","true"),this._query_and_render_logs(),this._bind_form_submit_event(),this.$el.find("select").iSelect()},_format_hash_data:function(e){var t={};return t.startAt=e.startAt?e.startAt:"",t.endAt=e.endAt?e.endAt:"",t.text=e.text?e.text:"",t},_format_list_data:function(i){return"undefined"==typeof i?[]:(e.each(i,function(e,i){i.sent&&(i.sentDatetime=t.util.date.getdate(i.sent,"YY-MM-DD HH:mm:ss")),"undefined"!=typeof i.status&&(i.statusDesc=0==i.status?"发送中":1==i.status?"发送成功":"发送失败"),i.buyerNick||(i.buyerNick=""),i.tid||(i.tid="")}),i)},_query_and_render_logs:function(a){this.$el.find(".data-tr").remove(),this._fn_ctrl_smsLogList(a,function(s){var n=this._format_list_data(s.data.list);this.$el.find(".record-list table tbody").append(n.length>0?t.template.get("template.sms.sentlog.row",{rows:n}):t.template.get("template.sms.sentlog.row.empty",{}));var l=parseInt(s.data.total/this._page_size+"")+(s.data.total%this._page_size==0?0:1);this.$el.find(".pagination-page").html(""),e(i.get_html("","",l,a)).appendTo(this.$el.find(".pagination-page")),this.$el.find(".page-no").on("click",e.proxy(function(t){var i=e(t.target);this._query_and_render_logs(i.attr("data-key"))},this));var d=function(t,i){var a=t.$el.find(i).find("a");a.hasClass("disable")||a.on("click",e.proxy(function(t){var i=e(t.target);this._query_and_render_logs(i.attr("data-key"))},t))};d(this,".page-prev"),d(this,".page-next")})},_fn_ctrl_smsLogList:function(t,i){var s={};if(""!=this.$el.find(".record-search input[name=startAt]").val()&&(s.startAt=a.getDatetime(this.$el.find(".record-search input[name=startAt]"))),""!=this.$el.find(".record-search input[name=endAt]").val()&&(s.endAt=a.getDatetime(this.$el.find(".record-search input[name=endAt]"))),s.startAt&&s.endAt&&s.startAt>s.endAt)return e.dialog.showWarn("开始时间必须小于结束时间！"),!1;var n=this.$el.find(".record-search select[name=sentType]").val();return"-1"!=n&&"0"!=n&&(s.type=n),s.text=this.$el.find(".record-search input[name=text]").val(),t&&(s.pageNo=t),s.pageSize=this._page_size,API.sms_log_list(s,e.proxy(i,this)),!0},_handle_form_submit_event:function(){this._query_and_render_logs()},_bind_form_submit_event:function(){this.$el.find(".record-search .log-query").on("click",this._event_handle("_handle_form_submit_event"))},_unbind_form_submit_event:function(){this.$el.find(".record-search .log-query").off("click")},_event_handle:function(t){return e.proxy(this[t],this)},init:function(){},update:function(e,t){this._render(e),t&&t()},getContainer:function(){return this.$el},destroy:function(){this.$el&&(this._unbind_form_submit_event(),this.$el.empty().remove(),this.$el=null)}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div class="record-list-box">','<div class="record-hd">',"<h3>短信发送记录</h3>","</div>",'<div class="record-search">','发送时间：<input type="text" class="date-picker" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startAt" value="{{startAt}}"> — <input type="text" class="date-picker mr_5" data-max-date="today" data-date-format="yyyy-mm-dd HH:MM" name="endAt" value="{{endAt}}">','<select name="sentType">','<option value="0">全部</option>','<option value="1">催付提醒</option>','<option value="2">付款关怀</option>','<option value="3">发货提醒</option>','<option value="6">到货提醒</option>','<option value="9">好评感谢</option>','<option value="11">短信不足提醒</option>','<option value="12">电子面单不足提醒</option>',"</select>",'<input class="ml_5 search-input" type="text" placeholder="订单号买家旺旺手机号" name="text" value="{{text}}">','<button class="ml_10 btn btn-primary log-query" >查询</button>',"</div>",'<div class="record-list">',"<table>","<colgroup>",'<col width="148" />','<col width="100" />','<col width="100" />','<col width="94" />','<col width="120" />','<col width="70" />','<col width="42" />','<col width="308" />',"</colgroup>","<tr>","<th>发送时间</th>","<th>短信类型</th>","<th>买家旺旺</th>","<th>手机号</th>","<th>订单号</th>","<th>发送状态</th>",'<th class="ta-c">短信数</th>','<th class="last">短信内容</th>',"</tr>","</table>",'<div class="mb_30 mt_15 clearfix">','<div class="pagination-pages">','<div class="pagination-page">',"</div>","</div>","</div>","</div>","</div>"],a=['<tr act-loop="row in rows" class="data-tr">',"<td>{{row.sentDatetime}}</td>","<td>{{row.typeName}}</td>","<td>{{row.buyerNick}}</td>","<td>{{row.sendMobile}}</td>","<td>{{row.tid}}</td>","<td>{{row.statusDesc}}</td>",'<td class="ta-c">{{row.count}}</td>','<td class="message-con">',"{{row.content}}","</td>","</tr>"],s=['<tr class="data-tr">','<td colspan="8" >','<div class="pd_30">暂无数据</div>',"</td>","</tr>"];
t.template.addTemp("template.sms.sentlog",i),t.template.addTemp("template.sms.sentlog.row",a),t.template.addTemp("template.sms.sentlog.row.empty",s)}(jQuery,RayCloud),function(e,t){function i(){}i.initData=function(e){if(e&&e.length){this.map={};for(var t=0;t<e.length;t++){var i=e[t].numIid||e[t].numId;this.map[i]=e[t]}}},i.getItemData=function(e){return this.map[e]},i.updateItemData=function(e,t){this.map[e]=t},t.controls.define("control.prod.dataModel",{init:function(){return i}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.shortsign"),a=['<div class="prod-modify-container">','<div class="platform" taobaoid="{{taobaoId}}" numiid="{{numIid}}" outerid="{{outerId}}">','<span class="plat-note">商品平台</span>','<span class="plat-note plat-name{{sysClsText}}" type="sys">系统</span>','<span class="plat-note plat-name{{tbClsText}}" type="tb">淘宝</span>','<span class="plat-note plat-name{{tmClsText}}" type="tm">天猫</span>','<div class="shop-info-tb-tm">',"</div>","</div>",'<div class="plat-prod-info">','<div class="shown-area">',"</div>","</div>","</div>"],s=['<div class="shown-tabs">','<span class="shown-tab basic-info curr-selected">基本信息</span>','<span class="shown-tab sku-info">规格信息</span>','<span class="shown-tab storage-info">仓储信息</span>','<span class="shown-tab support-info">供货商信息</span>',"</div>",'<div class="shown-contents">','<div class="shown-content basic-content">','<div class="info-line">','<span class="con-prod-info info-label">商品分类：</span>','<span class="for-con-prod-info">','<input class="for-tb-type" type="text" disabled/>',"</span>",'<span class="sys-choose-type-wrap">','<button class="btn sys-choose-type">选分类</button>','<span class="control-catagory-wrap sys-type-container ">',"</span>","</span>",'<span class="con-prod-code info-label">商家编码：</span><span><input type="text" class="for-con-prod-code" value="{{outerId}}"/></span>','<span class="con-prod-store info-label">所在店铺：</span><span class="for-con-prod-store">','<span act-loop="shop in shops" class="shop-name">{{shop.platform}} > {{shop.name}}<br/></span>',"</span>","</div>",'<div class="info-line">','<span class="con-prod-name info-label">商品名称：</span><span><input type="text" class="for-con-prod-name" value="{{title}}" title="{{title}}" maxlength="60"/></span>','<span class="con-prod-short info-label">商品简称：</span><span><input type="text" class="for-con-prod-short" value="{{shortTitle}}"/></span>',"</div>",'<div class="info-line">','<span class="con-prod-brand info-label">品牌：</span><span><input type="text" class="for-con-prod-brand" value="{{brand}}"/></span>','<span class="con-prod-unit info-label">单位：</span><span><input type="text" class="for-con-prod-unit" value="{{unit}}"/></span>','<span class="con-prod-weight info-label">重量(千克)：</span><span><input type="text" class="for-con-prod-weight" value="{{weight}}" maxlength="10"/></span>',"</div>",'<div class="info-line">','<span class="con-prod-status info-label">商品状态：</span><span class="for-con-prod-status">{{status}}</span>','<span class="con-prod-barcode info-label">商品条形码：</span><span><input type="text" class="for-con-prod-barcode" value="{{barcode}}"/></span>',"</div>",'<div class="info-line">','<span class="con-prod-note info-label">备注：</span><span><textarea class="for-con-prod-note" maxlength="100">{{remark}}</textarea></span>',"</div>",'<div class="info-line">','<span class="con-prod-define1 info-label"><input type="text" class="for-con-prod-define1-key" value="{{defined1Key}}" maxlength="30" placeholder="自定义"/>：</span><span><input type="text" class="for-con-prod-define1" value="{{defined1}}" maxlength="60"/></span>',"</div>","</div>",'<div class="shown-content sku-content">','<div class="sku-list">','<div class="sku-list-head">','<span class="sku-index">序号</span>','<span class="sku-type">规格</span>','<span class="sku-shop">所在店铺</span>','<span class="sku-status">规格状态</span>','<span class="sku-barcode">规格条形码</span>',"</div>",'<div class="sku-list-body">','<div class="sku-list-item" act-loop="sku in skus">','<span class="sku-index index-number">{{sku:index}}</span>','<span class="sku-type">{{sku.propertiesName}}</span>','<span class="sku-shop">','<div class="sku-shop-info" act-loop="_shop in sku.shop"><span>{{_shop.platform}}</span>&nbsp;>&nbsp;<span>{{_shop.name}}</span></div>',"</span>",'<span class="sku-status">{{sku.status}}</span>','<span class="sku-barcode"><input type="text" taobaoid="{{taobaoId}}" skuid="{{sku.skuId}}" numiid="{{sku.numIid}}" class="input-savable save-sku-barcode" value="{{sku.barcode}}"/></span>',"</div>","</div>","</div>","</div>",'<div class="shown-content storage-content">','<div class="storage-list">','<div class="storage-prod-head">','<span class="storage-prod">商品</span>','<span class="storage-allocate">货位</span>','<span class="storage-available">可售库存</span>',"</div>",'<div class="storage-prod-body">','<div class="storage-prod-list">','<span class="storage-prod"><img src="{{picPath}}_40x40.jpg"/></span>','<span act-if="skus != undefined" class="storage-allocate storage-prod-allocates">{{allocations}}</span>','<span act-if="skus == undefined" class="storage-allocate storage-prod-allocates">','<input type="text" value="{{allocations}}" class="prod-allocation-input for-allocate-name input-savable" placeholder="多个货位请使用;分隔"/>',"</span>",'<span class="storage-available">{{availableInStock}}</span>',"</div>","</div>",'<div class="storage-sku-head">','<span class="storage-index">序号</span>','<span class="storage-skutype">规格</span>','<span class="storage-allocate">货位</span>','<span class="storage-available">可售库存</span>',"</div>",'<div class="storage-sku-body">','<div class="storage-sku-list" act-loop="_sku in skus">','<span class="storage-index index-number">{{_sku:index}}</span>','<span class="storage-skutype">{{_sku.propertiesName}}</span>','<span class="storage-allocate">','<span class="allocate-name"><input type="text" placeholder="多个货位请使用;分隔" skuid="{{_sku.skuId}}" class="for-allocate-name input-savable" value="{{_sku.allocationString}}"/></span>',"</span>",'<span class="storage-available">{{_sku.availableInStock}}</span>',"</div>","</div>","</div>","</div>",'<div class="shown-content support-content">','<div class="support-list">','<div class="support-prod-head">','<span class="support-prod">商品</span>','<span class="support-name">供货商</span>','<span class="support-price">进价</span>','<span class="support-status">状态</span>','<span class="support-opearation">操作</span>',"</div>",'<div class="support-prod-body">','<div class="support-operation-list support-prod-list" taobaoid="{{taobaoId}}" numiid="{{numIid}}">','<div class="support-prod-thumb"><img src="{{picPath}}_40x40.jpg"/></div>','<div class="support-name-list" act-if="skus == undefined">','<div class="support-name-item" act-loop="supply in supplierList">','<span class="support-name">{{supply.name}}</span>','<span class="support-price">{{supply.purchasePrice}}</span>','<span class="support-status">{{supply.status}}</span>','<span class="support-opearation">&nbsp;</span>',"</div>","</div>",'<div class="support-name-list" act-if="skus != undefined">','<div class="support-name-item" act-loop="supply in supplierList">','<span class="support-name">{{supply.name}}</span>','<span class="support-price">{{supply.priceCostInterVal}}</span>','<span class="support-status">{{supply.status}}</span>','<span class="support-opearation">&nbsp;</span>',"</div>","</div>","</div>","</div>",'<div class="support-sku-head">','<span class="support-index">序号</span>','<span class="support-skutype">规格</span>','<span class="support-name">供货商</span>','<span class="support-price">进价</span>','<span class="support-status">状态</span>','<span class="support-opearation">操作</span>',"</div>",'<div class="support-sku-body">','<div class="support-operation-list support-sku-list" act-loop="_sku in skus" taobaoid="{{taobaoId}}" numiid="{{_sku.numIid}}" skuid="{{_sku.skuId}}">','<span class="support-index index-number">{{_sku:index}}</span>','<span class="support-skutype">{{_sku.propertiesName}}</span>','<span class="support-name-list">','<div class="name-item" act-loop="_supplier in _sku.supplier">','<span class="support-name">{{_supplier.name}}</span>','<span class="support-price">{{_supplier.purchasePrice}}</span>','<span class="support-status">{{_supplier.status}}</span>','<span class="support-opearation"><a class="support-icons support-add-supporter" title="添加"></a>&nbsp;&nbsp;<a class="support-icons support-modify-supporter" supplierid="{{_supplier.itemSupplierId}}" title="修改"></a>&nbsp;&nbsp;<a class="support-icons support-remove-supporter" supplierid="{{_supplier.itemSupplierId}}" title="删除"></a></span>',"</div>","</span>","</div>","</div>","</div>","</div>","</div>"],n=['<div class="support-name-list">','<div class="support-name-item name-item" act-loop="supply in supplierList">','<span class="support-name">{{supply.name}}</span>','<span class="support-price">{{supply.priceCostInterVal}}</span>','<span class="support-status">{{supply.status}}</span>','<span act-if="needOperation == 0" class="support-opearation">&nbsp;</span>','<span act-if="needOperation == 1" class="support-opearation"><a class="support-icons support-add-supporter" title="添加"></a>&nbsp;&nbsp;<a class="support-icons support-modify-supporter" supplierid="{{supply.itemSupplierId}}" title="修改"></a>&nbsp;&nbsp;<a class="support-icons support-remove-supporter" supplierid="{{supply.itemSupplierId}}" title="删除"></a></span>',"</div>","</div>"],l=['<span act-loop="shop in shops">','<span act-if="shop.selected == 1" class="tb-tm-shop-name shop-selected" taobaoid="{{shop.taobaoId}}">{{shop.shopName}}</span>','<span act-if="shop.selected == 0" class="tb-tm-shop-name" taobaoid="{{shop.taobaoId}}">{{shop.shopName}}</span>',"</span>"],d=['<div class="shown-tabs">','<span class="shown-tab basic-info curr-selected">基本信息</span>','<span class="shown-tab tb-sku-info">规格信息</span>',"</div>",'<div class="shown-contents">','<div class="shown-content basic-content tb-basic">','<div class="info-line">','<span class="tb-cata">类目：</span>','<span class="tb-cata-name">{{item.catName}}</span>','<span class="tb-title">商品名称</span><span><input class="for-tb-title" type="text" value="{{item.title}}"/></span>','<span class="tb-type">商品分类</span><span><input class="for-tb-type" type="text" disabled/></span>','<span class="tb-choose-type-wrap">','<button class="btn tb-choose-type">选分类</button>','<span class="control-catagory-wrap tb-type-container ">',"</span>","</span>","</div>",'<div class="attr-wrap">','<div class="tb-attr-discription">','<div class="tb-fieldset">','<div class="attr-item cata-attrs">类目属性</div>','<div class="item-list">','<div act-loop="prop in item.propsObjArr" class="attr-item"><span class="prop-name" pid="{{prop.pid}}" vid="{{prop.vid}}">{{prop.name}}</span><span class="prop-value">{{prop.value}}</span></div>',"</div>","</div>","</div>",'<div class="tb-attr-discription baby-attr">','<div class="info-line">','<span class="sell-point">宝贝卖点</span><span><textarea class="for-sell-point">{{item.sellPoint}}</textarea></span>',"</div>",'<div class="info-line">','<span class="buyout-price">一口价</span><span><input class="for-buyout-price input-savable" type="text" value="{{item.price}}"/></span>','<span act-if="item.skus == undefined"><span class="tb-account">数量</span><span><input class="for-tb-account" type="text" value="{{item.num}}"/></span></span>','<span act-if="item.skus != undefined"><span class="tb-account">数量：</span><span>{{item.num}}</span></span>',"</div>",'<div class="info-line">','<span class="seller-code">商家编码</span><span><input class="for-seller-code" type="text" value="{{item.outerId}}"/></span>','<span class="tb-barcode">商品条码</span><span><input class="for-tb-barcode" type="text" value="{{item.barcode}}"/></span>',"</div>",'<div class="info-line">','<span class="storage-status">商品状态：</span>','<span class="storage-status-note" act-if="item.status == 0">仓库中</span>','<span class="storage-status-note" act-if="item.status == 1">出售中</span>','<span class="storage-status-note" act-if="item.status == 2">仓库中</span>',"</div>",'<div class="info-line">','<span class="time-onsell">上下架：</span>','<span><select data-zIndex="11000" id="for_time_onsell" class="for-time-onsell">','<option value="0">立刻下架</option>','<option value="1">立刻上架</option>','<option value="2">定时上架</option>',"</select></span>",'<span class="timepoint-onsell" id="timepoint_onsell">','<input data-zIndex="11000" type="text" class="w100 date-picker ml_10" name="timepoint" data-min-date="today" data-date-format="yyyy-mm-dd HH:MM" id="timepoint" value="{{item.listTime}}">',"</span>","</div>",'<div class="info-line">','<span class="storage-count">库存计数：</span>','<span class="area-checkbox" act-if="item.subStock != 0">','<label act-if="item.subStock == 1"><input type="radio" name="kucun-option" value="1" class="pai-to-discount" checked/>拍下减库存</label>','<label act-if="item.subStock != 1"><input type="radio" name="kucun-option" value="1" class="pai-to-discount"/>拍下减库存</label>','<label act-if="item.subStock == 2"><input type="radio" name="kucun-option" value="2" class="fu-to-discount" checked/>付款减库存</label>','<label act-if="item.subStock != 2"><input type="radio" name="kucun-option" value="2" class="fu-to-discount"/>付款减库存</label>',"</span>",'<span class="area-checkbox" act-if="item.subStock == 0">','<label act-if="item.sys_tb_tm_type == tm"><input type="radio" name="kucun-option" value="1" class="pai-to-discount" checked/>拍下减库存</label>','<label act-if="item.sys_tb_tm_type != tm"><input type="radio" name="kucun-option" value="1" class="pai-to-discount"/>拍下减库存</label>','<label act-if="item.sys_tb_tm_type == tb"><input type="radio" name="kucun-option" value="2" class="fu-to-discount" checked/>付款减库存</label>','<label act-if="item.sys_tb_tm_type != tb"><input type="radio" name="kucun-option" value="2" class="fu-to-discount"/>付款减库存</label>',"</span>","</div>",'<div class="info-line">','<span class="area-checkbox showcase-suggest-wrapper">','<label act-if="item.hasShowcase == true"><span class="check checked"><input type="checkbox" class="showcase-suggest" checked/></span>橱窗推荐</label>','<label act-if="item.hasShowcase == false"><span class="check"><input type="checkbox" class="showcase-suggest"/></span>橱窗推荐</label>',"</span>","</div>","</div>",'<div class="tb-attr-discription baby-thumb-container">','<div class="baby-thumb-wrap">','<div class="thumb-tab"></div>','<div class="thumb-tab-content"><img src="{{item.itemImgs[0].url}}_150x150.jpg"/></div>',"</div>","</div>","</div>","</div>",'<div class="shown-content tb-sku-content">','<div class="tb-sku-head">','<span class="tb-index">序号</span>','<span class="tb-skutype">规格</span>','<span class="tb-buyout-price">一口价</span>','<span class="tb-buyout-account">数量</span>','<span class="tb-seller-sku-code">规格商家编码</span>','<span class="tb-seller-barcode">规格条形码</span>',"</div>",'<div class="tb-sku-body">','<div class="tb-sku-list" act-loop="sku in item.skus">','<span class="tb-index index-number">{{sku:index}}</span>','<span class="tb-skutype">{{sku.propertiesName}}</span>','<span class="tb-buyout-price">{{sku.price}}</span>','<span class="tb-buyout-account"><input class="input-savable for-tb-buyout-account" type="text" properties="{{sku.properties}}" value="{{sku.quantity}}"/ skuid="{{sku.skuId}}"></span>','<span class="tb-seller-sku-code"><input class="input-savable for-tb-seller-sku-code" type="text" properties="{{sku.properties}}" value="{{sku.outerId}}" skuid="{{sku.skuId}}"/></span>','<span class="tb-seller-barcode"><input class="input-savable for-tb-seller-barcode" type="text" properties="{{sku.properties}}" value="{{sku.barcode}}" skuid="{{sku.skuId}}"/></span>',"</div>","</div>","</div>","</div>"];t.template.addTemp("template.product.modify.temp",a),t.template.addTemp("template.product.modify.detailed.info.temp",s),t.template.addTemp("template.product.modify.tb_tm.temp",l),t.template.addTemp("template.product.modify.prod_tb_tm.temp",d),t.template.addTemp("template.product.modify.detailed.support.prod.namelist",n);var o={show:function(t){if(!t)throw"应该传入taobaoId, numIid来打开编辑窗口";var i=this,a=e.extend({taobaoId:"",numIid:"",outerId:"",type:"sys"},t||{}),s=function(e){i._show(e,a)};this._load_data_for_dlg(a,s)},_load_data_for_dlg:function(e,t){var i=this;"sys"==e.type?API.item_detail({taobaoId:e.taobaoId,numIid:e.numIid},function(e){t&&t(e.data)},function(){},!1):API.item_tb_detail({taobaoId:e.taobaoId,numIid:e.numIid,outerId:e.outerId,platform:e.type},function(e){var a=e.data;a.platformError?i._fn_show_error_message():(i._fn_prehandle_data(a),t&&t(a))},function(){})},_fn_show_error_message:function(){this.$el.find(".shop-info-tb-tm").children().length&&shopInfo.empty(),this.$el.find(".shown-area").empty().append('<div class="tb-help-message">对不起！ 当前平台下不存在该商品。</div>')},_fn_prehandle_data:function(e){if(e.item.propsName){var t=e.item.propsName.split(";"),i=[],a=["1627207","20509","122448159","20281519","34944167","14829532","21433","122216712","122216904","122216927","5919063","12304035","122216431","20549","20138"].join("|");if(t.length){for(var s=0;s<t.length;s++){var n=t[s].split(":");n.length&&4==n.length&&-1==a.indexOf(n[0])&&i.push({pid:n[0],vid:n[1],name:n[2],value:n[3]})}e.item.propsObjArr=i}}},_show:function(t,i){var a=this;this.itemData=t,this._render(t,i),this.$dialog=e.dialog({title:"修改商品",width:900,fixed:!1,content:this.$el.show(),cancelVal:"关闭",okVal:"保存",ok:function(){return a._save_product_info(),!1},cancel:function(){a._get_latest_product_info()}})},hide:function(){this.$dialog&&!this.$dialog.closed&&this.$dialog.close()},_render:function(i,a){var s=this;this.$el=e(t.template.get("template.product.modify.temp",{sysClsText:"sys"==a.type?" selected":"",tmClsText:"tm"==a.type?" selected":"",tbClsText:"tb"==a.type?" selected":"",taobaoId:a.taobaoId,numIid:a.numIid,outerId:a.outerId})).appendTo("body"),s._fn_update_shown_area(i,a),this._event_bind(i)},_event_bind:function(){var t=this;this.$el.find(".plat-name").on("click",function(i){var a=e(i.target),s=a.attr("type");a.parent().find(".plat-name").removeClass("selected"),a.addClass("selected");var n=a.parents(".platform"),l=n.attr("taobaoid"),d=n.attr("numiid"),o=n.attr("outerid"),r=function(e){t._fn_update_shown_area(e,{type:s})};t._load_data_for_dlg({type:s,taobaoId:l,numIid:d,outerId:o},r)}),this.$el.delegate(".tb-tm-shop-name","click",function(i){var a=e(i.target);a.parents(".shop-info-tb-tm").find(".tb-tm-shop-name").removeClass("shop-selected"),a.addClass("shop-selected");var s=a.parents(".platform"),n=s.attr("taobaoid"),l=s.attr("numiid"),d=function(e){t._update_shop_detailed_info(e)};t._load_data_for_dlg({shopId:"",taobaoId:n,numIid:l},d)}),this.$el.delegate(".shown-tab","click",function(i){var a=e(i.target);a.parent().find(".shown-tab").removeClass("curr-selected"),a.addClass("curr-selected"),t._switch_shown_content(a)})},_fn_update_shown_area:function(e,i){var a=this.$el.find(".shop-info-tb-tm");"tm"==i.type||"tb"==i.type?(e.item.sys_tb_tm_type=i.type,e.shops=e.shops||[{taobaoId:123123,shopName:"夏天的靠枕",selected:1},{taobaoId:2345677,shopName:"raycloud",selected:0}],e.item.listTime=e.item.listTime?RayCloud.util.date.getdate(1*e.item.listTime,"YY-MM-DD HH:MM"):"",a.empty().append(t.template.get("template.product.modify.tb_tm.temp",e)),this.$el.find(".shown-area").empty().append(t.template.get("template.product.modify.prod_tb_tm.temp",e))):(e.sys_tb_tm_type=i.type,a.children().length&&a.empty(),e.defined1Key=e.defined1Key||"自定义1",this.$el.find(".shown-area").empty().append(t.template.get("template.product.modify.detailed.info.temp",e)),this._init_bind_sys_events(e)),this._fn_init_components(e)},_update_shop_detailed_info:function(e){{var i=this;this.$el.find(".shop-info-tb-tm")}this.$el.find(".shown-area").empty().append(t.template.get("template.product.modify.prod_tb_tm.temp",e)),i._fn_init_components(e)},_init_bind_sys_events:function(t){var i=this,a=this.$el.find(".support-list"),s=this.$el.find(".support-name-list");e.each(s,function(i,a){if(a=e(a),!a.children().length){a.hide();var s=a.parent();s.hasClass("support-prod-list")?t.skus||s.append('<a class="support-add-supporter support-add-note">请添加供货商</a>'):s.hasClass("support-sku-list")&&s.append('<a class="support-add-supporter support-add-note">请添加供货商</a>')}}),a.delegate(".support-add-supporter","click",function(t){var i=e(t.target),s=i.parents(".name-item");if(!s.find(".new-add-item").length){var n=['<span class="support-name-list new-add-item">',"<div>",'<input class="support-name-input" type="text"/>','<input class="support-price-input" type="text"/>','<select class="support-status-input" data-zindex="100001">','<option value="1">合作</option>','<option value="0">终止</option>',"</select>",'<span><a class="support-save-add">保存</a><a class="support-cancel-add">取消</a></span>',"</div>","</span>"].join("");i.next().length?i.parents(".name-item").append(n):i.hide().after(n),a.find("select").iSelect()}}),a.delegate(".support-modify-supporter","click",function(t){var i=e(t.target),s=i.parents(".name-item");if(!s.find(".new-add-item").length){var n=s.find(".support-name").text(),l=s.find(".support-price").text(),d=s.find(".support-status").text(),o=i.attr("supplierid"),r="合作"==d?'<option value="1">合作</option><option value="0">终止</option>':'<option value="0">终止</option><option value="1">合作</option>',p=['<span class="support-name-list new-add-item">',"<div>",'<input class="support-name-input" type="text" value="'+n+'"/>','<input class="support-price-input" type="text" value="'+l+'"/>','<select class="support-status-input" data-zindex="100001">'+r+"</select>",'<span><a class="support-save-add modify-supporter" supplierid="'+o+'">保存</a><a class="support-cancel-add">取消</a></span>',"</div>","</span>"].join("");i.next().length?i.parents(".name-item").append(p):i.hide().after(p),a.find("select").iSelect()}}),a.delegate(".support-cancel-add","click",function(t){var i=e(t.target),a=i.parents(".support-operation-list");a.find(".new-add-item").remove(),a.find(".name-item").length||a.find(".support-add-supporter").show()}),a.delegate(".support-save-add","click",function(t){var a=e(t.target);i._fn_save_sku_support(a)}),a.delegate(".support-remove-supporter","click",function(t){var a=e(t.target);e.dialog.confirm("您确定要删除此供应商！",function(){i._fn_remove_sku_support(a)})})},_fn_save_sku_support:function(t){var i=this,a=t.parents(".support-operation-list"),s=t.parents(".new-add-item"),n=e.trim(s.find(".support-name-input").val()),l=e.trim(s.find(".support-price-input").val()),d=s.find(".support-status-input").val();if(!n||!l)return void e.dialog.alert("请输入供货商名称或价格");if(!/^\d+\.?\d*$/.test(l))return void e.dialog.alert("进价必须为数字");var o={taobaoId:a.attr("taobaoid"),numIid:a.attr("numiid"),skuId:a.attr("skuid"),supplierName:n,priceCost:l,status:d},r=function(e){s.remove(),a.find(".support-add-note").hide();for(var t=e.sku||[],n="",l=0;l<t.length;l++)n+='<div class="name-item"><span class="support-name">'+t[l].name+'</span><span class="support-price">'+t[l].purchasePrice+'</span><span class="support-status">'+t[l].status+'</span><span class="support-opearation"><a class="support-icons support-add-supporter" title="添加"></a>&nbsp;&nbsp;<a class="support-icons support-modify-supporter" title="修改" supplierid="'+t[l].itemSupplierId+'"></a>&nbsp;&nbsp;<a class="support-icons support-remove-supporter" title="删除" supplierid="'+t[l].itemSupplierId+'"></a></span></div>';n&&(n='<span class="support-name-list">'+n+"</span>",a.find(".support-name-list").replaceWith(n)),a.hasClass("support-prod-list")?i._fn_update_support_prod(e,1):i._fn_update_support_prod(e)};if(t.hasClass("modify-supporter")){var a=t.parents(".support-operation-list");o.itemSupplierId=t.attr("supplierid"),o.numIid=a.attr("numiid"),API.supplier_bind_edit(o,function(e){r(e.data)},function(){})}else API.supplier_bind(o,function(e){r(e.data)},function(){})},_fn_remove_sku_support:function(e){var t=this,i=e.parents(".support-operation-list");API.supplier_unbind({taobaoId:i.attr("taobaoid"),itemSupplierId:e.attr("supplierid"),numIid:i.attr("numiid"),skuId:i.attr("skuid")},function(a){if(e.parents(".name-item").remove(),i.hasClass("support-prod-list")?t._fn_update_support_prod(a.data,1):t._fn_update_support_prod(a.data),!i.find(".name-item").length){i.find(".support-name-list").hide();var s=i.find(".support-add-note");s.length?s.show():i.append('<a class="support-add-supporter support-add-note">请添加供货商</a>')}},function(){})},_fn_update_support_prod:function(e,i){e.supplierList=e.item||[],e.needOperation=i&&1==i?1:0;var a=this.$el.find(".support-prod-list"),s=a.find(".support-name-list"),n=t.template.get("template.product.modify.detailed.support.prod.namelist",e);n&&n.length&&(s.replaceWith(n),a.find(".support-add-supporter").hide())},_fn_init_components:function(t){var i=this;this.$el.find("select").iSelect(),this.$el.find("input:radio").iCheck(),e.each(i.$el.find(".index-number"),function(t,i){e(i).html(1*e(i).html()+1)});var a=i.$el.find("#timepoint");t.item&&(i._fn_change_datepikerUI(a,t.item.status),i.$el.find("#for_time_onsell").iSelect("select",t.item.status)),this.$el.find("#for_time_onsell").on("change",function(e){i._fn_change_datepikerUI(a,e.target.value)}),this._bind_events_4_dialog(t),this._init_savable_inputs(t)},_fn_change_datepikerUI:function(e,t){"2"==t?e.attr("disabled",!1).css("background-color","#fff"):e.attr("disabled",!0).css("background-color","#eee")},_init_savable_inputs:function(){var t=this;t.$el.undelegate(".input-savable","focusin"),t.$el.undelegate(".input-savable","focusout"),t.$el.delegate(".input-savable","focusin",function(t){var i=e(t.target),a=i.parent(),s='<span class="save-btn-wrapper"><button class="J_Save">保存</button></span>';a.find(".save-btn-wrapper").length||a.css("position","relative").append(s),a.find(".save-btn-wrapper").stop().animate({width:"44px"})}).delegate(".input-savable","focusout",function(i){var a=e(i.target),s=a.parent(),n=(e(this).val(),s.find(".J_Save")),l=!1;n.on("click",function(i){l=!0;var a=e(i.target),d=a.parent().prev();d.hasClass("save-sku-barcode")?t._fn_save_sku_barcode(d):d.hasClass("for-allocate-name")?t._fn_update_sys_allocate_name(d):d.hasClass("for-buyout-price")?t._fn_udpadte_tb_price(d):t._fn_update_tb_sku_info(d),s.find(".save-btn-wrapper").stop().animate({width:0}),n.off("click")}),setTimeout(function(){l||(s.find(".save-btn-wrapper").stop().animate({width:0}),n.off("click"))},200)})},_fn_save_sku_barcode:function(t){API.sku_edit({taobaoId:t.attr("taobaoid"),numIid:t.attr("numiid"),skuId:t.attr("skuid"),barcode:e.trim(t.val())},function(){},function(){})},_fn_update_sys_allocate_name:function(t){var i=this,a=i.$el.find(".platform"),s={taobaoId:a.attr("taobaoid"),numIid:a.attr("numiid"),skuId:t.attr("skuid")},n=e.trim(t.val());n&&(s.allocation=n.replace(/[；]/g,";"),API.allocation_edit(s,function(e){var t=e.data,a=i.$el.find(".prod-allocation-input");a.length?a.val(t.item):i.$el.find(".storage-prod-allocates").html(t.item)},function(){}))},_fn_udpadte_tb_price:function(t){var a=this,s=a.$el.find(".platform"),n={taobaoId:s.attr("taobaoid"),numIid:s.attr("numiid")},l=e.trim(t.val());if(l){if(!/^\d+\.?\d*$/.test(l))return void e.dialog.alert("价格必须为数字");n.price=l,API.item_tb_price_update(n,function(e){12==e.result&&i.show(encodeURIComponent(window.location.href))},function(){})}},_fn_update_tb_sku_info:function(t){var i=this,a=i.$el.find(".platform"),s={taobaoId:a.attr("taobaoid"),numIid:a.attr("numiid"),properties:t.attr("properties"),skuId:t.attr("skuid")},n=e.trim(t.val());if(n){if(t.hasClass("for-tb-buyout-account")){if(!/^\d+$/.test(n))return void e.dialog.alert("数量必须为数字");s.quantity=n}else t.hasClass("for-tb-seller-sku-code")?s.outerId=n:t.hasClass("for-tb-seller-barcode")&&(s.barcode=n);API.item_tb_sku_update(s,function(){},function(){})}},_bind_events_4_dialog:function(e){var t=this;t.isMenuShown=!1,t.$el.find(".tb-choose-type").on("click",function(){var i=e.sellerCats,a=t.$el.find(".tb-type-container");t.isMenuShown?(a.empty(),t.isMenuShown=!1):(t._create_tree_4_product(i,a),t.isMenuShown=!0)}),t.$el.find(".sys-choose-type").on("click",function(){var i=e.shopSellerCat,a=t.$el.find(".sys-type-container");t.isMenuShown?(a.empty(),t.isMenuShown=!1):(t._create_tree_4_product(i,a),t.isMenuShown=!0)}),t._init_first_selected_cats(t.$el,e)},_create_tree_4_product:function(e,i){var a=this,s=t.controls.get("control.prod.folder.tree"),n={showIcon:!1,showCheckBox:!0,showShopLevel:!0,itemCanHide:!1};if(e.sellerCats){var l={data:[e]};s.show(i,l,n),i.append('<div class="tb-btn-wrap"><button class="btn btn-primary">选择</button></div>'),a._init_tree_data(i,e),a._bind_tree_events(i)}},_init_first_selected_cats:function(e,t){var i="",a="",s="",n=[],l=[],d=[];if(t.item&&t.item.sellerCids){i=t.item.sellerCids.split(","),a=t.sellerCats.sellerCats,s=t.sellerCats.subIds,subIdsString=s&&s.length?"|"+s.join("|")+"|":"";for(var o=0;o<i.length;o++)if(i[o])if(a[i[o]])n.push(a[i[o]].name),l.push(a[i[o]].id),d.push(a[i[o]].cid);else if(subIdsString.indexOf("_"+i[o])>-1){var r=subIdsString.indexOf("_"+i[o]),p=subIdsString.lastIndexOf("|",r),c=subIdsString.indexOf("|",r),_=subIdsString.substring(p+1,c);n.push(a[_].name),l.push(a[_].id),d.push(a[_].cid)}}else if(t.sellerCids){i=t.sellerCids,a=t.shopSellerCat.sellerCats,s=t.shopSellerCat.subIds;for(var o=0;o<i.length;o++)i[o]&&(n.push(i[o].name),l.push(i[o].id),d.push(i[o].sellerCids))}e.find(".for-tb-type").attr("ids",l.join(",")).attr("cids",d.join(",")).val(n.join(",")||"未分类")},_init_tree_data:function(e){var t=e.parents(".info-line").find(".for-tb-type"),i=t.attr("ids"),i=i?i.split(","):[];if(i.length)for(var a=0;a<i.length;a++){for(var s=e.find("#"+i[a]),n=s.parents(".subfolder");n.length;)n.show(),n=n.parents(".subfolder");s.show().find("span.check").addClass("checked").find("input").prop("checked",!0)}},_bind_tree_events:function(t){var i=this;t.find(".btn-primary").on("click",function(){var a=t.find(".checked");if(a.length){var s=[],n=[],l=[];e.each(a,function(t,i){var a=e(i).closest(".cat-subfolder-container");a.find("ul.subfolder").children().length||(l.push(e(i).next().html()),s.push(a.attr("id")),n.push(a.attr("cid")))}),t.parents(".info-line").find(".for-tb-type").attr("ids",s.join(",")).attr("cids",n.join(",")).val(l.join(","))}else t.parents(".info-line").find(".for-tb-type").attr("ids","").attr("cids","").val("");t.empty(),i.isMenuShown=!1}),t.find(".check-folder-name").on("click",function(t){var i=e(t.target);if(i.prop("checked")){i.closest("li").find("span.check").addClass("checked").find("input").prop("checked",!0);var a=i.closest("li").siblings();a.find("span.check").length==a.find("span.checked").length&&i.closest("ul").prev().find("span.check").addClass("checked").find("input").prop("checked",!0)}else i.closest("li").find("span.check").removeClass("checked").find("input").prop("checked",!1),i.closest("ul").prev().find("span.check").removeClass("checked").find("input").prop("checked",!1)})},_switch_shown_content:function(e){this.$el.find(".shown-content").hide(),e.hasClass("basic-info")?this.$el.find(".basic-content").show():e.hasClass("sku-info")?this.$el.find(".sku-content").show():e.hasClass("tb-sku-info")?this.$el.find(".tb-sku-content").show():e.hasClass("storage-info")?this.$el.find(".storage-content").show():e.hasClass("support-info")?this.$el.find(".support-content").show():e.hasClass("extend-info")&&this.$el.find(".extend-content").show()},_save_product_info:function(){var i=this,a=i._collect_product_data();if(a.for_sys){var s=a.weight;if(s&&!/^\d+\.?\d*$/.test(s))return void e.dialog.alert("重量必须为数字");API.item_edit_detail(a,function(e){t.pub("module.prod.detail.info.updated",e.data),RayCloud.showSuccess("数据保存成功",.5)},function(){},!1)}else{if(""===a.title)return void e.dialog.alert("商品名称不能为空");API.item_tb_update(a,function(){RayCloud.showSuccess("数据保存成功",.5)},function(){},!1)}},_get_latest_product_info:function(){var e=this.$el.find(".platform");API.item_detail({taobaoId:e.attr("taobaoid"),numIid:e.attr("numiid")},function(e){t.pub("module.prod.detail.info.updated",e.data)
},function(){},!1)},_collect_product_data:function(){var t=this.$el.find(".platform"),i=this.$el.find(".shown-contents"),a=t.attr("taobaoid"),s=t.attr("numiid"),n={};if(i.find(".tb-basic").length){n={taobaoId:a,numIid:s,title:e.trim(i.find(".for-tb-title").val()),sellPoint:e.trim(i.find(".for-sell-point").val()),outerId:e.trim(i.find(".for-seller-code").val()),barcode:e.trim(i.find(".for-tb-barcode").val()),sellerCids:i.find(".for-tb-type").attr("cids")},i.find(".for-tb-account").length&&(n.num=e.trim(i.find(".for-tb-account").val()));var l=i.find(".for-time-onsell");if("1"==l.val()||"2"==l.val()){n.approveStatus="onsale";var d=i.find("#timepoint");if(d.prop("disabled"))list_time=(new Date).getTime();else{var o=d.val(),r=o&&!isNaN(new Date(o.replace(/-/g,"/")).getTime()),o=r?new Date(o.replace(/-/g,"/")).getTime():(new Date).getTime();list_time=o}n.listTime=list_time}else n.approveStatus="instock";n.subStock=i.find('[name="kucun-option"]:checked').val(),n.hasShowCase=i.find(".showcase-suggest").prop("checked"),n.for_tb_tm=!0}else n={taobaoId:a,numIid:s,outerId:e.trim(i.find(".for-con-prod-code").val()),title:e.trim(i.find(".for-con-prod-name").val()),shortTitle:e.trim(i.find(".for-con-prod-short").val()),brand:e.trim(i.find(".for-con-prod-brand").val()),unit:e.trim(i.find(".for-con-prod-unit").val()),weight:e.trim(i.find(".for-con-prod-weight").val()),barcode:e.trim(i.find(".for-con-prod-barcode").val()),remark:e.trim(i.find(".for-con-prod-note").val()),defined1Key:e.trim(i.find(".for-con-prod-define1-key").val()),defined1:e.trim(i.find(".for-con-prod-define1").val()),sellerCids:i.find(".for-tb-type").attr("cids")},n.for_sys=!0;return n},_event_unbind:function(){},clear:function(){this.$el&&(this.$el.empty().remove(),this.$el=null,this.$dialog=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.prod.editor",{init:function(){return o}})}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.prod.dataModel"),a=t.controls.get("control.prod.editor"),s={name:"prod.prod_info",depend:"prod",_elm_dom_root:"#main",_elm_template_name:"template.prod.list.wrapper",_fn_dom_render:function(i){var a=this,s=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(e(this._elm_dom_root).empty()),n=function(){a._fn_event_bind_4list(s,i),a._fn_event_bind_4detailedInfo(s,i)};this._load_prodlist_data(s,i,n),this._fn_event_bind(s,i)},_load_prodlist_data:function(e,t,a){var s=this,n={pageNo:t.pageNo||1,pageSize:t.pageSize||20,specialField:t.specialField||"",specialFieldStatus:t.specialFieldStatus||"",text:t.text||"",timeStamp:t.timeStamp||"",taobaoId:t.taobaoId||"",detail:!0};API.item_list_all(n,function(t){if(t.data.list.length){var n={list:t.data.list},l=e.find(".prod-details");s._elm_dom_list=s._fn_create_item_UI(n).appendTo(e.find(".list-body").empty()),s._elm_dom_details=s._fn_create_detail_UI(n.list[0]).appendTo(l.empty()),s._set_detail_info_maxHeight(l),s._update_pages(t.data),i.initData(n.list),a&&a()}else e.find(".list-body").addClass("empty-content").html('<tr><td colspan="6"><div class="pd_30">暂无数据</div></td></tr>'),e.find(".prod-details").empty().html('<div class="pd_30">暂无数据</div>'),s._update_pages()},function(){})},_fn_ctrl_setHash:function(i){t.pages.setCurHash(e.extend({},i))},_update_pages:function(e){var i=this._elm_dom_container.find(".J_Pages"),a=i.find("select");if(a&&a.iSelect("destroy"),e&&e.page){var s=Math.ceil(e.total/e.page.pageSize),n={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:s,isLastPage:e.page.pageNo==s};i.html(t.template.get("template.prod.list.pages.temp",n)),this._bind_event_4_page_changed(i),i.find("select").iSelect()}else i.html("")},_bind_event_4_page_changed:function(t){var i=this;t.find("select").on("change",function(){i._fn_ctrl_setHash({pageNo:1,pageSize:e(this).val()})}),t.find("a.module-trade-pages-pageNo").on("click",function(){var t=e(this).attr("data-page");t&&i._fn_ctrl_setHash({pageNo:t})}),t.find(".input-small").on("focusin",function(){t.find(".J_Submit_Container").stop().animate({width:"44px"})}).on("focusout",function(){var a=e(this).val(),s=e(this).attr("data-max"),n=!1;t.find(".J_Submit").on("click",function(t){return t.preventDefault(),a-0>s-0?void e.dialog.alert("超出最大页数！"):(n=!0,void(/^\d*$/.test(a)&&i._fn_ctrl_setHash({pageNo:a})))}),setTimeout(function(){n||t.find(".J_Submit_Container").stop().animate({width:0})},500)})},_fn_event_bind:function(e,t){this._fn_event_bind_topbar(e,t),this._fn_event_bind_taskbar(e,t)},_fn_event_bind_taskbar:function(e){var t=this;e.find("#bat-remove").on("click",function(){t._fn_batch_delete(e)}),e.find("#item_sync").on("click",function(){t._fn_item_sync()})},_fn_batch_delete:function(i){var a=i.find(".check-item"),s=[],n=[];e.each(a,function(t,i){if(e(i).prop("checked")){var a=e(i).parents(".list-item");s.push(a.attr("numiid")),n.push(a.attr("taobaoid"))}}),s.length?e.dialog.confirm("您确定要删除吗？",e.proxy(function(){var e=function(){t.showSuccess("删除成功！",.5);for(var e=0;e<s.length;e++)i.find(".list-item[numiid="+s[e]+"]").remove()};this._fn_call_delete_items({numIids:s.join(","),taobaoIds:n.join(",")},e)},this)):e.dialog.alert("请先选择宝贝！")},_fn_call_delete_items:function(e,t){API.item_delete(e,function(e){t&&t(e.data)},function(){})},_fn_item_sync:function(){API.item_sync({},e.proxy(function(){},this),e.proxy(function(){},this),!1,!1,!0),t.pub("global.click.item_sync",e.proxy(function(){this.reload()},this))},_fn_event_bind_topbar:function(i,a){var s=this,n=e(t.template.get("template.prod.list.topbar",{taobaoId:a.taobaoId||"",id:a.id||"",text:a.text?decodeURIComponent(a.text):"",title:a.title?decodeURIComponent(a.title):"商品分类",cid:"seller_cid"==a.specialField?a.specialFieldStatus:""})).appendTo(i.find(".module-prod-top")),l=!0;s.hideSelectTree=function(t){var a=e.contains(i.find(".cata-select-bd")[0],e(t.target)[0]);s.menuShown&&!a&&(i.find(".cata-select-bd").empty(),s.menuShown=!1)},s.menuShown=!1,e(document).off("click"),e(document).on("click",s.hideSelectTree),n.find(".ui-select-hd").on("click",function(){return s.menuShown?void 0:(s._fn_load_tree_data(i.find(".cata-select-bd")),s.menuShown=!0,!1)}),n.delegate(".basic-item-foldername","click",function(){return i.find(".cata-select-txt").html("商品分类").attr("title","商品分类").attr("taobaoid","").attr("id","").attr("cid",""),i.find(".cata-select-bd").empty(),s.menuShown=!1,!1}),n.delegate(".cata-folder-name","click",function(t){var a=e(t.target);a=a.hasClass("cata-folder-name")?a:a.parents(".cata-folder-name");var n=a.find(".folder-name").html().replace("<","&lt;").replace(">","&gt;").replace('"','"').replace("'","'"),l=a.closest(".cata-item");return i.find(".cata-select-txt").html(n).attr("title",n).attr("taobaoid",l.attr("taobaoid")).attr("id",l.attr("id")||"").attr("cid",l.attr("cid")||""),i.find(".cata-select-bd").empty(),s.menuShown=!1,!1}),i.find(".module-trade-searchBar-btn").on("click",function(){e(this).toggleClass("module-trade-searchBar-btn-down"),i.find("#module-prod-topBar").stop().animate({height:l?0:55},{progress:function(){s._fn_reset_scrollFixed_position(i)},complete:function(){s._fn_reset_scrollFixed_position(i)}}),l=!l}),i.find(".module-prod-tab-navs").on("click",function(){t.pages.setCurHash({timeStamp:+new Date})}),i.find(".btn-search").on("click",function(){s._fn_query_product(i)}),i.find(".search-content").on("keydown",function(e){13==e.keyCode&&i.find(".btn-search").trigger("click")})},_fn_reset_scrollFixed_position:function(e){var t=e.find(".prod-details"),i=e.find(".module-prod-top"),a=e.find(".list-header"),s=e.find(".topbar-placeholder");a.trigger("detach.ScrollToFixed"),t.trigger("detach.ScrollToFixed"),a.scrollToFixed({marginTop:41+s.height()+i.height(),zIndex:101}),t.scrollToFixed({marginTop:41+s.height()+i.height(),zIndex:101})},_fn_load_tree_data:function(e){var t=this;API.item_cat_list({getData:!0,showHide:!0},function(i){t._fn_init_folderTree(e,i)},function(){},!1)},_fn_init_folderTree:function(e,i){var a=t.controls.get("control.prod.folder.tree"),s={showIcon:!1,showCheckBox:!1,itemCanHide:!1};a.show(e,i,s)},_fn_query_product:function(e){var t=e.find(".cata-select-txt"),i={specialField:"seller_cid",specialFieldStatus:t.attr("cid"),taobaoId:t.attr("taobaoid"),title:t.attr("title"),text:encodeURIComponent(e.find(".search-content").val()||""),pageNo:1,timeStamp:+new Date};this._fn_ctrl_setHash(i)},_fn_event_bind_4list:function(t){var a=this,s=null,n=["check-item","input-text","J_Save","prod-name-link"],l=t.find(".module-prod-list");t.delegate(".list-item","click",function(l){s&&clearTimeout(s),s=setTimeout(function(){var s=e(l.target),d=!1,o=s.hasClass("list-item")?s:s.parents(".list-item");numiid=o.attr("numiid");for(var r=0;r<n.length;r++)if(s.hasClass(n[r])){d=!0;break}if(!d){var p=t.find(".prod-details"),c=i.getItemData(numiid);p.empty().append(a._fn_create_detail_UI(c)),a._set_detail_info_maxHeight(p);var _=o.next(),m=o.find(".prod-item-icon");if(o.parents(".list-body").find(".list-item-clicked").removeClass("list-item-clicked"),o.addClass("list-item-clicked"),_.children().length)_.is(":visible")?(m.removeClass("prod-icon-open").addClass("prod-icon-close"),_.slideUp()):(m.removeClass("prod-icon-close").addClass("prod-icon-open"),_.slideDown());else{var u=a._fn_create_item_sku_UI(c);u&&(_.append(u),m.removeClass("prod-icon-close").addClass("prod-icon-open"),_.slideDown())}}},200)}),t.delegate(".list-item","dblclick",function(t){var i=e(t.target),l=!1;s&&clearTimeout(s);for(var d=0;d<n.length;d++)if(i.hasClass(n[d])){l=!0;break}if(!l){var o=i.hasClass("list-item")?i:i.parents(".list-item"),r=o.attr("taobaoid"),p=o.attr("numiid"),c=o.attr("outerid");a._fn_open_edit_dlg({taobaoId:r,numIid:p,outerId:c})}}),l.delegate(".check-item","click",function(t){var i=e(t.target),a=i.parents(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),l.find(".list-item").length==l.find(".check-item:checked").length?l.find(".J_Select_All").prop("checked",!0):l.find(".J_Select_All").prop("checked",!1)}),l.find(".J_Select_All").on("click",function(t){var i=e(t.target),a=l.find(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),l.find(".check-item").prop("checked",i.prop("checked")),l.find(".J_Select_All").prop("checked",i.prop("checked"))}),l.find(".product-code").on("click",function(t){a._fn_change_shortTitle(l,e(t.target).prop("checked"))}),l.delegate(".input-text","focusin",function(t){var i=e(t.target),a=i.parent(),s='<span class="save-btn-wrapper"><button class="J_Save">保存</button></span>';a.find(".save-btn-wrapper").length||a.css("position","relative").append(s),a.find(".save-btn-wrapper").stop().animate({width:"44px"})}).delegate(".input-text","focusout",function(t){var i=e(t.target),s=i.parent(),n=(e(this).val(),s.find(".J_Save")),l=!1;n.one("click",function(t){l=!0;var i=e(t.target),n=i.parent().prev();n.hasClass("product-shorttitle")?a._fn_save_shortTitle(n):a._fn_save_skuCode(n),s.find(".save-btn-wrapper").stop().animate({width:0})}),setTimeout(function(){l||(s.find(".save-btn-wrapper").stop().animate({width:0}),n.off("click"))},200)}),l.delegate(".product-thumb img","mouseover",e.proxy(function(e){this._fn_handle_img_mouseover(e)},this)),l.delegate(".product-thumb img","mouseout",e.proxy(function(e){this._fn_handle_img_mouseout(e)},this))},_fn_handle_img_mouseover:function(t){var i=e(t.target);this._fn_create_img_preview_tip(i)},_fn_handle_img_mouseout:function(t){var i=e(t.target);i.parents("div.prod-img").find(".img-help-tip").remove()},_fn_create_img_preview_tip:function(t){var i=t.attr("src").replace(/40/g,"130");e('<div class="img-help-tip"><span class="arrow-wraper"></span><span class="left-arrow"></span><img src="'+i+'"/></div>').appendTo(t.parents("div.prod-img"))},_fn_change_shortTitle:function(t,i){var a=t.find(".product-shorttitle");if(i){if(!t.find(".check-item:checked").length)return e.dialog.alert("当前未选中任何商品，请选择"),void t.find(".product-code").prop("checked",!1);e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");s.length&&a.val(a.val()+a.attr("outerid"))})}else e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");if(s.length){var n=a.val()||"",l=a.attr("outerid"),d=n.lastIndexOf(l);n&&d>-1&&(n=n.substring(0,d)+n.substring(d+l.length)),a.val(n)}})},_fn_save_skuCode:function(t){var i="",a="",s="",n="",l=!0;t.hasClass("product-code")?i=t.parents(".list-item"):t.hasClass("sku-code")&&(i=t.parents(".item-n-sku").find(".list-item"),n=t.parents(".sku-item").attr("skuid"),l=!1),s=i.attr("taobaoid"),a=i.attr("numiid"),l?API.item_edit_detail({taobaoId:s,numIid:a,outerId:e.trim(t.val())},function(){},function(){}):API.sku_edit({taobaoId:s,numIid:a,skuId:n,outerId:e.trim(t.val())},function(){},function(){})},_fn_save_shortTitle:function(e){var t=e.parents(".list-item"),i=e.attr("originalval"),a=e.val(),s={numIids:t.attr("numiid"),taobaoIds:t.attr("taobaoid"),shortTitles:""===a?"N/A":i===a?"-1":a};API.item_edit(s,function(){},function(){})},_fn_sync_prod_item:function(e){var t=this;API.item_sync_single({taobaoId:e.attr("taobaoid"),numIid:e.attr("numiid")},function(e){t._renderUI_after_detailed_updated(e.data)},function(){})},_fn_open_edit_dlg:function(e){var i=this;t.sub("module.prod.detail.info.updated",function(e){i._renderUI_after_detailed_updated(e),t.removeSub("module.prod.detail.info.updated")}),a.show(e)},_renderUI_after_detailed_updated:function(e){var t=this,a=e.numIid,s=this._elm_dom_container.find('.item-n-sku [numiid="'+a+'"]');s.parent().replaceWith(t._fn_create_item_UI({list:[e]})),this._elm_dom_container.find('.item-n-sku [numiid="'+a+'"]').addClass("list-item-clicked");var n=this._elm_dom_container.find(".prod-details");t._fn_create_detail_UI(e).appendTo(n.empty()),t._set_detail_info_maxHeight(n),i.updateItemData(a,e)},_fn_event_bind_4detailedInfo:function(t,i){var a=this;a._init_detail_height_related(t,i),t.delegate(".tab","click",function(i){var a=e(i.target),s=t.find(".info-content"),n=t.find(".for-prod-basic-info"),l=t.find(".for-prod-sku-info"),d=t.find(".for-prod-storage-info"),o=t.find(".for-prod-support-info");t.find(".tab").removeClass("selected-tab"),a=a.hasClass("num")?a.parent():a,a.addClass("selected-tab"),a.hasClass("prod-basic-info")?(s.hide(),n.show()):a.hasClass("prod-sku-info")?(s.hide(),l.show()):a.hasClass("prod-storage-info")?(s.hide(),d.show()):a.hasClass("prod-support-info")&&(s.hide(),o.show())}),t.delegate(".prod-sku-arrow","click",function(t){var i=e(t.target),a=i.parents(".sku-title"),s=i.parents(".prod-sku-item").find(".sku-body");i.hasClass("sku-arrow-down")?(i.removeClass("sku-arrow-down").addClass("sku-arrow-up"),a.addClass("opened"),s.show()):(i.removeClass("sku-arrow-up").addClass("sku-arrow-down"),a.removeClass("opened"),s.hide())}),t.delegate("a.operation","click",function(t){var i=e(t.target);if(i.hasClass("sync-item"))a._fn_sync_prod_item(i);else if(i.hasClass("edit-item")){var s=i.attr("taobaoid"),n=i.attr("numiid"),l=i.attr("outerid"),d=i.attr("type")?"淘宝"==i.attr("type")?"tb":"tm":"sys";a._fn_open_edit_dlg({taobaoId:s,numIid:n,outerId:l,type:d})}else i.hasClass("more-operation")&&console.info("more-o")})},_init_detail_height_related:function(t){var i=t.find(".module-prod-top"),a=t.find(".list-header"),s=t.find(".prod-details"),n=t.find(".topbar-placeholder");e("#modlue_leftNav").trigger("detach.ScrollToFixed"),i.trigger("detach.ScrollToFixed"),a.trigger("detach.ScrollToFixed"),s.trigger("detach.ScrollToFixed"),e("#modlue_leftNav").scrollToFixed({marginTop:0,zIndex:110}),i.scrollToFixed({marginTop:41,zIndex:105}),a.scrollToFixed({marginTop:117,zIndex:101}),s.scrollToFixed({marginTop:41+n.height()+i.height(),zIndex:101})},_fn_create_item_UI:function(i){return e(t.template.get("template.prod.list.body",i))},_fn_create_detail_UI:function(i){return i.skus=i.skus||[],i.skusNumber=i.skus.length,i.created=RayCloud.util.date.getdate(1*i.created,"YY-MM-DD HH:MM:SS"),i.defined1Key=i.defined1Key||"自定义1",e(t.template.get("template.prod.list.itemDetails",i))},_fn_create_item_sku_UI:function(i){return i.skus=i.skus||[],e(t.template.get("template.prod.list.body.skus",i))},_set_detail_info_maxHeight:function(t){var i=this._elm_dom_container,a=i.find(".module-prod-top"),s=i.find(".detailed-info"),n=s.find(".label-tab"),l=i.find(".topbar-placeholder"),d=e("#toolbar"),o=s.find(".prod-place-holder"),r=document.documentElement.clientHeight-d.height()-a.height()-l.height()-i.find(".operation-options").height()-i.find(".prod-pages").height()-i.find(".module-prod-taskbar").height();r=r>n.height()?r:n.height();var p=20;o.css("height",r-n.height()-p+"px"),t.find(".lab-content").css({"max-height":r-p+"px",overflow:"auto"})},_fn_event_unbind:function(){},_fn_event_handler:function(){},_event_handler_object:{},_status_hashs:{},_update:function(e,t){this._fn_dom_render(e),t&&t()},reload:function(){this.update(this._status_hashs,null,!0)},init:function(){},update:function(t){t.pageNo&&t.pageNo.match(/^[1-9][0-9]*$/)||(t.pageNo="1"),t.pageSize&&t.pageSize.match(/^[1-9][0-9]*$/)||(t.pageSize=localStorage.prod_manage_p_s||"20"),this._status_hashs.pageSize!=t.pageSize&&(localStorage.prod_manage_p_s=t.pageSize),this._status_hashs=e.extend({},t),this._update(t)},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.find(".prod-details").trigger("detach.ScrollToFixed"),this._elm_dom_container.find(".module-prod-top").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),this._elm_dom_container.find(".list-header").trigger("detach.ScrollToFixed"),e(document).off("click",this.hideSelectTree),this._elm_dom_container.remove())}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-prod-wrap">','<div class="module-prod-top" style="position:relative;"></div>','<div class="module-prod-list">','<div class="main-list">','<div class="list-header">','<div class="prod-checkbox"><span class="check"><input type="checkbox" class="J_Select_All"></span></div>','<div class="prod-img">宝贝图片</div>','<div class="prod-name">商品名称/规格</div>','<div class="prod-code">商家编码</div>','<div class="prod-short">商品简称<label><span class="check"><input type="checkbox" class="product-code"></span>商家编码</label></div>',"</div>",'<div class="list-body">',"</div>","</div>",'<div class="prod-pages clearfix" style="background:#ffffff;">','<div class="foot-check-all"><label><span class="check"><input type="checkbox" class="J_Select_All"></span>全选</label></div>','<div class="J_Pages"></div>',"</div>",'<div class="module-prod-taskbar module-pt-taskbar-inner">','<div class="f-lt"><a id="bat-remove">批量删除</a></div>','<div class="place-holder">&nbsp;</div>',"</div>",'<div class="prod-details">',"</div>","</div>",'<div class="module-prod-taskbar"></div>',"</div>"],a=['<div class="item-n-sku" act-loop="item in list">','<div class="list-item" numiid="{{item.numIid}}" taobaoid="{{item.taobaoId}}" outerid="{{item.outerId}}">','<div class="prod-checkbox">','<span class="check"><input type="checkbox" class="check-item"></span>','<div act-if="item.skus != undefined" class="mr_5"><span class="prod-item-icon prod-icon-close"></span></div>','<div act-if="item.skus == undefined" class="mr_5" style="width: 14px;height: 14px;">&nbsp;</div>',"</div>",'<div class="prod-img">','<a target="_blank" href="http://item.taobao.com/item.html?id={{item.numIid}}" class="product-thumb">','<img src="{{item.picPath}}_40x40.jpg"/>',"</a>","</div>",'<div class="prod-name">','<a target="_blank" href="http://item.taobao.com/item.html?id={{item.numIid}}" class="prod-name-link">{{item.title}}</a>',"</div>",'<div class="prod-code"><input type="text" class="input-text product-code" value="{{item.outerId}}"/></div>','<div class="prod-short"><input type="text" class="input-text product-shorttitle" outerid="{{item.outerId}}" originalval="{{item.shortTitle}}" value="{{item.shortTitle}}"/></div>',"</div>",'<div class="list-item-sku">',"</div>","</div>"],s=['<div class="sku-item" act-loop="sku in skus" skuid="{{sku.skuId}}">','<span style="display:inline-block;width: 115px;">&nbsp;</span>',"<span>&nbsp;</span>",'<div class="sku-name sku-name-wrapper">','<span class="sku-name-value" act-loop="prop in sku.propsNames">{{prop.name}}:<span class="color-prop-name">{{prop.value}}</span>&nbsp;&nbsp;</span>',"</div>",'<div class="sku-outid"><input type="text" class="input-text sku-code" value="{{sku.outerId}}"/></div>','<div class="sku-title"></div>',"</div>"],n=['<div class="module-topbar-wrap">',"<div>",'<div id="module-prod-topBar" class="J_module-prod-topBar">','<div class="module-prod-searchBar-container J_SubModule_Query">','<div class="module-prod-searchBar J_SearchBar">','<div class="ui-select ui-select-prodcatagory">','<div class="ui-select-hd cata-select-hd">','<div class="ui-select-txt cata-select-txt" style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 133px;" taobaoid="{{taobaoId}}" id="{{id}}" title="{{title}}" cid="{{cid}}">{{title}}</div>','<div class="ui-select-arrow"><b></b><i></i></div>',"</div>",'<div class="control-catagory-wrap ui-select-bd cata-select-bd"></div>',"</div>",'<input type="text" class="ml_10 search-content" placeholder="商品信息（备注、颜色、简称、编码）" value="{{text}}" name="text"/>','<button class="btn btn-primary btn-search ml_10">查询</button>','<button class="btn btn-primary btn-sync" id="item_sync">同步商品</button>',"</div>","</div>","</div>",'<div class="topbar-searchBar-container">','<div class="topbar-placeholder"></div>','<div class="module-trade-searchBar-btn"><b></b></div>',"</div>","</div>","</div>"],l=['<div class="operation-options">','<span class="o-single-change-note">单品操作</span>','<span class="o-sync"><a class="operation sync-item" numiid="{{numIid}}" taobaoid="{{taobaoId}}" outerid="{{outerId}}">同步</a></span>','<span class="o-delete"><a class="operation edit-item" numiid="{{numIid}}" taobaoid="{{taobaoId}}" outerid="{{outerId}}">修改</a></span>',"</div>",'<div class="detailed-info">','<div class="label-tab">','<div class="tab prod-basic-info selected-tab">基本信息</div>','<div class="tab prod-sku-info">规格信息<span class="num">{{skusNumber}}</span></div>','<div class="tab prod-storage-info">仓储信息</div>','<div class="tab prod-support-info">供货商</div>','<div class="prod-place-holder"></div>',"</div>",'<div class="lab-content">','<div class="for-prod-basic-info info-content">','<div class="info-item">','<div class="info-item-label">商品分类：</div>','<div class="info-item-value"><span class="platform-shop-flag">{{sellerCids[0].platform}}</span>&nbsp;&nbsp{{sellerCids[0].name}}</div>',"</div>",'<div class="info-item">','<div class="info-item-label">平台信息：</div>','<div class="info-item-value">','<a act-loop="platform in platform" type="{{platform}}" numiid="{{numIid}}" taobaoid="{{taobaoId}}" outerid="{{outerId}}" class="operation edit-item platform-allocation">{{platform}}</a>',"</div>","</div>",'<div class="info-item">','<div class="info-item-label">所在店铺：</div>','<div class="info-item-value">','<div class="shop-info" act-loop="_shop in shops"><span>{{_shop.platform}}</span>&nbsp;>&nbsp;<span>{{_shop.name}}</span></div>',"</div>","</div>",'<div class="info-item">','<div class="info-item-label">品牌：</div>','<div class="info-item-value">{{brand}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">计量单位：</div>','<div class="info-item-value">{{unit}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">重量（千克）：</div>','<div class="info-item-value">{{weight}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">商品状态：</div>','<div class="info-item-value">{{status}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">商品条形码：</div>','<div class="info-item-value">{{barcode}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">备注：</div>','<div class="info-item-value">{{remark}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">系统创建时间：</div>','<div class="info-item-value">{{created}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">{{defined1Key}}：</div>','<div class="info-item-value">{{defined1}}&nbsp;</div>',"</div>","</div>",'<div class="for-prod-sku-info info-content" style="display: none;">','<div class="prod-sku-item" act-loop="sku in skus">','<div class="info-item sku-title">','<div class="info-item-label">规格</div>','<div class="info-item-value"><span class="sku-value">{{sku.propertiesName}}&nbsp;</span><span class="prod-sku-arrow sku-arrow-down"></span></div>',"</div>",'<div class="sku-body">','<div class="info-item">','<div class="info-item-label">所在店铺：</div>','<div class="info-item-value">','<div class="shop-info" act-loop="_shop in sku.shop"><span>{{_shop.platform}}</span>&nbsp;>&nbsp;<span>{{_shop.name}}</span></div>',"</div>","</div>",'<div class="info-item">','<div class="info-item-label">规格状态：</div>','<div class="info-item-value">{{sku.status}}&nbsp;</div>',"</div>",'<div class="info-item">','<div class="info-item-label">规格条形码：</div>','<div class="info-item-value">{{sku.barcode}}&nbsp;</div>',"</div>","</div>","</div>","</div>",'<div class="for-prod-storage-info info-content" style="display: none;">','<div class="storage-title">',"<span>商品</span>",'<span class="store-pos-info">货位</span>','<span class="available-storage">可售库存</span>',"</div>",'<div class="storage-product-item">','<span class="storage-prod-img"><img src="{{picPath}}_40x40.jpg"/></span>','<span class="store-pos-info">{{allocations}}&nbsp;</span>','<span class="available-storage">{{availableInStock}}&nbsp;</span>',"</div>",'<div class="storage-title">',"<span>规格</span>",'<span class="store-pos-info">货位</span>','<span class="available-storage">可售库存</span>',"</div>",'<div class="storage-sku-item" act-loop="_sku in skus">',"<span>{{_sku.propertiesName}}</span>",'<span class="store-pos-info">','<span class="allocate-name" act-loop="allocate in _sku.allocations">{{allocate}}</span>',"</span>",'<span class="available-storage">{{_sku.availableInStock}}&nbsp;</span>',"</div>","</div>",'<div class="for-prod-support-info info-content" style="display: none;">','<div class="support-title">','<span class="support-title-prod">商品</span>','<span class="support-title-supply">供货商</span>','<span class="support-title-price">进价</span>','<span class="support-title-status">状态</span>',"</div>",'<div class="support-product-body">','<div class="support-prod-img"><img src="{{picPath}}_40x40.jpg"/></div>','<div class="support-name-list">','<div class="support-product-item" act-loop="supplier in supplierList">','<span class="support-product-pos">{{supplier.name}}</span>','<span class="support-product-price" act-if="skus == undefined">{{supplier.purchasePrice}}</span>','<span class="support-product-price" act-if="skus != undefined">{{supplier.priceCostInterVal}}</span>','<span class="support-product-status">{{supplier.status}}</span>',"</div>","</div>","</div>",'<div class="support-title">','<span class="support-title-sku">规格</span>','<span class="support-title-supply">供货商</span>','<span class="support-title-price">进价</span>','<span class="support-title-status">状态</span>',"</div>",'<div class="support-sku-item" act-loop="__sku in skus">','<div class="support-sku-name">{{__sku.propertiesName}}</div>','<div class="sku-name-list-wrap">','<div class="sku-support-name-list" act-loop="supply in __sku.supplier">','<span class="support-product-pos">{{supply.name}}</span>','<span class="support-product-price">{{supply.purchasePrice}}</span>','<span class="support-product-status">{{supply.status}}</span>',"</div>","</div>","</div>","</div>","</div>","</div>"],d=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option act-if="pageSize == 10" value="10" selected>10</option>','<option act-if="pageSize != 10" value="10">10</option>','<option act-if="pageSize == 20" value="20" selected>20</option>','<option act-if="pageSize != 20" value="20">20</option>','<option act-if="pageSize == 50" value="50" selected>50</option>','<option act-if="pageSize != 50" value="50">50</option>','<option act-if="pageSize == 100" value="100" selected>100</option>','<option act-if="pageSize != 100" value="100">100</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"];t.template.addTemp("template.prod.list.wrapper",i),t.template.addTemp("template.prod.list.body",a),t.template.addTemp("template.prod.list.body.skus",s),t.template.addTemp("template.prod.list.topbar",n),t.template.addTemp("template.prod.list.itemDetails",l),t.template.addTemp("template.prod.list.pages.temp",d)}(jQuery,RayCloud),function(e,t){var i=(t.controls.get("control.prod.dataModel"),t.controls.get("control.prod.editor"),{name:"prod.prod_statistic",depend:"prod",_elm_dom_root:"#main",_elm_template_name:"template.prod.statistic.wrapper",_fn_dom_render:function(i){var a=this,s=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(e(this._elm_dom_root).empty()),n=function(){a._fn_event_bind_4list(s,i)};i.text=decodeURIComponent(i.text||""),this._load_prodlist_data(s,i,n),this._fn_event_bind(s,i)},_load_prodlist_data:function(e,t,i){var a=this,s={pageNo:t.pageNo||1,pageSize:t.pageSize||20,text:t.text||"",timeStamp:t.timeStamp||"",startTime:t.startTime||"",endTime:t.endTime||"",taobaoId:t.taobaoId||""};API.item_sales_list(s,function(t){if(t.data.list.length){var s={list:t.data.list};a._elm_dom_list=a._fn_create_item_UI(s).appendTo(e.find(".list-body").empty()),a._update_pages(t.data),i&&i()}else e.find(".list-body").html('<tr><td colspan="6"><div class="pd_30">暂无数据</div></td></tr>'),a._update_pages()},function(){})},_fn_ctrl_setHash:function(i){t.pages.setCurHash(e.extend({},this._status_hashs,i))},_update_pages:function(e){var i=this._elm_dom_container.find(".J_Pages"),a=i.find("select");if(a&&a.iSelect("destroy"),e){var s=Math.ceil(e.total/e.page.pageSize),n={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:s,isLastPage:e.page.pageNo==s};i.html(t.template.get("template.prod.statistic.pages.temp",n)),this._bind_event_4_page_changed(i),i.find("select").iSelect()}else i.html("")},_bind_event_4_page_changed:function(t){var i=this;t.find("select").on("change",function(){i._fn_ctrl_setHash({pageNo:1,pageSize:e(this).val()})}),t.find("a.module-trade-pages-pageNo").on("click",function(){var t=e(this).attr("data-page");t&&i._fn_ctrl_setHash({pageNo:t})}),t.find(".input-small").on("focusin",function(){t.find(".J_Submit_Container").stop().animate({width:"44px"})
}).on("focusout",function(){var a=e(this).val(),s=e(this).attr("data-max"),n=!1;t.find(".J_Submit").on("click",function(t){return t.preventDefault(),a-0>s-0?void e.dialog.alert("超出最大页数！"):(n=!0,void(/^\d*$/.test(a)&&i._fn_ctrl_setHash({pageNo:a})))}),setTimeout(function(){n||t.find(".J_Submit_Container").stop().animate({width:0})},500)})},_fn_event_bind:function(e,t){this._fn_event_bind_topbar(e,t)},_fn_event_bind_topbar:function(i,a){var s=this,n=t.user.get(),l=e(t.template.get("template.prod.statistic.topbar",{userConf:n.userConf,bindShops:n.bindShops})).appendTo(i.find(".module-prod-top")),d=!0;i.find(".module-trade-searchBar-btn").on("click",function(){e(this).toggleClass("module-trade-searchBar-btn-down"),i.find("#module-prod-topBar").stop().animate({height:d?0:60},{progress:function(){}}),d=!d}),i.find(".btn-primary").on("click",function(){s._fn_query_product(i)}),s._fn_init_topbar_from_hashs(l,a)},_fn_init_topbar_from_hashs:function(e,i){if(e.find("select").iSelect("select",i.taobaoId||""),i.startTime){var a=t.util.date.getdate(1*i.startTime,"YY-MM-DD HH:MM");e.find("#start_time").val(a)}if(i.endTime){var s=t.util.date.getdate(1*i.endTime,"YY-MM-DD HH:MM");e.find("#end_time").val(s)}i.text&&e.find(".search-content").val(i.text)},_fn_query_product:function(i){var a="";if(i.find(".statis-select-shop").length&&(a=i.find(".select-shop-menu").val()),i.find(".J_Time_Range").length){var s=i.find("#start_time").val(),n=i.find("#end_time").val();if(s){if(!t.util.date.is_date(s))return void e.dialog.alert("开始时间格式不正确！");s=t.util.date.tojsdate(s).getTime()}if(n){if(!t.util.date.is_date(n))return void e.dialog.alert("结束时间格式不正确！");n=t.util.date.tojsdate(n).getTime()||""}if(s&&n&&s>=n)return void e.dialog.alert("开始时间必须小于结束时间！")}var l={text:encodeURIComponent(i.find(".search-content").val()||""),pageNo:1,startTime:s,endTime:n,taobaoId:a,timeStamp:+new Date};this._fn_ctrl_setHash(l)},_fn_event_bind_4list:function(t){var i=null,a=["check-item","input-text","J_Save"],s=t.find(".module-prod-list");t.delegate(".list-item","click",function(t){i&&clearTimeout(i),i=setTimeout(function(){var i=e(t.target),s=!1,n=i.hasClass("list-item")?i:i.parents(".list-item");numiid=n.attr("numiid");for(var l=0;l<a.length;l++)if(i.hasClass(a[l])){s=!0;break}if(!s){var d=n.next(),o=n.find(".prod-item-icon");d.is(":visible")?(o.removeClass("prod-icon-open").addClass("prod-icon-close"),d.slideUp()):(o.removeClass("prod-icon-close").addClass("prod-icon-open"),d.slideDown())}},200)}),s.delegate(".product-thumb img","mouseover",e.proxy(function(e){this._fn_handle_img_mouseover(e)},this)),s.delegate(".product-thumb img","mouseout",e.proxy(function(e){this._fn_handle_img_mouseout(e)},this))},_fn_handle_img_mouseover:function(t){var i=e(t.target);this._fn_create_img_preview_tip(i)},_fn_handle_img_mouseout:function(t){var i=e(t.target);i.parents("div.prod-img").find(".img-help-tip").remove()},_fn_create_img_preview_tip:function(t){var i=t.attr("src").replace(/40/g,"130");e('<div class="img-help-tip"><span class="arrow-wraper"></span><span class="left-arrow"></span><img src="'+i+'"/></div>').appendTo(t.parents("div.prod-img"))},_fn_create_item_UI:function(i){return e(t.template.get("template.prod.statistic.list.body",i))},_fn_event_unbind:function(){},_fn_event_handler:function(){},_event_handler_object:{},_status_hashs:{},_update:function(e,t){this._fn_dom_render(e),t&&t()},init:function(){},update:function(e){this._update(e)},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.remove())}});t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-prod-wrap module-statistic-wrapper">','<div class="module-prod-top"></div>','<div class="statis-list-note">温馨小贴士：若您的展示信息不全， 请在<a href="#/prod/cata_management/">商品管理</a>中设置</div>','<div class="module-prod-list">','<div class="main-list">','<div class="list-header">','<div class="prod-checkbox">&nbsp;</div>','<div class="prod-img">宝贝图片</div>','<div class="prod-name">商品名称/单品规格</div>','<div class="prod-code">商家编码</div>','<div class="prod-sell-count">销量</div>','<div class="prod-unit">单位</div>','<div class="prod-sell-money">销售金额（元）</div>','<div class="prod-inventory">当前可售库存</div>','<div class="prod-tb-inventory">当前淘宝库存</div>',"</div>",'<div class="list-body">',"</div>","</div>",'<div class="prod-pages clearfix" style="background:#ffffff;">','<div class="J_Pages"></div>',"</div>","</div>",'<div class="module-prod-taskbar"></div>',"</div>"],a=['<div class="module-topbar-wrap">',"<div>",'<div id="module-prod-topBar" class="J_module-prod-topBar">','<div class="module-prod-searchBar-container J_SubModule_Query">','<div class="module-prod-searchBar J_SearchBar">','<span class="statis-select-shop" act-if="userConf.mmb == 1">选择店铺：','<select class="select-shop-menu">','<option value="">全部</option>','<option act-loop="bindshop in bindShops" id="{{bindshop.id}}" sid="{{bindshop.sid}}" value="{{bindshop.taobaoId}}">{{bindshop.title}}</option>',"</select>","</span>","<span>入库时间：",'<span class="J_Time_Range">','<input id="start_time" type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startTime" class="w100 date-picker ml_10" > &mdash; <input id="end_time" type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="endTime" class="w100 date-picker" >',"</span>","</span>",'<input type="text" class="ml_10 search-content" placeholder="商品信息（备注、颜色、简称、编码、货号）" name="text"/>','<button class="btn btn-primary ml_10">查询</button>',"</div>","</div>","</div>",'<div style="position:relative;width:100%;border-top:1px solid #a3abb4;height:0px;font-size:0;"><div class="module-trade-searchBar-btn"><b></b></div></div>',"</div>","</div>"],s=['<div class="item-n-sku" act-loop="item in list">','<div class="list-item" numiid="{{item.numIid}}" taobaoid="{{item.taobaoId}}">','<div class="prod-checkbox">','<div class="mr_5"><span class="prod-item-icon prod-icon-close"></span></div>',"</div>",'<div class="prod-img">','<a target="_blank" href="http://item.taobao.com/item.html?id={{item.numIid}}" class="product-thumb">','<img src="{{item.picPath}}_40x40.jpg"/>',"</a>","</div>",'<div class="prod-name">{{item.title}}</div>','<div class="prod-code">{{item.outerId}}</div>','<div class="prod-sell-count">{{item.salesCount}}</div>','<div class="prod-unit">{{item.unit}}</div>','<div class="prod-sell-money">{{item.salesMoney}}</div>','<div class="prod-inventory">{{item.warehouse.availableInStock}}</div>','<div class="prod-tb-inventory">{{item.warehouse.quantity}}</div>',"</div>",'<div class="list-item-sku">','<div class="sku-item" act-loop="sku in item.skus">','<span style="display:inline-block;width: 115px;">&nbsp;</span>',"<span>&nbsp;</span>",'<div class="sku-name">{{sku.propertiesName}}</div>','<div class="sku-outid">{{sku.outerId}}</div>','<div class="sku-sell-count">{{sku.salesCount}}</div>','<div class="sku-unit">{{sku.unit}}</div>','<div class="sku-sell-money">{{sku.salesMoney}}</div>','<div class="sku-inventory">{{sku.warehouses.availableInStock}}</div>','<div class="sku-tb-inventory">{{sku.warehouses.quantity}}</div>',"</div>","</div>","</div>"],n=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option act-if="pageSize == 10" value="10" selected>10</option>','<option act-if="pageSize != 10" value="10">10</option>','<option act-if="pageSize == 20" value="20" selected>20</option>','<option act-if="pageSize != 20" value="20">20</option>','<option act-if="pageSize == 50" value="50" selected>50</option>','<option act-if="pageSize != 50" value="50">50</option>','<option act-if="pageSize == 100" value="100" selected>100</option>','<option act-if="pageSize != 100" value="100">100</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"];t.template.addTemp("template.prod.statistic.wrapper",i),t.template.addTemp("template.prod.statistic.topbar",a),t.template.addTemp("template.prod.statistic.list.body",s),t.template.addTemp("template.prod.statistic.pages.temp",n)}(jQuery,RayCloud),function(e,t){var i=['<div class="folder-tree-container">','<ul class="cata-basic-folder">','<li class="cata-item basic-cata-item"><span class="cata-icons open-icon"></span><span class="basic-item-foldername">商品分类</span></li>','<li class="cata-item cat-subfolder-container">','<ul class="subfolder">',"</ul>","</li>","</ul>","</div>"],a=['<li class="cata-item cat-subfolder-container shop-level" id="{{id}}" taobaoid="{{taobaoId}}" cid="{{cid}}" parentcid="{{parentCid}}">','<span class="cata-icons expend-icon close-icon"></span>','<span class="cata-name-wrapper">','<span class="cata-folder-name">','<span act-if="showIcon == true" class="cata-icons folder-icon"></span>','<span act-if="showCheckBox == true" class="check"><input type="checkbox" class="check-folder-name"></span>','<span act-if="isLocal == 1" class="folder-name shop-name">系统</span>','<span act-if="isLocal == 0 && source == taobao" class="folder-name shop-name">（淘宝）{{shopName}}</span>',"</span>",'<button act-if="itemCanHide == true" class="btn cata-hide-folder">隐藏分类</button>',"</span>",'<ul class="subfolder sec-level-folder">@@subitems</ul>',"</li>"],s=['<li class="cata-item cat-subfolder-container cata-level" id="{{id}}" taobaoid="{{taobaoId}}" cid="{{cid}}" parentcid="{{parentCid}}">','<span class="cata-icons expend-icon close-icon"></span>','<span class="cata-name-wrapper">','<span class="cata-folder-name">','<span act-if="showIcon == true" class="cata-icons folder-icon"></span>','<span act-if="showCheckBox == true" class="check"><input type="checkbox" class="check-folder-name"></span>','<span class="folder-name">{{name}}</span>',"</span>",'<button act-if="itemCanHide == true" class="btn cata-hide-folder">隐藏分类</button>',"</span>",'<ul class="subfolder last-level-folder">@@{{cid}}</ul>',"</li>"],n=['<ul class="subfolder sec-level-folder">@@subitems</ul>'];t.template.addTemp("template.product.folder.tree.temp",i),t.template.addTemp("template.product.folder.tree.subfolder_item.temp",a),t.template.addTemp("template.product.folder.tree.subcata_item.temp",s),t.template.addTemp("template.product.folder.tree.shoplevel_item.temp",n);var l={show:function(t,i,a){a=e.extend({},{showIcon:!1,showCheckBox:!1,showShopLevel:!1,itemCanHide:!1},a),this._show(t,i,a)},_show:function(e,t,i){this.folderdata=t,this._render(e,t,i)},hide:function(){},_render:function(i,a,s){if(s.showShopLevel){var n=this._render_shopLevel_tree(a,s);n&&(this.$el=e(n).appendTo(i.empty()).show())}else this.$el=e(t.template.get("template.product.folder.tree.temp")).appendTo(i.empty()),this._render_subFolders(a,s);this._event_bind(this.$el,a)},_render_shopLevel_tree:function(i,a){var s=i.data,n="";if(s.length){for(var l=0;l<s.length;l++){var d=e.extend(s[l],a),o=this._create_subCataItems(s[l],a);n+=t.template.get("template.product.folder.tree.shoplevel_item.temp",d).replace("@@subitems",o).replace(/@@\d+/g,"")}return n}},_render_subFolders:function(i,a){var s=i.data,n="";if(this.$subfolder=this.$el.find(".subfolder"),s.length){for(var l=0;l<s.length;l++){var d=e.extend(s[l],a),o=this._create_subCataItems(s[l],a);n+=t.template.get("template.product.folder.tree.subfolder_item.temp",d).replace("@@subitems",o).replace(/@@\d+/g,"")}this.$subfolder.append(n)}},_create_subCataItems:function(i,a){var s="",n=i.subIds,l=i.sellerCats,d={};if(n&&n.length)for(var o=0;o<n.length;o++){var r=n[o],p=l[r],c=e.extend(p,a),_=r.split("_");1==_.length?s+=t.template.get("template.product.folder.tree.subcata_item.temp",c):2==_.length&&(d[_[0]]=d[_[0]]||[],d[_[0]].push(t.template.get("template.product.folder.tree.subcata_item.temp",c)))}for(var m in d)d.hasOwnProperty(m)&&(s=s.replace("@@"+m,d[m].join("")));return s},_event_bind:function(t){var i=t.find(".cata-name-wrapper");e.each(i,function(t,i){e(i).next().find("li").length||e(i).prev().removeClass("close-icon").addClass("none-icon")}),t.delegate(".expend-icon","click",function(t){var i=e(t.target),a=i.parent().children(".cata-name-wrapper"),s=i.siblings(".subfolder");i.hasClass("close-icon")?(i.removeClass("close-icon").addClass("open-icon"),a.find(".folder-icon").removeClass("folder-icon").addClass("unfolder-icon"),s.show()):(i.removeClass("open-icon").addClass("close-icon"),a.find(".unfolder-icon").removeClass("unfolder-icon").addClass("folder-icon"),s.hide())})},_event_unbind:function(){this.$el&&this.$el.undelegate()},clear:function(){this.$el&&(this.$el._event_unbind(),this.$el.empty().remove(),this.$el=null)},destroy:function(){this.hide(),this.clear()}};t.controls.define("control.prod.folder.tree",{init:function(){return l}})}(jQuery,RayCloud),function(e,t){var i={name:"prod.cata_management",depend:"prod",_elm_dom_root:"#main",_elm_template_name:"template.prod.catagory.page.temp",_fn_dom_render:function(i){var a=this,s=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(e(this._elm_dom_root).empty()),n=function(e){a._fn_init_folderTree(s.find(".cata-folders-container"),e),a._fn_event_bind(s)};this._load_foldertree_data(s,i,n)},_load_foldertree_data:function(e,t,i){API.item_cat_list({getData:!0,showHide:!0},function(e){i&&i(e)},function(){})},_fn_init_folderTree:function(e,i){var a=t.controls.get("control.prod.folder.tree"),s={showIcon:!0,showCheckBox:!1,itemCanHide:!1};a.show(e,i,s)},_fn_event_bind:function(t){var i=this;t.find(".func-sync-btn").on("click",function(){API.item_cat_sync({getData:!0,showHide:!0},function(e){i._fn_init_folderTree(t.find(".cata-folders-container"),e)},function(){})}),t.find(".func-edit-btn").on("click",function(){i._edit_cata_name(t)}),t.delegate(".cata-level","click",function(i){var a=e(i.target),s=a.hasClass("cata-level")?a:a.closest(".cata-level");t.find(".cata-level").removeClass("item-selected"),s.toggleClass("item-selected")}),t.delegate(".folder-name","dblclick",function(t){var i=e(t.target),a=i.closest(".cata-level");if(!i.hasClass("shop-name")){i.hide();var s=e('<input type="text" class="new-foldername" value="'+i.text()+'" maxlength="20"/>').appendTo(i.parent());s.select().focus(),s.on("focusout",function(t){var n=e(t.target),l=n.val();API.item_cat_update({taobaoId:a.attr("taobaoid"),id:a.attr("id"),name:l},function(){i.text(l).show(),s.remove()},function(){})})}})},_edit_cata_name:function(t){var i=t.find(".item-selected"),a=i.find(".folder-name").html();if(i.length){var s=e('<div style="padding: 20px;"><span>类目名称：</span><input id="new_cata_name" style="width: 200px;" type="text" value="'+a+'" maxlength="20"/></div>').appendTo("body");this.$dialog=e.dialog({title:"修改类目名称",width:480,fixed:!1,content:s.show(),cancelVal:"取消",okVal:"保存",ok:function(){var t=e.trim(s.find("#new_cata_name").val());if(!t)return!1;API.item_cat_update({taobaoId:i.attr("taobaoid"),id:i.attr("id"),name:t},function(){i.find(".folder-name").html(s.find("#new_cata_name").val())},function(){})}})}else e.dialog.alert("请选定要修改的类目")},_fn_event_unbind:function(){this._elm_dom_container.undelegate()},_fn_event_handler:function(){},_event_handler_object:{},_status_hashs:{},_update:function(e,t){this._fn_dom_render(e),t&&t()},init:function(){},update:function(e){this._update(e)},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.remove())}};t.modules.define(i.name,i)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-catagory-wrap">','<div class="cata-func-btns">','<span class="sync-area">','<button class="btn func-sync-btn"><span class="cata-icons refresh-icon"></span>同步分类</button>',"</span>",'<button class="btn func-edit-btn"><span class="cata-icons edit-icon"></span>编辑分类</button>',"</div>",'<div class="cata-note">','<span class="cata-note-label">温馨小贴士：</span>','<div class="cata-note-content">','<div class="cata-note-item">1. 最多支持四级菜单</div>','<div class="cata-note-item">2. 菜单隐藏后，商品分类下拉框将不会展示该菜单</div>',"</div>","</div>",'<div class="cata-folders-container"></div>',"</div>"];t.template.addTemp("template.prod.catagory.page.temp",i)}(jQuery,RayCloud),function(e){var t=e.controls.get("control.trade.smart_match"),i=e.controls.get("control.common_express"),a={},s={name:"pt.smart_match",depend:"pt",_elm_dom_root:"#main",_data_template_all:"",_data_local_data:{},_elm_box_container:null,_fn_ctrl_dom_render:function(){t.list({},$.proxy(function(t){var i=this._elm_dom_container=$(e.template.get("template.smart_match.list",t)).appendTo(this._elm_dom_root),a=this;if(0==t.expressSmartMatchList.length){var s=e.template.get("template.smart_match.add.template",t);i.find("#matchBody").html(s)}else{var n=t.userExpressTemplateList,l=t.expressSmartMatchList;l&&l.length>0&&$.each(l,function(t,i){var s=a._fn_ctrl_stateBinders_join(i.stateBinders),l=i.excludeAreas;a._fn_convert_excludeAreas(l);var d={userExpressTemplateList:n,stateBinderStr:s,excludeAreas:l},o=e.template.get("template.smart_match.show.template",d),r=$(o).appendTo($("#matchBody")),p=i.templateId;1==i.templateType&&(p="w"+p),r.find('[name="select-template"]').iSelect("select",String(p)),a._fn_select_state_push(s)})}this._fn_event_bind()},this))},_common_list:{del_match:function(e,t){var i=this;$.dialog.confirm("您是否要删除该区域的设置?",function(){var e=$(t.currentTarget),a=e.parent().parent().find(".J_StateBinderStr").text();a&&"未添加地区"!=a&&i._fn_select_state_pop(a),e.parent().parent().remove()})},add_match:function(){i.get($.proxy(function(t){var i={userExpressTemplateList:t},a=e.template.get("template.smart_match.add.template",i);this.getContainer().find("#matchBody").append(a),this._elm_dom_container.find("select").iSelect()},this))},open_status:function(e,i){var a=$(i.target),s=a.attr("data-value");t.openStatus({isOpen:"false"==s},$.proxy(function(){a.attr("data-value","false"==s),"false"!=s?(a.removeClass("smart-match-open").addClass("smart-match-close"),this.getContainer().find(".btn-success").text("保存并开启")):(a.removeClass("smart-match-close").addClass("smart-match-open"),this.getContainer().find(".btn-success").text("保存"))},this))},save_match:function(){for(var e=[],i=$(this.getContainer()).find(".J_SmartMatchTemplate"),a=0;a<i.length;a++){var s=i[a],n=$(s).find(".J_StateBinderStr").html(),l=[];if(n&&n.length>0){var d=n.split(",");$.each(d,function(e,t){if(t&&""!=t&&"未添加地区"!=t){var i={state:t};l.push(i)}})}for(var o=[],r=$(s).find(".J_ExcludeAreaDiv"),p=0;p<r.length;p++){var c=r[p],_={},m=$(c).attr("data-id"),u=$(c).attr("data-type"),h=$(c).attr("data-state"),f=$(c).attr("data-city"),v=$(c).attr("data-district");m=m.replace("w",""),_.templateId=parseInt(m),_.templateType=parseInt(u),_.state=h,_.city=f,_.district=v,o.push(_)}var g="";o&&o.length>0&&(g=JSON.stringify(o));var m=$(s).find('[name="select-template"]').val(),u=$(s).find('[name="select-template"] [value='+m+"]").attr("data-type");if(""==m)return $.dialog.alert("请选择快递模版!"),!1;var b={};m=m.replace("w",""),b.templateId=parseInt(m),b.templateType=parseInt(u),b.stateBinderStr=JSON.stringify(l),b.excludeAreaStr=JSON.stringify(o),e.push(b)}if(this._fn_validate_smart_match_save(e)){var y={expressSmartMatchs:JSON.stringify(e)};t.save(y,$.proxy(function(e){if(e.status){var t=this.getContainer().find(".smart-match-close");t&&t.removeClass("smart-match-close").addClass("smart-match-open"),$.dialog({title:"提示",icon:"ok.png",content:"保存成功！",ok:!0})}},this))}},edit_area:function(t,i){var s=$(i.target),n=s.parent(),l="",d=this;this.popupdlg1&&this.popupdlg1.remove(),n.find(".address-map").length&&n.find(".address-map").remove(),this.popupdlg1=l=$(e.template.get("template.smart_match.add.address")).appendTo(n),l.css({top:s.offset().top-n.offset().top+s.height(),left:s.offset().left-n.offset().left});var o=n.find(".J_StateBinderStr").text();if("未添加地区"!=o){var r=o.split(","),p=[];$.each(r,function(e,t){p[t]=t});var c=$("input[name='stateBinderStr']");$.each(c,function(e,t){p[$(t).val()]?$(t).prop("checked",!0):a[$(t).val()]&&($(t).prop("checked",!0),$(t).prop("disabled",!0))})}else{var c=$("input[name='stateBinderStr']");$.each(c,function(e,t){a[$(t).val()]&&($(t).prop("checked",!0),$(t).prop("disabled",!0))})}var _=!0;$.each(n.find(".J_Region"),function(e,t){var i=$(t).parent().parent().parent(),a=$(i).find("input[name='stateBinderStr']:checked").not(".J_Region").length;$(i).find(".J_Checkbox").not(".J_Region").length==a?($(i).find(".J_Region").prop("checked",!0),a==$(i).find("input[name='stateBinderStr']:checked:disabled").not(".J_Region").length&&$(i).find(".J_Region").prop("disabled",!0)):($(i).find(".J_Region").prop("checked",!1),_=!1)}),_&&$(l).find(".J_RegionAll").prop("checked",!0),$(l).delegate(".J_Checkbox","click",function(e){var t=$(this).val();if(""!=t){for(var i=n.parent().parent().find(".J_ExcludeAreaDiv"),a=0;i&&a<i.length;a++){var s=i[a],l=$(s).text();if(-1!=l.indexOf(t))return $.dialog.alert("例外地区已经包含了该省份城市["+t+"]，不能进行取消!"),$(this).prop("checked",!0),!1}var d=$(e.target).parent().parent().parent();$(d).find(".J_Checkbox").not(".J_Region").length==$(d).find("input[name='stateBinderStr']:checked").not(".J_Region").length?$(d).find(".J_Region").prop("checked",!0):$(d).find(".J_Region").prop("checked",!1)}}),$(l).delegate(".J_Submit","click",function(){var e=$(l).find("input[name='stateBinderStr']:checked").not(":disabled"),t="";$.each(e,function(e,i){""!=$(i).val()&&(t+=$(i).val()+",")}),t.lastIndexOf(",")&&(t=t.substring(0,t.length-1)),d._fn_select_state_pop(o),d._fn_select_state_push(t),n.find(".J_StateBinderStr").text(""==t?"未添加地区":t),$(l).remove()}),$(l).delegate(".J_Close","click",function(){$(l).remove()}),$(l).delegate(".J_RegionAll","click",function(){$("input[name='stateBinderStr']").not(":disabled").prop("checked",this.checked)}),$(l).delegate(".J_Region","click",function(){if(!this.checked)for(var e=$(this).parent().parent().siblings(),t=n.parent().parent().find(".J_ExcludeAreaDiv"),i=0;t&&i<t.length;i++)for(var a=t[i],s=$(a).text(),i=0;i<e.length;i++){var d=$(e[i]).find("input[name='stateBinderStr']").val();if(-1!=s.indexOf(d))return $.dialog.alert("例外地区已经包含了该省份城市["+d+"]，不能进行取消!"),$(this).prop("checked",!0),!1}$(this).parent().parent().siblings().find("input[name='stateBinderStr']").not(":disabled").prop("checked",this.checked),$(l).find(".J_Region").length==$(l).find(".J_Region:checked").length?$(l).find(".J_RegionAll").prop("checked",!0):$(l).find(".J_RegionAll").prop("checked",!1)})},add_exclude_area:function(t,a){var s=$(a.target),n=s.parent(),l="";this.popupdlg1&&this.popupdlg1.remove(),i.get($.proxy(function(t){var i={userExpressTemplateList:t};n.find(".address-exclude").length&&n.find(".address-exclude").remove(),l=$(e.template.get("template.smart_match.exclude.address",i)).appendTo(n),this.popupdlg1=l,l.css({top:s.offset().top-n.offset().top+s.height(),left:s.offset().left-n.offset().left}),this._fn_init_dom_for_exclude(l,s);var a=this;$(l).delegate(".J_Submit","click",function(){var t=$(l).find('[id^="list_province"]').val(),i=$(l).find('[id^="list_province"] [value='+t+"]").text(),s=$(l).find('[id^="list_city"]').val(),d=$(l).find('[id^="list_city"] [value='+s+"]").text(),o=$(l).find('[id^="list_area"]').val(),r="";$(l).find('[id^="list_area"]:visible').length&&(r=$(l).find('[id^="list_area"] [value='+o+"]").text()),"请选择..."==r&&(r="");var p=$(l).find('[name="select-template"]').val(),c=$(l).find('[name="select-template"] [value='+p+"]").text(),_=$(l).find('[name="select-template"] [value='+p+"]").attr("data-type");if(a._fn_validate_exclude_area(i,d,r,c,n)){var m=i+"_"+d;""!=r&&(m+="_"+r),m+="→"+c;var u={excludeArea:m,templateId:p,templateType:_,state:i,city:d,district:r},h=$(e.template.get("template.smart_match.add.exclude.area",u));n.before(h),$(l).remove()}}),$(l).delegate(".J_Close","click",function(){$(l).remove()})},this))},del_exclude_area:function(e,t){$.dialog.confirm("您是否要删除该例外地区?",function(){var e=$(t.target),i=e.parent();i.remove()})}},_fn_init_dom_for_exclude:function(e,t){var i=t.parent().parent().parent().find(".J_StateBinderStr").text(),a=[];"未添加地区"!=i?a=i.split(","):a[0]="xx";new component.AddrDropDown(e.find(".address-holder"),{filter:a,areaoptional:!0});e.find(".express select").iSelect()},_fn_validate_exclude_area:function(e,t,i,a,s){if(""==e||"请选择..."==e)return $.dialog.alert("请选择省份!"),!1;if(""==t||"请选择..."==t)return $.dialog.alert("请选择城市!"),!1;if(i&&"请选择..."==i&&(i=""),""==a||"选择快递模版"==a)return $.dialog.alert("请选择快递模版!"),!1;var n=$(s).siblings();if(n)for(var l=0;l<n.length;l++){var d=n[l],o=$(d).attr("data-state")||"",r=$(d).attr("data-city")||"",p=$(d).attr("data-district")||"";if(e==o&&t==r&&i==p)return $.dialog.alert("所选择的省市区已经存在，请重新选择!"),!1}return!0},_fn_validate_smart_match_save:function(e){if(!e)return $.dialog.alert("请添加智能匹配区域!"),!1;for(var t=0;t<e.length;t++){var i=e[t],a=JSON.parse(i.stateBinderStr),s=i.templateId,n=i.templateType;if(!a||0==a.length)return $.dialog.alert("请选择省/直辖市/自治区/港澳台!"),!1;if("undefined"==typeof s||0>=s)return $.dialog.alert("请选择快递模版!"),!1;if("undefined"==typeof n||0>n)return $.dialog.alert("你的快递类型获取不到!"),!1}return!0},_fn_validate_add_smart_match:function(){},_fn_ctrl_stateBinders_join:function(e){if("undefined"==typeof e||0==e.length)return"";var t="";return $.each(e,function(i,a){t+=e.length-1==i?a.state:a.state+","}),t},_fn_convert_excludeAreas:function(e){"undefined"!=typeof e&&0!=e.length&&$.each(e,function(e,t){var i=t.state+"_"+t.city;""!=t.district&&(i+="_"+t.district),i+="→"+t.templateName,t.excludeAreaMix=i})},_fn_select_state_push:function(e){if(e&&e.length>0){var t=e.split(",");$.each(t,function(e,t){t&&(a[t]=t)})}},_fn_select_state_pop:function(e){if(e&&e.length>0){var t=e.split(",");$.each(t,function(e,t){a[t]&&delete a[t]})}},_fn_event_bind:function(){this._elm_dom_container.on("click.J_Click",".J_Click",this._fn_event_handler("click")),this._elm_dom_container.find("select").iSelect();var e="",t=this;$(document).on("click.module.smart_match",$.proxy(function(i){var a=this.getContainer()[0],s=i.target;e==s||$(s).parents(".popup").length||$(s).hasClass("popup")||(e=$(s).hasClass("J_Click")?s:"",$.contains(a,s)&&(t.hide(),e=""))},this))},_fn_event_unbind:function(){this._elm_dom_container&&this._elm_dom_container.off("click.J_Click"),$(document).off("click.module.smart_match")},getContainer:function(){return this._elm_dom_container},_fn_event_handler:function(e){if(!e)throw new Error("[module.smart_match.list:_fn_event_handler] 参数非法.");if(!this._event_handler_list[e])throw new Error("[module.smart_match.list:_fn_event_handler] "+e+" 参数异常.");return $.proxy(function(t){this._event_handler_list[e].call(this,t)},this)},_event_handler_list:{click:function(e){e.preventDefault();var t=$(e.currentTarget).attr("data-name"),i=$(e.currentTarget).attr("data-id"),a=this._common_list[t];if(!a)throw new Error("[module.smart_match.list:_event_handler_list::click] "+t+" 参数异常.");a.call(this,i,e)}},hide:function(){var e=this.getContainer();e&&(this.popupdlg1&&this.popupdlg1.remove(),e=null)},destroy:function(){this._elm_dom_container&&this._elm_dom_container.remove(),this._data_local_data={},this._elm_box_container=null,this._fn_event_unbind(),this.hide()},update:function(e){$(this._elm_dom_root).children().hide(),$(this._elm_dom_root).find(".smart-match-wrapper").remove(),this._fn_ctrl_dom_render(),this._status_load_module=!0,this._status_hashs=$.extend({},e),this._status_load_module=!1}};e.modules.define(s.name,s)}(window.RayCloud),function(e,t){var i=['<div class="smart-match-wrapper">','<div class="smart-match">','<div class="ui-box ui-box-s1 smart-match-content">','<div class="ui-box-hd"><div class="ui-box-hd-tit">快递智能匹配</div></div>','<div class="ui-box-bd">','<a act-if="isOpen == true" data-name="open_status" data-value="{{isOpen}}" class="J_Click smart-match-status smart-match-open"></a>','<a act-if="isOpen == false" data-name="open_status" data-value="{{isOpen}}" class="J_Click smart-match-status smart-match-close"></a>','<div class="smart-match-helpmsg">',"温馨小贴士：<br/>","<ul>",'<li>1、未设置的地区按默认的快递模板匹配。点击设置<a href="#/pt/list/" target="_blank">快递单模板</a>。 </li>',"<li>2、点击“保存”按钮后，新的设置只对开启后同步的“待付款、待发货”新订单生效。</li>","<li>3、匹配优先级：例外城市/区县及其快递模板>省/直辖市/自治区>默认的快递模版。</li>","</ul>","</div>","</div>","</div>","</div>",'<div class="smart-match-list">',"<table>","<thead>","<tr>",'<th width="30%">省/直辖市/自治区/港澳台</th>','<th width="20%">快递模板</th>','<th width="40%">例外城市/区县及其快递模版</th>','<th width="10%">操作</th>',"</tr>","</thead>",'<tbody id="matchBody" style="display: table-row-group;vertical-align: middle;border-color: inherit;">',"</tbody>","</table>",'<div align="center" class="smart-save-open">','<button class="J_Click btn" data-name="add_match">添加区域</button>&nbsp;&nbsp;&nbsp;&nbsp;','<button act-if="isOpen == true" class="J_Click btn btn-success" data-name="save_match">保存</button>','<button act-if="isOpen == false" class="J_Click btn btn-success" data-name="save_match">保存并开启</button>',"</div>",'<div style="height: 260px"></div>',"</div>","</div>"],a=['<tr class="J_SmartMatchTemplate">',"<td>",'<div style="position: relative;">','<span class="J_StateBinderStr">未添加地区</span>&nbsp;&nbsp;&nbsp;&nbsp;<a data-name="edit_area" class="J_Click">编辑</a>',"</div>","</td>",'<td><select name="select-template">','<option value="">选择快递模版</option>','<option act-loop="userExpressTemplate in userExpressTemplateList" data-type="{{userExpressTemplate.isWlb}}" value="{{userExpressTemplate.templateId}}">{{userExpressTemplate.templateName}}</option>',"</select></td>",'<td><div style="position: relative;"><a data-name="add_exclude_area" class="J_Click">添加例外地区</a></div></td>','<td style="text-align: center"><a data-name="del_match" class="J_Click">删除</a></td>',"</tr>"],s=['<tr class="J_SmartMatchTemplate">',"<td>",'<div style="position: relative;">','<span class="J_StateBinderStr">{{stateBinderStr}}</span>&nbsp;&nbsp;&nbsp;&nbsp;<a data-name="edit_area" class="J_Click">编辑</a>',"</div>","</td>",'<td><select name="select-template">','<option value="">选择快递模版</option>','<option act-loop="userExpressTemplate in userExpressTemplateList" data-type="{{userExpressTemplate.isWlb}}" value="{{userExpressTemplate.templateId}}">{{userExpressTemplate.templateName}}</option>',"</select></td>","<td>",'<div act-loop="excludeArea in excludeAreas" class="J_ExcludeAreaDiv" style="position: relative;" data-id="{{excludeArea.templateId}}" data-type="{{excludeArea.templateType}}" data-state="{{excludeArea.state}}" data-city="{{excludeArea.city}}" data-district="{{excludeArea.district}}"><span>{{excludeArea.excludeAreaMix}}</span>&nbsp;&nbsp;&nbsp;<a data-name="del_exclude_area" class="J_Click">删除</a></div>','<div style="position: relative;"><a data-name="add_exclude_area" class="J_Click">添加例外地区</a></div></td>','<td style="text-align: center"><a data-name="del_match" class="J_Click">删除</a></td>',"</tr>"],n=['<div class="address-map popup">','<div style="height: 24px"><label><span class="check"><input type="checkbox" class="J_Checkbox J_RegionAll"></span>全部</label></div>','<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>华东</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="上海" class="J_Checkbox"></span>上海</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="江苏" class="J_Checkbox"></span>江苏</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="浙江" class="J_Checkbox"></span>浙江</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="安徽" class="J_Checkbox"></span>安徽</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="江西" class="J_Checkbox"></span>江西</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>华北</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="北京" class="J_Checkbox"></span>北京</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="天津" class="J_Checkbox"></span>天津</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="山西" class="J_Checkbox"></span>山西</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="山东" class="J_Checkbox"></span>山东</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="河北" class="J_Checkbox"></span>河北</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="内蒙古" class="J_Checkbox"></span>内蒙古</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>华中</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="湖南" class="J_Checkbox"></span>湖南</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="湖北" class="J_Checkbox"></span>湖北</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="河南" class="J_Checkbox"></span>河南</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>华南</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="广东" class="J_Checkbox"></span>广东</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="广西" class="J_Checkbox"></span>广西</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="福建" class="J_Checkbox"></span>福建</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="海南" class="J_Checkbox"></span>海南</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>东北</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="辽宁" class="J_Checkbox"></span>辽宁</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="吉林" class="J_Checkbox"></span>吉林</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="黑龙江" class="J_Checkbox"></span>黑龙江</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>西北</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="陕西" class="J_Checkbox"></span>陕西</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="新疆" class="J_Checkbox"></span>新疆</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="甘肃" class="J_Checkbox"></span>甘肃</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="宁夏" class="J_Checkbox"></span>宁夏</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="青海" class="J_Checkbox"></span>青海</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>西南</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="重庆" class="J_Checkbox"></span>重庆</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="云南" class="J_Checkbox"></span>云南</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="贵州" class="J_Checkbox"></span>贵州</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="西藏" class="J_Checkbox"></span>西藏</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="四川" class="J_Checkbox"></span>四川</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>港澳台</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="香港" class="J_Checkbox"></span>香港</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="澳门" class="J_Checkbox"></span>澳门</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="台湾" class="J_Checkbox"></span>台湾</label>',"</div>",'<div style="height: 24px">','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="" class="J_Checkbox J_Region"></span>海外</label>','<label><span class="check"><input type="checkbox" name="stateBinderStr" value="海外" class="J_Checkbox"></span>海外</label>',"</div>",'<div class="pd_15 ft-center" style="text-indent: 0px;">','<button class="btn btn-primary J_Submit" type="submit">确定</button>','<button class="btn btn-gray ml_10 J_Close">取消</button>',"</div>","</div>"],l=['<div class="address-exclude popup">','<div class="selection">','<span class="label-group"><div class="select-prov">选择省：</div><div class="select-city">选择市：</div><div class="select-area">选择区县：</div></span>','<span class="address-holder"></span>','<span class="require-group"><div style="color: red">（必填）</div><div style="color: red">（必填）</div><div style="color: blue">（选填）</div></span>',"</div>",'<div class="express"><span style="margin-left: -12px" class="express-label">快递模板：</span>','<select class="express-holder" name="select-template"><option value="">选择快递模版</option>','   <option act-loop="userExpressTemplate in userExpressTemplateList" value="{{userExpressTemplate.templateId}}" data-type="{{userExpressTemplate.isWlb}}">{{userExpressTemplate.templateName}}</option>',"</select>",'<span style="display: inline-block;width: 30px \\9"></span><span class="help-tip" style="color: red">（必填）</span></div>','<div class="express" style="margin-left: 100px;text-indent: 0px;">','<button class="btn btn-primary J_Submit" type="submit">确定</button>','<button class="btn btn-gray ml_10 J_Close">取消</button>',"</div>","</div>"],d=['<div class="J_ExcludeAreaDiv" style="position: relative;" data-id="{{templateId}}" data-type="{{templateType}}" data-state="{{state}}" data-city="{{city}}" data-district="{{district}}"><span>{{excludeArea}}</span>&nbsp;&nbsp;&nbsp;<a data-name="del_exclude_area" class="J_Click">删除</a></div>'];
t.template.addTemp("template.smart_match.list",i),t.template.addTemp("template.smart_match.add.template",a),t.template.addTemp("template.smart_match.show.template",s),t.template.addTemp("template.smart_match.add.address",n),t.template.addTemp("template.smart_match.exclude.address",l),t.template.addTemp("template.smart_match.add.exclude.area",d)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.prod.dataModel"),a=t.controls.get("control.prod.editor"),s={name:"stock.list",depend:"stock",_elm_dom_root:"#main",_elm_template_name:"template.stock.list.wrapper",_fn_dom_render:function(i){var a=this,s=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(e(this._elm_dom_root).empty()),n=function(){a._fn_event_bind_4list(s,i),a._init_scroll_height_related(s,i)};this._load_prodlist_data(s,i,n),this._fn_event_bind(s,i)},_load_prodlist_data:function(e,t,a){var s=this,n={pageNo:t.pageNo||1,pageSize:t.pageSize||20,specialField:t.specialField||"",specialFieldStatus:t.specialFieldStatus||"",text:t.text||"",timeStamp:t.timeStamp||"",title:t.title||"",taobaoId:t.taobaoId||"",id:t.id||""};API.stock_list(n,function(t){if(t.data.list.length){var n={list:t.data.list};s._elm_dom_list=s._fn_create_item_UI(n).appendTo(e.find(".list-body").empty()),s._update_pages(t.data),i.initData(n.list),a&&a()}else e.find(".list-body").addClass("empty-content").html('<tr><td colspan="6"><div class="pd_30">暂无数据</div></td></tr>'),e.find(".prod-details").empty().html('<div class="pd_30">暂无数据</div>')},function(){})},_fn_ctrl_setHash:function(i){t.pages.setCurHash(e.extend({},this._status_hashs,i))},_update_pages:function(e){var i=this._elm_dom_container.find(".J_Pages"),a=i.find("select");if(a&&a.iSelect("destroy"),e){var s=Math.ceil(e.total/e.page.pageSize),n={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:s,isLastPage:e.page.pageNo==s};i.html(t.template.get("template.stock.list.pages.temp",n)),this._bind_event_4_page_changed(i),i.find("select").iSelect()}else i.html("")},_bind_event_4_page_changed:function(t){var i=this;t.find("select").on("change",function(){i._fn_ctrl_setHash({pageNo:1,pageSize:e(this).val()})}),t.find("a.module-trade-pages-pageNo").on("click",function(){var a=e(this).attr("data-page");a&&i._fn_ctrl_setHash({pageNo:a,pageSize:t.find("select").val()})}),t.find(".input-small").on("focusin",function(){t.find(".J_Submit_Container").stop().animate({width:"44px"})}).on("focusout",function(){var a=e(this).val(),s=e(this).attr("data-max"),n=!1;t.find(".J_Submit").on("click",function(t){return t.preventDefault(),a-0>s-0?void e.dialog.alert("超出最大页数！"):(n=!0,void(/^\d*$/.test(a)&&i._fn_ctrl_setHash({pageNo:a})))}),setTimeout(function(){n||t.find(".J_Submit_Container").stop().animate({width:0})},500)})},_fn_event_bind:function(e,t){this._fn_event_bind_topbar(e,t)},_fn_event_bind_topbar:function(a,s){var n=this,l=e(t.template.get("template.stock.list.topbar",{taobaoId:s.taobaoId||"",id:s.id||"",text:s.text?decodeURIComponent(s.text):"",title:s.title?decodeURIComponent(s.title):"商品分类",cid:"seller_cid"==s.specialField?s.specialFieldStatus:""})).appendTo(a.find(".module-prod-top")),d=!0;n.hideSelectTree=function(t){var i=e.contains(a.find(".cata-select-bd")[0],e(t.target)[0]);n.menuShown&&!i&&(a.find(".cata-select-bd").empty(),n.menuShown=!1)},n.menuShown=!1,e(document).off("click"),e(document).on("click",n.hideSelectTree),l.find(".ui-select-hd").on("click",function(){return n.menuShown?void 0:(n._fn_load_tree_data(a.find(".cata-select-bd")),n.menuShown=!0,!1)}),l.find("select").iSelect(),l.delegate(".basic-item-foldername","click",function(){return a.find(".cata-select-txt").html("商品分类").attr("title","商品分类").attr("taobaoid","").attr("id","").attr("cid",""),a.find(".cata-select-bd").empty(),n.menuShown=!1,!1}),l.delegate(".cata-folder-name","click",function(t){var i=e(t.target);i=i.hasClass("cata-folder-name")?i:i.parents(".cata-folder-name");var s=i.find(".folder-name").html().replace("<","&lt;").replace(">","&gt;").replace('"','"').replace("'","'"),l=i.closest(".cata-item");return a.find(".cata-select-txt").html(s).attr("title",s).attr("taobaoid",l.attr("taobaoid")).attr("id",l.attr("id")||"").attr("cid",l.attr("cid")||""),a.find(".cata-select-bd").empty(),n.menuShown=!1,!1}),a.find(".module-trade-searchBar-btn").on("click",function(){e(this).toggleClass("module-trade-searchBar-btn-down"),a.find("#module-prod-topBar").stop().animate({height:d?0:55},{progress:function(){n._fn_reset_scrollFixed_position(a)},complete:function(){n._fn_reset_scrollFixed_position(a)}}),d=!d}),a.find(".module-prod-tab-navs").on("click",function(){t.pages.setCurHash({timeStamp:+new Date})}),a.find(".btn-primary").on("click",function(){n._fn_query_product(a)}),a.find(".search-content").on("keydown",function(e){13==e.keyCode&&a.find(".btn-primary").trigger("click")}),t.sub("module.stock.list.change",function(e){var t=e.content,a=n._elm_dom_container.find(".list-body");if(null!=t){var s=t.modifyColumn,l=t.modifuNum,d=s.split(";"),o={actual_stock:t.actualStock,lock_stock:t.lockStock,defective_stock:t.defectiveStock,quantity:t.quantity,alarm_stock:t.alarmStock},r="";if(null!=t.itemSkuId){if(r=a.find(".sku-item[skuId ="+t.itemSkuId+"]"),null==r.html())return r=a.find(".list-item[numid ="+t.numId+"]"),void n._update_cache_stock(t.itemSkuId,t.numId,t,d,o,r);if(2==d.length){var p=r.find(".sku-lock-stock");p.html(1*p.html()-l);var c=r.parents(".item-n-sku").find(".stock-lock");c.html(1*c.html()-l)}}else{if(r=a.find(".list-item[numid ="+t.numId+"]"),null==r.html())return void i.updateItemData(t.numId,t);if(2==d.length){var p=r.find(".stock-lock");p.html(p.val()-l)}}var _=r.find("input[name="+d[0]+"]");_.val(null==l?o[s]:1*_.val()-l),n._update_stock_value(_)}})},_fn_reset_scrollFixed_position:function(e){var t=e.find(".module-prod-top"),i=e.find(".list-header"),a=e.find(".topbar-placeholder");i.trigger("detach.ScrollToFixed"),i.scrollToFixed({marginTop:41+a.height()+t.height(),zIndex:101})},_fn_load_tree_data:function(e){var t=this;API.item_cat_list({getData:!0,showHide:!0},function(i){t._fn_init_folderTree(e,i)},function(){},!1)},_fn_init_folderTree:function(e,i){var a=t.controls.get("control.prod.folder.tree"),s={showIcon:!1,showCheckBox:!1,itemCanHide:!1};a.show(e,i,s)},_fn_query_product:function(e){var t=e.find(".cata-select-txt"),i={specialFieldStatus:t.attr("cid"),taobaoId:t.attr("taobaoid"),specialField:"seller_cid",title:t.attr("title"),text:encodeURIComponent(e.find(".search-content").val()||""),pageNo:1,timeStamp:+new Date};this._fn_ctrl_setHash(i)},_fn_event_bind_4list:function(a){var s=this,n=null,l=["check-item","input-text","J_Save"],d=a.find(".module-prod-list");a.delegate(".list-item","click",function(t){n&&clearTimeout(n),n=setTimeout(function(){for(var n=e(t.target),d=!1,o=n.hasClass("list-item")?n:n.parents(".list-item"),r=o.attr("numid"),p=0;p<l.length;p++)if(n.hasClass(l[p])){d=!0;break}if(!d){var c=a.find(".prod-details"),_=i.getItemData(r);c.empty().append(s._fn_create_detail_UI(_));var m=o.next(),u=o.find(".prod-item-icon");if(o.parents(".list-body").find(".list-item-clicked").removeClass("list-item-clicked"),o.addClass("list-item-clicked"),m.children().length)m.is(":visible")?(u.removeClass("prod-icon-open").addClass("prod-icon-close"),m.slideUp()):(u.removeClass("prod-icon-close").addClass("prod-icon-open"),m.slideDown());else{var h=s._fn_create_item_sku_UI(_);h&&(m.append(h),u.removeClass("prod-icon-close").addClass("prod-icon-open"),m.slideDown())}}},200)}),a.delegate(".list-item","dblclick",function(t){var a=e(t.target),d=!1;n&&clearTimeout(n);for(var o=0;o<l.length;o++)if(a.hasClass(l[o])){d=!0;break}if(!d){var r=a.hasClass("list-item")?a:a.parents(".list-item");numid=r.attr("numid"),s._fn_open_edit_dlg(i.getItemData(numiid))}}),d.delegate(".check-item","click",function(t){var i=e(t.target),a=i.parents(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),d.find(".list-item").length==d.find(".check-item:checked").length?d.find(".J_Select_All").prop("checked",!0):d.find(".J_Select_All").prop("checked",!1)}),d.find(".J_Select_All").on("click",function(t){var i=e(t.target),a=d.find(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),d.find(".check-item").prop("checked",i.prop("checked")),d.find(".J_Select_All").prop("checked",i.prop("checked"))}),d.find(".product-code").on("click",function(t){s._fn_change_shortTitle(d,e(t.target).prop("checked"))}),d.delegate(".batch-upd-actual","click",function(){e(this).prepend(t.template.get("template.stock.list.batch.upd.stock"))}),d.delegate(".upd-confirm","click",function(){var t=this,i=d.find(".check-item"),a=[];e.each(i,function(t,i){if(e(i).prop("checked")){var s=e(i).parents(".list-item");a.push(s.attr("numid"))}});var s=e(this).parents(".capacity-upd-stock"),n=s.find("input[name=upd_to_type]:checked").val(),l=s.find(".upd-to-target").val(),o=s.find(".upd-to-add").val(),r=s.find(".upd-to-reduce").val(),p=s.find(".upd-not-less").val(),c=s.find("input[name=upd_target]:checked").val(),_={kindStock:1,kindUpd:n||0,targetValue:l||0,addTargetValue:o||0,redTargetVallue:r||0,noLess:p||0,allotWay:c||0,numIidsArr:a.join(",")};API.batch_update(_,function(){e(t).parents(".batch-upd-actual").removeClass("capacity-upd-stock")})}),d.delegate(".upd-cancel","click",function(){e(this).parents(".batch-upd-actual").removeClass("capacity-upd-stock")}),d.delegate(".quantity_upd","click",function(){var i=e(this).parents(".list-item").attr("numid"),a=e(this).parents(".sku-item").attr("skuid"),s={numIid:i,skuId:a},n=this;API.get_item_exit_shop(s,function(i){var a=i.data.list||[],s=i.data.skuId||[],l=i.data.numIid||[],d={shopList:a,skuId:s,numIid:l};e(n).after(t.template.get("template.stock.list.capacity.quantity",d))})}),d.delegate(".shop-quantity-confirm","click",function(){var t=e(this).parents(".capacity-quantity").find("input[name=upd_type]:checked").val(),i=e(this).parents(".capacity-quantity").find(".all-shop-quantity-upd").val(),a={radioType:t,updToStock:i};API.upd_shop_quantity(a,function(){})}),d.delegate(".shop-quantity-cancel","click",function(){}),d.delegate(".sku-title-input","click",function(t){var i=e(t.target),a=i.parent(),s='<button class="J_Save">保存</button>';a.find(".J_Save").length||(a.css("position","relative").append(s),a.find(".J_Save").stop().animate({width:"44px"}))}),d.delegate(".sku-title-input","focusin",function(t){var i=e(t.target),a=i.parent(),s='<span class="save-btn-wrapper"><button class="J_Save">保存</button></span>';a.find(".save-btn-wrapper").length||a.css("position","relative").append(s),a.find(".save-btn-wrapper").stop().animate({width:"44px"})}).delegate(".sku-title-input","focusout",function(t){var i=e(t.target),a=i.parent(),n=(e(this).val(),a.find(".J_Save")),l=!1;n.one("click",function(t){l=!0;var i=e(t.target),n=i.parent().prev();if(n.hasClass("product-shorttitle"))s._fn_save_shortTitle(n);else{var d=function(){s._update_stock_value(n)};s._fn_save_skuCode(n,d)}a.find(".save-btn-wrapper").stop().animate({width:0})}),setTimeout(function(){l||(a.find(".save-btn-wrapper").stop().animate({width:0}),n.off("click"))},200)}),d.delegate(".product-thumb img","mouseover",e.proxy(function(e){this._fn_handle_img_mouseover(e)},this)),d.delegate(".product-thumb img","mouseout",e.proxy(function(e){this._fn_handle_img_mouseout(e)},this))},_fn_handle_img_mouseover:function(t){var i=e(t.target);this._fn_create_img_preview_tip(i)},_fn_handle_img_mouseout:function(t){var i=e(t.target);i.parents("div.prod-img").find(".img-help-tip").remove()},_fn_create_img_preview_tip:function(t){var i=t.attr("src").replace(/40/g,"130");e('<div class="img-help-tip"><span class="arrow-wraper"></span><span class="left-arrow"></span><img src="'+i+'"/></div>').appendTo(t.parents("div.prod-img"))},_fn_create_detail_UI:function(i){return i.skus=i.skus||[],i.skusNumber=i.skus.length,i.created=RayCloud.util.date.getdate(1*i.created,"YY-MM-DD HH:MM:SS"),i.defined1Key=i.defined1Key||"自定义1",e(t.template.get("template.prod.list.itemDetails",i))},_fn_create_item_sku_UI:function(i){return i.itemStockList=i.itemStockList||[],e(t.template.get("template.stock.list.stock.sku",i))},_fn_change_shortTitle:function(t,i){var a=t.find(".product-shorttitle");i?e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");s.length&&a.val(a.val()+a.attr("outerid"))}):e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");if(s.length){var n=a.val()||"",l=a.attr("outerid"),d=n.lastIndexOf(l);n&&d>-1&&(n=n.substring(0,d)+n.substring(d+l.length)),a.val(n)}})},_fn_save_shortTitle:function(){},_fn_save_skuCode:function(t,i){var a=t.attr("originalval"),s=t.val(),n=t.attr("name"),l=t.parents(".sku-item").attr("skuId"),d=t.parents(".sku-item").attr("numId")||t.parents(".list-item").attr("numId"),o=t.attr("initvalue");if(null==s||""==s)return e.dialog.alert("输入不能为空"),void t.val(o);if(isNaN(s))return e.dialog.alert("只能输入数字"),void t.val(o);var r=/^\d+$/;if(!r.test(s))return e.dialog.alert("只能输入正整数"),void t.val(o);var p={numId:d,stockValue:""===s?"N/A":a===s?"-1":s,skuId:l,column:n};API.stock_update(p,function(e){i&&i(e.data)},function(){})},_fn_open_edit_dlg:function(e){a.show(e)},_init_scroll_height_related:function(t){var i=t.find(".module-prod-top"),a=t.find(".list-header");e("#modlue_leftNav").trigger("detach.ScrollToFixed"),i.trigger("detach.ScrollToFixed"),a.trigger("detach.ScrollToFixed"),e("#modlue_leftNav").scrollToFixed({marginTop:0,zIndex:112}),i.scrollToFixed({marginTop:41,zIndex:110}),a.scrollToFixed({marginTop:117,zIndex:105})},_fn_create_item_UI:function(i){return e(t.template.get("template.stock.list.body",i))},_fn_event_unbind:function(){},_fn_event_handler:function(){},_event_handler_object:{},_status_hashs:{},_update:function(e,t){e.pageSize&&e.pageSize.match(/^[1-9][0-9]*$/)||(e.pageSize=localStorage.stock_manage_p_s||"20"),this._status_hashs.pageSize!=e.pageSize&&(localStorage.stock_manage_p_s=e.pageSize),this._fn_dom_render(e),t&&t()},init:function(){},update:function(e){this._update(e)},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.find(".module-prod-top").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),e(document).off("click",this.hideSelectTree),this._elm_dom_container.find(".list-header").trigger("detach.ScrollToFixed"),this._elm_dom_container.remove())},_update_cache_stock:function(t,a,s,n,l,d){var o=i.getItemData(a),r={actual_stock:"actualStock",lock_stock:"lockStock",defective_stock:"defectiveStock",quantity:"quantity",alarm_stock:"alarmStock"},p={actual_stock:"stock-actural",lock_stock:"stock-lock",defective_stock:"stock-defectiveStock",quantity:"stock-quantity",alarm_stock:"stock-alarm"},c=0,_=0;if(e.each(o.itemStockList,function(e,i){if(t==i.itemSkuId)if(2==n.length)i.actualStock=i.actualStock-s.modifuNum,i.lockStock=i.lockStock-s.modifuNum;else if(1==n.length&&(i[r[n[0]]]=null!=s.modifuNum?i[r[n[0]]]+s.modifuNum:l[n[0]],"quantity"!=n[0])){var a=i.lessGoods;1==a&&i.alarmStock<=i.availableInStock?i.lessGoods=0:1!=a&&i.alarmStock>i.availableInStock&&(i.lessGoods=1)}i.alarmStock>i.availableInStock&&(c=1),null!=i[r[n[0]]]&&(_+=i[r[n[0]]])}),o.itemStockList.length>0)if(2==n.length)o.actualStock=o.actualStock-s.modifuNum,o.lockStock=o.lockStock-s.modifuNum,d.find(".stock-actural").html(1*d.find(".stock-actural").html()-s.modifuNum),d.find(".stock-lock").html(1*d.find(".stock-lock").html()-s.modifuNum);else if(1==n.length&&(null!=s.modifuNum?d.find(".stock-lock").html(1*d.find(".stock-lock").html()-s.modifuNum):d.find("."+p[n[0]]).html(_),"quantity"!=n[0])){var m=d.find(".far-short").html();"缺"==m?0==c&&d.find(".far_less_goods").removeClass("far-short"):1==c&&d.find(".far_less_goods").addClass("far-short")}},_update_stock_value:function(e){if("son"==e.attr("farther")){var t=e.attr("initvalue"),i=e.attr("name"),a=e.val(),s=null,n="",l=null,d="",o=null,r="",p=null,c="",_=null,m="",u=null,h="";"actual_stock"==i?(n=e.parents(".item-n-sku").find(".stock-actural"),r=e.parents(".item-n-sku").find(".stock-onsale")):"alarm_stock"==i?n=e.parents(".item-n-sku").find(".stock-alarm"):"defective_stock"==i?(n=e.parents(".item-n-sku").find(".stock-defectiveStock"),r=e.parents(".item-n-sku").find(".stock-onsale")):"quantity"==i&&(n=e.parents(".item-n-sku").find(".stock-quantity")),c=e.parents(".sku-item").find(".less_goods_sku"),h=e.parents(".item-n-sku").find(".far_less_goods"),m=e.parents(".sku-item").find("input[name='alarm_stock']"),d=e.parents(".sku-item").find(".sku-stock-available-in"),s=1*n.html(),t=1*t,a=1*a;var f=a-t;s+=f,n.html(s),""!=d&&(""!=d.html()&&null!=d.html()&&(l=1*d.html()),p=c.attr("lessGoods"),u=h.attr("lessGoods"),_=m.val(),"actual_stock"==i?(o=1*r.html(),l+=f,o+=f,d.html(l),r.html(o)):"defective_stock"==i&&(o=1*r.html(),l-=f,o-=f,d.html(l),r.html(o)),"quantity"!=i&&null!=l&&null!=_&&(1!=p&&_>l?(c.addClass("sku-short"),c.attr("lessGoods",1),1!=u&&(h.addClass("far-short"),h.attr("lessGoods",1))):1==p&&l>=_&&(c.removeClass("sku-short"),c.attr("lessGoods",""),0==e.parents(".list-item-sku").find(".sku-short").length&&(h.removeClass("far-short"),h.attr("lessGoods",""))))),e.attr("initvalue",a)}else{var t=e.attr("initvalue"),i=e.attr("name"),a=e.val(),_=null,m="",l=null,d="",p=null,c="";d=e.parents(".list-item").find(".stock-onsale"),m=e.parents(".list-item").find("input[name='alarm_stock']"),c=e.parents(".list-item").find(".far_less_goods"),_=m.val(),p=c.attr("lessgoods"),t=1*t,a=1*a;var f=a-t;""!=d&&(l=1*d.html(),"actual_stock"==i?l+=f:("defective_stock"==i||"lock_stock"==i)&&(l-=f),d.html(l)),1!=p&&_>l?(c.addClass("far-short"),c.attr("lessGoods",1)):1==p&&l>_&&(c.removeClass("far-short"),c.attr("lessGoods",""))}}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-prod-wrap module-stock-wrap">','<div class="module-prod-top" style="position:relative;" ></div>','<div class="module-prod-list">','<div class="main-list">','<div class="list-header">','<div class="prod-checkbox"><span class="check"><input type="checkbox" class="J_Select_All"></span></div>','<div class="prod-img">宝贝图片</div>','<div class="prod-name">商品名称/规格</div>','<div class="prod-code">商家编码</div>','<div class="stock-actural">实际库存</div>','<div class="stock-actural">可售库存</div>','<div class="stock-alarm-title">可售库存预警值</div>','<div class="stock-lock-title">锁定库存</div>','<div class="stock-defectiveStock-title">次品库存</div>','<div class="stock-actural">淘宝库存</div>',"</div>",'<div class="list-body">',"</div>","</div>",'<div class="prod-pages clearfix" style="background:#ffffff;">','<div class="foot-check-all"><label><span class="check"><input type="checkbox" class="J_Select_All"></span>全选</label></div>','<div class="J_Pages"></div>',"</div>","</div>","</div>"],a=['<div class="capacity-upd-stock" column="actual_stock" >','<div class="batch-upd-radio">',"<span>批量修改实际库存</span>","<div>",'<input type="radio" name="upd_to_type" value="1" />统一调整为<input type="text" class="upd-to-target" />件',"</div>","<div>",'<span class="radio"><input type="radio" name="upd_to_type" value="2"  />增加<input type="text" class="upd-to-add" />件</span>',"</div>","<div>",'<span class="radio"><input type="radio" name="upd_to_type" value="3" />减少<input type="text" class="upd-to-reduce" />件，且不少于<input type="text" class="upd-not-less" />件</span>',"</div>","</div>",'<div class="batch-upd-radio">',"<span>分配方式:</span>",'<span class="radio upd-to-type"><input type="radio" name="upd_target" value="1" />将所有规格的库存统一改为目标值</span>','<span class="radio upd-to-type"><input type="radio" name="upd_target" value="2" />将目标值平均分配到各规格</span>',"</div>",'<div class="batch-upd-radio">','<button type="button" class="upd-confirm" >确定</button> <button type="button" class="upd-cancel" >取消</button>',"</div>","<div>"],s=['<div class="item-n-sku" act-loop="item in list">','<div class="list-item" itemStockId="{{item.id}}" numid="{{item.numId}}" taobaoid="{{item.taobaoId}}">','<div class="prod-checkbox">','<span class="check"><input type="checkbox" class="check-item"></span>','<div act-if="item.itemStockList.length > 0" class="mr_5"><span class="prod-item-icon prod-icon-close"></span></div>','<div act-if="item.itemStockList.length == 0" class="mr_5"></span></div>',"</div>",'<div class="prod-img">','<a target="_blank" href="http://item.taobao.com/item.html?id={{item.numId}}" class="product-thumb">','<img src="{{item.picPath}}_40x40.jpg"/>',"</a>","</div>",'<div class="prod-name"><a target="_blank" href="http://item.taobao.com/item.html?id={{item.numId}}" class="prod-name-link">{{item.itemTitle}}</a> <br/>','<div class="sku_less_goods">规格种类 ','<span style="color:red">{{item.itemStockList.length}}</span>','<div class="far_less_goods_css">','<span act-if="item.lessGoods == 1" lessGoods="{{item.lessGoods}}" class="far_less_goods far-short" >缺</span>','<span act-if="item.lessGoods != 1" lessGoods="{{item.lessGoods}}" class="far_less_goods" >缺</span>',"</div>","</div>","</div>",'<div class="prod-code">{{item.outerId}}</div>','<div act-if="item.itemStocksSize > 0" class="stock-actural" style="margin-left: 5px;height:100%;" >{{item.actualStock}}</div>','<div act-if="item.itemStocksSize == 0" class="stock-actural" style="margin-left: 5px;height:100%;" ><input class="sku-title-input" name="actual_stock" farther="farther" type="text" initvalue="{{item.actualStock}}" value="{{item.actualStock}}"  /></div>','<div class="stock-onsale">{{item.availableInStock}}</div>','<div act-if="item.itemStocksSize > 0" class="stock-alarm">{{item.alarmStock}}</div>','<div act-if="item.itemStocksSize == 0" class="stock-alarm"><input class="sku-title-input" name="alarm_stock" farther="farther" type="text" initvalue="{{item.alarmStock}}"  value="{{item.alarmStock}}" /></div>','<div class="stock-lock">{{item.lockStock}}</div>','<div act-if="item.itemStocksSize > 0" class="stock-defectiveStock">{{item.defectiveStock}}</div>','<div act-if="item.itemStocksSize == 0" class="stock-defectiveStock"><input class="sku-title-input" name="defective_stock" farther="farther" type="text" initvalue="{{item.defectiveStock}}"  value="{{item.defectiveStock}}" /></div>','<div act-if="item.itemStocksSize > 0" class="stock-quantity">{{item.quantity}}</div>','<div act-if="item.itemStocksSize == 0" class="stock-quantity"><input class="sku-title-input" name="quantity" farther="farther" type="text" initvalue="{{item.quantity}}"  value="{{item.quantity}}" /></div>',"</div>",'<div class="list-item-sku"></div>',"</div>"],n=['<div class="sku-item" skuId="{{sku.itemSkuId}}"  itemStockId="{{sku.id}}" numId="{{sku.numId}}" act-loop="sku in itemStockList">','<span style="display:inline-block;width: 90px;">&nbsp;</span>',"<span>&nbsp;</span>",'<span class="sku-names">','<div class="sku-name" act-loop="prop in sku.mapList" > {{prop.name}}:<span style="color:brown">{{prop.value}}</span> ',"</div>",'<div class="sku-less-goods" >','<span act-if="sku.lessGoods == 1" lessGoods="{{sku.lessGoods}}" class="less_goods_sku sku-short">缺</span>','<span act-if="sku.lessGoods != 1" lessGoods="{{sku.lessGoods}}" class="less_goods_sku">缺</span>',"</div>","</span>",'<div class="sku-outid">{{sku.outerId}}</div>','<div class="sku-title-stock"><input class="sku-title-input" name="actual_stock" farther="son" type="text" initvalue="{{sku.actualStock}}" value="{{sku.actualStock}}"/></div>','<div class="sku-stock-available-in" >{{sku.availableInStock}}</div>','<div class="sku-title-stock"><input class="sku-title-input" name="alarm_stock" farther="son" type="text" initvalue="{{sku.alarmStock}}" value="{{sku.alarmStock}}"/></div>','<div class="sku-lock-stock">{{sku.lockStock}}</div>','<div class="sku-title-stock"><input class="sku-title-input" name="defective_stock" farther="son" type="text" initvalue="{{sku.defectiveStock}}" value="{{sku.defectiveStock}}"/></div>','<div class="sku-quantity-stock">','<input class="sku-title-input" name="quantity" farther="son" type="text" initvalue="{{sku.quantity}}" value="{{sku.quantity}}" />',"</div>","</div>"],l=['<div class="capacity-quantity" skuId="{{skuId}}" numIid="{{numIid}}"  >','<div class="radio_input">',"<div>",'<span class="radio"><input type="radio" name="upd_type" value="1"  checked="checked" />自定义</span>',"</div>","<div>",'<span class="radio"><input type="radio" name="upd_type" value="2"  />统一改为<input type="text" class="all-shop-quantity-upd" /></span>',"</div>","<div>",'<span class="radio"><input type="radio" name="upd_type" value="3" />统一改为可售库存</span>',"</div>","</div>",'<div class="shop-title">','<div class="shop-name-title">店铺名称</div>','<div class="shop-name-title">库存</div>',"</div>",'<div class="shop-list">','<div act-loop="shop in shopList">','<div class="shop-name-title" shopId="{{shop.Id}}" >{{shop.name}}</div>','<div class="shop-name-title"><input type="text" class="all-shop-quantity-upd" /></div>',"</div>","</div>",'<div class="capacity-quantity-down">','<button type="button" class="shop-quantity-confirm" >确定</button> <button type="button" class="shop-quantity-cancel" >取消</button>',"</div>","<div>"],d=['<div class="module-topbar-wrap">',"<div>",'<div id="module-prod-topBar" class="J_module-prod-topBar">','<div class="module-prod-searchBar-container J_SubModule_Query">','<div class="module-prod-searchBar J_SearchBar">','<div class="ui-select ui-select-prodcatagory">','<div class="ui-select-hd cata-select-hd">','<div class="ui-select-txt cata-select-txt" style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 133px;" taobaoid="{{taobaoId}}" id="{{id}}" cid="{{cid}}" title="{{title}}">{{title}}</div>','<div class="ui-select-arrow"><b></b><i></i></div>',"</div>",'<div class="control-catagory-wrap ui-select-bd cata-select-bd"></div>',"</div>",'<input type="text" class="ml_10 search-content" placeholder="商品信息（名称、规格、编码）" value="{{text}}" name="text"/>','<button class="btn btn-primary ml_10">查询</button>',"</div>","</div>","</div>",'<div style="position:relative;width:100%;border-top:1px solid #a3abb4;height:0px;font-size:0;">','<div class="topbar-placeholder" style="height;20px;background: #fff;" ></div>','<div class="module-trade-searchBar-btn"><b></b></div>',"</div>","</div>","</div>"],o=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option act-if="pageSize == 10" value="10" selected>10</option>','<option act-if="pageSize != 10" value="10">10</option>','<option act-if="pageSize == 20" value="20" selected>20</option>','<option act-if="pageSize != 20" value="20">20</option>','<option act-if="pageSize == 50" value="50" selected>50</option>','<option act-if="pageSize != 50" value="50">50</option>','<option act-if="pageSize == 100" value="100" selected>100</option>','<option act-if="pageSize != 100" value="100">100</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"];t.template.addTemp("template.stock.list.wrapper",i),t.template.addTemp("template.stock.list.body",s),t.template.addTemp("template.stock.list.topbar",d),t.template.addTemp("template.stock.list.pages.temp",o),t.template.addTemp("template.stock.list.capacity.quantity",l),t.template.addTemp("template.stock.list.stock.sku",n),t.template.addTemp("template.stock.list.batch.upd.stock",a)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-prod-wrap module-stock-wrap module-log-wrap">','<div class="module-prod-top"></div>','<div class="module-prod-list">','<div class="main-list">','<div class="list-header">','<div class="prod-checkbox"><span class="check"><input type="checkbox" class="J_Select_All"></span></div>','<div class="prod-img">宝贝图片</div>','<div class="prod-name">商品名称</div>','<div class="log-names">商品规格</div>','<div class="prod-code">商家编码</div>','<div class="stock-num">入库数量</div>','<div class="stock-num">计量单位</div>','<div class="stock-apply">入库时间</div>',"</div>",'<div class="list-body">',"</div>","</div>",'<div class="prod-pages clearfix" style="background:#ffffff;">','<div class="foot-check-all"><label><span class="check"><input type="checkbox" class="J_Select_All"></span>全选</label></div>','<div class="J_Pages"></div>',"</div>","</div>","</div>"],a=['<div class="item-n-sku" act-loop="farItem in list">','<div class="list-item" numiid="{{farItem.numId}}" >','<div class="prod-checkbox">','<span class="check"><input type="checkbox" class="check-item"></span>',"</div>",'<div class="prod-img">','<a target="_blank" href="http://item.taobao.com/item.html?id={{farItem.numIid}}" class="product-thumb">','<img src="{{farItem.picPath}}_40x40.jpg"/>',"</a>","</div>",'<div class="prod-name"><a target="_blank" href="http://item.taobao.com/item.html?id={{farItem.numIid}}" class="prod-name-link">{{farItem.itemTitle}}</a></div>','<div class="log-names">','<div class="log-name" act-loop="prop in farItem.mapList" >{{prop.name}}:<span style="color:brown">{{prop.value}}</span></div>',"</div>",'<div class="prod-code">{{farItem.outerId}}</div>','<div class="stock-num">{{farItem.stock}}</div>','<div class="stock-num">{{farItem.unit}}</div>','<div class="stock-log-time">{{farItem.time}}</div>',"</div>","</div>"],s=['<div class="module-topbar-wrap">',"<div>",'<div id="module-prod-topBar" class="J_module-prod-topBar">','<div class="module-prod-searchBar-container J_SubModule_Query">','<div class="module-prod-searchBar J_SearchBar">','<div class="ui-select ui-select-prodcatagory">',"<span>入库时间：",'<span class="J_Time_Range">','<input id="start_time" type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startTime" value="{{startTime}}" class="w100 date-picker ml_10" > &mdash; <input id="end_time" type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="endTime" value="{{endTime}}" class="w100 date-picker" >',"</span>","</span>","</div>",'<div class="collect-log" >','<span class="stock-num-all">入库总数:<span class="stock-num-all-no">{{stockSumAll}}</span></span>',"</div>",'<button class="btn btn-primary ml_10">查询</button>',"</div>","</div>","</div>",'<div style="position:relative;width:100%;border-top:1px solid #a3abb4;height:0px;font-size:0;">','<div class="topbar-placeholder" style="height;20px;background: #fff;" ></div>','<div class="module-trade-searchBar-btn"><b></b></div>',"</div>","</div>","</div>"],n=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页{{stockSumAll}}显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option act-if="pageSize == 10" value="10" selected>10</option>','<option act-if="pageSize != 10" value="10">10</option>','<option act-if="pageSize == 20" value="20" selected>20</option>','<option act-if="pageSize != 20" value="20">20</option>','<option act-if="pageSize == 50" value="50" selected>50</option>','<option act-if="pageSize != 50" value="50">50</option>','<option act-if="pageSize == 100" value="100" selected>100</option>','<option act-if="pageSize != 100" value="100">100</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"];
t.template.addTemp("template.stock.stock_log_add.wrapper",i),t.template.addTemp("template.stock.stock_log_add.body",a),t.template.addTemp("template.stock.stock_log_add.topbar",s),t.template.addTemp("template.stock.stock_log_add.pages.temp",n)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.prod.dataModel"),a=t.controls.get("control.prod.editor"),s={name:"stock.stock_log_add",depend:"stock",_elm_dom_root:"#main",_elm_template_name:"template.stock.stock_log_add.wrapper",_fn_dom_render:function(i){var a=this,s=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(e(this._elm_dom_root).empty()),n=function(){a._fn_event_bind_4list(s,i),a._init_scroll_height_related(s,i)};this._load_prodlist_data(s,i,n),this._fn_event_bind(s,i)},_load_prodlist_data:function(e,t,a){var s=this,n={pageNo:t.pageNo||1,pageSize:t.pageSize||20,text:t.text||"",startTime:t.startTime||"",endTime:t.endTime||""};API.stock_stock_log_add(n,function(t){if(t.data.list.length){var n={list:t.data.list};s._fn_update_sum_UI(t.data),s._elm_dom_list=s._fn_create_item_UI(n).appendTo(e.find(".list-body").empty()),s._update_pages(t.data),i.initData(n.list),a&&a()}else e.find(".list-body").html('<tr><td colspan="6"><div class="pd_30">暂无数据</div></td></tr>'),s._update_pages(),s._fn_update_sum_UI()},function(){})},_fn_ctrl_setHash:function(i){t.pages.setCurHash(e.extend({},this._status_hashs,i))},_fn_update_sum_UI:function(e){e?(this._elm_dom_container.find(".stock-num-all-no").html(e.stockSumAll),this._elm_dom_container.find(".stock-num-price-no").html(e.costPriceSum||"")):(this._elm_dom_container.find(".stock-num-all-no").html(""),this._elm_dom_container.find(".stock-num-price-no").html(""))},_update_pages:function(e){var i=this._elm_dom_container.find(".J_Pages"),a=i.find("select");if(a&&a.iSelect("destroy"),e){var s=Math.ceil(e.total/e.page.pageSize),n={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:s,isLastPage:e.page.pageNo==s};i.html(t.template.get("template.stock.stock_log_add.pages.temp",n)),this._bind_event_4_page_changed(i),i.find("select").iSelect()}else i.html("")},_bind_event_4_page_changed:function(t){var i=this;t.find("select").on("change",function(){i._fn_ctrl_setHash({pageNo:1,pageSize:e(this).val()})}),t.find("a.module-trade-pages-pageNo").on("click",function(){var a=e(this).attr("data-page");a&&i._fn_ctrl_setHash({pageNo:a,pageSize:t.find("select").val()})}),t.find(".input-small").on("focusin",function(){t.find(".J_Submit_Container").stop().animate({width:"44px"})}).on("focusout",function(){var a=e(this).val(),s=e(this).attr("data-max"),n=!1;t.find(".J_Submit").on("click",function(t){return t.preventDefault(),a-0>s-0?void e.dialog.alert("超出最大页数！"):(n=!0,void(/^\d*$/.test(a)&&i._fn_ctrl_setHash({pageNo:a})))}),setTimeout(function(){n||t.find(".J_Submit_Container").stop().animate({width:0})},500)})},_fn_event_bind:function(e,t){this._fn_event_bind_topbar(e,t)},_fn_event_bind_topbar:function(i,a){var s="";s="undefined"==typeof a.startTime?t.util.date.getdate(new Date((new Date).getTime()-6048e5),"YY-MM-DD HH:MM"):a.startTime?t.util.date.getdate(1*a.startTime,"YY-MM-DD HH:MM"):"";var n="";n=a.endTime?t.util.date.getdate(1*a.endTime,"YY-MM-DD HH:MM"):"";var l=this,d=e(t.template.get("template.stock.stock_log_add.topbar",{taobaoId:a.taobaoId||"",startTime:s,endTime:n})).appendTo(i.find(".module-prod-top")),o=!0;e(document).on("click",l.hideSelectTree),d.find(".ui-select-hd").on("click",function(){return l.menuShown?void 0:(l.menuShown=!0,!1)}),i.find(".module-trade-searchBar-btn").on("click",function(){e(this).toggleClass("module-trade-searchBar-btn-down"),i.find("#module-prod-topBar").stop().animate({height:o?0:55},{progress:function(){l._fn_reset_scrollFixed_position(i)},complete:function(){l._fn_reset_scrollFixed_position(i)}}),o=!o}),i.find(".module-prod-tab-navs").on("click",function(){t.pages.setCurHash({timeStamp:+new Date})}),i.find(".btn-primary").on("click",function(){l._fn_query_product(i)})},_fn_reset_scrollFixed_position:function(e){var t=e.find(".module-prod-top"),i=e.find(".list-header"),a=e.find(".topbar-placeholder");i.trigger("detach.ScrollToFixed"),i.scrollToFixed({marginTop:41+a.height()+t.height(),zIndex:101})},_fn_init_folderTree:function(e,i){var a=t.controls.get("control.prod.folder.tree"),s={showIcon:!1,showCheckBox:!1,itemCanHide:!1};a.show(e,i,s)},_fn_query_product:function(i){if(i.find(".J_Time_Range").length){var a=i.find("#start_time").val(),s=i.find("#end_time").val();if(a){if(!t.util.date.is_date(a))return void e.dialog.alert("开始时间格式不正确！");a=t.util.date.tojsdate(a).getTime()}if(s){if(!t.util.date.is_date(s))return void e.dialog.alert("结束时间格式不正确！");s=t.util.date.tojsdate(s).getTime()||""}if(a&&s&&a>=s)return void e.dialog.alert("开始时间必须小于结束时间！")}var n={startTime:a,endTime:s,text:encodeURIComponent(i.find(".search-log-content").val()||""),pageNo:1,timeStamp:+new Date};this._fn_ctrl_setHash(n)},_fn_event_bind_4list:function(t){var a=this,s=null,n=["check-item","input-text","J_Save"],l=t.find(".module-prod-list");t.delegate(".list-item","click",function(t){s&&clearTimeout(s),s=setTimeout(function(){var i=e(t.target),a=!1,s=i.hasClass("list-item")?i:i.parents(".list-item");numiid=s.attr("numiid");for(var l=0;l<n.length;l++)if(i.hasClass(n[l])){a=!0;break}if(!a){var d=s.next(),o=s.find(".prod-item-icon");d.is(":visible")?(o.removeClass("prod-icon-open").addClass("prod-icon-close"),d.slideUp()):(o.removeClass("prod-icon-close").addClass("prod-icon-open"),d.slideDown())}},200)}),t.delegate(".list-item","dblclick",function(t){var l=e(t.target),d=!1;s&&clearTimeout(s);for(var o=0;o<n.length;o++)if(l.hasClass(n[o])){d=!0;break}if(!d){var r=l.hasClass("list-item")?l:l.parents(".list-item");numiid=r.attr("numiid"),a._fn_open_edit_dlg(i.getItemData(numiid))}}),l.delegate(".check-item","click",function(t){var i=e(t.target),a=i.parents(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),l.find(".list-item").length==l.find(".check-item:checked").length?l.find(".J_Select_All").prop("checked",!0):l.find(".J_Select_All").prop("checked",!1)}),l.find(".J_Select_All").on("click",function(t){var i=e(t.target),a=l.find(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),l.find(".check-item").prop("checked",e(t.target).prop("checked")),l.find(".J_Select_All").prop("checked",e(t.target).prop("checked"))}),l.find(".product-code").on("click",function(t){a._fn_change_shortTitle(l,e(t.target).prop("checked"))}),l.delegate(".sku-title-input","click",function(t){var i=e(t.target),a=i.parent(),s='<button class="J_Save">保存</button>';a.find(".J_Save").length||(a.css("position","relative").append(s),a.find(".J_Save").stop().animate({width:"44px"}))}),l.delegate(".sku-title-input","focusin",function(t){var i=e(t.target),a=i.parent(),s='<span class="save-btn-wrapper"><button class="J_Save">保存</button></span>';a.find(".save-btn-wrapper").length||a.css("position","relative").append(s),a.find(".save-btn-wrapper").stop().animate({width:"44px"})}).delegate(".sku-title-input","focusout",function(t){var i=e(t.target),s=i.parent(),n=(e(this).val(),s.find(".J_Save")),l=!1;n.one("click",function(t){l=!0;var i=e(t.target),s=i.parent().prev();s.hasClass("product-shorttitle")?a._fn_save_shortTitle(s):a._fn_save_skuCode(s)}),setTimeout(function(){l||s.find(".save-btn-wrapper").stop().animate({width:0})},50)}),l.delegate(".product-thumb img","mouseover",e.proxy(function(e){this._fn_handle_img_mouseover(e)},this)),l.delegate(".product-thumb img","mouseout",e.proxy(function(e){this._fn_handle_img_mouseout(e)},this))},_fn_handle_img_mouseover:function(t){var i=e(t.target);this._fn_create_img_preview_tip(i)},_fn_handle_img_mouseout:function(t){var i=e(t.target);i.parents("div.prod-img").find(".img-help-tip").remove()},_fn_create_img_preview_tip:function(t){var i=t.attr("src").replace(/40/g,"130");e('<div class="img-help-tip"><span class="arrow-wraper"></span><span class="left-arrow"></span><img src="'+i+'"/></div>').appendTo(t.parents("div.prod-img"))},_fn_change_shortTitle:function(t,i){var a=t.find(".product-shorttitle");i?e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");s.length&&a.val(a.val()+a.attr("outerid"))}):e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");if(s.length){var n=a.val()||"",l=a.attr("outerid"),d=n.lastIndexOf(l);n&&d>-1&&(n=n.substring(0,d)+n.substring(d+l.length)),a.val(n)}})},_fn_save_shortTitle:function(){},_fn_save_skuCode:function(e){e.attr("originalval"),e.val(),e.attr("name"),e.parents(".sku-item").attr("skuId"),e.parents(".sku-item").attr("numId"),e.parents(".sku-item").attr("itemStockId")},_fn_open_edit_dlg:function(e){a.show(e)},_init_scroll_height_related:function(t){var i=t.find(".module-prod-top"),a=t.find(".list-header");e("#modlue_leftNav").trigger("detach.ScrollToFixed"),i.trigger("detach.ScrollToFixed"),a.trigger("detach.ScrollToFixed"),e("#modlue_leftNav").scrollToFixed({marginTop:0,zIndex:112}),i.scrollToFixed({marginTop:41,zIndex:110}),a.scrollToFixed({marginTop:117,zIndex:105})},_fn_create_item_UI:function(i){return e(t.template.get("template.stock.stock_log_add.body",i))},_fn_event_unbind:function(){},_fn_event_handler:function(){},_event_handler_object:{},_status_hashs:{},_update:function(e,t){this._fn_dom_render(e),t&&t()},init:function(){},update:function(e){this._update(e)},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.find(".module-prod-top").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),this._elm_dom_container.find(".list-header").trigger("detach.ScrollToFixed"),this._elm_dom_container.remove())}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div class="module-prod-wrap module-stock-wrap module-log-wrap">','<div class="module-prod-top"></div>','<div class="module-prod-list">','<div class="main-list">','<div class="list-header">','<div class="prod-checkbox"><span class="check"><input type="checkbox" class="J_Select_All"></span></div>','<div class="prod-img">宝贝图片</div>','<div class="prod-name">商品名称</div>','<div class="log-names">商品规格</div>','<div class="prod-code">商家编码</div>','<div class="stock-num">出库数量</div>','<div class="stock-num">计量单位</div>','<div class="stock-apply">出库时间</div>',"</div>",'<div class="list-body">',"</div>","</div>",'<div class="prod-pages clearfix" style="background:#ffffff;">','<div class="foot-check-all"><label><span class="check"><input type="checkbox" class="J_Select_All"></span>全选</label></div>','<div class="J_Pages"></div>',"</div>","</div>","</div>"],a=['<div class="item-n-sku" act-loop="farItem in list">','<div class="list-item" numiid="{{farItem.numId}}" >','<div class="prod-checkbox">','<span class="check"><input type="checkbox" class="check-item"></span>',"</div>",'<div class="prod-img">','<a target="_blank" href="http://item.taobao.com/item.html?id={{farItem.numIid}}" class="product-thumb">','<img src="{{farItem.picPath}}_40x40.jpg"/>',"</a>","</div>",'<div class="prod-name"><a target="_blank" href="http://item.taobao.com/item.html?id={{farItem.numIid}}" class="prod-name-link">{{farItem.itemTitle}}</a></div>','<div class="log-names">','<div class="log-name" act-loop="prop in farItem.mapList" >{{prop.name}}:<span style="color:brown">{{prop.value}}</span></div>',"</div>",'<div class="prod-code">{{farItem.outerId}}</div>','<div class="stock-num">{{farItem.stock}}</div>','<div class="stock-num">{{farItem.unit}}</div>','<div class="stock-log-time">{{farItem.time}}</div>',"</div>","</div>"],s=['<div class="module-topbar-wrap">',"<div>",'<div id="module-prod-topBar" class="J_module-prod-topBar">','<div class="module-prod-searchBar-container J_SubModule_Query">','<div class="module-prod-searchBar J_SearchBar">','<div class="ui-select ui-select-prodcatagory">',"<span>出库时间：",'<span class="J_Time_Range">','<input id="start_time" type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="startTime" value="{{startTime}}" class="w100 date-picker ml_10" > &mdash; <input id="end_time" type="text" data-date-format="yyyy-mm-dd HH:MM" data-max-date="today" name="endTime" value="{{endTime}}" class="w100 date-picker" >',"</span>","</span>","</div>",'<div class="collect-log" >','<span class="stock-num-all">出库总数:<span class="stock-num-all-no">{{stockSumAll}}</span></span>',"</div>",'<button class="btn btn-primary ml_10">查询</button>',"</div>","</div>","</div>",'<div style="position:relative;width:100%;border-top:1px solid #a3abb4;height:0px;font-size:0;">','<div class="topbar-placeholder" style="height;20px;background: #fff;" ></div>','<div class="module-trade-searchBar-btn"><b></b></div>',"</div>","</div>","</div>"],n=['<div class="pagination-pages f-lt ml_10 clearfix module-trade-pages">','<span class="f-lt fc-999">共{{total}}条记录&nbsp;&nbsp;&nbsp;&nbsp;每页{{stockSumAll}}显示&nbsp;</span>','<span class="pagination-page" style="margin-right:3px;">','<select data-position="top" class="ml_5 mr_5" style="width:50px;">','<option act-if="pageSize == 10" value="10" selected>10</option>','<option act-if="pageSize != 10" value="10">10</option>','<option act-if="pageSize == 20" value="20" selected>20</option>','<option act-if="pageSize != 20" value="20">20</option>','<option act-if="pageSize == 50" value="50" selected>50</option>','<option act-if="pageSize != 50" value="50">50</option>','<option act-if="pageSize == 100" value="100" selected>100</option>','<option act-if="pageSize != 100" value="100">100</option>',"</select>","</span>",'<span class="module-trade-pages-pageNo" act-if="pageNo == 1">&lt;</span>','<a class="module-trade-pages-pageNo" act-if="pageNo > 1" data-page="{{prevPage}}"  title="前一页">&lt;</a>','<span class="pagination-page f-lt" style="margin-right:0;margin-left:3px;"><a class="page-no page-cur">{{pageNo}}</a></span>','<span class="module-trade-pages-pageNo" act-if="isLastPage == 1">&gt;</span>','<a class="module-trade-pages-pageNo" act-if="isLastPage != 1" data-page="{{nextPage}}"  title="后一页">&gt;</a>','<span class="f-lt fc-999">共{{pageTotal}}页&nbsp;&nbsp;&nbsp;&nbsp;去第</span>','<form action="" method="get" class="f-lt">','<input type="text" class="input-small" value="{{pageNo}}" data-max="{{pageTotal}}" style="height:20px;line-height:20px;width:24px;margin-right:0;">','<span class="J_Submit_Container" style="display:inline-block;width:0px;overflow:hidden;">','<button type="submit" class="J_Submit" style="line-height:20px;background:#2b3d50;color:#ffffff;border:1px solid #2b3d50;padding:4px 6px;white-space:nowrap;">确定</button>',"</span>","</form>",'<span class="f-lt fc-999">&nbsp;页</span>',"</div>"];t.template.addTemp("template.stock.stock_log_reduce.wrapper",i),t.template.addTemp("template.stock.stock_log_reduce.body",a),t.template.addTemp("template.stock.stock_log_reduce.topbar",s),t.template.addTemp("template.stock.stock_log_reduce.pages.temp",n)}(jQuery,RayCloud),function(e,t){var i=t.controls.get("control.prod.dataModel"),a=t.controls.get("control.prod.editor"),s={name:"stock.stock_log_reduce",depend:"stock",_elm_dom_root:"#main",_elm_template_name:"template.stock.stock_log_reduce.wrapper",_fn_dom_render:function(i){var a=this,s=this._elm_dom_container=e(t.template.get(this._elm_template_name)).appendTo(e(this._elm_dom_root).empty()),n=function(){a._fn_event_bind_4list(s,i),a._init_scroll_height_related(s,i)};this._load_prodlist_data(s,i,n),this._fn_event_bind(s,i)},_load_prodlist_data:function(e,t,a){var s=this,n={pageNo:t.pageNo||1,pageSize:t.pageSize||20,text:t.text||"",startTime:t.startTime||"",endTime:t.endTime||""};API.stock_stock_log_reduce(n,function(t){if(t.data.list.length){var n={list:t.data.list};s._fn_update_sum_UI(t.data),s._elm_dom_list=s._fn_create_item_UI(n).appendTo(e.find(".list-body").empty()),s._update_pages(t.data),i.initData(n.list),a&&a()}else e.find(".list-body").html('<tr><td colspan="6"><div class="pd_30">暂无数据</div></td></tr>'),s._update_pages(),s._fn_update_sum_UI()},function(){})},_fn_ctrl_setHash:function(i){t.pages.setCurHash(e.extend({},this._status_hashs,i))},_fn_update_sum_UI:function(e){e?(this._elm_dom_container.find(".stock-num-all-no").html(e.stockSumAll),this._elm_dom_container.find(".stock-num-price-no").html(e.costPriceSum||"")):(this._elm_dom_container.find(".stock-num-all-no").html(""),this._elm_dom_container.find(".stock-num-price-no").html(""))},_update_pages:function(e){var i=this._elm_dom_container.find(".J_Pages"),a=i.find("select");if(a&&a.iSelect("destroy"),e){var s=Math.ceil(e.total/e.page.pageSize),n={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:e.page.pageNo+1,pageTotal:s,isLastPage:e.page.pageNo==s};i.html(t.template.get("template.stock.stock_log_reduce.pages.temp",n)),this._bind_event_4_page_changed(i),i.find("select").iSelect()}else i.html("")},_bind_event_4_page_changed:function(t){var i=this;t.find("select").on("change",function(){i._fn_ctrl_setHash({pageNo:1,pageSize:e(this).val()})}),t.find("a.module-trade-pages-pageNo").on("click",function(){var a=e(this).attr("data-page");a&&i._fn_ctrl_setHash({pageNo:a,pageSize:t.find("select").val()})}),t.find(".input-small").on("focusin",function(){t.find(".J_Submit_Container").stop().animate({width:"44px"})}).on("focusout",function(){var a=e(this).val(),s=e(this).attr("data-max"),n=!1;t.find(".J_Submit").on("click",function(t){return t.preventDefault(),a-0>s-0?void e.dialog.alert("超出最大页数！"):(n=!0,void(/^\d*$/.test(a)&&i._fn_ctrl_setHash({pageNo:a})))}),setTimeout(function(){n||t.find(".J_Submit_Container").stop().animate({width:0})},500)})},_fn_event_bind:function(e,t){this._fn_event_bind_topbar(e,t)},_fn_event_bind_topbar:function(i,a){var s="";s="undefined"==typeof a.startTime?t.util.date.getdate(new Date((new Date).getTime()-6048e5),"YY-MM-DD HH:MM"):a.startTime?t.util.date.getdate(1*a.startTime,"YY-MM-DD HH:MM"):"";var n=a.endTime?t.util.date.getdate(1*a.endTime,"YY-MM-DD HH:MM"):"",l=this,d=e(t.template.get("template.stock.stock_log_reduce.topbar",{taobaoId:a.taobaoId||"",startTime:s,endTime:n})).appendTo(i.find(".module-prod-top")),o=!0;e(document).on("click",l.hideSelectTree),d.find(".ui-select-hd").on("click",function(){return l.menuShown?void 0:(l.menuShown=!0,!1)}),i.find(".module-trade-searchBar-btn").on("click",function(){e(this).toggleClass("module-trade-searchBar-btn-down"),i.find("#module-prod-topBar").stop().animate({height:o?0:55},{progress:function(){l._fn_reset_scrollFixed_position(i)},complete:function(){l._fn_reset_scrollFixed_position(i)}}),o=!o}),i.find(".module-prod-tab-navs").on("click",function(){t.pages.setCurHash({timeStamp:+new Date})}),i.find(".btn-primary").on("click",function(){l._fn_query_product(i)})},_fn_reset_scrollFixed_position:function(e){var t=e.find(".module-prod-top"),i=e.find(".list-header"),a=e.find(".topbar-placeholder");i.trigger("detach.ScrollToFixed"),i.scrollToFixed({marginTop:41+a.height()+t.height(),zIndex:101})},_fn_init_folderTree:function(e,i){var a=t.controls.get("control.prod.folder.tree"),s={showIcon:!1,showCheckBox:!1,itemCanHide:!1};a.show(e,i,s)},_fn_query_product:function(i){if(i.find(".J_Time_Range").length){var a=i.find("#start_time").val(),s=i.find("#end_time").val();if(a){if(!t.util.date.is_date(a))return void e.dialog.alert("开始时间格式不正确！");a=t.util.date.tojsdate(a).getTime()}if(s){if(!t.util.date.is_date(s))return void e.dialog.alert("结束时间格式不正确！");s=t.util.date.tojsdate(s).getTime()||""}if(a&&s&&a>=s)return void e.dialog.alert("开始时间必须小于结束时间！")}var n={startTime:a,endTime:s,text:encodeURIComponent(i.find(".search-log-content").val()||""),pageNo:1,timeStamp:+new Date};this._fn_ctrl_setHash(n)},_fn_event_bind_4list:function(t){var a=this,s=null,n=["check-item","input-text","J_Save"],l=t.find(".module-prod-list");t.delegate(".list-item","click",function(t){s&&clearTimeout(s),s=setTimeout(function(){var i=e(t.target),a=!1,s=i.hasClass("list-item")?i:i.parents(".list-item");numiid=s.attr("numiid");for(var l=0;l<n.length;l++)if(i.hasClass(n[l])){a=!0;break}if(!a){var d=s.next(),o=s.find(".prod-item-icon");d.is(":visible")?(o.removeClass("prod-icon-open").addClass("prod-icon-close"),d.slideUp()):(o.removeClass("prod-icon-close").addClass("prod-icon-open"),d.slideDown())}},200)}),t.delegate(".list-item","dblclick",function(t){var l=e(t.target),d=!1;s&&clearTimeout(s);for(var o=0;o<n.length;o++)if(l.hasClass(n[o])){d=!0;break}if(!d){var r=l.hasClass("list-item")?l:l.parents(".list-item");numiid=r.attr("numiid"),a._fn_open_edit_dlg(i.getItemData(numiid))}}),l.delegate(".check-item","click",function(t){var i=e(t.target),a=i.parents(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),l.find(".list-item").length==l.find(".check-item:checked").length?l.find(".J_Select_All").prop("checked",!0):l.find(".J_Select_All").prop("checked",!1)}),l.find(".J_Select_All").on("click",function(t){var i=e(t.target),a=l.find(".list-item");i.prop("checked")?a.addClass("list-item-selected"):a.removeClass("list-item-selected"),l.find(".check-item").prop("checked",e(t.target).prop("checked")),l.find(".J_Select_All").prop("checked",e(t.target).prop("checked"))}),l.find(".product-code").on("click",function(t){a._fn_change_shortTitle(l,e(t.target).prop("checked"))}),l.delegate(".sku-title-input","click",function(t){var i=e(t.target),a=i.parent(),s='<button class="J_Save">保存</button>';a.find(".J_Save").length||(a.css("position","relative").append(s),a.find(".J_Save").stop().animate({width:"44px"}))}),l.delegate(".sku-title-input","focusin",function(t){var i=e(t.target),a=i.parent(),s='<span class="save-btn-wrapper"><button class="J_Save">保存</button></span>';a.find(".save-btn-wrapper").length||a.css("position","relative").append(s),a.find(".save-btn-wrapper").stop().animate({width:"44px"})}).delegate(".sku-title-input","focusout",function(t){var i=e(t.target),s=i.parent(),n=(e(this).val(),s.find(".J_Save")),l=!1;n.one("click",function(t){l=!0;var i=e(t.target),s=i.parent().prev();s.hasClass("product-shorttitle")?a._fn_save_shortTitle(s):a._fn_save_skuCode(s)}),setTimeout(function(){l||s.find(".save-btn-wrapper").stop().animate({width:0})},50)}),l.delegate(".product-thumb img","mouseover",e.proxy(function(e){this._fn_handle_img_mouseover(e)},this)),l.delegate(".product-thumb img","mouseout",e.proxy(function(e){this._fn_handle_img_mouseout(e)},this))},_fn_handle_img_mouseover:function(t){var i=e(t.target);this._fn_create_img_preview_tip(i)},_fn_handle_img_mouseout:function(t){var i=e(t.target);i.parents("div.prod-img").find(".img-help-tip").remove()},_fn_create_img_preview_tip:function(t){var i=t.attr("src").replace(/40/g,"130");e('<div class="img-help-tip"><span class="arrow-wraper"></span><span class="left-arrow"></span><img src="'+i+'"/></div>').appendTo(t.parents("div.prod-img"))},_fn_change_shortTitle:function(t,i){var a=t.find(".product-shorttitle");i?e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");s.length&&a.val(a.val()+a.attr("outerid"))}):e.each(a,function(t,i){var a=e(i),s=a.parents("div.list-item").find(".check-item:checked");if(s.length){var n=a.val()||"",l=a.attr("outerid"),d=n.lastIndexOf(l);n&&d>-1&&(n=n.substring(0,d)+n.substring(d+l.length)),a.val(n)}})},_fn_save_shortTitle:function(){},_fn_save_skuCode:function(e){e.attr("originalval"),e.val(),e.attr("name"),e.parents(".sku-item").attr("skuId"),e.parents(".sku-item").attr("numId"),e.parents(".sku-item").attr("itemStockId")},_fn_open_edit_dlg:function(e){a.show(e)},_init_scroll_height_related:function(t){var i=t.find(".module-prod-top"),a=t.find(".list-header");e("#modlue_leftNav").trigger("detach.ScrollToFixed"),i.trigger("detach.ScrollToFixed"),a.trigger("detach.ScrollToFixed"),e("#modlue_leftNav").scrollToFixed({marginTop:0,zIndex:112}),i.scrollToFixed({marginTop:41,zIndex:110}),a.scrollToFixed({marginTop:117,zIndex:105})},_fn_create_item_UI:function(i){return e(t.template.get("template.stock.stock_log_reduce.body",i))},_fn_event_unbind:function(){},_fn_event_handler:function(){},_event_handler_object:{},_status_hashs:{},_update:function(e,t){this._fn_dom_render(e),t&&t()},init:function(){},update:function(e){this._update(e)},disabled:function(){},getContainer:function(){return this._elm_dom_container},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_container.find(".module-prod-top").trigger("detach.ScrollToFixed"),e("#modlue_leftNav").trigger("detach.ScrollToFixed"),this._elm_dom_container.find(".list-header").trigger("detach.ScrollToFixed"),this._elm_dom_container.remove())}};t.modules.define(s.name,s)}(jQuery,RayCloud),function(e,t){var i=['<div id="pt_elist">','<div class="pt_express_list">','<div class="express-tab">','<div class="express-hd clearfix">','<ul class="hd-title clearfix">',"<li>",'<a href="#/pt/list/">普通面单</a>',"</li>","<li>",'<a href="#/pt/wlb_list/">菜鸟电子面单</a>',"</li>","</ul>",'<div class="hd-sync">','<a data-opt="recoveryStrategy" class="J_Click mr_10">对接网点电子面单单号回收策略</a>','<a data-id="0" data-opt="addElecMdul" class="btn btn-success btn-small J_Click mr_10">新建电子面单模版</a>',"</div>","</div>",'<div class="express-bd">','<div id="table" class="express-panel pt-list-tab"></div>',"</div>",'<div class="clearfix">','<div class="pagination-pages f-rt mr_5">','<div class="pagination-page J_Page_Container"></div>',"</div>","</div>","</div>","</div>","</div>"],a=['<table class="express-table">',"<thead>","<tr>",'<th width="30">','<div class="cell-box ft-center">序号</div>',"</th>",'<th width="110">','<div class="cell-box">类型：模板名称</div>',"</th>",'<th width="40">','<div class="cell-box">快递类型</div>',"</th>",'<th width="220">','<div class="cell-box">发货网点\\发货地址</div>',"</th>",'<th width="150">','<div class="cell-box">操作</div>',"</th>",'<th width="100">','<div class="cell-box">常用快递</div>',"</th>","</tr>","</thead>",'<tbody class="common-list-tr">','<tr act-loop="item in list" data-id={{item.id}} data-name="{{item.name}}" data-expressname="{{item.expressName}}" data-type="{{item.cpType}}" data-taobaoId="{{item.taobaoId}}" class="J_List_Item_{{item.id}}">',"<td>",'<div class="cell-box ft-center">{{item.idex}}</div>',"</td>","<td>",'<div class="cell-box">','<span class="J_Express_Name">{{item.name}}</span>','<a data-id="{{item.id}}" data-name="{{item.name}}" data-namedesc="{{item.nameDesc}}" data-opt="editCompName" class="tip edit-ex J_Click" data-title="修改模板名称"></a>',"</div>","</td>","<td>",'<div class="cell-box">','<span class="cp-type" act-if="{{item.cpType}} == 1">直营</span>','<span class="cp-type" act-if="{{item.cpType}} != 1">加盟</span>',"</div>","</td>",'<td class="cp-detail">','<span class="cp-type" act-if="item.cpType != 1">','<div class="cell-box cell-box-{{item.id}}" act-loop="branchAccount in item.templateBranchList">','<span class="cp-img"></span>','<div class="cp-content">','网点名称：<span class="cp-branchCode">{{branchAccount.branchName}}</span>','<a data-id="{{branchAccount.id}}" data-paytype="{{branchAccount.payType}}" data-custid="{{branchAccount.cusTid}}" data-mark="{{branchAccount.mark}}" data-wlbtype="{{item.wlbType}}" data-username="{{branchAccount.userName}}" data-password="{{branchAccount.password}}" data-branchcode="{{branchAccount.branchCode}}" data-branchname="{{branchAccount.branchName}}" data-key="{{item.id}}" data-opt="editBranchName" class="tip edit-ex J_Click" data-title="修改网点"></a>','<a data-opt="addAddr" data-id="{{branchAccount.id}}" class="ml_20 cp-branchCode J_Click" style="float:right">新增发货地址</a>','<div class="cp-location cp-location-{{branchAccount.id}}">','<table style="width:100%;">','<tr class="addresses-{{branchAccount.id}}" act-loop="address in branchAccount.templateBranchAddressList">','<td style="width:60px;">发货地址：</td>','<td style="width:240px;" class="cp-addr mr_30">',"{{address.province}}{{address.city}}{{address.country}}{{address.address}}",'<span class="tip defaultAddress J_Click" data-id="{{address.id}}" data-key="{{item.id}}" data-taobaoId="{{item.taobaoId}}" data-branchId="{{branchAccount.id}}" data-addressId="{{address.contactId}}" act-if="address.isDefault == 1" data-title="更改默认地址"></span>','<span class="tip no-defaultAddress J_Click" data-id="{{address.id}}" data-key="{{item.id}}" data-taobaoId="{{item.taobaoId}}" data-branchId="{{branchAccount.id}}" data-addressId="{{address.contactId}}" data-opt="updateDefaultAddr" act-if="address.isDefault != 1" data-title="更改默认地址"></span>',"</td>",'<td class="cp-addr-opt" style="text-align:right">','<a data-id="{{address.id}}" data-province="{{address.province}}" data-city="{{address.city}}" data-country="{{address.country}}" data-address="{{address.address}}" data-opt="editAddr" class="tip edit-ex J_Click mr_5" data-title="修改"></a>','<a data-id="{{address.id}}" data-data="{{address.province}}{{address.city}}{{address.country}}{{address.address}}" data-opt="delAddr" class="tip cp-addr-del J_Click ft_14" data-title="删除"></a>',"</td>","</tr>","</table>","</div>","</div>","</div>",'<div class="cell-box" style="clear:both">','<a data-opt="addBranch" data-key="{{item.id}}" data-wlbtype="{{item.wlbType}}" data-mark="{{item.mark}}" data-wlbtype="{{item.wlbType}}" class="J_Click">新增网点</a>',"</div>","</span>",'<span class="cp-type" act-if="item.cpType == 1">','<div class="cell-box cell-box-{{item.id}}" act-loop="branchAccount in item.templateBranchList">','<span class="cp-img"></span>','<span class="cp-content">','网点名称：<span class="cp-branchCode">{{branchAccount.branchName}}</span>','<a data-id="{{branchAccount.id}}" data-paytype="{{branchAccount.payType}}" data-custid="{{branchAccount.cusTid}}" data-mark="{{branchAccount.mark}}" data-wlbtype="{{item.wlbType}}" data-username="{{branchAccount.userName}}" data-password="{{branchAccount.password}}" data-branchcode="{{branchAccount.branchCode}}" data-branchname="{{branchAccount.branchName}}" data-key="{{item.id}}" data-opt="editBranchName" class="tip edit-ex J_Click" data-title="修改网点"></a>','<a data-opt="addAddr" data-id="{{branchAccount.id}}" class="ml_20 cp-branchCode J_Click" style="float:right;">新增发货地址</a>','<div class="cp-location cp-location-{{branchAccount.id}}">','<table style="width:100%;">','<tr class="addresses" act-loop="address in branchAccount.templateBranchAddressList">','<td style="width:60px;">发货地址：</td>','<td style="width:240px;" class="cp-addr mr_30">',"{{address.province}}{{address.city}}{{address.country}}{{address.address}}",'<span class="tip defaultAddress J_Click" data-id="{{address.id}}" data-key="{{item.id}}" data-taobaoId="{{item.taobaoId}}" data-branchId="{{branchAccount.id}}" data-addressId="{{address.contactId}}" act-if="address.isDefault == 1" data-title="更改默认地址"></span>','<span class="tip no-defaultAddress J_Click" data-id="{{address.id}}" data-key="{{item.id}}" data-taobaoId="{{item.taobaoId}}" data-branchId="{{branchAccount.id}}" data-addressId="{{address.contactId}}" data-opt="updateDefaultAddr" act-if="address.isDefault != 1" data-title="更改默认地址"></span>',"</td>",'<td class="cp-addr-opt" style="text-align:right">','<a data-id="{{address.id}}" data-province="{{address.province}}" data-city="{{address.city}}" data-country="{{address.country}}" data-address="{{address.address}}" data-opt="editAddr" class="tip edit-ex J_Click mr_5" data-title="修改"></a>','<a data-id="{{address.id}}" data-data="{{address.province}}{{address.city}}{{address.country}}{{address.address}}" data-opt="delAddr" class="tip cp-addr-del J_Click ft_14" data-title="删除"></a>',"</td>","</tr>","</table>","</div>","</span>","</div>","</span>","</td>","<td>",'<div class="cell-box opr-list-ex">',"{{item.isDefaultHtml}}","<span>|</span>",'<a class="J_Click" data-opt="preview" data-type="{{item.templateType}}" data-taobaoid="{{item.taobaoId}}" data-cpcode="{{item.cpCode}}" data-id="{{item.id}}">预览</a>',"<span>|</span>",'<a href="#/pt/wlb/?id={{item.id}}&isNetDesign=true&cpcode={{item.cpCode}}&taobaoId={{item.taobaoId}}">设计</a>',"<span>|</span>","{{item.sltPrinter}}","</div>","</td>","<td>",'<div class="cell-box">','<div class="ui-switch ui-switch-small">','<span data-id="{{item.id}}" data-name="{{item.name}}" id="11" class="ui-switch-statu {{item.commonUseClass}} J_Click">','<label data-opt="defaultExpress" class="ui-switch-label ui-switch-label-on"></label>','<label data-opt="defaultExpress" class="ui-switch-label ui-switch-label-off"></label>',"</span>","</div>","</div>","</td>","</tr>","</tbody>","</table>"],s=['<div act-loop="item in list">','<div class="elec_mdul_img">','<img data-id="{{item.id}}" data-pswdname="{{item.password}}" data-username="{{item.userName}}" data-custid="{{item.cusTid}}" data-name="{{item.name}}" data-mark="{{item.title}}" data-templateType="{{item.templateType}}" class="ax_image J_Click" width="128px" height="46px" src="{{item.bgPathStandard}}">',"</div>","</div>"],n=['<div class="ft_14 ft-normal add_elec_mdul_win ml_20">',"<table>",'<tr class="mb_10">',"<td>","<span>","&nbsp;&nbsp;模板名称：","</span>","</td>",'<td colspan="3">','<span class="mr_30" act-if="mdulName == undefined">','<span class="newMdul-mdulName-preFix">{{mdulNameDesc}}</span>+','<input class="newMdul-mdulName-fix" type="text" style="width:6em">',"<span>(不超过三个字)</span>","</span>",'<span class="mr_30" act-if="mdulName != undefined">',"{{mdulName}}","</span>",'<span class="newMdul-cpType">',"快递类型：","</span>",'<span act-if="cpType == 1">',"直营","</span>",'<span act-if="cpType != 1">',"加盟","</span>","</td>","</tr>",'<tr class="mb_10">',"<td>",'<font color="red">*</font> 网点名称：',"</td>",'<td class="mr_20">','<input type="text" class="newMdul-branchName" act-if="cpType == 1" value="全部网点通用" style="width:12em" placeholder="必填">','<input type="text" class="newMdul-branchName" act-if="cpType != 1" style="width:12em" placeholder="必填">',"</td>",'<td style="width:80px;" align="right">',"网点编码：","</td>","<td>",'<input type="text" class="newMdul-branchCode" style="width:12em">',"</td>","</tr>",'<tr class="mb_10">',"<td>",'<font color="red">*</font> {{userName}}：',"</td>",'<td class="mr_20">','<input type="text" class="newMdul-account" style="width:12em" placeholder="必填">',"</td>",'<td align="right">','<font color="red">*</font> {{pswdName}}：',"</sptdan>","<td>",'<input type="password" class="newMdul-pswd" style="width:12em" placeholder="必填">',"</td>","</tr>",'<tr class="mb_10">',"<td colspan=4>",'<span class="mr_3 J-month-card">','<span class="net_list_flexibility"><font color="red">*</font> {{cusTid}}：</span><input type="text" class="newMdul-cusTid" style="width:6em" placeholder="必填">',"</span>",'<span class="J-newMdul-mark mr_3">','<span class="net_list_flexibility">&nbsp;&nbsp;业务类型：</span>','<select style="width:7em;" class="J-Interface-Type"  data-value="{{mark}}">','<option act-loop="type in contact" value="{{type.code}}">{{type.name}}</option>',"</select>","</span>",'<span class="J-newMdul-paytype">','<span class="net_list_flexibility">&nbsp;&nbsp;{{payType}}：</span>','<select style="width:7em;" class="newMdul-paytype"  data-value="{{payType}}">','<option act-loop="type in payContact" value="{{type.code}}">{{type.name}}</option>',"</select>","</span>","</td>","</tr>",'<tr class="mb_10">',"<td>",'<font color="red">*</font> 所在地区：',"</td>",'<td colspan="3">','<span class="mr_15">','<span class="J_Mdul_Send_Area" style="width:96%;"></span>',"</span>","</td>","</tr>",'<tr class="mb_10">','<td style="width:80px;">','<font color="red">*</font> 街道地址：',"</td>",'<td colspan="3">','<span class="mr_15">','<input class="newMdul-addr" type="text" style="width:96%" placeholder="必填\\请输入正确的街道地址">',"</span>","</td>","</tr>",'<tr class="mb_10 ft_12">','<td colspan="4">','<span class="mr_15" style="color:#999">',"提醒：正确输入账号、密码后请到交易中检查能否正常获取电子面单号！如果不能获取请联系快递公司！","</span>","</td>","</tr>",'<tr class="mb_10 ft_12" act-if="wlbtype == 6">','<td colspan="4">','<span class="mr_15" style="color:red">',"韵达电子面单接口不稳定，强烈建议试打一单，让快递员正常揽收后，再批量打单发货，以免造成损失！","</span>","</td>","</tr>","</table>","</div>"],l=['<div class="ft_14 ft-normal" style="text-align:center">',"<center>","<table>",'<tr class="mb_10">',"<td>所在地区：</td>",'<td align="left"><span class="J_Goods_Area"></span></td>',"</tr>","<tr>","<td>街道地址：</td>",'<td align="left"><input class="editAddr-sendGoodsaddr" type="text" style="width:21em;height:16px;" placeholder="必填\\请输入正确的街道地址"></td>',"</tr>","</table>","</center>","</div>"],d=['<div class="ft_14 ft-normal">',"<center>",'<table style="border:2px;">',"<tr>",'<td align="right" width:80px;><font color="red">*</font> 网点名称：</td>','<td align="left"><input class="editBranch-branchName" type="text" style="width:15em" value="{{branchName}}"></td>','<td align="right">网点编码：</td>','<td align="left"><input class="editBranch-branchCode" type="text" style="width:15em" value="{{branchCode}}"></td>',"</tr>","<tr>",'<td align="right"><font color="red">*</font> {{uName}}：</td>','<td align="left">','<input class="editBranch-account" type="text" style="width:15em" value="{{userName}}">',"</td>",'<td align="right">','<font color="red">*</font> {{pswdName}}：',"</td>",'<td align="left">','<input class="editBranch-pswd" type="password" style="width:15em" value="{{password}}">',"</td>","</tr>","<tr>",'<td colspan=4 align="left">','<span class="editBranch-cus"><span class="net_list_flexibility">{{cusTidName}}：</span>','<input class="editBranch-cus editBranch-cusTid" type="text" style="width:8em" value="{{cusTid}}">',"</span>",'<span class="editBranch-mark"><span class="net_list_flexibility">业务类型：</span>','<select class="editBranch-mark J-Interface-Type" style="width:8em;" data-value="{{mark}}" value="{{mark}}">','<option act-loop="type in contact" value="{{type.code}}">{{type.name}}</option>',"</select>","</span>",'<span class="editBranch-payType"><span class="net_list_flexibility">支付方式：</span>','<select class="editBranch-payType" style="width:auto;"  data-value="{{payType}}" value="{{payType}}">','<option act-loop="type in payContact" value="{{type.code}}">{{type.name}}</option>',"</select>","</span>","</td>","<tr>","<tr>",'<td class="ft_12" colspan="6">','<span class="mr_15" style="color:#999">',"提醒：正确输入账号、密码后请到交易中检查能否正常获取电子面单号！如果不能获取请联系快递公司！","</span>","</td>","</tr>","</table>","</center>","</div>"],o=['<div class="ft_14 ft-normal">',"<center>",'<table style="border:2px;">','<tr class="mb_10">',"<td>模板名称：</td>","<td>{{mdulName}}</td>","</tr>","<tr>","<td>网点名称：</td>",'<td><input type="text" style="width:12em"></td>',"</tr>","<tr>","<td>发货地址：</td>",'<td><input type="text" style="width:20em"></td>',"</tr>","</table>","</center>","</div>"],r=['<span class="ft_14 ft-normal">',"模板名称：{{mdulName}}+",'<input type="text" class="editMdul-mdulName-fix" style="width:6em;" value="{{mdulFixName}}">',"（不超过3个字）","</span>"],p=['<h1 style="text-align:center;font-size:16px;">各快递公司关于对接网点电子面单号的"单号回收"规则（实际以快递公司为准）</h1>','<h2 style="font-size:14px;">圆通：</h2>','<p class="ml_20 mr_20">1、支持回收。电子面单号结算以实际揽收为准，已获取的运单号未揽收不计费。掌柜中取消操作回收单号+1。回收功能后续开放。</p>','<p class="mb_10 ml_20 mr_20">2、已揽收的订单重新发货，该运单号也算已使用。</p>','<h2 style="font-size:14px;">天天：</h2>','<p class="ml_20 mr_20">1、支持回收。电子面单号结算以实际揽收为准，已获取的运单号未揽收不计费。掌柜中取消操作回收单号+1。回收功能后续开放。</p>','<p class="ml_20 mr_20">2、15天后单号失效不能再用，月底返回上个月不使用的单号。</p>','<p class="mb_10 ml_20 mr_20">2、已揽收的订单重新发货，该运单号也算已使用。</p>','<h2 style="font-size:14px;">中通：</h2>','<p class="ml_20 mr_20">1、支持回收。电子面单号结算以实际揽收为准，已获取的运单号未揽收不计费。掌柜中取消操作回收单号+1。回收功能后续开放。</p>','<p class="ml_20 mr_20">2、超过一个月无物流信息的自动回收。','<p class="mb_10 ml_20 mr_20">3、已揽收的订单重新发货，该运单号也算已使用。</p>','<h2 style="font-size:14px;">韵达：</h2>','<p class="ml_20 mr_20">1、支持回收。电子面单号结算以实际揽收为准，已获取的运单号未揽收不计费。掌柜中取消操作回收单号+1。回收功能后续开放。</p>','<p class="ml_20 mr_20">2、无自动回收。如果获取单号超过15天无物流信息需要回收，商家可以联系网点协商处理。</p>','<p class="ml_20 mr_20">3、已揽收的订单重新发货，该运单号也算已使用。</p>','<h2 style="font-size:14px;">顺丰：</h2>','<p class="ml_20 mr_20">1、支持回收。电子面单号结算以实际揽收为准，已获取的运单号未揽收不计费。掌柜中取消操作回收单号+1。回收功能后续开放。</p>','<p class="ml_20 mr_20">2、超过4天无物流信息的自动回收。</p>','<p class="ml_20 mr_20 mb_10">3、已揽收的订单重新发货，该运单号也算已使用。</p>'];
t.template.addTemp("template.pt.net.list.wrap",i),t.template.addTemp("template.pt.net.list.grid.wrap",a),t.template.addTemp("template.pt.net.list.add.elec.mdul.navigator",s),t.template.addTemp("template.pt.net.list.add.elec.mdul",n),t.template.addTemp("template.pt.net.list.edit.address",l),t.template.addTemp("template.pt.net.list.edit.branchName",d),t.template.addTemp("template.pt.net.list.add.branch",o),t.template.addTemp("template.pt.net.list.edit.mdulName",r),t.template.addTemp("template.pt.net.list.recovery.strategy",p)}(jQuery,RayCloud),function($,RC){var PrintPt=(RC.controls.get("control.pt.wlb_list"),RC.controls.get("control.common_express"),RC.controls.get("control.print_pt")),WidgetPage=(RC.controls.get("control.form_util"),RC.controls.get("control.widget.page"));AddressCompnoent=window.component.AddrDropDown;var mdul={name:"pt.net_list",depend:"pt",_elm_dom_root:"#main",_fn_dom_render:function(){if(!this._elm_dom_container){var e=this._elm_dom_container=$(RC.template.get("template.pt.net.list.wrap")).appendTo(this._elm_dom_root);this._elm_dom_ptListTab=e.find(".pt-list-tab"),this._elm_dom_pageContainer=e.find(".J_Page_Container"),this._fn_event_bind()}},_fn_dom_update:function(e){var t=RC.template.get("template.pt.net.list.grid.wrap",e.data);this._elm_dom_ptListTab.html(t),this._elm_dom_pageContainer.html(WidgetPage.get_html("",function(e){return"#/pt/net_list/?pageNo="+e},Math.ceil(e.data.total/this.hashs.pageSize),this.hashs.pageNo)),$(".tip").iTip({skin:"blue",triggerType:"hover"})},_format_grid_data:function(e){if(!e||!e.data||!e.data.list||0==e.data.list.lenth)return $.dialog.alert("没有查询到网点电子模板列表！"),void this._elm_dom_ptListTab("<center>没有查询到数据！</center>");for(var t=PrintPt.findLocalPrinter(),i=0,a=e.data.list.length;a>i;i++)e.data.list[i].idex=(this.hashs.pageNo-1)*this.hashs.pageSize+i+1,e.data.list[i].isDefaultHtml=1==e.data.list[i].isDefault?'<em class="fc_999 J_Default_Express" data-id="'+e.data.list[i].id+'">已默认</em>':'<a class="set-deafult J_Click J_User_Top" data-opt="setDefaultMdul" data-id="'+e.data.list[i].id+'" data-name="'+e.data.list[i].name+'">设为默认</a>',e.data.list[i].commonUseClass=1==e.data.list[i].commonUse?"ui-switch-on":"ui-switch-off",e.data.list[i].sltPrinter=""==e.data.list[i].printerName||-1==$.inArray(e.data.list[i].printerName,t)?'<a class="J_Click" data-name="lock_print" data-taobaoid="'+e.data.list[i].taobaoId+'" data-id="'+e.data.list[i].id+'" data-status="0">锁定打印机</a>':'<em class="fc_999">'+e.data.list[i].printerName+'<a class="J_Click ml_5" data-name="lock_print" data-taobaoid="'+e.data.list[i].taobaoId+'" data-id="'+e.data.list[i].id+'" data-status="1" data-print="'+e.data.list[i].printerName+'">[取消锁定]</a></em>';this._fn_dom_update(e),$("#table").data("data",e.data)},_fn_event_bind:function(){this._elm_dom_container.on("click.J_Click",".J_Click",$.proxy(function(e){this._fn_link_event_handler(e,this)},this))},_fn_event_unbind:function(){this._elm_dom_container.off("click.J_Click")},_fn_link_event_handler:function(e,that){switch($(e.target).data("opt")){case"addElecMdul":!function(){API.wlb_company_wlbexpress_list({},function(json){that.$dialog=$.dialog({title:"新建快递单模板",content:RC.template.get("template.pt.net.list.add.elec.mdul.navigator",{list:json.data}),width:590,resize:!1}),$(".ui_main").css("background","#f2f2f2"),$(".elec_mdul_img").on("click",function(e){for(var params={id:$(e.target).data("id"),wlbtype:$(e.target).data("id"),mdulNameDesc:$(e.target).data("name"),cpType:$(e.target).data("templatetype"),userName:$(e.target).data("username"),pswdName:$(e.target).data("pswdname"),cusTid:$(e.target).data("custid"),payType:"",mark:""},i=0;i<json.data.length;i++)json.data[i].title&&json.data[i].id==params.id&&(params.mark=json.data[i].title?json.data[i].title:{},params.payType=json.data[i].payType?json.data[i].payType.declare:"",params.contact=json.data[i].title&&json.data[i].title.contact?json.data[i].title.contact:[],params.payContact=json.data[i].payType&&json.data[i].payType.contact?json.data[i].payType.contact:[]);with($.dialog({title:"新建电子面单",content:RC.template.get("template.pt.net.list.add.elec.mdul",params),width:640,resize:!1,ok:function(){return that._saveMdul_or_saveBranch(that,params,"wlb_company_user_add","电子面单模板")?void(that.$dialog&&!that.$dialog.closed&&that.$dialog.close()):!1},cancel:!0}),params)mark||$(".J-newMdul-mark").hide(),cusTid||$(".J-month-card").hide(),payType||$(".J-newMdul-paytype").hide();var component=that.address_component=new AddressCompnoent;component.renderUI($(".J_Mdul_Send_Area"),[{name:"省份",value:"请选择..."},{name:"地市",value:"请选择..."},{name:"县",value:"请选择..."}])})})}();break;case"delMdul":!function(){$.dialog.confirm('<b>您确定要删除模板【</b><span class="ft_12">'+$(e.target).data("name")+"</span><b>】吗？</b>",$.proxy(function(){var t={id:$(e.target).data("id")};API.wlb_company_user_delete(t,function(){API.wlb_company_user_list(that.hashs,$.proxy(function(t){RC.showSuccess('<b>删除模板【</b><span class="ft_12">'+$(e.target).data("name")+"</span><b>】成功！</b>",.8),this._format_grid_data(t)},that))})},this))}();break;case"editCompName":!function(){var t={mdulName:$(e.target).data("namedesc"),mdulFixName:$(e.target).data("name").substring($(e.target).data("namedesc").length)};$.dialog({title:"修改快递模板名称",content:RC.template.get("template.pt.net.list.edit.mdulName",t),width:430,height:100,resize:!1,ok:function(){if($(".editMdul-mdulName-fix").val().length>3)return $.dialog.alert("模板名称长度超过最大限制！"),!1;var i={id:$(e.target).data("id"),name:t.mdulName+$(".editMdul-mdulName-fix").val()};API.wlb_company_user_name_edit(i,function(){$(e.target).data("name",i.name),$(".J_List_Item_"+$(e.target).data("id")).data("name",i.name),$(".J_List_Item_"+$(e.target).data("id")).find("td").eq(1).find(".J_Express_Name").html(i.name)})},cancel:!0})}();break;case"preview":!function(){var t=$(e.target),i=t.data("type"),a=t.data("id"),s=t.data("taobaoid");0==i?$.when(API.pt_wlb_user_query({id:a,taobaoId:s}),API.pt_wlb_fields_sample({})).done(function(e,t){var i=t[0].data,a=e[0].data,s={};if(s.width=a.widthStandard,s.height=a.heightStandard,s.y=a.verticalOffsetStandard,s.x=a.horizontalOffsetStandard,"sf"==a.cpCode.toLowerCase()){var n=that._getSFType(a);a.cpCode=a.cpCode+n}var l=RC.template.get("template.pt.wlb."+a.cpCode+".standard",i);s.html=l,that._fn_custom_wlb_html_print(s,a.cpCode,i)}):1==i&&$.when(API.pt_wlb_user_query({id:a,taobaoId:s}),API.pt_wlb_fields_sample({templateType:i})).done(function(e,t){var i=e[0].data,a=t[0].data,s={};s.width=i.widthCustom,s.height=i.heightCustom,s.y=i.verticalOffsetCustom,s.x=i.horizontalOffsetCustom;var n=RC.template.get("template.pt.wlb."+i.cpCode+".custom");s.html=n,s.fieldSettings=i.fieldSettings,that._fn_custom_wlb_text_print(s,i,a)})}();break;case"addAddr":!function(){var t={branchId:$(e.target).data("id")};that._saveOrEdit_addr(e,that,t,"wlb_company_user_branchaddress_add")}();break;case"delAddr":!function(){$.dialog.confirm('<b>您确定要删除发货地址【</b><span class="ft_12">'+$(e.target).data("data")+"</span><b>】吗？</b>",function(){var t={templateBranchAddressId:$(e.target).data("id")};API.wlb_company_user_branchaddress_delete(t,function(){API.wlb_company_user_list(that.hashs,$.proxy(function(t){this._format_grid_data(t),RC.showSuccess('<b>删除发货地址【</b><span class="ft_12">'+$(e.target).data("data")+"</span><b>】成功！</b>",.8)},that))})})}();break;case"editAddr":!function(){var t={branchAddressId:$(e.target).data("id"),province:$(e.target).data("province"),city:$(e.target).data("city"),country:$(e.target).data("country"),address:$(e.target).data("address")};that._saveOrEdit_addr(e,that,t,"wlb_company_user_branchaddress_update")}();break;case"updateDefaultAddr":!function(){var t={branchAddressId:$(e.target).data("id")};API.wlb_company_user_branchaddress_default(t,function(){$(".cell-box-"+$(e.target).data("key")).find(".defaultAddress").removeClass("defaultAddress").addClass("no-defaultAddress").data("opt","updateDefaultAddr"),$(e.target).removeClass("no-defaultAddress").addClass("defaultAddress").data("opt","")})}();break;case"setDefaultMdul":!function(){var t={id:$(e.target).data("id"),defaultHtml:'<em class="fc_999 J_Default_Express" data-id="'+$(e.target).data("id")+'">已默认</em>',setDefaultHtml:'<a class="set-deafult J_Click J_User_Top" data-opt="setDefaultMdul" data-id="'+$(e.target).data("id")+'" data-name="'+$(e.target).data("name")+'">设为默认</a>'};API.wlb_company_user_top(t,function(){for(var i=$("#table").data("data"),a=0;a<i.list.length;a++)i.list[a].id==t.id&&(i.list[a].isDefault=1,i.list[a].isDefaultHtml=t.defaultHtml);$(t.setDefaultHtml).insertBefore($(".J_Default_Express").next("span").eq(0)),$(".J_Default_Express").remove(),$(t.defaultHtml).insertBefore($(e.target).next("span").eq(0)),$(e.target).remove(),$(".J_List_Item_"+$(e.target).data("id")).children("td").last().find(".ui-switch-statu").addClass("ui-switch-on")})}();break;case"editBranchName":!function(){var mdul=that._fn_get_getCpType($(e.target).data("wlbtype")),params={mdulName:$(".J_List_Item_"+$(e.target).data("key")).data("name"),branchName:$(e.target).data("branchname"),branchCode:$(e.target).data("branchcode"),userName:$(e.target).data("username"),password:$(e.target).data("password"),mark:$(e.target).data("mark"),uName:mdul.userName,pswdName:mdul.password,cusTidName:mdul.cusTid,cusTid:$(e.target).data("custid"),contact:mdul.title?mdul.title.contact:[],payType:$(e.target).data("paytype"),payContact:mdul.payType?mdul.payType.contact:[]};with(params.contact||delete params.contact,$.dialog({title:"网点信息",content:RC.template.get("template.pt.net.list.edit.branchName",params),width:750,resize:!1,ok:function(){var t={templateId:$(e.target).data("key"),templateBranchId:$(e.target).data("id"),branchName:$(".editBranch-branchName").val(),branchCode:$(".editBranch-branchCode").val(),userName:$(".editBranch-account").val(),password:$(".editBranch-pswd").val(),mark:$(".editBranch-mark").find(".J-Interface-Type").val(),payType:$($(".editBranch-payType")[1]).val(),cusTid:$(".editBranch-cusTid").val()};for(var i in params)t.hasOwnProperty(i)&&t[i]==params[i]&&delete t[i];var a=API.wlb_company_user_branch_update(t,function(){for(var i=$("#table").data("data"),a=0;a<i.list.length;a++)if(i.list[a].id=$(".J_List_Item_"+$(e.target).data("key")).data("id"))for(var s=i.list[a].templateBranchList,n=0;n<s.length;n++)s[n].id==t.templateBranchId&&(s[n].branchName=t.branchName);for(var l in t)$(e.target).data(l.toLowerCase(),t[l]);$(e.target).prev("span").last().html(t.branchName)});return a.responseJSON&&a.responseJSON.message?!1:void 0},cancel:!0}),params)cusTidName||$(".editBranch-cus").hide(),mark?$(".editBranch-mark.J-Interface-Type").val(params.mark):$(".editBranch-mark").hide(),payType?$(".editBranch-payType").val(params.payType):$(".editBranch-payType").hide()}();break;case"addBranch":!function(){var mdul=that._fn_get_getCpType($(e.target).data("wlbtype")),params={id:$(e.target).data("key"),mdulName:$(".J_List_Item_"+$(e.target).data("key")).data("name"),cpType:$(".J_List_Item_"+$(e.target).data("key")).data("type"),userName:mdul.userName,pswdName:mdul.password,payType:mdul.payType?mdul.payType.declare:"",payContact:mdul.payType?mdul.payType.contact:[],cusTid:mdul.cusTid,wlbtype:$(e.target).data("wlbtype"),contact:mdul.title?mdul.title.contact:[]};with(params.contact||delete params.contact,that.$dialog=$.dialog({title:"网点信息",content:RC.template.get("template.pt.net.list.add.elec.mdul",params),width:640,resize:!1,ok:function(){return that._saveMdul_or_saveBranch(that,params,"wlb_company_user_branch_add","网点")?void 0:!1},cancel:!0}),mdul.title||$(".J-newMdul-mark").hide(),params)cusTid||$(".J-month-card").hide(),payType||$(".J-newMdul-paytype").hide();var component=that.address_component=new AddressCompnoent;component.renderUI($(".J_Mdul_Send_Area"),[{name:"省份",value:"请选择..."},{name:"地市",value:"请选择..."},{name:"县",value:"请选择..."}])}();break;case"defaultExpress":!function(){var t={id:$(e.target).parent().data("id")};$(e.target).hasClass("ui-switch-label-on")?API.wlb_company_user_common_cancel(t,function(){$(e.target).parent().removeClass("ui-switch-on")}):API.wlb_company_user_common_add(t,function(){$(e.target).parent().addClass("ui-switch-on")})}();break;case"recoveryStrategy":that.$dialog=$.dialog({title:"对接网点电子面单单号回收策略",content:RC.template.get("template.pt.net.list.recovery.strategy"),width:700,resize:!1})}if("lock_print"==$(e.target).data("name")){var id=$(e.target).data("id"),taobaoId=$(".J_List_Item_"+id).data("taobaoid");PrintPt.lockPrinter(id,"wlb",e,taobaoId)}},_saveOrEdit_addr:function(e,t,i,a){$.dialog({title:"编辑地址",content:RC.template.get("template.pt.net.list.edit.address"),width:600,resize:!1,ok:function(){var e=t.address_component.getValue(),s=$(".editAddr-sendGoodsaddr").val();if(!s)return $.dialog.alert("必填信息不能为空！"),!1;var n=$.extend(i,{province:e.province,city:e.city,country:e.area,address:s});API[a](n,function(){API.wlb_company_user_list(t.hashs,$.proxy(function(e){RC.showSuccess("<b>"+(i.hasOwnProperty("branchAddressId")?"修改":"新增")+'发货地址【</b><span class="ft_12">'+n.province+n.city+n.country+n.address+"</span><b>】成功！</b>",.8),this._format_grid_data(e)},t))})},cancel:!0});var s=[];i.hasOwnProperty("branchAddressId")&&(s=[{name:"sendState",value:i.province},{name:"sendCity",value:i.city},{name:"sendDistrict",value:i.country}],$(".editAddr-sendGoodsaddr").val(i.address));var n=t.address_component=new AddressCompnoent;n.renderUI($(".J_Goods_Area"),s)},_saveMdul_or_saveBranch:function(e,t,i,a){var s=$(".newMdul-branchName").val(),n=$(".newMdul-branchCode").val(),l=$(".newMdul-account").val(),d=$(".newMdul-pswd").val(),o=$(".newMdul-addr").val(),r="none"!=$(".J-month-card").css("display")?$(".newMdul-cusTid").val():"",p="none"!=$(".J-newMdul-paytype").css("display")?$(".newMdul-paytype").val():"";if($(".newMdul-mdulName-fix").length>0)var c=$(".newMdul-mdulName-preFix").html(),_=$(".newMdul-mdulName-fix").val();if(_&&_.length>3)return $.dialog.alert("超出最长字数限制！"),!1;if(!(s&&l&&d&&o))return $.dialog.alert("必填信息不能为空！"),!1;if("none"!=$(".J-month-card").css("display")&&!r)return $.dialog.alert("月结卡号不能为空！"),!1;var m=e.address_component.getValue(),u={sysTemplateId:t.id,templateId:t.id,templateName:_&&""!=_?c+_:c,cpType:"直营"==$(".newMdul-cpType").next("span").eq(0).html()?1:2,branchName:s,branchCode:n,userName:l,password:d,province:m.province,city:m.city,country:m.area,address:o,cusTid:r,payType:p,mark:$(".J-Interface-Type").val()},h=API[i](u,function(){API.wlb_company_user_list(e.hashs,$.proxy(function(e){this._format_grid_data(e),RC.showSuccess("<b>新增"+a+'【</b><span class="ft_12">'+("网点"!=a?u.templateName:u.branchName)+"</span><b>】成功！</b>",.8)},e))});return h.responseJSON&&h.responseJSON.message?!1:!0},_getSFType:function(e){var t={"0false":0,"0true":1,"1false":2,"1true":3},i=e.fieldValuesStandard,a=0;if(i&&i.length){for(var s=[],n=0;n<i.length;n++)"sf_wlb_type"==i[n].name&&(s[0]=""+i[n].value),"sf_wlb_subtype"==i[n].name&&(s[1]=""+i[n].value);a=t[s.join("")]}return a},_fn_custom_wlb_html_print:function(e,t,i){try{var a=getLodop();null!=a&&"undefined"!=typeof a.VERSION&&(a.PRINT_INIT("电子面单设计"),a.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",e.html),standardMap[t](a,i),a.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),a.PREVIEW())}catch(s){console.log(s)}},_fn_custom_wlb_text_print:function(e,t,i){try{var a=getLodop();if(null!=a&&"undefined"!=typeof a.VERSION){a.PRINT_INITA(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm","自定义电子面单设计"),a.ADD_PRINT_HTM(e.y+"mm",e.x+"mm",e.width+"mm",e.height+"mm",e.html),a.SET_PRINT_STYLE("FontSize",3*t.fontSizeCustom/4),a.SET_PRINT_STYLE("FontName",t.fontCustom),a.SET_PRINT_STYLE("Bold",t.boldCustom);for(var s=e.fieldSettings,n=["waybill_num_barcode_up","waybill_num_barcode_down","custom_qrcode","qrcode","trade_barcode_up","trade_barcode_down","package_center_code"],l=0,d=s.length;d>l;l++)if(s[l].show)if(s[l].description=i[s[l].field]||"",s[l].fontBold=s[l].bold?"bold":"normal",-1!==$.inArray(s[l].field,n)){var o="128B";("custom_qrcode"==s[l].field||"qrcode"==s[l].field)&&(o="QRCode",s[l].height=s[l].width),a.ADD_PRINT_BARCODE(s[l].y,s[l].x,s[l].width,s[l].height,o,1234567890)}else{var r=s[l].description;a.ADD_PRINT_TEXT(s[l].y,s[l].x,s[l].width,s[l].height,r),a.SET_PRINT_STYLEA(0,"FontName",s[l].font),a.SET_PRINT_STYLEA(0,"FontSize",3*s[l].fontSize/4),a.SET_PRINT_STYLEA(0,"Bold",s[l].bold?1:0)}a.SET_PRINT_PAGESIZE(1,10*e.width,10*e.height,""),a.PREVIEW()}}catch(p){console.log(p)}},_fn_get_getCpType:function(e){var t={};return API.wlb_company_wlbexpress_list({},function(i){for(var a=0;a<i.data.length;a++)i.data[a].id==e&&(t=i.data[a])}),t},init:function(){},getContainer:function(){return this._elm_dom_container},update:function(e,t){this.hashs={pageNo:e.pageNo||1,pageSize:e.pageSize||10},this._fn_dom_render(),$(".pagination-pages").find(".page-cur").removeClass("page-cur"),$(".pagination-pages").find("a").eq(this.hashs.pageNo).toggleClass("page-cur"),API.wlb_company_user_list(this.hashs,$.proxy(function(e){this._format_grid_data(e)},this)),t&&t()},destroy:function(){this._elm_dom_container&&(this._fn_event_unbind(),this._elm_dom_ptListTab=null,this._elm_dom_pageContainer=null,this._elm_dom_container.empty().remove(),this._elm_dom_container=null)}};RC.modules.define(mdul.name,mdul)}(jQuery,RayCloud),function(e,t){t.template.electronSurface={_step_name:{1:"获取运单号",2:"最后一次打印",3:"发货",4:"回收成功",5:"回收运单号",6:"取消失败"},_get_wrap:function(e){var i="",a=t.user.get();if(1==a.userConf.mmb){i='<span class="ml_10">店铺：</span><select id="taobaoId">';for(var s=0;s<a.bindShops.length;s++)i+='<option value="'+a.bindShops[s].taobaoId+'" data-id="'+a.bindShops[s].id+'">'+a.bindShops[s].title+"</option>";i+="</select>"}var n=['<div class="ui-wrap">','<div class="ui-hd">','<div class="ui-tab">','<div class="ui-tab-navs">','<a class="crt" href="javascript:;">菜鸟电子面单</a>',"</div>","</div>",'<div class="ui-query filter-box">',"<div>",'<select id="timeType"><option value="getterTime">获取时间</option><option value="cancelTime">取消时间</option></select>','<input id="startTime" type="text" class="ml_10 date-picker" data-date-format="yyyy-mm-dd" value="'+t.util.date.getdate(e.startTime,"YY-MM-DD")+'" readonly> 至 <input id="endTime" type="text" class="date-picker" data-date-format="yyyy-mm-dd" value="'+t.util.date.getdate(e.endTime,"YY-MM-DD")+'" readonly>','<span class="ml_10">运单号状态：</span>','<select id="status">','<option value="">全部</option>','<option value="1">未使用</option>','<option value="2">已使用</option>','<option value="3">回收中</option>','<option value="4">已回收</option>',"</select>",i,'<span class="ml_10">快递公司：</span>','<select id="cpCode">','<option value="">全部快递</option>',"</select>&nbsp;&nbsp;",'<select id="branchCode">','<option value="">全部网点</option>',"</select>","</div>",'<div class="mt_10">','<label class="ml_10"><span>过滤条件：</span><input class="mr_10 m-search-txt" type="text" value="'+e.text+'" placeholder="搜索当前店铺系统订单号/运单号" style="width:240px;"></label>','<a class="btn btn-primary m-search-btn" href="javascript:;">查询</a>',"</div>","</div>","</div>",'<div class="ui-bd">','<div class="ui-datalist m-surface-list">','<div class="ui-datalist-hd">',"<ul>",'<li class="a-flod"></li>','<li class="a-index">序号</li>','<li class="a-waybill">运单号</li>','<li class="a-get-time">获取时间</li>','<li class="a-cancel-time">取消时间</li>','<li class="a-express">快递公司</li>','<li class="a-dot">快递网点</li>','<li class="a-order-num">系统订单号</li>','<li class="a-status">运单号状态</li>',"</ul>","</div>",'<div class="ui-datalist-bd"></div>',"</div>","</div>",'<div class="ui-ft">','<div class="ui-pages"></div>','<div class="ui-taskbar">','<a class="ui-taskbar-item">导出</a>','<a class="ui-taskbar-item">打印</a>',"</div>","</div>","</div>"].join("");return n},_get_list:function(e){var i="";if(e&&e.length)for(var a=0;a<e.length;a++){var s=e[a];i+=['<div class="ui-datalist-item" data-id="'+s.id+'" data-outsid="'+s.outSid+'" data-branchtaobaoid="'+s.branchTaobaoId+'"><ul class="ui-datalist-item-base">','<li class="a-flod"><a href="javascript:;" class="j-flod icon-flod"></a></li>','<li class="a-index">'+(a+1)+"</li>",'<li class="a-waybill">'+s.outSid+"</li>",'<li class="a-get-time">'+t.util.date.getdate(s.getterTime,"YY-MM-DD HH:MM:SS")+"</li>",'<li class="a-cancel-time">'+(s.cancelTime?t.util.date.getdate(s.cancelTime,"YY-MM-DD HH:MM:SS"):"")+"</li>",'<li class="a-express">'+s.expressName+"</li>",'<li class="a-dot">'+s.branchName+"</li>",'<li class="a-order-num">'+s.sid+"</li>",'<li class="a-status">'+this._get_list_status(s.status,s.leftRecycleDate)+"</li>","</ul></div>"].join("")}else i='<div style="padding:20px;text-align:center;">暂无数据！</div>';return i},_get_list_status:function(e,t){var i={STATUS_ALLOCATE_GET:'<strong style="color:#333;">未使用</strong>&nbsp;<a class="btn btn-small btn-primary j-recovery" href="javascript:;">回收</a>',STATUS_ALLOCATE_SEND:'<strong style="color:#008000;">已使用</strong>&nbsp;<a class="btn btn-small btn-primary j-recovery" href="javascript:;">回收</a>',STATUS_CANCEL:'<strong style="color:#f60;">回收中(预计'+t+'天到账)</strong>&nbsp;<a class="btn btn-small btn-primary j-recovery" href="javascript:;">回收</a>',STATUS_RECYCLED:'<strong style="color:#c00;">已回收</strong>'};return i[e]},_get_list_details:function(i){var a=this,s="",n=[],l={},d=n.length,o="";e.each(i.operateRecord,function(e,n){var d="，订单号【"+i.sid+"】";4==n.id&&(d=""),s+="<p>"+t.util.date.getdate(1*n.date,"YY-MM-DD HH:MM:SS")+"，"+n.text+d+"</p>",l["x"+n.id]={id:n.id,text:a._step_name[n.id],date:n.date}}),e.each(l,function(e,t){n.push(t)}),d=n.length;for(var r="",p=0;p<n.length;p++)r="crt","4"==n[d-1].id&&p==d-1&&(r=""),o+=['<div class="ui-step-item '+r+'">','<em class="ui-step-num">'+(p+1)+"</em>",'<strong class="ui-step-text">'+n[p].text+"</strong>",'<span class="ui-step-time">'+t.util.date.getdate(1*n[p].date,"YY-MM-DD HH:MM:SS")+"</span>","</div>"].join(""),d-1>p&&(o+="4"==n[d-1].id&&p==d-2?'<div class="ui-step-line">预计'+i.leftRecycleDate+"天到账</div>":'<div class="ui-step-line crt">&nbsp;</div>');var c=['<div class="ui-datalist-item-detail">','<div class="ui-step">',o,"</div>",'<div class="m-surface-log">','<span class="m-surface-log-title">操作记录：</span>','<div class="m-surface-log-cont">','<div class="m-surface-log-list">',s,"</div>",'<div style="color:#f60;">如有疑问，请联系快递公司核对运单号是否回收成功，实际回收以快递公司为准。</div>','<a href="javascript:;" class="btn btn-primary mr_10 j-copy-outsid">复制运单号</a><a href="'+i.cpUrl.url+'" target="_blank">去快递公司官网查询>></a>',"</div>","</div>","</div>"].join("");return c}}}(jQuery,RayCloud),function(e){var t=e.controls.get("control.express_url_list"),i=e.template.electronSurface,a=e.controls.get("control.common_pages"),s={name:"account.electron_surface",depend:"account",_elm_dom_root:"#main",_fn_dom_render:function(e){var t=this,a=e.endTime?new Date(1*e.endTime):new Date,s=new Date(e.startTime?1*e.startTime:a.getTime()-6048e5),n={startTime:s.getTime(),endTime:a.getTime(),text:e.text||""};t._elm_dom_container?t._fn_dom_render_query(t._elm_dom_container,$.extend(e,n)):(t._elm_dom_container=$(i._get_wrap(n)).appendTo(t._elm_dom_root),t._fn_dom_render_query(t._elm_dom_container,$.extend(e,n)),API.trade_outsid_branch_all({},function(i){var a=i.data,s="",n="";t.cp={};for(var l=0;l<a.length;l++){t.cp[a[l].taobaoId]=a[l],a[l].isMaster&&(t.cp.crtTaobaoId=a[l].taobaoId),t.cp[a[l].taobaoId].expressList={};for(var d=0;d<a[l].branchAccount.length;d++)t.cp[a[l].taobaoId].expressList[a[l].branchAccount[d].expressId]=a[l].branchAccount[d]}for(var l=0;l<t.cp[t.cp.crtTaobaoId].branchAccount.length;l++)s+='<option value="'+t.cp[t.cp.crtTaobaoId].branchAccount[l].expressId+'">'+t.cp[t.cp.crtTaobaoId].branchAccount[l].expressName+"</option>";if($("#cpCode").append(s).find('[value="'+(e.cpCode||"")+'"]').prop("selected",!0).parent().iSelect("update"),e.cpCode){var o=t.cp[t.cp.crtTaobaoId].expressList[e.cpCode];if(1==o.cpType)n='<option value="'+o.cpCode+'">全国网点通用</option>';else for(var l=0;l<o.branchAccounts.length;l++)n+='<option value="'+o.branchAccounts[l].branchCode+'">'+(o.branchAccounts[l].branchName||"")+"</option>"}$("#branchCode").append(n).find('[value="'+(e.branchCode||"")+'"]').prop("selected",!0).parent().iSelect("update")})),t._fn_dom_render_list($.extend(e,n))},_fn_dom_render_query:function(t,i){t.find("#timeType").iSelect("select",i.timeType),t.find("#status").iSelect("select",i.status),t.find("#cpCode").iSelect("select",i.cpCode),t.find("#branchCode").iSelect("select",i.branchCode),t.find("#taobaoId").length&&t.find("#taobaoId").iSelect("select",i.branchTaobaoId),t.find("#startTime").val(e.util.date.getdate(i.startTime,"YY-MM-DD")),t.find("#endTime").val(e.util.date.getdate(i.endTime,"YY-MM-DD")),t.find(".m-search-txt").val(i.text)},_fn_dom_render_list:function(s){var n=this,l={timeType:s.timeType||$("#timeType").val(),startTime:s.startTime,endTime:s.endTime,branchTaobaoId:s.branchTaobaoId||$("#taobaoId").val()||e.user.get().taobaoId,wlbTemplateType:0,pageNo:s.pageNo||1,pageSize:s.pageSize||localStorage[s.root]||20};s.text&&(l.text=s.text),s.cpCode&&(l.cpCode=s.cpCode),s.branchCode&&(l.branchCode=s.branchCode),API.trade_outsid_list(l,function(e){n._list_data={};for(var l=e.data.list,d=0;d<l.length;d++)l[d].operateRecord=JSON.parse(l[d].operateRecord),l[d].cpUrl=t[l[d].cpCode],l[d].expressName=t[l[d].cpCode].name,n._list_data[l[d].id]=l[d];n._elm_dom_container.find(".ui-datalist-bd").html(i._get_list(l)),n._event_bind(s),a.pagesUI($(".ui-pages"),e.data,!0)})},_fn_pages:function(e){var t=Math.ceil(e.total/e.page.pageSize),i={total:e.total,pageNo:e.page.pageNo,pageSize:e.page.pageSize,prevPage:e.page.pageNo-1,nextPage:1*e.page.pageNo+1,pageTotal:t,isLastPage:e.page.pageNo==t};return i},_event_bind:function(){var t=this;t._event_unbind(),t._elm_dom_container.on("click",function(a){var s=$(a.target);if(s.hasClass("m-search-btn")){var n={timeType:$("#timeType").val(),startTime:e.util.date.tojsdate($("#startTime").val()).getTime(),endTime:e.util.date.tojsdate($("#endTime").val()).getTime()+864e5-1e3,status:$("#status").val(),cpCode:$("#cpCode").val(),branchCode:$("#branchCode").val(),text:t._elm_dom_container.find(".m-search-txt").val(),pageNo:1,t:Math.random()};if($("#taobaoId").length&&(n.branchTaobaoId=$("#taobaoId").val()),n.startTime>n.endTime)return void $.dialog.alert("开始时间不能大于结束时间");t._fn_ctrl_setCurHash(n)}else if(s.hasClass("j-recovery")){var l=s.parents(".ui-datalist-item"),n={id:l.data("id"),outSid:l.data("outsid"),branchTaobaoId:l.data("branchtaobaoid")};API.trade_outsid_recycle(n,function(e){var a=e.data;if(a.isSuccess){var s=a.outSidRecyclePool,n=a.successInfoList[0];s.operateRecord=JSON.parse(s.operateRecord),t._list_data[l.data("id")]=$.extend(t._list_data[l.data("id")],s),a.isSuccess?($.dialog.alert("【"+n.waybillCode+"】"+n.message),l.find(".a-status").html(i._get_list_status(s.status,s.leftRecycleDate))):$.dialog.alert("【"+n.waybillCode+"】"+n.message),l.find(".ui-datalist-item-detail").length&&(l.find(".ui-datalist-item-detail").remove(),$(i._get_list_details(t._list_data[l.data("id")])).appendTo(l).show())}else{var d=a.errorInfoList[0];$.dialog.alert(d.message)}})}}).on("click",".ui-datalist-item-base",function(e){var i=$(e.target);i.hasClass("j-recovery")||t._fn_list_flod($(this))}).on("change","#cpCode",function(){var e=$(this),i='<option value="">全部</option>',a=t.cp[t.cp.crtTaobaoId].expressList[e.val()];if(a)if(1==a.cpType)i+='<option value="'+a.cpCode+'">全国网点通用</option>';else for(var s=0;s<a.branchAccounts.length;s++)i+='<option value="'+a.branchAccounts[s].branchCode+'">'+(a.branchAccounts[s].branchName||"")+"</option>";$("#branchCode").html(i).iSelect("update")}).on("change","#taobaoId",function(){for(var e=$(this),i='<option value="">全部</option>',a=t.cp[e.val()].branchAccount,s=0;s<a.length;s++)i+='<option value="'+a[s].expressId+'">'+a[s].expressName+"</option>";$("#cpCode").html(i).iSelect("update"),$("#branchCode").html('<option value="">全部</option>').iSelect("update")}).on("keyup",".m-search-txt",function(e){"13"==e.keyCode&&$(".m-search-btn").trigger("click")})},_fn_list_flod:function(e){var t=e.parent(),a=t.data("id");e.siblings(".ui-datalist-item-detail").length?e.siblings(".ui-datalist-item-detail").toggle():$(i._get_list_details(this._list_data[a])).insertAfter(e).show(),e.find(".j-flod").toggleClass("icon-flod-on"),t.find('[id^="ZeroClipboardMovie"]').length||t.find(".j-copy-outsid").zclip({path:"resources/js/ZeroClipboard.swf",copy:function(){return t.find(".a-waybill").text()},afterCopy:function(){$.dialog.showSuccess('复制"'+t.find(".a-waybill").text()+'"成功',.5)}})},_event_unbind:function(){this._elm_dom_container.off("click").off("click",".ui-datalist-item-base").off("change","#cpCode").off("change","#taobaoId").off("keyup",".m-search-txt"),this._elm_dom_container.find(".ui-pages").off("change.pageSize","select")},_fn_ctrl_setCurHash:function(t,i){var a=e.pages._fn_act_get_hashs();return delete a.root,delete a.app,i===!0?void e.pages.setCurHash(t):void e.pages.setCurHash($.extend(a,t))},init:function(){},update:function(e){this._fn_dom_render(e)},getContainer:function(){},destroy:function(){this._elm_dom_container&&(this._event_unbind(),this._elm_dom_container.remove(),delete this._elm_dom_container)}};e.modules.define(s.name,s)}(window.RayCloud),function(e,t){var i=["举重比赛","清浊合流","双手赞成","纸老虎","爬竹竿","除夕夜守岁"],a={name:"lantern",_elm_dom_root:"#main",_fn_dom_render:function(){var t=Math.ceil(6*Math.random()),a=['<div class="m-lantern">','<div class="m-lantern-1"></div>','<div class="m-lantern-2"></div>','<div class="m-lantern-3"></div>','<div class="m-lantern-4"></div>','<div class="m-lantern-5"></div>','<div class="m-lantern-6">','<div style="position:relative;margin: 0 auto; width:880px;">','<a target="_blank" href="http://tb.cn/K5Nc2dx" style="display:inline-block;margin-right:50px;width:260px;height:172px;"></a>','<a target="_blank" href="http://tb.cn/k3ge2dx" style="display:inline-block;margin-right:50px;width:260px;height:172px;"></a>','<a target="_blank" href="http://tb.cn/96pb2dx" style="display:inline-block;width:260px;height:172px;"></a>',"</div>","</div>",'<div class="m-lantern-7"></div>','<div class="m-lantern-8"></div>','<div class="m-lantern-9">','<div class="m-lantern-riddle" data-id="'+t+'">','<span class="riddle-'+t+'">'+i[t-1]+"</span>",'<input type="text" value="" placeholder="请正确填写续费旺旺">',"<textarea></textarea>",'<a class="riddle-btn" href="javascript:;"></a>',"</div>","</div>",'<div class="m-lantern-10"></div>','<div class="m-lantern-11">','<div class="m-advise">','<input type="text" value="" placeholder="请正确填写旺旺">','<textarea placeholder="请填写您的建议或意见"></textarea>','<a class="advise-btn" href="javascript:;"></a>',"</div>","</div>",'<div class="m-lantern-12"></div>',"</div>"].join("");this._elm_dom_container=e(a).appendTo(this._elm_dom_root),this._event_bind()},_event_bind:function(){this._elm_dom_container.on("click",function(a){var s=e(a.target);if(s.hasClass("riddle-btn")){var n=e(".m-lantern-riddle"),l=n.find("input").val(),d=n.find("textarea").val();if(!l||!d)return void e.dialog.alert("请填写旺旺号和谜底");API.activity_riddle_answer({nick:l,titleId:n.data("id"),question:n.find("span").text(),answer:d},function(t){e.dialog.alert("1"==t.data.isTrue?"恭喜您答对了，我们会在2到3个工作日给予充值并旺旺提醒":"非常抱歉您答错了，谢谢您对本活动的支持！");var a=Math.ceil(6*Math.random());n.data("id",a).find("span").text(i[a-1]).attr("class","riddle-"+a),n.find("input").val(""),n.find("textarea").val("")})}else if(s.hasClass("advise-btn")){var o=e(".m-advise"),l=o.find("input").val(),r=o.find("textarea").val();if(!l||!r)return void e.dialog.alert("请填写您的建议");API.activity_advice_add({nick:l,advices:r},function(){t.showSuccess("提交成功！"),o.find("input").val(""),o.find("textarea").val("")})}})},init:function(){},update:function(e){this._fn_dom_render(e)},disabled:function(){},getContainer:function(){},destroy:function(){this._elm_dom_container.remove()}};t.modules.define(a.name,a)}(jQuery,RayCloud);